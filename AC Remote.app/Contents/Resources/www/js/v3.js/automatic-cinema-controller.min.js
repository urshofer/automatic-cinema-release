/*! automatic-cinema-controller 2014-11-23 */
var paper=new function(a){var b=new function(){function c(a,c,d,e,g){function h(f,h){h=h||(h=j(c,f))&&(h.get?h:h.value),"string"==typeof h&&"#"===h[0]&&(h=a[h.substring(1)]||h);var k,m="function"==typeof h,n=h,o=g||m?h&&h.get?f in a:a[f]:null;g&&o||(m&&o&&(h.base=o),m&&e!==!1&&(k=f.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(i[k[3].toLowerCase()+k[4]]=k[2]),n&&!m&&n.get&&"function"==typeof n.get&&b.isPlainObject(n)||(n={value:n,writable:!0}),(j(a,f)||{configurable:!0}).configurable&&(n.configurable=!0,n.enumerable=d),l(a,f,n))}var i={};if(c){for(var k in c)c.hasOwnProperty(k)&&!f.test(k)&&h(k);for(var k in i){var m=i[k],n=a["set"+m],o=a["get"+m]||n&&a["is"+m];!o||e!==!0&&0!==o.length||h(k,{get:o,set:n})}}return a}function d(a,b,c){return a&&("length"in a&&!a.getLength&&"number"==typeof a.length?g:h).call(a,b,c=c||a),c}function e(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}var f=/^(statics|enumerable|beans|preserve)$/,g=[].forEach||function(a,b){for(var c=0,d=this.length;d>c;c++)a.call(b,this[c],c,this)},h=function(a,b){for(var c in this)this.hasOwnProperty(c)&&a.call(b,this[c],c,this)},i=Object.create||function(a){return{__proto__:a}},j=Object.getOwnPropertyDescriptor||function(a,b){var c=a.__lookupGetter__&&a.__lookupGetter__(b);return c?{get:c,set:a.__lookupSetter__(b),enumerable:!0,configurable:!0}:a.hasOwnProperty(b)?{value:a[b],enumerable:!0,configurable:!0,writable:!0}:null},k=Object.defineProperty||function(a,b,c){return(c.get||c.set)&&a.__defineGetter__?(c.get&&a.__defineGetter__(b,c.get),c.set&&a.__defineSetter__(b,c.set)):a[b]=c.value,a},l=function(a,b,c){return delete a[b],k(a,b,c)};return c(function(){for(var a=0,b=arguments.length;b>a;a++)e(this,arguments[a])},{inject:function(a){if(a){var b=a.statics===!0?a:a.statics,d=a.beans,e=a.preserve;b!==a&&c(this.prototype,a,a.enumerable,d,e),c(this,b,!0,d,e)}for(var f=1,g=arguments.length;g>f;f++)this.inject(arguments[f]);return this},extend:function(){for(var a,b=this,d=0,e=arguments.length;e>d&&!(a=arguments[d].initialize);d++);return a=a||function(){b.apply(this,arguments)},a.prototype=i(this.prototype),a.base=b,l(a.prototype,"constructor",{value:a,writable:!0,configurable:!0}),c(a,this,!0),arguments.length?this.inject.apply(a,arguments):a}},!0).inject({inject:function(){for(var a=0,b=arguments.length;b>a;a++){var d=arguments[a];d&&c(this,d,d.enumerable,d.beans,d.preserve)}return this},extend:function(){var a=i(this);return a.inject.apply(a,arguments)},each:function(a,b){return d(this,a,b)},set:function(a){return e(this,a)},clone:function(){return new this.constructor(this)},statics:{each:d,create:i,define:l,describe:j,set:e,clone:function(a){return e(new a.constructor,a)},isPlainObject:function(a){var c=null!=a&&a.constructor;return c&&(c===Object||c===b||"Object"===c.name)},pick:function(){for(var b=0,c=arguments.length;c>b;b++)if(arguments[b]!==a)return arguments[b]}}})};"undefined"!=typeof module&&(module.exports=b),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),document.head||(document.head=document.getElementsByTagName("head")[0]),b.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+b.each(this,function(a,b){if(!/^_/.test(b)){var c=typeof a;this.push(b+": "+("number"===c?f.instance.number(a):"string"===c?"'"+a+"'":a))}},[]).join(", ")+" }"},exportJSON:function(a){return b.exportJSON(this,a)},toJSON:function(){return b.serialize(this)},_set:function(c,d,e){if(c&&(e||b.isPlainObject(c))){var f=c._filtering||c;for(var g in f)if(g in this&&f.hasOwnProperty(g)&&(!d||!d[g])){var h=c[g];h!==a&&(this[g]=h)}return!0}},statics:{exports:{enumerable:!0},extend:function bb(){var a=bb.base.apply(this,arguments),c=a.prototype._class;return c&&!b.exports[c]&&(b.exports[c]=a),a},equals:function(a,c){function d(a,b){for(var c in a)if(a.hasOwnProperty(c)&&!b.hasOwnProperty(c))return!1;return!0}if(a===c)return!0;if(a&&a.equals)return a.equals(c);if(c&&c.equals)return c.equals(a);if(Array.isArray(a)&&Array.isArray(c)){if(a.length!==c.length)return!1;for(var e=0,f=a.length;f>e;e++)if(!b.equals(a[e],c[e]))return!1;return!0}if(a&&"object"==typeof a&&c&&"object"==typeof c){if(!d(a,c)||!d(c,a))return!1;for(var e in a)if(a.hasOwnProperty(e)&&!b.equals(a[e],c[e]))return!1;return!0}return!1},read:function(c,d,e,f){if(this===b){var g=this.peek(c,d);return c.__index++,g}var h=this.prototype,i=h._readIndex,j=d||i&&c.__index||0;f||(f=c.length-j);var k=c[j];return k instanceof this||e&&e.readNull&&null==k&&1>=f?(i&&(c.__index=j+1),k&&e&&e.clone?k.clone():k):(k=b.create(this.prototype),i&&(k.__read=!0),k=k.initialize.apply(k,j>0||f<c.length?Array.prototype.slice.call(c,j,j+f):c)||k,i&&(c.__index=j+k.__read,k.__read=a),k)},peek:function(a,b){return a[a.__index=b||a.__index||0]},remain:function(a){return a.length-(a.__index||0)},readAll:function(a,b,c){for(var d,e=[],f=b||0,g=a.length;g>f;f++)e.push(Array.isArray(d=a[f])?this.read(d,0,c):this.read(a,f,c,1));return e},readNamed:function(c,d,e,f,g){var h=this.getNamed(c,d),i=h!==a;if(i){var j=c._filtered;j||(j=c._filtered=b.create(c[0]),j._filtering=c[0]),j[d]=a}return this.read(i?[h]:c,e,f,g)},getNamed:function(c,d){var e=c[0];return c._hasObject===a&&(c._hasObject=1===c.length&&b.isPlainObject(e)),c._hasObject?d?e[d]:c._filtered||e:a},hasNamed:function(a,b){return!!this.getNamed(a,b)},isPlainValue:function(a,b){return this.isPlainObject(a)||Array.isArray(a)||b&&"string"==typeof a},serialize:function(a,c,d,e){c=c||{};var g,h=!e;if(h&&(c.formatter=new f(c.precision),e={length:0,definitions:{},references:{},add:function(a,b){var c="#"+a._id,d=this.references[c];if(!d){this.length++;var e=b.call(a),f=a._class;f&&e[0]!==f&&e.unshift(f),this.definitions[c]=e,d=this.references[c]=[c]}return d}}),a&&a._serialize){g=a._serialize(c,e);var i=a._class;!i||d||g._compact||g[0]===i||g.unshift(i)}else if(Array.isArray(a)){g=[];for(var j=0,k=a.length;k>j;j++)g[j]=b.serialize(a[j],c,d,e);d&&(g._compact=!0)}else if(b.isPlainObject(a)){g={};for(var j in a)a.hasOwnProperty(j)&&(g[j]=b.serialize(a[j],c,d,e))}else g="number"==typeof a?c.formatter.number(a,c.precision):a;return h&&e.length>0?[["dictionary",e.definitions],g]:g},deserialize:function(a,c,d){var e=a;if(d=d||{},Array.isArray(a)){var f=a[0],g="dictionary"===f;if(!g){if(d.dictionary&&1==a.length&&/^#/.test(f))return d.dictionary[f];f=b.exports[f]}e=[];for(var h=f?1:0,i=a.length;i>h;h++)e.push(b.deserialize(a[h],c,d));if(g)d.dictionary=e[0];else if(f){var j=e;c?e=c(f,j):(e=b.create(f.prototype),f.apply(e,j))}}else if(b.isPlainObject(a)){e={};for(var k in a)e[k]=b.deserialize(a[k],c,d)}return e},exportJSON:function(a,c){var d=b.serialize(a,c);return c&&c.asString===!1?d:JSON.stringify(d)},importJSON:function(a,c){return b.deserialize("string"==typeof a?JSON.parse(a):a,function(a,d){var e=c&&c.constructor===a?c:b.create(a.prototype),f=e===c;if(1===d.length&&e instanceof t&&(f||!(e instanceof v))){var g=d[0];b.isPlainObject(g)&&(g.insert=!1)}return a.apply(e,d),f&&(c=null),e})},splice:function(b,c,d,e){var f=c&&c.length,g=d===a;d=g?b.length:d,d>b.length&&(d=b.length);for(var h=0;f>h;h++)c[h]._index=d+h;if(g)return b.push.apply(b,c),[];var i=[d,e];c&&i.push.apply(i,c);for(var j=b.splice.apply(b,i),h=0,k=j.length;k>h;h++)j[h]._index=a;for(var h=d+f,k=b.length;k>h;h++)b[h]._index=h;return j},capitalize:function(a){return a.replace(/\b[a-z]/g,function(a){return a.toUpperCase()})},camelize:function(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})},hyphenate:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var c={attach:function(c,d){if("string"!=typeof c)return b.each(c,function(a,b){this.attach(b,a)},this),a;var e=this._eventTypes[c];if(e){var f=this._handlers=this._handlers||{};f=f[c]=f[c]||[],-1==f.indexOf(d)&&(f.push(d),e.install&&1==f.length&&e.install.call(this,c))}},detach:function(c,d){if("string"!=typeof c)return b.each(c,function(a,b){this.detach(b,a)},this),a;var e,f=this._eventTypes[c],g=this._handlers&&this._handlers[c];f&&g&&(!d||-1!=(e=g.indexOf(d))&&1==g.length?(f.uninstall&&f.uninstall.call(this,c),delete this._handlers[c]):-1!=e&&g.splice(e,1))},once:function(a,b){this.attach(a,function(){b.apply(this,arguments),this.detach(a,b)})},fire:function(a,b){var c=this._handlers&&this._handlers[a];if(!c)return!1;for(var d=[].slice.call(arguments,1),e=this,f=0,g=c.length;g>f;f++)if(c[f].apply(e,d)===!1&&b&&b.stop){b.stop();break}return!0},responds:function(a){return!(!this._handlers||!this._handlers[a])},on:"#attach",off:"#detach",trigger:"#fire",_installEvents:function(a){var b=this._handlers,c=a?"install":"uninstall";for(var d in b)if(b[d].length>0){var e=this._eventTypes[d],f=e[c];f&&f.call(this,d)}},statics:{inject:function cb(){for(var a=0,c=arguments.length;c>a;a++){var d=arguments[a],e=d._events;if(e){var f={};b.each(e,function(a,c){var e="string"==typeof a,g=e?a:c,h=b.capitalize(g),i=g.substring(2).toLowerCase();f[i]=e?{}:a,g="_"+g,d["get"+h]=function(){return this[g]},d["set"+h]=function(a){var b=this[g];b&&this.detach(i,b),a&&this.attach(i,a),this[g]=a}}),d._eventTypes=f}cb.base.call(this,d)}return this}}},d=b.extend({_class:"PaperScope",initialize:function db(){if(paper=this,this.settings=new b({applyMatrix:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=db._id++,db._scopes[this._id]=this,!this.support){var a=Z.getContext(1,1);db.prototype.support={nativeDash:"setLineDash"in a||"mozDash"in a,nativeBlendModes:$.nativeModes},Z.release(a)}},version:"0.9.20",getView:function(){return this.project&&this.project.getView()},getPaper:function(){return this},execute:function(a,b,c){paper.PaperScript.execute(a,this,b,c),R.updateFocus()},install:function(a){var c=this;b.each(["project","view","tool"],function(d){b.define(a,d,{configurable:!0,get:function(){return c[d]}})});for(var d in this)!/^_/.test(d)&&this[d]&&(a[d]=this[d])},setup:function(a){return paper=this,this.project=new r(a),this},activate:function(){paper=this},clear:function(){for(var a=this.projects.length-1;a>=0;a--)this.projects[a].remove();for(var a=this.tools.length-1;a>=0;a--)this.tools[a].remove();for(var a=this.palettes.length-1;a>=0;a--)this.palettes[a].remove()},remove:function(){this.clear(),delete d._scopes[this._id]},statics:new function(){function a(a){return a+="Attribute",function(b,c){return b[a](c)||b[a]("data-paper-"+c)}}return{_scopes:{},_id:0,get:function(a){return this._scopes[a]||null},getAttribute:a("get"),hasAttribute:a("has")}}}),e=b.extend(c,{initialize:function(a){this._scope=paper,this._index=this._scope[this._list].push(this)-1,(a||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var a=this._scope[this._reference];return a&&a!==this&&a.fire("deactivate"),this._scope[this._reference]=this,this.fire("activate",a),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null==this._index?!1:(b.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)}}),f=b.extend({initialize:function(a){this.precision=a||5,this.multiplier=Math.pow(10,this.precision)},number:function(a){return Math.round(a*this.multiplier)/this.multiplier},pair:function(a,b,c){return this.number(a)+(c||",")+this.number(b)},point:function(a,b){return this.number(a.x)+(b||",")+this.number(a.y)},size:function(a,b){return this.number(a.width)+(b||",")+this.number(a.height)},rectangle:function(a,b){return this.point(a,b)+(b||",")+this.size(a,b)}});f.instance=new f;var g=new function(){function b(b,c,d){var e=c===a,f=c-l,g=d+l,h=0;return function(a){return(e||a>f&&g>a)&&(b[h++]=c>a?c:a>d?d:a),h}}var c=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],d=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],e=Math.abs,f=Math.sqrt,h=Math.pow,i=Math.cos,j=Math.PI,k=1e-5,l=1e-11;return{TOLERANCE:k,EPSILON:l,KAPPA:4*(f(2)-1)/3,isZero:function(a){return e(a)<=l},integrate:function(a,b,e,f){for(var g=c[f-2],h=d[f-2],i=.5*(e-b),j=i+b,k=0,l=f+1>>1,m=1&f?h[k++]*a(j):0;l>k;){var n=i*g[k];m+=h[k++]*(a(j+n)+a(j-n))}return i*m},findRoot:function(a,b,c,d,f,g,h){for(var i=0;g>i;i++){var j=a(c),k=j/b(c),l=c-k;if(e(k)<h)return l;j>0?(f=c,c=d>=l?.5*(d+f):l):(d=c,c=l>=f?.5*(d+f):l)}return c},solveQuadratic:function(a,c,d,g,h,i){var j=b(g,h,i);if(e(a)<l)return e(c)>=l?j(-d/c):e(d)<l?-1:0;var k=c/(2*a),m=d/a,n=k*k;if(m-l>n)return 0;var o=n>m?f(n-m):0,p=j(o-k);return o>0&&(p=j(-o-k)),p},solveCubic:function(a,c,d,k,m,n,o){if(e(a)<l)return g.solveQuadratic(c,d,k,m,n,o);c/=a,d/=a,k/=a;var p=b(m,n,o),q=c*c,r=(q-3*d)/9,s=(2*q*c-9*c*d+27*k)/54,t=r*r*r,u=s*s-t;if(c/=3,e(u)<l){if(e(s)<l)return p(-c);var v=f(r),w=s>0?1:-1;return p(2*-w*v-c),p(w*v-c)}if(0>u){var v=f(r),x=Math.acos(s/(v*v*v))/3,y=-2*v,z=2*j/3;return p(y*i(x)-c),p(y*i(x+z)-c),p(y*i(x-z)-c)}var A=(s>0?-1:1)*h(e(s)+f(u),1/3);return p(A+r/A-c)}}},h=b.extend({_class:"Point",_readIndex:!0,initialize:function(a,b){var c=typeof a;if("number"===c){var d="number"==typeof b;this.x=a,this.y=d?b:a,this.__read&&(this.__read=d?2:1)}else"undefined"===c||null===a?(this.x=this.y=0,this.__read&&(this.__read=null===a?1:0)):(Array.isArray(a)?(this.x=a[0],this.y=a.length>1?a[1]:a[0]):null!=a.x?(this.x=a.x,this.y=a.y):null!=a.width?(this.x=a.width,this.y=a.height):null!=a.angle?(this.x=a.length,this.y=0,this.setAngle(a.angle)):(this.x=this.y=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1))},set:function(a,b){return this.x=a,this.y=b,this},equals:function(a){return this===a||a&&(this.x===a.x&&this.y===a.y||Array.isArray(a)&&this.x===a[0]&&this.y===a[1])||!1},clone:function(){return new h(this.x,this.y)},toString:function(){var a=f.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.x),b.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(a){if(this.isZero()){var b=this._angle||0;this.set(Math.cos(b)*a,Math.sin(b)*a)}else{var c=a/this.getLength();g.isZero(c)&&this.getAngle(),this.set(this.x*c,this.y*c)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(a){this.setAngleInRadians.call(this,a*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var a=h.read(arguments),b=this.getLength()*a.getLength();if(g.isZero(b))return 0/0;var c=this.dot(a)/b;return Math.acos(-1>c?-1:c>1?1:c)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(a){if(this._angle=a,!this.isZero()){var b=this.getLength();this.set(Math.cos(a)*b,Math.sin(a)*b)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var a=h.read(arguments);return 180*Math.atan2(this.cross(a),this.dot(a))/Math.PI},getDistance:function(){var a=h.read(arguments),c=a.x-this.x,d=a.y-this.y,e=c*c+d*d,f=b.read(arguments);return f?e:Math.sqrt(e)},normalize:function(b){b===a&&(b=1);var c=this.getLength(),d=0!==c?b/c:0,e=new h(this.x*d,this.y*d);return d>=0&&(e._angle=this._angle),e},rotate:function(a,b){if(0===a)return this.clone();a=a*Math.PI/180;var c=b?this.subtract(b):this,d=Math.sin(a),e=Math.cos(a);return c=new h(c.x*e-c.y*d,c.x*d+c.y*e),b?c.add(b):c},transform:function(a){return a?a._transformPoint(this):this},add:function(){var a=h.read(arguments);return new h(this.x+a.x,this.y+a.y)},subtract:function(){var a=h.read(arguments);return new h(this.x-a.x,this.y-a.y)},multiply:function(){var a=h.read(arguments);return new h(this.x*a.x,this.y*a.y)},divide:function(){var a=h.read(arguments);return new h(this.x/a.x,this.y/a.y)},modulo:function(){var a=h.read(arguments);return new h(this.x%a.x,this.y%a.y)},negate:function(){return new h(-this.x,-this.y)},isInside:function(a){return a.contains(this)},isClose:function(a,b){return this.getDistance(a)<b},isColinear:function(a){return Math.abs(this.cross(a))<1e-5},isOrthogonal:function(a){return Math.abs(this.dot(a))<1e-5},isZero:function(){return g.isZero(this.x)&&g.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(){var a=h.read(arguments);return this.x*a.x+this.y*a.y},cross:function(){var a=h.read(arguments);return this.x*a.y-this.y*a.x},project:function(){var a=h.read(arguments);if(a.isZero())return new h(0,0);var b=this.dot(a)/a.dot(a);return new h(a.x*b,a.y*b)},statics:{min:function(){var a=h.read(arguments),b=h.read(arguments);return new h(Math.min(a.x,b.x),Math.min(a.y,b.y))},max:function(){var a=h.read(arguments),b=h.read(arguments);return new h(Math.max(a.x,b.x),Math.max(a.y,b.y))},random:function(){return new h(Math.random(),Math.random())}}},b.each(["round","ceil","floor","abs"],function(a){var b=Math[a];this[a]=function(){return new h(b(this.x),b(this.y))}},{})),j=h.extend({initialize:function(a,b,c,d){this._x=a,this._y=b,this._owner=c,this._setter=d},set:function(a,b,c){return this._x=a,this._y=b,c||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner[this._setter](this)}}),k=b.extend({_class:"Size",_readIndex:!0,initialize:function(a,b){var c=typeof a;if("number"===c){var d="number"==typeof b;this.width=a,this.height=d?b:a,this.__read&&(this.__read=d?2:1)}else"undefined"===c||null===a?(this.width=this.height=0,this.__read&&(this.__read=null===a?1:0)):(Array.isArray(a)?(this.width=a[0],this.height=a.length>1?a[1]:a[0]):null!=a.width?(this.width=a.width,this.height=a.height):null!=a.x?(this.width=a.x,this.height=a.y):(this.width=this.height=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1))},set:function(a,b){return this.width=a,this.height=b,this},equals:function(a){return a===this||a&&(this.width===a.width&&this.height===a.height||Array.isArray(a)&&this.width===a[0]&&this.height===a[1])||!1},clone:function(){return new k(this.width,this.height)},toString:function(){var a=f.instance;return"{ width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.width),b.number(this.height)]},add:function(){var a=k.read(arguments);return new k(this.width+a.width,this.height+a.height)},subtract:function(){var a=k.read(arguments);return new k(this.width-a.width,this.height-a.height)},multiply:function(){var a=k.read(arguments);return new k(this.width*a.width,this.height*a.height)},divide:function(){var a=k.read(arguments);return new k(this.width/a.width,this.height/a.height)},modulo:function(){var a=k.read(arguments);return new k(this.width%a.width,this.height%a.height)},negate:function(){return new k(-this.width,-this.height)},isZero:function(){return g.isZero(this.width)&&g.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(a,b){return new k(Math.min(a.width,b.width),Math.min(a.height,b.height))},max:function(a,b){return new k(Math.max(a.width,b.width),Math.max(a.height,b.height))},random:function(){return new k(Math.random(),Math.random())}}},b.each(["round","ceil","floor","abs"],function(a){var b=Math[a];this[a]=function(){return new k(b(this.width),b(this.height))}},{})),m=k.extend({initialize:function(a,b,c,d){this._width=a,this._height=b,this._owner=c,this._setter=d},set:function(a,b,c){return this._width=a,this._height=b,c||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(a){this._width=a,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(a){this._height=a,this._owner[this._setter](this)}}),n=b.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(c,d,e,f){var g=typeof c,i=0;if("number"===g?(this.x=c,this.y=d,this.width=e,this.height=f,i=4):"undefined"===g||null===c?(this.x=this.y=this.width=this.height=0,i=null===c?1:0):1===arguments.length&&(Array.isArray(c)?(this.x=c[0],this.y=c[1],this.width=c[2],this.height=c[3],i=1):c.x!==a||c.width!==a?(this.x=c.x||0,this.y=c.y||0,this.width=c.width||0,this.height=c.height||0,i=1):c.from===a&&c.to===a&&(this.x=this.y=this.width=this.height=0,this._set(c),i=1)),!i){var j=h.readNamed(arguments,"from"),l=b.peek(arguments);if(this.x=j.x,this.y=j.y,l&&l.x!==a||b.hasNamed(arguments,"to")){var m=h.readNamed(arguments,"to");this.width=m.x-j.x,this.height=m.y-j.y,this.width<0&&(this.x=m.x,this.width=-this.width),this.height<0&&(this.y=m.y,this.height=-this.height)}else{var n=k.read(arguments);this.width=n.width,this.height=n.height}i=arguments.__index}this.__read&&(this.__read=i)},set:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this},clone:function(){return new n(this.x,this.y,this.width,this.height)},equals:function(a){var c=b.isPlainValue(a)?n.read(arguments):a;return c===this||c&&this.x===c.x&&this.y===c.y&&this.width===c.width&&this.height===c.height||!1},toString:function(){var a=f.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+", width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.x),b.number(this.y),b.number(this.width),b.number(this.height)]},getPoint:function(a){var b=a?h:j;return new b(this.x,this.y,this,"setPoint")},setPoint:function(){var a=h.read(arguments);this.x=a.x,this.y=a.y},getSize:function(a){var b=a?k:m;return new b(this.width,this.height,this,"setSize")},setSize:function(){var a=k.read(arguments);this._fixX&&(this.x+=(this.width-a.width)*this._fixX),this._fixY&&(this.y+=(this.height-a.height)*this._fixY),this.width=a.width,this.height=a.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(a){this._fixW||(this.width-=a-this.x),this.x=a,this._fixX=0},getTop:function(){return this.y},setTop:function(a){this._fixH||(this.height-=a-this.y),this.y=a,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(b){this._fixX!==a&&1!==this._fixX&&(this._fixW=0),this._fixW?this.x=b-this.width:this.width=b-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(b){this._fixY!==a&&1!==this._fixY&&(this._fixH=0),this._fixH?this.y=b-this.height:this.height=b-this.y,this._fixY=1},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(a){this.x=a-.5*this.width,this._fixX=.5},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(a){this.y=a-.5*this.height,this._fixY=.5},getCenter:function(a){var b=a?h:j;return new b(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var a=h.read(arguments);return this.setCenterX(a.x),this.setCenterY(a.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(b){return b&&b.width!==a||4==(Array.isArray(b)?b:arguments).length?this._containsRectangle(n.read(arguments)):this._containsPoint(h.read(arguments))},_containsPoint:function(a){var b=a.x,c=a.y;return b>=this.x&&c>=this.y&&b<=this.x+this.width&&c<=this.y+this.height},_containsRectangle:function(a){var b=a.x,c=a.y;return b>=this.x&&c>=this.y&&b+a.width<=this.x+this.width&&c+a.height<=this.y+this.height},intersects:function(){var a=n.read(arguments);return a.x+a.width>this.x&&a.y+a.height>this.y&&a.x<this.x+this.width&&a.y<this.y+this.height},touches:function(){var a=n.read(arguments);return a.x+a.width>=this.x&&a.y+a.height>=this.y&&a.x<=this.x+this.width&&a.y<=this.y+this.height},intersect:function(){var a=n.read(arguments),b=Math.max(this.x,a.x),c=Math.max(this.y,a.y),d=Math.min(this.x+this.width,a.x+a.width),e=Math.min(this.y+this.height,a.y+a.height);return new n(b,c,d-b,e-c)},unite:function(){var a=n.read(arguments),b=Math.min(this.x,a.x),c=Math.min(this.y,a.y),d=Math.max(this.x+this.width,a.x+a.width),e=Math.max(this.y+this.height,a.y+a.height);return new n(b,c,d-b,e-c)},include:function(){var a=h.read(arguments),b=Math.min(this.x,a.x),c=Math.min(this.y,a.y),d=Math.max(this.x+this.width,a.x),e=Math.max(this.y+this.height,a.y);return new n(b,c,d-b,e-c)},expand:function(){var a=k.read(arguments),b=a.width,c=a.height;return new n(this.x-b/2,this.y-c/2,this.width+b,this.height+c)},scale:function(b,c){return this.expand(this.width*b-this.width,this.height*(c===a?b:c)-this.height)}},b.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(a,b){var c=a.join(""),d=/^[RL]/.test(c);b>=4&&(a[1]+=d?"Y":"X");var e=a[d?0:1],f=a[d?1:0],g="get"+e,i="get"+f,k="set"+e,l="set"+f,m="get"+c,n="set"+c;this[m]=function(a){var b=a?h:j;return new b(this[g](),this[i](),this,n)},this[n]=function(){var a=h.read(arguments);this[k](a.x),this[l](a.y)}},{beans:!0})),o=n.extend({initialize:function(a,b,c,d,e,f){this.set(a,b,c,d,!0),this._owner=e,this._setter=f},set:function(a,b,c,d,e){return this._x=a,this._y=b,this._width=c,this._height=d,e||this._owner[this._setter](this),this}},new function(){var a=n.prototype;return b.each(["x","y","width","height"],function(a){var c=b.capitalize(a),d="_"+a;this["get"+c]=function(){return this[d]},this["set"+c]=function(a){this[d]=a,this._dontNotify||this._owner[this._setter](this)}},b.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(b){var c="set"+b;this[c]=function(){this._dontNotify=!0,a[c].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return this._owner._boundsSelected},setSelected:function(a){var b=this._owner;b.setSelected&&(b._boundsSelected=a,b.setSelected(a||b._selectedSegmentState>0))}}))}),p=b.extend({_class:"Matrix",initialize:function eb(a){var b=arguments.length,c=!0;if(6===b?this.set.apply(this,arguments):1===b?a instanceof eb?this.set(a._a,a._c,a._b,a._d,a._tx,a._ty):Array.isArray(a)?this.set.apply(this,a):c=!1:0===b?this.reset():c=!1,!c)throw Error("Unsupported matrix parameters")},set:function(a,b,c,d,e,f,g){return this._a=a,this._c=b,this._b=c,this._d=d,this._tx=e,this._ty=f,g||this._changed(),this},_serialize:function(a){return b.serialize(this.getValues(),a)},_changed:function(){var a=this._owner;a&&(a._applyMatrix?a.transform(null,!0):a._changed(9))},clone:function(){return new p(this._a,this._c,this._b,this._d,this._tx,this._ty)},equals:function(a){return a===this||a&&this._a===a._a&&this._b===a._b&&this._c===a._c&&this._d===a._d&&this._tx===a._tx&&this._ty===a._ty||!1},toString:function(){var a=f.instance;return"[["+[a.number(this._a),a.number(this._b),a.number(this._tx)].join(", ")+"], ["+[a.number(this._c),a.number(this._d),a.number(this._ty)].join(", ")+"]]"},reset:function(a){return this._a=this._d=1,this._c=this._b=this._tx=this._ty=0,a||this._changed(),this},apply:function(){var a=this._owner;return a?(a.transform(null,!0),this.isIdentity()):!1},translate:function(){var a=h.read(arguments),b=a.x,c=a.y;return this._tx+=b*this._a+c*this._b,this._ty+=b*this._c+c*this._d,this._changed(),this},scale:function(){var a=h.read(arguments),b=h.read(arguments,0,{readNull:!0});return b&&this.translate(b),this._a*=a.x,this._c*=a.x,this._b*=a.y,this._d*=a.y,b&&this.translate(b.negate()),this._changed(),this},rotate:function(a){a*=Math.PI/180;var b=h.read(arguments,1),c=b.x,d=b.y,e=Math.cos(a),f=Math.sin(a),g=c-c*e+d*f,i=d-c*f-d*e,j=this._a,k=this._b,l=this._c,m=this._d;return this._a=e*j+f*k,this._b=-f*j+e*k,this._c=e*l+f*m,this._d=-f*l+e*m,this._tx+=g*j+i*k,this._ty+=g*l+i*m,this._changed(),this},shear:function(){var a=h.read(arguments),b=h.read(arguments,0,{readNull:!0});b&&this.translate(b);var c=this._a,d=this._c;return this._a+=a.y*this._b,this._c+=a.y*this._d,this._b+=a.x*c,this._d+=a.x*d,b&&this.translate(b.negate()),this._changed(),this},skew:function(){var a=h.read(arguments),b=h.read(arguments,0,{readNull:!0}),c=Math.PI/180,d=new h(Math.tan(a.x*c),Math.tan(a.y*c));return this.shear(d,b)},concatenate:function(a){var b=this._a,c=this._b,d=this._c,e=this._d,f=a._a,g=a._b,h=a._c,i=a._d,j=a._tx,k=a._ty;return this._a=f*b+h*c,this._b=g*b+i*c,this._c=f*d+h*e,this._d=g*d+i*e,this._tx+=j*b+k*c,this._ty+=j*d+k*e,this._changed(),this},preConcatenate:function(a){var b=this._a,c=this._b,d=this._c,e=this._d,f=this._tx,g=this._ty,h=a._a,i=a._b,j=a._c,k=a._d,l=a._tx,m=a._ty;return this._a=h*b+i*d,this._b=h*c+i*e,this._c=j*b+k*d,this._d=j*c+k*e,this._tx=h*f+i*g+l,this._ty=j*f+k*g+m,this._changed(),this},chain:function(a){var b=this._a,c=this._b,d=this._c,e=this._d,f=this._tx,g=this._ty,h=a._a,i=a._b,j=a._c,k=a._d,l=a._tx,m=a._ty;return new p(h*b+j*c,h*d+j*e,i*b+k*c,i*d+k*e,f+l*b+m*c,g+l*d+m*e)},isIdentity:function(){return 1===this._a&&0===this._c&&0===this._b&&1===this._d&&0===this._tx&&0===this._ty},orNullIfIdentity:function(){return this.isIdentity()?null:this},isInvertible:function(){return!!this._getDeterminant()},isSingular:function(){return!this._getDeterminant()},transform:function(a,b,c){return arguments.length<3?this._transformPoint(h.read(arguments)):this._transformCoordinates(a,b,c)},_transformPoint:function(a,b,c){var d=a.x,e=a.y;return b||(b=new h),b.set(d*this._a+e*this._b+this._tx,d*this._c+e*this._d+this._ty,c)},_transformCoordinates:function(a,b,c){for(var d=0,e=0,f=2*c;f>d;){var g=a[d++],h=a[d++];b[e++]=g*this._a+h*this._b+this._tx,b[e++]=g*this._c+h*this._d+this._ty
}return b},_transformCorners:function(a){var b=a.x,c=a.y,d=b+a.width,e=c+a.height,f=[b,c,d,c,d,e,b,e];return this._transformCoordinates(f,f,4)},_transformBounds:function(a,b,c){for(var d=this._transformCorners(a),e=d.slice(0,2),f=d.slice(),g=2;8>g;g++){var h=d[g],i=1&g;h<e[i]?e[i]=h:h>f[i]&&(f[i]=h)}return b||(b=new n),b.set(e[0],e[1],f[0]-e[0],f[1]-e[1],c)},inverseTransform:function(){return this._inverseTransform(h.read(arguments))},_getDeterminant:function(){var a=this._a*this._d-this._b*this._c;return isFinite(a)&&!g.isZero(a)&&isFinite(this._tx)&&isFinite(this._ty)?a:null},_inverseTransform:function(a,b,c){var d=this._getDeterminant();if(!d)return null;var e=a.x-this._tx,f=a.y-this._ty;return b||(b=new h),b.set((e*this._d-f*this._b)/d,(f*this._a-e*this._c)/d,c)},decompose:function(){var a=this._a,b=this._b,c=this._c,d=this._d;if(g.isZero(a*d-b*c))return null;var e=Math.sqrt(a*a+b*b);a/=e,b/=e;var f=a*c+b*d;c-=a*f,d-=b*f;var i=Math.sqrt(c*c+d*d);return c/=i,d/=i,f/=i,b*c>a*d&&(a=-a,b=-b,f=-f,e=-e),{scaling:new h(e,i),rotation:180*-Math.atan2(b,a)/Math.PI,shearing:f}},getValues:function(){return[this._a,this._c,this._b,this._d,this._tx,this._ty]},getTranslation:function(){return new h(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},inverted:function(){var a=this._getDeterminant();return a&&new p(this._d/a,-this._c/a,-this._b/a,this._a/a,(this._b*this._ty-this._d*this._tx)/a,(this._c*this._tx-this._a*this._ty)/a)},shiftless:function(){return new p(this._a,this._c,this._b,this._d,0,0)},applyToContext:function(a){a.transform(this._a,this._c,this._b,this._d,this._tx,this._ty)}},b.each(["a","c","b","d","tx","ty"],function(a){var c=b.capitalize(a),d="_"+a;this["get"+c]=function(){return this[d]},this["set"+c]=function(a){this[d]=a,this._changed()}},{})),q=b.extend({_class:"Line",initialize:function(a,b,c,d,e){var f=!1;arguments.length>=4?(this._px=a,this._py=b,this._vx=c,this._vy=d,f=e):(this._px=a.x,this._py=a.y,this._vx=b.x,this._vy=b.y,f=c),f||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new h(this._px,this._py)},getVector:function(){return new h(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(a,b){return q.intersect(this._px,this._py,this._vx,this._vy,a._px,a._py,a._vx,a._vy,!0,b)},getSide:function(a){return q.getSide(this._px,this._py,this._vx,this._vy,a.x,a.y,!0)},getDistance:function(a){return Math.abs(q.getSignedDistance(this._px,this._py,this._vx,this._vy,a.x,a.y,!0))},statics:{intersect:function(a,b,c,d,e,f,i,j,k,l){k||(c-=a,d-=b,i-=e,j-=f);var m=j*c-i*d;if(!g.isZero(m)){var n=a-e,o=b-f,p=(i*o-j*n)/m,q=(c*o-d*n)/m;if((l||p>=0&&1>=p)&&(l||q>=0&&1>=q))return new h(a+p*c,b+p*d)}},getSide:function(a,b,c,d,e,f,g){g||(c-=a,d-=b);var h=e-a,i=f-b,j=h*d-i*c;return 0===j&&(j=h*c+i*d,j>0&&(h-=c,i-=d,j=h*c+i*d,0>j&&(j=0))),0>j?-1:j>0?1:0},getSignedDistance:function(a,b,c,d,e,f,g){g||(c-=a,d-=b);var h=d/c,i=b-h*a;return(f-h*e-i)/Math.sqrt(h*h+1)}}}),r=e.extend({_class:"Project",_list:"projects",_reference:"project",initialize:function(a){e.call(this,!0),this.layers=[],this.symbols=[],this._currentStyle=new O(null,null,this),this.activeLayer=new v,this._view=R.create(this,a||Z.getCanvas(1,1)),this._selectedItems={},this._selectedItemCount=0,this._updateVersion=0},_serialize:function(a,c){return b.serialize(this.layers,a,!0,c)},clear:function(){for(var a=this.layers.length-1;a>=0;a--)this.layers[a].remove();this.symbols=[]},isEmpty:function(){return this.layers.length<=1&&(!this.activeLayer||this.activeLayer.isEmpty())},remove:function fb(){return fb.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(a){this._currentStyle.initialize(a)},getIndex:function(){return this._index},addChild:function(a){return a instanceof v?(b.splice(this.layers,[a]),this.activeLayer||(this.activeLayer=a)):a instanceof t?(this.activeLayer||this.addChild(new v(t.NO_INSERT))).addChild(a):a=null,a},getSelectedItems:function(){var a=[];for(var b in this._selectedItems){var c=this._selectedItems[b];c.isInserted()&&a.push(c)}return a},getOptions:function(){return this._scope.settings},_updateSelection:function(a){var b=a._id,c=this._selectedItems;a._selected?c[b]!==a&&(this._selectedItemCount++,c[b]=a):c[b]===a&&(this._selectedItemCount--,delete c[b])},selectAll:function(){for(var a=this.layers,b=0,c=a.length;c>b;b++)a[b].setFullySelected(!0)},deselectAll:function(){var a=this._selectedItems;for(var b in a)a[b].setFullySelected(!1)},hitTest:function(){for(var a=h.read(arguments),c=z.getOptions(b.read(arguments)),d=this.layers.length-1;d>=0;d--){var e=this.layers[d]._hitTest(a,c);if(e)return e}return null},getItems:function(a){return t._getItems(this.layers,a,!0)},getItem:function(a){return t._getItems(this.layers,a,!1)},importJSON:function(a){this.activate();var c=this.activeLayer;return b.importJSON(a,c&&c.isEmpty()&&c)},draw:function(a,c,d){this._updateVersion++,a.save(),c.applyToContext(a);for(var e=new b({offset:new h(0,0),pixelRatio:d,viewMatrix:c.isIdentity()?null:c,matrices:[new p],updateMatrix:!0}),f=0,g=this.layers,i=g.length;i>f;f++)g[f].draw(a,e);if(a.restore(),this._selectedItemCount>0){a.save(),a.strokeWidth=1;var j=this._selectedItems,k=this._scope.settings.handleSize,l=this._updateVersion;for(var m in j)j[m]._drawSelection(a,c,k,j,l);a.restore()}}}),s=b.extend({_class:"Symbol",initialize:function gb(a,b){this._id=gb._id=(gb._id||0)+1,this.project=paper.project,this.project.symbols.push(this),a&&this.setDefinition(a,b)},_serialize:function(a,c){return c.add(this,function(){return b.serialize([this._class,this._definition],a,!1,c)})},_changed:function(a){8&a&&t._clearBoundsCache(this),1&a&&(this.project._needsUpdate=!0)},getDefinition:function(){return this._definition},setDefinition:function(a,b){a._parentSymbol&&(a=a.clone()),this._definition&&(this._definition._parentSymbol=null),this._definition=a,a.remove(),a.setSelected(!1),b||a.setPosition(new h),a._parentSymbol=this,this._changed(9)},place:function(a){return new y(this,a)},clone:function(){return new s(this._definition.clone(!1))}}),t=b.extend(c,{statics:{extend:function hb(a){return a._serializeFields&&(a._serializeFields=new b(this.prototype._serializeFields,a._serializeFields)),hb.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_applyMatrix:!0,_canApplyMatrix:!0,_boundsSelected:!1,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new p,pivot:null,locked:!1,visible:!0,blendMode:"normal",opacity:1,guide:!1,selected:!1,clipMask:!1,data:{}},initialize:function(){},_initialize:function(a,c){var d=a&&b.isPlainObject(a),e=d&&a.internal===!0,f=this._matrix=new p,g=paper.project;return e||(this._id=t._id=(t._id||0)+1),this._applyMatrix=this._canApplyMatrix&&paper.settings.applyMatrix,c&&f.translate(c),f._owner=this,this._style=new O(g._currentStyle,this,g),this._project||(e||d&&a.insert===!1?this._setProject(g):d&&a.parent?this.setParent(a.parent):(g.activeLayer||new v).addChild(this)),d&&a!==t.NO_INSERT&&this._set(a,{insert:!0,parent:!0},!0),d},_events:new function(){var a={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}},c={install:function(b){var c=this.getView()._eventCounters;if(c)for(var d in a)c[d]=(c[d]||0)+(a[d][b]||0)},uninstall:function(b){var c=this.getView()._eventCounters;if(c)for(var d in a)c[d]-=a[d][b]||0}};return b.each(["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"],function(a){this[a]=c},{onFrame:{install:function(){this._animateItem(!0)},uninstall:function(){this._animateItem(!1)}},onLoad:{}})},_animateItem:function(a){this.getView()._animateItem(this,a)},_serialize:function(a,c){function d(d){for(var g in d){var h=f[g];b.equals(h,"leading"===g?1.2*d.fontSize:d[g])||(e[g]=b.serialize(h,a,"data"!==g,c))}}var e={},f=this;return d(this._serializeFields),this instanceof u||d(this._style._defaults),[this._class,e]},_changed:function(b){var c=this._parentSymbol,d=this._parent||c,e=this._project;if(8&b&&(this._bounds=this._position=this._decomposed=this._globalMatrix=this._currentPath=a),d&&40&b&&t._clearBoundsCache(d),2&b&&t._clearBoundsCache(this),e&&(1&b&&(e._needsUpdate=!0),e._changes)){var f=e._changesById[this._id];f?f.flags|=b:(f={item:this,flags:b},e._changesById[this._id]=f,e._changes.push(f))}c&&c._changed(b)},set:function(a){return a&&this._set(a),this},getId:function(){return this._id},getClassName:function(){return this._class},getName:function(){return this._name},setName:function(b,c){if(this._name&&this._removeNamed(),b===+b+"")throw Error("Names consisting only of numbers are not supported.");var d=this._parent;if(b&&d){for(var e=d._children,f=d._namedChildren,g=b,h=1;c&&e[b];)b=g+" "+h++;(f[b]=f[b]||[]).push(this),e[b]=this}this._name=b||a,this._changed(128)},getStyle:function(){return this._style},setStyle:function(a){this.getStyle().set(a)}},b.each(["locked","visible","blendMode","opacity","guide"],function(a){var c=b.capitalize(a),a="_"+a;this["get"+c]=function(){return this[a]},this["set"+c]=function(b){b!=this[a]&&(this[a]=b,this._changed("_locked"===a?128:129))}},{}),{beans:!0,_locked:!1,_visible:!0,_blendMode:"normal",_opacity:1,_guide:!1,isSelected:function(){if(this._selectChildren)for(var a=this._children,b=0,c=a.length;c>b;b++)if(a[b].isSelected())return!0;return this._selected},setSelected:function(a,b){if(!b&&this._selectChildren)for(var c=this._children,d=0,e=c.length;e>d;d++)c[d].setSelected(a);(a=!!a)^this._selected&&(this._selected=a,this._project._updateSelection(this),this._changed(129))},_selected:!1,isFullySelected:function(){var a=this._children;if(a&&this._selected){for(var b=0,c=a.length;c>b;b++)if(!a[b].isFullySelected())return!1;return!0}return this._selected},setFullySelected:function(a){var b=this._children;if(b)for(var c=0,d=b.length;d>c;c++)b[c].setFullySelected(a);this.setSelected(a,!0)},isClipMask:function(){return this._clipMask},setClipMask:function(a){this._clipMask!=(a=!!a)&&(this._clipMask=a,a&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},_clipMask:!1,getData:function(){return this._data||(this._data={}),this._data},setData:function(a){this._data=a},getPosition:function(a){var b=this._position,c=a?h:j;if(!b){var d=this._pivot;b=this._position=d?this._matrix._transformPoint(d):this.getBounds().getCenter(!0)}return new c(b.x,b.y,this,"setPosition")},setPosition:function(){this.translate(h.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(a){var b=this._pivot;if(b){var c=a?h:j;b=new c(b.x,b.y,this,"setPivot")}return b},setPivot:function(){this._pivot=h.read(arguments),this._position=a},_pivot:null,getRegistration:"#getPivot",setRegistration:"#setPivot"},b.each(["bounds","strokeBounds","handleBounds","roughBounds","internalBounds","internalRoughBounds"],function(a){var c="get"+b.capitalize(a),d=a.match(/^internal(.*)$/),e=d?"get"+d[1]:null;this[c]=function(b){var d=this._boundsGetter,f=!e&&("string"==typeof d?d:d&&d[c])||c,g=this._getCachedBounds(f,b,this,e);return"bounds"===a?new o(g.x,g.y,g.width,g.height,this,"setBounds"):g}},{beans:!0,_getBounds:function(a,b,c){var d=this._children;if(!d||0==d.length)return new n;for(var e=1/0,f=-e,g=e,h=f,i=0,j=d.length;j>i;i++){var k=d[i];if(k._visible&&!k.isEmpty()){var l=k._getCachedBounds(a,b,c);e=Math.min(l.x,e),g=Math.min(l.y,g),f=Math.max(l.x+l.width,f),h=Math.max(l.y+l.height,h)}}return isFinite(e)?new n(e,g,f-e,h-g):new n},setBounds:function(){var a=n.read(arguments),b=this.getBounds(),c=new p,d=a.getCenter();c.translate(d),(a.width!=b.width||a.height!=b.height)&&c.scale(0!=b.width?a.width/b.width:1,0!=b.height?a.height/b.height:1),d=b.getCenter(),c.translate(-d.x,-d.y),this.transform(c)},_getCachedBounds:function(a,b,c,d){b=b&&b.orNullIfIdentity();var e=d?null:this._matrix.orNullIfIdentity(),f=(!b||b.equals(e))&&a,g=this._parent||this._parentSymbol;if(g){var h=c._id,i=g._boundsCache=g._boundsCache||{ids:{},list:[]};i.ids[h]||(i.list.push(c),i.ids[h]=c)}if(f&&this._bounds&&this._bounds[f])return this._bounds[f].clone();b=b?e?b.chain(e):b:e;var j=this._getBounds(d||a,b,c);if(f){this._bounds||(this._bounds={});var k=this._bounds[f]=j.clone();k._internal=!!d}return j},statics:{_clearBoundsCache:function(b){var c=b._boundsCache;if(c){b._bounds=b._position=b._boundsCache=a;for(var d=0,e=c.list,f=e.length;f>d;d++){var g=e[d];g!==b&&(g._bounds=g._position=a,g._boundsCache&&t._clearBoundsCache(g))}}}}}),{beans:!0,_decompose:function(){return this._decomposed=this._matrix.decompose()},getRotation:function(){var a=this._decomposed||this._decompose();return a&&a.rotation},setRotation:function(a){var b=this.getRotation();if(null!=b&&null!=a){var c=this._decomposed;this.rotate(a-b),c.rotation=a,this._decomposed=c}},getScaling:function(){var a=this._decomposed||this._decompose();return a&&a.scaling},setScaling:function(){var a=this.getScaling();if(null!=a){var b=h.read(arguments,0,{clone:!0}),c=this._decomposed;this.scale(b.x/a.x,b.y/a.y),c.scaling=b,this._decomposed=c}},getMatrix:function(){return this._matrix},setMatrix:function(a){this._matrix.initialize(a),this._applyMatrix?this.transform(null,!0):this._changed(9)},getGlobalMatrix:function(a){var b=this._globalMatrix,c=this._project._updateVersion;if(b&&b._updateVersion!==c&&(b=null),!b){b=this._globalMatrix=this._matrix.clone();var d=this._parent;d&&b.preConcatenate(d.getGlobalMatrix(!0)),b._updateVersion=c}return a?b:b.clone()},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(a){(this._applyMatrix=this._canApplyMatrix&&!!a)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(a,b){if(this._project!==a){this._project&&this._installEvents(!1),this._project=a;for(var c=this._children,d=0,e=c&&c.length;e>d;d++)c[d]._setProject(a);b=!0}b&&this._installEvents(!0)},getView:function(){return this._project.getView()},_installEvents:function ib(a){ib.base.call(this,a);for(var b=this._children,c=0,d=b&&b.length;d>c;c++)b[c]._installEvents(a)},getLayer:function(){for(var a=this;a=a._parent;)if(a instanceof v)return a;return null},getParent:function(){return this._parent},setParent:function(a){return a.addChild(this)},getChildren:function(){return this._children},setChildren:function(a){this.removeChildren(),this.addChildren(a)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){return this._parent&&this._parent._children[this._index+1]||null},getPreviousSibling:function(){return this._parent&&this._parent._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(a){return a===this||a&&this._class===a._class&&this._style.equals(a._style)&&this._matrix.equals(a._matrix)&&this._locked===a._locked&&this._visible===a._visible&&this._blendMode===a._blendMode&&this._opacity===a._opacity&&this._clipMask===a._clipMask&&this._guide===a._guide&&this._equals(a)||!1},_equals:function(a){return b.equals(this._children,a._children)},clone:function(a){return this._clone(new this.constructor(t.NO_INSERT),a)},_clone:function(c,d){if(c.setStyle(this._style),this._children)for(var e=0,f=this._children.length;f>e;e++)c.addChild(this._children[e].clone(!1),!0);(d||d===a)&&c.insertAbove(this);for(var g=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide","_applyMatrix"],e=0,f=g.length;f>e;e++){var h=g[e];this.hasOwnProperty(h)&&(c[h]=this[h])}return c._matrix.initialize(this._matrix),c._data=this._data?b.clone(this._data):null,c.setSelected(this._selected),this._name&&c.setName(this._name,!0),c},copyTo:function(a){return a.addChild(this.clone(!1))},rasterize:function(a){var c=this.getStrokeBounds(),d=(a||this.getView().getResolution())/72,e=c.getTopLeft().floor(),f=c.getBottomRight().ceil(),g=new k(f.subtract(e)),h=Z.getCanvas(g.multiply(d)),i=h.getContext("2d"),j=(new p).scale(d).translate(e.negate());i.save(),j.applyToContext(i),this.draw(i,new b({matrices:[j]})),i.restore();var l=new x(t.NO_INSERT);return l.setCanvas(h),l.transform((new p).translate(e.add(g.divide(2))).scale(1/d)),l.insertAbove(this),l},contains:function(){return!!this._contains(this._matrix._inverseTransform(h.read(arguments)))},_contains:function(a){if(this._children){for(var b=this._children.length-1;b>=0;b--)if(this._children[b].contains(a))return!0;return!1}return a.isInside(this.getInternalBounds())},hitTest:function(){return this._hitTest(h.read(arguments),z.getOptions(b.read(arguments)))},_hitTest:function(c,d){function e(d,e){var f=o["get"+e]();return c.subtract(f).divide(j).length<=1?new z(d,n,{name:b.hyphenate(e),point:f}):a}if(this._locked||!this._visible||this._guide&&!d.guides||this.isEmpty())return null;var f=this._matrix,g=d._totalMatrix,h=this.getView(),i=d._totalMatrix=g?g.chain(f):this.getGlobalMatrix().preConcatenate(h._matrix),j=d._tolerancePadding=new k(F._getPenPadding(1,i.inverted())).multiply(Math.max(d.tolerance,1e-5));if(c=f._inverseTransform(c),!this._children&&!this.getInternalRoughBounds().expand(j.multiply(2))._containsPoint(c))return null;var l,m=!(d.guides&&!this._guide||d.selected&&!this._selected||d.type&&d.type!==b.hyphenate(this._class)||d.class&&!(this instanceof d.class)),n=this;if(m&&(d.center||d.bounds)&&this._parent){var o=this.getInternalBounds();if(d.center&&(l=e("center","Center")),!l&&d.bounds)for(var p=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],q=0;8>q&&!l;q++)l=e("bounds",p[q])}var r=!l&&this._children;if(r)for(var s=this._getChildHitTestOptions(d),q=r.length-1;q>=0&&!l;q--)l=r[q]._hitTest(c,s);return!l&&m&&(l=this._hitTestSelf(c,d)),l&&l.point&&(l.point=f.transform(l.point)),d._totalMatrix=g,l},_getChildHitTestOptions:function(a){return a},_hitTestSelf:function(b,c){return c.fill&&this.hasFill()&&this._contains(b)?new z("fill",this):a},matches:function(c){function d(a,c){for(var e in a)if(a.hasOwnProperty(e)){var f=a[e],g=c[e];if(b.isPlainObject(f)&&b.isPlainObject(g)){if(!d(f,g))return!1}else if(!b.equals(f,g))return!1}return!0}for(var e in c)if(c.hasOwnProperty(e)){var f=this[e],g=c[e];if(f===a&&"type"===e&&(f=b.hyphenate(this._class)),/^(constructor|class)$/.test(e)){if(!(this instanceof g))return!1}else if(g instanceof RegExp){if(!g.test(f))return!1}else if("function"==typeof g){if(!g(f))return!1}else if(b.isPlainObject(g)){if(!d(g,f))return!1}else if(!b.equals(f,g))return!1}return!0},getItems:function(a){return t._getItems(this._children,a,!0)},getItem:function(a){return t._getItems(this._children,a,!1)},statics:{_getItems:function jb(a,b,c){for(var d=c&&[],e=0,f=a&&a.length;f>e;e++){var g=a[e];if(g.matches(b)){if(!c)return g;d.push(g)}var h=jb(g._children,b,c);if(c)d.push.apply(d,h);else if(h)return h}return c?d:null}}},{importJSON:function(a){var c=b.importJSON(a,this);return c!==this?this.addChild(c):c},addChild:function(b,c){return this.insertChild(a,b,c)},insertChild:function(a,b,c){var d=this.insertChildren(a,[b],c);return d&&d[0]},addChildren:function(a,b){return this.insertChildren(this._children.length,a,b)},insertChildren:function(a,c,d,e){var f=this._children;if(f&&c&&c.length>0){c=Array.prototype.slice.apply(c);for(var g=c.length-1;g>=0;g--){var h=c[g];!e||h instanceof e?h._remove(!1,!0):c.splice(g,1)}b.splice(f,c,a,0);for(var i=this._project,j=i&&i._changes,g=0,k=c.length;k>g;g++){var h=c[g];h._parent=this,h._setProject(this._project,!0),h._name&&h.setName(h._name),j&&this._changed(5)}this._changed(11)}else c=null;return c},_insert:function(a,b,c){if(!b._parent)return null;var d=b._index+(a?1:0);return b._parent===this._parent&&d>this._index&&d--,b._parent.insertChild(d,this,c)},insertAbove:function(a,b){return this._insert(!0,a,b)},insertBelow:function(a,b){return this._insert(!1,a,b)},sendToBack:function(){return this._parent.insertChild(0,this)},bringToFront:function(){return this._parent.addChild(this)},appendTop:"#addChild",appendBottom:function(a){return this.insertChild(0,a)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",reduce:function(){if(this._children&&1===this._children.length){var a=this._children[0].reduce();return a.insertAbove(this),a.setStyle(this._style),this.remove(),a}return this},_removeNamed:function(){var a=this._parent;if(a){var b=a._children,c=a._namedChildren,d=this._name,e=c[d],f=e?e.indexOf(this):-1;-1!==f&&(b[d]==this&&delete b[d],e.splice(f,1),e.length?b[d]=e[e.length-1]:delete c[d])}},_remove:function(a,c){var d=this._parent;if(d){if(this._name&&this._removeNamed(),null!=this._index&&b.splice(d._children,null,this._index,1),this._installEvents(!1),a){var e=this._project;e&&e._changes&&this._changed(5)}return c&&d._changed(11),this._parent=null,!0}return!1},remove:function(){return this._remove(!0,!0)},removeChildren:function(a,c){if(!this._children)return null;a=a||0,c=b.pick(c,this._children.length);for(var d=b.splice(this._children,null,a,c-a),e=d.length-1;e>=0;e--)d[e]._remove(!0,!1);return d.length>0&&this._changed(11),d},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var a=0,b=this._children.length;b>a;a++)this._children[a]._index=a;this._changed(11)}},isEmpty:function(){return!this._children||0===this._children.length},isEditable:function(){for(var a=this;a;){if(!a._visible||a._locked)return!1;a=a._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(a){function b(a){var b=[];do b.unshift(a);while(a=a._parent);return b}for(var c=b(this),d=b(a),e=0,f=Math.min(c.length,d.length);f>e;e++)if(c[e]!=d[e])return c[e]._index<d[e]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(a){return-1===this._getOrder(a)},isBelow:function(a){return 1===this._getOrder(a)},isParent:function(a){return this._parent===a},isChild:function(a){return a&&a._parent===this},isDescendant:function(a){for(var b=this;b=b._parent;)if(b==a)return!0;return!1},isAncestor:function(a){return a?a.isDescendant(this):!1},isGroupedWith:function(a){for(var b=this._parent;b;){if(b._parent&&/^(Group|Layer|CompoundPath)$/.test(b._class)&&a.isDescendant(b))return!0;b=b._parent}return!1},translate:function(){var a=new p;return this.transform(a.translate.apply(a,arguments))},rotate:function(a){return this.transform((new p).rotate(a,h.read(arguments,1,{readNull:!0})||this.getPosition(!0)))}},b.each(["scale","shear","skew"],function(a){this[a]=function(){var b=h.read(arguments),c=h.read(arguments,0,{readNull:!0});return this.transform((new p)[a](b,c||this.getPosition(!0)))}},{}),{transform:function(a,b){a&&a.isIdentity()&&(a=null);var c=this._matrix,d=(b||this._applyMatrix)&&(!c.isIdentity()||a);if(!a&&!d)return this;if(a&&c.preConcatenate(a),d=d&&this._transformContent(c)){var e=this._pivot,f=this._style,g=f.getFillColor(!0),h=f.getStrokeColor(!0);e&&c._transformPoint(e,e,!0),g&&g.transform(c),h&&h.transform(c),c.reset(!0)}var i=this._bounds,j=this._position;this._changed(9);var k=i&&a&&a.decompose();if(k&&!k.shearing&&0===k.rotation%90){for(var l in i){var m=i[l];(d||!m._internal)&&a._transformBounds(m,m)}var n=this._boundsGetter,m=i[n&&n.getBounds||n||"getBounds"];m&&(this._position=m.getCenter(!0)),this._bounds=i}else a&&j&&(this._position=a._transformPoint(j,j));return this},_transformContent:function(a){var b=this._children;if(b){for(var c=0,d=b.length;d>c;c++)b[c].transform(a,!0);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(h.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(h.read(arguments))},fitBounds:function(a,b){a=n.read(arguments);var c=this.getBounds(),d=c.height/c.width,e=a.height/a.width,f=(b?d>e:e>d)?a.width/c.width:a.height/c.height,g=new n(new h,new k(c.width*f,c.height*f));g.setCenter(a.getCenter()),this.setBounds(g)},_setStyles:function(a){var b=this._style,c=b.getFillColor(),d=b.getStrokeColor(),e=b.getShadowColor();if(c&&(a.fillStyle=c.toCanvasStyle(a)),d){var f=b.getStrokeWidth();if(f>0){a.strokeStyle=d.toCanvasStyle(a),a.lineWidth=f;var g=b.getStrokeJoin(),h=b.getStrokeCap(),i=b.getMiterLimit();if(g&&(a.lineJoin=g),h&&(a.lineCap=h),i&&(a.miterLimit=i),paper.support.nativeDash){var j=b.getDashArray(),k=b.getDashOffset();j&&j.length&&("setLineDash"in a?(a.setLineDash(j),a.lineDashOffset=k):(a.mozDash=j,a.mozDashOffset=k))}}}if(e){var l=b.getShadowBlur();if(l>0){a.shadowColor=e.toCanvasStyle(a),a.shadowBlur=l;var m=this.getShadowOffset();a.shadowOffsetX=m.x,a.shadowOffsetY=m.y}}},draw:function(a,b,c){function d(a){return h?h.chain(a):a}var e=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var f=b.matrices,g=f[f.length-1],h=b.viewMatrix,i=this._matrix,j=g.chain(i);if(j.isInvertible()){f.push(j),b.updateMatrix&&(j._updateVersion=e,this._globalMatrix=j);var k,l,m,n=this._blendMode,o=this._opacity,p="normal"===n,q=$.nativeModes[n],r=p&&1===o||b.dontStart||b.clip||(q||p&&1>o)&&this._canComposite(),s=b.pixelRatio;if(!r){var t=this.getStrokeBounds(d(g));if(!t.width||!t.height)return;m=b.offset,l=b.offset=t.getTopLeft().floor(),k=a,a=Z.getContext(t.getSize().ceil().add(1).multiply(s)),1!==s&&a.scale(s,s)}a.save();var u=c?c.chain(i):!this.getStrokeScaling(!0)&&d(j),v=!r&&b.clipItem,w=!u||v;if(r?(a.globalAlpha=o,q&&(a.globalCompositeOperation=n)):w&&a.translate(-l.x,-l.y),w&&(r?i:d(j)).applyToContext(a),v&&b.clipItem.draw(a,b.extend({clip:!0})),u){a.setTransform(s,0,0,s,0,0);var x=b.offset;x&&a.translate(-x.x,-x.y)}this._draw(a,b,u),a.restore(),f.pop(),b.clip&&!b.dontFinish&&a.clip(),r||($.process(n,a,k,o,l.subtract(m).multiply(s)),Z.release(a),b.offset=m)}}},_isUpdated:function(a){var b=this._parent;if(b instanceof G)return b._isUpdated(a);var c=this._updateVersion===a;return!c&&b&&b._visible&&b._isUpdated(a)&&(this._updateVersion=a,c=!0),c},_drawSelection:function(a,b,c,d,e){if((this._drawSelected||this._boundsSelected)&&this._isUpdated(e)){var f=this.getSelectedColor(!0)||this.getLayer().getSelectedColor(!0),g=b.chain(this.getGlobalMatrix(!0));if(a.strokeStyle=a.fillStyle=f?f.toCanvasStyle(a):"#009dec",this._drawSelected&&this._drawSelected(a,g,d),this._boundsSelected){var h=c/2;coords=g._transformCorners(this.getInternalBounds()),a.beginPath();for(var i=0;8>i;i++)a[0===i?"moveTo":"lineTo"](coords[i],coords[++i]);a.closePath(),a.stroke();for(var i=0;8>i;i++)a.fillRect(coords[i]-h,coords[++i]-h,c,c)}}},_canComposite:function(){return!1}},b.each(["down","drag","up","move"],function(a){this["removeOn"+b.capitalize(a)]=function(){var b={};return b[a]=!0,this.removeOn(b)}},{removeOn:function(a){for(var b in a)if(a[b]){var c="mouse"+b,d=this._project,e=d._removeSets=d._removeSets||{};e[c]=e[c]||{},e[c][this._id]=this}return this}})),u=t.extend({_class:"Group",_selectChildren:!0,_serializeFields:{children:[]},initialize:function(a){this._children=[],this._namedChildren={},this._initialize(a)||this.addChildren(Array.isArray(a)?a:arguments)},_changed:function kb(b){kb.base.call(this,b),1026&b&&(this._clipItem=a)},_getClipItem:function(){var b=this._clipItem;if(b===a){b=null;for(var c=0,d=this._children.length;d>c;c++){var e=this._children[c];if(e._clipMask){b=e;break}}this._clipItem=b}return b},isClipped:function(){return!!this._getClipItem()},setClipped:function(a){var b=this.getFirstChild();b&&b.setClipMask(a)},_draw:function(a,b){var c=b.clip,d=!c&&this._getClipItem(),e=!0;if(b=b.extend({clipItem:d,clip:!1}),c?this._currentPath?(a.currentPath=this._currentPath,e=!1):(a.beginPath(),b.dontStart=b.dontFinish=!0):d&&d.draw(a,b.extend({clip:!0})),e)for(var f=0,g=this._children.length;g>f;f++){var h=this._children[f];h!==d&&h.draw(a,b)}c&&(this._currentPath=a.currentPath)}}),v=u.extend({_class:"Layer",initialize:function(c){var d=b.isPlainObject(c)?new b(c):{children:Array.isArray(c)?c:arguments},e=d.insert;d.insert=!1,u.call(this,d),(e||e===a)&&(this._project.addChild(this),this.activate())},_remove:function lb(a){return this._parent?lb.base.call(this,a):null!=this._index?(this._project.activeLayer===this&&(this._project.activeLayer=this.getNextSibling()||this.getPreviousSibling()),b.splice(this._project.layers,null,this._index,1),this._installEvents(!1),this._project._needsUpdate=!0,!0):!1},getNextSibling:function mb(){return this._parent?mb.base.call(this):this._project.layers[this._index+1]||null},getPreviousSibling:function nb(){return this._parent?nb.base.call(this):this._project.layers[this._index-1]||null},isInserted:function ob(){return this._parent?ob.base.call(this):null!=this._index},activate:function(){this._project.activeLayer=this},_insert:function pb(a,c,d){return c instanceof v&&!c._parent?(this._remove(!0,!0),b.splice(c._project.layers,[this],c._index+(a?1:0),0),this._setProject(c._project,!0),this):pb.base.call(this,a,c,d)}}),w=t.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_boundsSelected:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(a){this._initialize(a)},_equals:function(a){return this._type===a._type&&this._size.equals(a._size)&&b.equals(this._radius,a._radius)},clone:function(a){var b=new w(t.NO_INSERT);return b.setType(this._type),b.setSize(this._size),b.setRadius(this._radius),this._clone(b,a)},getType:function(){return this._type},setType:function(a){this._type=a},getShape:"#getType",setShape:"#setType",getSize:function(){var a=this._size;return new m(a.width,a.height,this,"setSize")},setSize:function(){var a=k.read(arguments);if(this._size){if(!this._size.equals(a)){var b=this._type,c=a.width,d=a.height;if("rectangle"===b){var e=k.min(this._radius,a.divide(2));this._radius.set(e.width,e.height)}else"circle"===b?(c=d=(c+d)/2,this._radius=c/2):"ellipse"===b&&this._radius.set(c/2,d/2);this._size.set(c,d),this._changed(9)}}else this._size=a.clone()},getRadius:function(){var a=this._radius;return"circle"===this._type?a:new m(a.width,a.height,this,"setRadius")},setRadius:function(a){var b=this._type;if("circle"===b){if(a===this._radius)return;var c=2*a;this._radius=a,this._size.set(c,c)}else if(a=k.read(arguments),this._radius){if(this._radius.equals(a))return;if(this._radius.set(a.width,a.height),"rectangle"===b){var c=k.max(this._size,a.multiply(2));this._size.set(c.width,c.height)}else"ellipse"===b&&this._size.set(2*a.width,2*a.height)}else this._radius=a.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(c){var d=new(F[b.capitalize(this._type)])({center:new h,size:this._size,radius:this._radius,insert:!1});return d.setStyle(this._style),d.transform(this._matrix),(c||c===a)&&d.insertAbove(this),d},_draw:function(a,b,c){var d=this._style,e=d.hasFill(),f=d.hasStroke(),g=b.dontFinish||b.clip,h=!c;if(e||f||g){var i=this._type,j=this._radius,k="circle"===i;if(b.dontStart||a.beginPath(),h&&k)a.arc(0,0,j,0,2*Math.PI,!0);else{var l=k?j:j.width,m=k?j:j.height,n=this._size,o=n.width,p=n.height;if(h&&"rect"===i&&0===l&&0===m)a.rect(-o/2,-p/2,o,p);else{var q=o/2,r=p/2,s=.44771525016920644,t=l*s,u=m*s,v=[-q,-r+m,-q,-r+u,-q+t,-r,-q+l,-r,q-l,-r,q-t,-r,q,-r+u,q,-r+m,q,r-m,q,r-u,q-t,r,q-l,r,-q+l,r,-q+t,r,-q,r-u,-q,r-m];c&&c.transform(v,v,32),a.moveTo(v[0],v[1]),a.bezierCurveTo(v[2],v[3],v[4],v[5],v[6],v[7]),q!==l&&a.lineTo(v[8],v[9]),a.bezierCurveTo(v[10],v[11],v[12],v[13],v[14],v[15]),r!==m&&a.lineTo(v[16],v[17]),a.bezierCurveTo(v[18],v[19],v[20],v[21],v[22],v[23]),q!==l&&a.lineTo(v[24],v[25]),a.bezierCurveTo(v[26],v[27],v[28],v[29],v[30],v[31])
}}a.closePath()}g||!e&&!f||(this._setStyles(a),e&&(a.fill(d.getWindingRule()),a.shadowColor="rgba(0,0,0,0)"),f&&a.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(a,b){var c=new n(this._size).setCenter(0,0);return"getBounds"!==a&&this.hasStroke()&&(c=c.expand(this.getStrokeWidth())),b?b._transformBounds(c):c}},new function(){function a(a,b,c){var d=a._radius;if(!d.isZero())for(var e=a._size.divide(2),f=0;4>f;f++){var g=new h(1&f?1:-1,f>1?1:-1),i=g.multiply(e),j=i.subtract(g.multiply(d)),k=new n(i,j);if((c?k.expand(c):k).contains(b))return j}}function b(a,b){var c=a.getAngleInRadians(),d=2*b.width,e=2*b.height,f=d*Math.sin(c),g=e*Math.cos(c);return d*e/(2*Math.sqrt(f*f+g*g))}return{_contains:function c(b){if("rectangle"===this._type){var d=a(this,b);return d?b.subtract(d).divide(this._radius).getLength()<=1:c.base.call(this,b)}return b.divide(this.size).getLength()<=.5},_hitTestSelf:function d(c,e){var f=!1;if(this.hasStroke()){var g=this._type,h=this._radius,i=this.getStrokeWidth()+2*e.tolerance;if("rectangle"===g){var j=a(this,c,i);if(j){var k=c.subtract(j);f=2*Math.abs(k.getLength()-b(k,h))<=i}else{var l=new n(this._size).setCenter(0,0),m=l.expand(i),o=l.expand(-i);f=m._containsPoint(c)&&!o._containsPoint(c)}}else"ellipse"===g&&(h=b(c,h)),f=2*Math.abs(c.getLength()-h)<=i}return f?new z("stroke",this):d.base.apply(this,arguments)}}},{statics:new function(){function a(a,c,d,e,f){var g=new w(b.getNamed(f));return g._type=a,g._size=d,g._radius=e,g.translate(c)}return{Circle:function(){var c=h.readNamed(arguments,"center"),d=b.readNamed(arguments,"radius");return a("circle",c,new k(2*d),d,arguments)},Rectangle:function(){var b=n.readNamed(arguments,"rectangle"),c=k.min(k.readNamed(arguments,"radius"),b.getSize(!0).divide(2));return a("rectangle",b.getCenter(!0),b.getSize(!0),c,arguments)},Ellipse:function(){var b=w._readEllipse(arguments),c=b.radius;return a("ellipse",b.center,c.multiply(2),c,arguments)},_readEllipse:function(a){var c,d;if(b.hasNamed(a,"radius"))c=h.readNamed(a,"center"),d=k.readNamed(a,"radius");else{var e=n.readNamed(a,"rectangle");c=e.getCenter(!0),d=e.getSize(!0).divide(2)}return{center:c,radius:d}}}}}),x=t.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsGetter:"getBounds",_boundsSelected:!0,_serializeFields:{source:null},initialize:function(b,c){this._initialize(b,c!==a&&h.read(arguments,1))||("string"==typeof b?this.setSource(b):this.setImage(b)),this._size||(this._size=new k)},_equals:function(a){return this.getSource()===a.getSource()},clone:function(a){var b=new x(t.NO_INSERT),c=this._image,d=this._canvas;if(c)b.setImage(c);else if(d){var e=Z.getCanvas(this._size);e.getContext("2d").drawImage(d,0,0),b.setCanvas(e)}return this._clone(b,a)},getSize:function(){var a=this._size;return new m(a.width,a.height,this,"setSize")},setSize:function(){var a=k.read(arguments);if(!this._size.equals(a)){var b=this.getElement();this.setCanvas(Z.getCanvas(a)),b&&this.getContext(!0).drawImage(b,0,0,a.width,a.height)}},getWidth:function(){return this._size.width},getHeight:function(){return this._size.height},isEmpty:function(){return 0===this._size.width&&0===this._size.height},getResolution:function(){var a=this._matrix,b=new h(0,0).transform(a),c=new h(1,0).transform(a).subtract(b),d=new h(0,1).transform(a).subtract(b);return new k(72/c.getLength(),72/d.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(a){this._canvas&&Z.release(this._canvas),a&&a.getContext?(this._image=null,this._canvas=a):(this._image=a,this._canvas=null),this._size=new k(a?a.naturalWidth||a.width:0,a?a.naturalHeight||a.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var a=Z.getContext(this._size);try{this._image&&a.drawImage(this._image,0,0),this._canvas=a.canvas}catch(b){Z.release(a)}}return this._canvas},setCanvas:"#setImage",getContext:function(a){return this._context||(this._context=this.getCanvas().getContext("2d")),a&&(this._image=null,this._changed(513)),this._context},setContext:function(a){this._context=a},getSource:function(){return this._image&&this._image.src||this.toDataURL()},setSource:function(a){function b(){var a=d.getView();a&&(paper=a._scope,d.setImage(c),d.fire("load"),a.update())}var c,d=this;c=document.getElementById(a)||new Image,c.naturalWidth&&c.naturalHeight?setTimeout(b,0):(Q.add(c,{load:b}),c.src||(c.src=a)),this.setImage(c)},getElement:function(){return this._canvas||this._image}},{beans:!1,getSubCanvas:function(){var a=n.read(arguments),b=Z.getContext(a.getSize());return b.drawImage(this.getCanvas(),a.x,a.y,a.width,a.height,0,0,a.width,a.height),b.canvas},getSubRaster:function(){var a=n.read(arguments),b=new x(t.NO_INSERT);return b.setCanvas(this.getSubCanvas(a)),b.translate(a.getCenter().subtract(this.getSize().divide(2))),b._matrix.preConcatenate(this._matrix),b.insertAbove(this),b},toDataURL:function(){var a=this._image&&this._image.src;if(/^data:/.test(a))return a;var b=this.getCanvas();return b?b.toDataURL():null},drawImage:function(a){var b=h.read(arguments,1);this.getContext(!0).drawImage(a,b.x,b.y)},getAverageColor:function(a){var c,d;a?a instanceof E?(d=a,c=a.getBounds()):a.width?c=new n(a):a.x&&(c=new n(a.x-.5,a.y-.5,1,1)):c=this.getBounds();var e=32,f=Math.min(c.width,e),g=Math.min(c.height,e),h=x._sampleContext;h?h.clearRect(0,0,e+1,e+1):h=x._sampleContext=Z.getContext(new k(e)),h.save();var i=(new p).scale(f/c.width,g/c.height).translate(-c.x,-c.y);i.applyToContext(h),d&&d.draw(h,new b({clip:!0,matrices:[i]})),this._matrix.applyToContext(h),h.drawImage(this.getElement(),-this._size.width/2,-this._size.height/2),h.restore();for(var j=h.getImageData(.5,.5,Math.ceil(f),Math.ceil(g)).data,l=[0,0,0],m=0,o=0,q=j.length;q>o;o+=4){var r=j[o+3];m+=r,r/=255,l[0]+=j[o]*r,l[1]+=j[o+1]*r,l[2]+=j[o+2]*r}for(var o=0;3>o;o++)l[o]/=m;return m?L.read(l):null},getPixel:function(){var a=h.read(arguments),b=this.getContext().getImageData(a.x,a.y,1,1).data;return new L("rgb",[b[0]/255,b[1]/255,b[2]/255],b[3]/255)},setPixel:function(){var a=h.read(arguments),b=L.read(arguments),c=b._convert("rgb"),d=b._alpha,e=this.getContext(!0),f=e.createImageData(1,1),g=f.data;g[0]=255*c[0],g[1]=255*c[1],g[2]=255*c[2],g[3]=null!=d?255*d:255,e.putImageData(f,a.x,a.y)},createImageData:function(){var a=k.read(arguments);return this.getContext().createImageData(a.width,a.height)},getImageData:function(){var a=n.read(arguments);return a.isEmpty()&&(a=new n(this._size)),this.getContext().getImageData(a.x,a.y,a.width,a.height)},setImageData:function(a){var b=h.read(arguments,1);this.getContext(!0).putImageData(a,b.x,b.y)},_getBounds:function(a,b){var c=new n(this._size).setCenter(0,0);return b?b._transformBounds(c):c},_hitTestSelf:function(a){if(this._contains(a)){var b=this;return new z("pixel",b,{offset:a.add(b._size.divide(2)).round(),color:{get:function(){return b.getPixel(this.offset)}}})}},_draw:function(a){var b=this.getElement();b&&(a.globalAlpha=this._opacity,a.drawImage(b,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),y=t.extend({_class:"PlacedSymbol",_applyMatrix:!1,_canApplyMatrix:!1,_boundsGetter:{getBounds:"getStrokeBounds"},_boundsSelected:!0,_serializeFields:{symbol:null},initialize:function(b,c){this._initialize(b,c!==a&&h.read(arguments,1))||this.setSymbol(b instanceof s?b:new s(b))},_equals:function(a){return this._symbol===a._symbol},getSymbol:function(){return this._symbol},setSymbol:function(a){this._symbol=a,this._changed(9)},clone:function(a){var b=new y(t.NO_INSERT);return b.setSymbol(this._symbol),this._clone(b,a)},isEmpty:function(){return this._symbol._definition.isEmpty()},_getBounds:function(a,b,c){return this.symbol._definition._getCachedBounds(a,b,c)},_hitTestSelf:function(a,b){var c=this._symbol._definition._hitTest(a,b);return c&&(c.item=this),c},_draw:function(a,b){this.symbol._definition.draw(a,b)}}),z=b.extend({_class:"HitResult",initialize:function(a,b,c){this.type=a,this.item=b,c&&(c.enumerable=!0,this.inject(c))},statics:{getOptions:function(a){return new b({type:null,tolerance:paper.settings.hitTolerance,fill:!a,stroke:!a,segments:!a,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1},a)}}}),A=b.extend({_class:"Segment",beans:!0,initialize:function(b,c,d,e,f,g){var h,i,j,k=arguments.length;0===k||(1===k?b.point?(h=b.point,i=b.handleIn,j=b.handleOut):h=b:2===k&&"number"==typeof b?h=arguments:3>=k?(h=b,i=c,j=d):(h=b!==a?[b,c]:null,i=d!==a?[d,e]:null,j=f!==a?[f,g]:null)),new B(h,this,"_point"),new B(i,this,"_handleIn"),new B(j,this,"_handleOut")},_serialize:function(a){return b.serialize(this.isLinear()?this._point:[this._point,this._handleIn,this._handleOut],a,!0)},_changed:function(a){var b=this._path;if(b){var c,d,e=b._curves,f=this._index;e&&(a&&a!==this._point&&a!==this._handleIn||!(c=e[f-1]||b._closed&&e[e.length-1])||c._changed(),a&&a!==this._point&&a!==this._handleOut||!(d=e[f])||d._changed()),b._changed(25)}},getPoint:function(){return this._point},setPoint:function(){var a=h.read(arguments);this._point.set(a.x,a.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(){var a=h.read(arguments);this._handleIn.set(a.x,a.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(){var a=h.read(arguments);this._handleOut.set(a.x,a.y)},isLinear:function(){return this._handleIn.isZero()&&this._handleOut.isZero()},setLinear:function(a){a&&(this._handleIn.set(0,0),this._handleOut.set(0,0))},isColinear:function(a){var b=this.getNext(),c=a.getNext();return this._handleOut.isZero()&&b._handleIn.isZero()&&a._handleOut.isZero()&&c._handleIn.isZero()&&b._point.subtract(this._point).isColinear(c._point.subtract(a._point))},isOrthogonal:function(){var a=this.getPrevious(),b=this.getNext();return a._handleOut.isZero()&&this._handleIn.isZero()&&this._handleOut.isZero()&&b._handleIn.isZero()&&this._point.subtract(a._point).isOrthogonal(b._point.subtract(this._point))},isArc:function(){var a=this.getNext(),b=this._handleOut,c=a._handleIn,d=.5522847498307936;if(b.isOrthogonal(c)){var e=this._point,f=a._point,h=new q(e,b,!0).intersect(new q(f,c,!0),!0);return h&&g.isZero(b.getLength()/h.subtract(e).getLength()-d)&&g.isZero(c.getLength()/h.subtract(f).getLength()-d)}return!1},_selectionState:0,isSelected:function(a){var b=this._selectionState;return a?a===this._point?!!(4&b):a===this._handleIn?!!(1&b):a===this._handleOut?!!(2&b):!1:!!(7&b)},setSelected:function(a,b){var c=this._path,a=!!a,d=this._selectionState,e=d,f=b?b===this._point?4:b===this._handleIn?1:b===this._handleOut?2:0:7;a?d|=f:d&=~f,this._selectionState=d,c&&d!==e&&(c._updateSelection(this,e,d),c._changed(129))},getIndex:function(){return this._index!==a?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var a=this._path,b=this._index;return a?(b>0&&!a._closed&&b===a._segments.length-1&&b--,a.getCurves()[b]||null):null},getLocation:function(){var a=this.getCurve();return a?new D(a,this===a._segment1?0:1):null},getNext:function(){var a=this._path&&this._path._segments;return a&&(a[this._index+1]||this._path._closed&&a[0])||null},getPrevious:function(){var a=this._path&&this._path._segments;return a&&(a[this._index-1]||this._path._closed&&a[a.length-1])||null},reverse:function(){return new A(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new A(this._point,this._handleIn,this._handleOut)},equals:function(a){return a===this||a&&this._class===a._class&&this._point.equals(a._point)&&this._handleIn.equals(a._handleIn)&&this._handleOut.equals(a._handleOut)||!1},toString:function(){var a=["point: "+this._point];return this._handleIn.isZero()||a.push("handleIn: "+this._handleIn),this._handleOut.isZero()||a.push("handleOut: "+this._handleOut),"{ "+a.join(", ")+" }"},transform:function(a){this._transformCoordinates(a,Array(6),!0),this._changed()},_transformCoordinates:function(a,b,c){var d=this._point,e=c&&this._handleIn.isZero()?null:this._handleIn,f=c&&this._handleOut.isZero()?null:this._handleOut,g=d._x,h=d._y,i=2;return b[0]=g,b[1]=h,e&&(b[i++]=e._x+g,b[i++]=e._y+h),f&&(b[i++]=f._x+g,b[i++]=f._y+h),a&&(a._transformCoordinates(b,b,i/2),g=b[0],h=b[1],c?(d._x=g,d._y=h,i=2,e&&(e._x=b[i++]-g,e._y=b[i++]-h),f&&(f._x=b[i++]-g,f._y=b[i++]-h)):(e||(b[i++]=g,b[i++]=h),f||(b[i++]=g,b[i++]=h))),b}}),B=h.extend({initialize:function(b,c,d){var e,f,g;if(b)if((e=b[0])!==a)f=b[1];else{var i=b;(e=i.x)===a&&(i=h.read(arguments),e=i.x),f=i.y,g=i.selected}else e=f=0;this._x=e,this._y=f,this._owner=c,c[d]=this,g&&this.setSelected(!0)},set:function(a,b){return this._x=a,this._y=b,this._owner._changed(this),this},_serialize:function(a){var b=a.formatter,c=b.number(this._x),d=b.number(this._y);return this.isSelected()?{x:c,y:d,selected:!0}:[c,d]},getX:function(){return this._x},setX:function(a){this._x=a,this._owner._changed(this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner._changed(this)},isZero:function(){return g.isZero(this._x)&&g.isZero(this._y)},setSelected:function(a){this._owner.setSelected(a,this)},isSelected:function(){return this._owner.isSelected(this)}}),C=b.extend({_class:"Curve",initialize:function(a,b,c,d,e,f,g,h){var i=arguments.length;if(3===i)this._path=a,this._segment1=b,this._segment2=c;else if(0===i)this._segment1=new A,this._segment2=new A;else if(1===i)this._segment1=new A(a.segment1),this._segment2=new A(a.segment2);else if(2===i)this._segment1=new A(a),this._segment2=new A(b);else{var j,k,l,m;4===i?(j=a,k=b,l=c,m=d):8===i&&(j=[a,b],m=[g,h],k=[c-a,d-b],l=[e-g,f-h]),this._segment1=new A(j,null,k),this._segment2=new A(m,l,null)}},_changed:function(){this._length=this._bounds=a},getPoint1:function(){return this._segment1._point},setPoint1:function(){var a=h.read(arguments);this._segment1._point.set(a.x,a.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(){var a=h.read(arguments);this._segment2._point.set(a.x,a.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){var a=h.read(arguments);this._segment1._handleOut.set(a.x,a.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){var a=h.read(arguments);this._segment2._handleIn.set(a.x,a.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index+1]||this._path._closed&&a[0])||null},getPrevious:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index-1]||this._path._closed&&a[a.length-1])||null},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(a){this.getPoint1().setSelected(a),this.getHandle1().setSelected(a),this.getHandle2().setSelected(a),this.getPoint2().setSelected(a)},getValues:function(a){return C.getValues(this._segment1,this._segment2,a)},getPoints:function(){for(var a=this.getValues(),b=[],c=0;8>c;c+=2)b.push(new h(a[c],a[c+1]));return b},getLength:function(){return null==this._length&&(this._length=this.isLinear()?this._segment2._point.getDistance(this._segment1._point):C.getLength(this.getValues(),0,1)),this._length},getArea:function(){return C.getArea(this.getValues())},getPart:function(a,b){return new C(C.getPart(this.getValues(),a,b))},getPartLength:function(a,b){return C.getLength(this.getValues(),a,b)},isLinear:function(){return this._segment1._handleOut.isZero()&&this._segment2._handleIn.isZero()},isHorizontal:function(){return this.isLinear()&&g.isZero(this._segment1._point._y-this._segment2._point._y)},getIntersections:function(a){return C.getIntersections(this.getValues(),a.getValues(),this,a,[])},_getParameter:function(b,c){return c?b:b&&b.curve===this?b.parameter:b===a&&c===a?.5:this.getParameterAt(b,0)},divide:function(a,b,c){var d=this._getParameter(a,b),e=1e-5,f=null;if(d>e&&1-e>d){var g=C.subdivide(this.getValues(),d),i=c?!1:this.isLinear(),j=g[0],k=g[1];i||(this._segment1._handleOut.set(j[2]-j[0],j[3]-j[1]),this._segment2._handleIn.set(k[4]-k[6],k[5]-k[7]));var l=j[6],m=j[7],n=new A(new h(l,m),!i&&new h(j[4]-l,j[5]-m),!i&&new h(k[2]-l,k[3]-m));if(this._path)this._segment1._index>0&&0===this._segment2._index?this._path.add(n):this._path.insert(this._segment2._index,n),f=this;else{var o=this._segment2;this._segment2=n,f=new C(n,o)}}return f},split:function(a,b){return this._path?this._path.split(this._segment1._index,this._getParameter(a,b)):null},reverse:function(){return new C(this._segment2.reverse(),this._segment1.reverse())},remove:function(){var a=!1;if(this._path){var b=this._segment2,c=b._handleOut;a=b.remove(),a&&this._segment1._handleOut.set(c.x,c.y)}return a},clone:function(){return new C(this._segment1,this._segment2)},toString:function(){var a=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||a.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||a.push("handle2: "+this._segment2._handleIn),a.push("point2: "+this._segment2._point),"{ "+a.join(", ")+" }"},statics:{getValues:function(a,b,c){var d=a._point,e=a._handleOut,f=b._handleIn,g=b._point,h=[d._x,d._y,d._x+e._x,d._y+e._y,g._x+f._x,g._y+f._y,g._x,g._y];return c&&c._transformCoordinates(h,h,6),h},evaluate:function(a,b,c){var d,e,f=a[0],g=a[1],i=a[2],j=a[3],k=a[4],l=a[5],m=a[6],n=a[7],o=1e-5;if(0===c&&(o>b||b>1-o)){var p=o>b;d=p?f:m,e=p?g:n}else{var q=3*(i-f),r=3*(k-i)-q,s=m-f-q-r,t=3*(j-g),u=3*(l-j)-t,v=n-g-t-u;if(0===c)d=((s*b+r)*b+q)*b+f,e=((v*b+u)*b+t)*b+g;else if(o>b&&i===f&&j===g||b>1-o&&k===m&&l===n?(d=m-f,e=n-g):o>b?(d=q,e=t):b>1-o?(d=3*(m-k),e=3*(n-l)):(d=(3*s*b+2*r)*b+q,e=(3*v*b+2*u)*b+t),3===c){var w=6*s*b+2*r,x=6*v*b+2*u;return(d*x-e*w)/Math.pow(d*d+e*e,1.5)}}return 2===c?new h(e,-d):new h(d,e)},subdivide:function(b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7];c===a&&(c=.5);var l=1-c,m=l*d+c*f,n=l*e+c*g,o=l*f+c*h,p=l*g+c*i,q=l*h+c*j,r=l*i+c*k,s=l*m+c*o,t=l*n+c*p,u=l*o+c*q,v=l*p+c*r,w=l*s+c*u,x=l*t+c*v;return[[d,e,m,n,s,t,w,x],[w,x,u,v,q,r,j,k]]},solveCubic:function(a,b,c,d,e,f){var h=a[b],i=a[b+2],j=a[b+4],k=a[b+6],l=3*(i-h),m=3*(j-i)-l,n=k-h-l-m;return g.solveCubic(n,m,l,h-c,d,e,f)},getParameterOf:function(a,b,c){var d=1e-5;if(Math.abs(a[0]-b)<d&&Math.abs(a[1]-c)<d)return 0;if(Math.abs(a[6]-b)<d&&Math.abs(a[7]-c)<d)return 1;for(var e,f,g=[],h=[],i=C.solveCubic(a,0,b,g),j=C.solveCubic(a,1,c,h),k=0;-1==i||i>k;)if(-1==i||(e=g[k++])>=0&&1>=e){for(var l=0;-1==j||j>l;)if((-1==j||(f=h[l++])>=0&&1>=f)&&(-1==i?e=f:-1==j&&(f=e),Math.abs(e-f)<d))return.5*(e+f);if(-1==i)break}return null},getPart:function(a,b,c){return b>0&&(a=C.subdivide(a,b)[1]),1>c&&(a=C.subdivide(a,(c-b)/(1-b))[0]),a},isLinear:function(a){var b=g.isZero;return b(a[0]-a[2])&&b(a[1]-a[3])&&b(a[4]-a[6])&&b(a[5]-a[7])},isFlatEnough:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=3*e-2*c-i,l=3*f-2*d-j,m=3*g-2*i-c,n=3*h-2*j-d;return Math.max(k*k,m*m)+Math.max(l*l,n*n)<10*b*b},getArea:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7];return(3*e*b-1.5*e*f-1.5*e*h-3*c*d-1.5*c*f-.5*c*h+1.5*g*b+1.5*g*d-3*g*h+.5*i*b+1.5*i*d+3*i*f)/10},getBounds:function(a){for(var b=a.slice(0,2),c=b.slice(),d=[0,0],e=0;2>e;e++)C._addBounds(a[e],a[e+2],a[e+4],a[e+6],e,0,b,c,d);return new n(b[0],b[1],c[0]-b[0],c[1]-b[1])},_addBounds:function(a,b,c,d,e,f,h,i,j){function k(a,b){var c=a-b,d=a+b;c<h[e]&&(h[e]=c),d>i[e]&&(i[e]=d)}var l=3*(b-c)-a+d,m=2*(a+c)-4*b,n=b-a,o=g.solveQuadratic(l,m,n,j),p=1e-5,q=1-p;k(d,0);for(var r=0;o>r;r++){var s=j[r],t=1-s;s>p&&q>s&&k(t*t*t*a+3*t*t*s*b+3*t*s*s*c+s*s*s*d,f)}}}},b.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(a){this[a]=function(){this._bounds||(this._bounds={});var b=this._bounds[a];return b||(b=this._bounds[a]=F[a]([this._segment1,this._segment2],!1,this._path.getStyle())),b.clone()}},{}),b.each(["getPoint","getTangent","getNormal","getCurvature"],function(a,b){this[a+"At"]=function(a,c){var d=this.getValues();return C.evaluate(d,c?a:C.getParameterAt(d,a,0),b)},this[a]=function(a){return C.evaluate(this.getValues(),a,b)}},{beans:!1,getParameterAt:function(b,c){return C.getParameterAt(this.getValues(),b,c!==a?c:0>b?1:0)},getParameterOf:function(){var a=h.read(arguments);return C.getParameterOf(this.getValues(),a.x,a.y)},getLocationAt:function(a,b){return b||(a=this.getParameterAt(a)),new D(this,a)},getLocationOf:function(){var a=h.read(arguments),b=this.getParameterOf(a);return null!=b?new D(this,b):null},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getNearestLocation:function(){function a(a){if(a>=0&&1>=a){var d=b.getDistance(C.evaluate(c,a,0),!0);if(e>d)return e=d,f=a,!0}}for(var b=h.read(arguments),c=this.getValues(),d=100,e=1/0,f=0,g=0;d>=g;g++)a(g/d);for(var i=1/(2*d);i>1e-5;)a(f-i)||a(f+i)||(i/=2);var j=C.evaluate(c,f,0);return new D(this,f,j,null,null,null,b.getDistance(j))},getNearestPoint:function(){return this.getNearestLocation.apply(this,arguments).getPoint()}}),new function(){function b(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=9*(d-f)+3*(h-b),k=6*(b+f)-12*d,l=3*(d-b),m=9*(e-g)+3*(i-c),n=6*(c+g)-12*e,o=3*(e-c);return function(a){var b=(j*a+k)*a+l,c=(m*a+n)*a+o;return Math.sqrt(b*b+c*c)}}function c(a,b){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(b-a))))}return{statics:!0,getLength:function(d,e,f){e===a&&(e=0),f===a&&(f=1);var h=g.isZero;if(0===e&&1===f&&h(d[0]-d[2])&&h(d[1]-d[3])&&h(d[6]-d[4])&&h(d[7]-d[5])){var i=d[6]-d[0],j=d[7]-d[1];return Math.sqrt(i*i+j*j)}var k=b(d);return g.integrate(k,e,f,c(e,f))},getParameterAt:function(a,d,e){function f(a){var b=c(e,a);return n+=a>e?g.integrate(k,e,a,b):-g.integrate(k,a,e,b),e=a,n-d}if(0===d)return e;var h=d>0,i=h?e:0,j=h?1:e,d=Math.abs(d),k=b(a),l=g.integrate(k,i,j,c(i,j));if(d>=l)return h?j:i;var m=d/l,n=0;return g.findRoot(f,k,h?i+m:j-m,i,j,16,1e-5)}}},new function(){function a(a,b,c,d,e,f,g,h){var i=new D(c,d,e,f,g,h);(!b||b(i))&&a.push(i)}function b(e,f,g,h,i,j,k,l,m,n,o,p,r){if(!(r>20)){var s,t,u,v=f[0],w=f[1],x=f[6],y=f[7],z=1e-5,A=1e-9,B=q.getSignedDistance,D=B(v,w,x,y,f[2],f[3])||0,E=B(v,w,x,y,f[4],f[5])||0,F=D*E>0?.75:4/9,G=F*Math.min(0,D,E),H=F*Math.max(0,D,E),I=B(v,w,x,y,e[0],e[1]),J=B(v,w,x,y,e[2],e[3]),K=B(v,w,x,y,e[4],e[5]),L=B(v,w,x,y,e[6],e[7]);if(v===x&&A>=n-m&&r>3)s=(l+k)/2,t=s,u=0;else{var M,N,O=c(I,J,K,L),P=O[0],Q=O[1];if(M=d(P,Q,G,H),P.reverse(),Q.reverse(),N=d(P,Q,G,H),null==M||null==N)return!1;e=C.getPart(e,M,N),u=N-M,s=l*M+k*(1-M),t=l*N+k*(1-N)}if(o>.8&&u>.8)if(t-s>n-m){var R=C.subdivide(e,.5),S=s+(t-s)/2;b(f,R[0],h,g,i,j,m,n,s,S,u,!p,++r),b(f,R[1],h,g,i,j,m,n,S,t,u,!p,r)}else{var R=C.subdivide(f,.5),S=m+(n-m)/2;b(R[0],e,h,g,i,j,m,S,s,t,u,!p,++r),b(R[1],e,h,g,i,j,S,n,s,t,u,!p,r)}else if(Math.max(n-m,t-s)<z){var T=s+(t-s)/2,U=m+(n-m)/2;p?a(i,j,h,U,C.evaluate(f,U,0),g,T,C.evaluate(e,T,0)):a(i,j,g,T,C.evaluate(e,T,0),h,U,C.evaluate(f,U,0))}else b(f,e,h,g,i,j,m,n,s,t,u,!p,++r)}}function c(a,b,c,d){var e,f=[0,a],g=[1/3,b],h=[2/3,c],i=[1,d],j=q.getSignedDistance,k=j(0,a,1,d,1/3,b),l=j(0,a,1,d,2/3,c),m=!1;if(0>k*l)e=[[f,g,i],[f,h,i]],m=0>k;else{var n,o=0,p=0===k||0===l;Math.abs(k)>Math.abs(l)?(n=g,o=(d-c-(d-a)/3)*(2*(d-c)-d+b)/3):(n=h,o=(b-a+(a-d)/3)*(-2*(a-b)+a-c)/3),e=0>o||p?[[f,n,i],[f,i]]:[[f,g,h,i],[f,i]],m=k?0>k:0>l}return m?e.reverse():e}function d(a,b,c,d){for(var e,f,g,h,i,j=null,k=0,l=b.length-1;l>k;k++){if(g=b[k][1],i=b[k+1][1],i>g)e=null;else{if(!(d>=i))continue;f=b[k][0],h=b[k+1][0],e=f+(d-g)*(h-f)/(i-g)}break}a[0][1]<=d&&(e=a[0][0]);for(var k=0,l=a.length-1;l>k;k++){if(g=a[k][1],i=a[k+1][1],g>=c)j=e;else if(g>i)j=null;else{if(!(i>=c))continue;f=a[k][0],h=a[k+1][0],j=f+(c-g)*(h-f)/(i-g)}break}return j}function e(b,c,d,e,f,g){for(var h=C.isLinear(b),i=h?c:b,j=h?b:c,k=j[0],l=j[1],m=j[6],n=j[7],o=m-k,p=n-l,q=Math.atan2(-p,o),r=Math.sin(q),s=Math.cos(q),t=o*s-p*r,u=[0,0,0,0,t,0,t,0],v=[],w=0;8>w;w+=2){var x=i[w]-k,y=i[w+1]-l;v.push(x*s-y*r,y*s+x*r)}for(var z=[],A=C.solveCubic(v,1,0,z,0,1),w=0;A>w;w++){var B=z[w],x=C.evaluate(v,B,0).x;if(x>=0&&t>=x){var D=C.getParameterOf(u,x,0),E=h?D:B,F=h?B:D;a(f,g,d,E,C.evaluate(b,E,0),e,F,C.evaluate(c,F,0))}}}function f(b,c,d,e,f,g){var h=q.intersect(b[0],b[1],b[6],b[7],c[0],c[1],c[6],c[7]);if(h){var i=h.x,j=h.y;a(f,g,d,C.getParameterOf(b,i,j),h,e,C.getParameterOf(c,i,j),h)}}return{statics:{getIntersections:function(a,c,d,g,h,i){var j=C.isLinear(a),k=C.isLinear(c);return(j&&k?f:j||k?e:b)(a,c,d,g,h,i,0,1,0,1,0,!1,0),h}}}}),D=b.extend({_class:"CurveLocation",beans:!0,initialize:function qb(a,b,c,d,e,f,g){this._id=qb._id=(qb._id||0)+1,this._curve=a,this._segment1=a._segment1,this._segment2=a._segment2,this._parameter=b,this._point=c,this._curve2=d,this._parameter2=e,this._point2=f,this._distance=g},getSegment:function(a){if(!this._segment){var b=this.getCurve(),c=this.getParameter();if(1===c)this._segment=b._segment2;else if(0===c||a)this._segment=b._segment1;else{if(null==c)return null;this._segment=b.getPartLength(0,c)<b.getPartLength(c,1)?b._segment1:b._segment2}}return this._segment},getCurve:function(a){return(!this._curve||a)&&(this._curve=this._segment1.getCurve(),null==this._curve.getParameterOf(this._point)&&(this._curve=this._segment2.getPrevious().getCurve())),this._curve},getIntersection:function(){var a=this._intersection;if(!a&&this._curve2){var b=this._parameter2;this._intersection=a=new D(this._curve2,b,this._point2||this._point,this),a._intersection=this}return a},getPath:function(){var a=this.getCurve();return a&&a._path},getIndex:function(){var a=this.getCurve();return a&&a.getIndex()},getOffset:function(){var a=this.getPath();return a?a._getOffset(this):this.getCurveOffset()},getCurveOffset:function(){var a=this.getCurve(),b=this.getParameter();return null!=b&&a&&a.getPartLength(0,b)},getParameter:function(a){if((null==this._parameter||a)&&this._point){var b=this.getCurve(a&&this._point);this._parameter=b&&b.getParameterOf(this._point)}return this._parameter},getPoint:function(a){if((!this._point||a)&&null!=this._parameter){var b=this.getCurve();this._point=b&&b.getPointAt(this._parameter,!0)}return this._point},getDistance:function(){return this._distance},divide:function(){var a=this.getCurve(!0);return a&&a.divide(this.getParameter(!0),!0)},split:function(){var a=this.getCurve(!0);return a&&a.split(this.getParameter(!0),!0)},equals:function(a){var b=g.isZero;return this===a||a&&this._curve===a._curve&&this._curve2===a._curve2&&b(this._parameter-a._parameter)&&b(this._parameter2-a._parameter2)||!1},toString:function(){var a=[],b=this.getPoint(),c=f.instance;b&&a.push("point: "+b);var d=this.getIndex();null!=d&&a.push("index: "+d);var e=this.getParameter();return null!=e&&a.push("parameter: "+c.number(e)),null!=this._distance&&a.push("distance: "+c.number(this._distance)),"{ "+a.join(", ")+" }"}},b.each(["Tangent","Normal","Curvature"],function(a){var b="get"+a+"At";this["get"+a]=function(){var a=this.getParameter(),c=this.getCurve();return null!=a&&c&&c[b](a,!0)}},{})),E=t.extend({_class:"PathItem",initialize:function(){},getIntersections:function(b,c){function d(a,b){var c=a.getPath(),d=b.getPath();return c===d?a.getIndex()+a.getParameter()-(b.getIndex()+b.getParameter()):c._id-d._id}if(this===b&&(b=null),b&&!this.getBounds().touches(b.getBounds()))return[];for(var e=[],f=this.getCurves(),g=b?b.getCurves():f,h=this._matrix.orNullIfIdentity(),i=b?b._matrix.orNullIfIdentity():h,j=f.length,k=b?g.length:j,l=[],m=1e-11,n=1-1e-11,o=0;k>o;o++)l[o]=g[o].getValues(i);for(var o=0;j>o;o++){var p=f[o],r=b?p.getValues(h):l[o];if(!b){var s=p.getSegment1(),t=p.getSegment2(),u=s._handleOut,v=t._handleIn;if(new q(s._point.subtract(u),u.multiply(2),!0).intersect(new q(t._point.subtract(v),v.multiply(2),!0),!1)){var w=C.subdivide(r);C.getIntersections(w[0],w[1],p,p,e,function(b){return b._parameter<=n?(b._parameter/=2,b._parameter2=.5+b._parameter2/2,!0):a})}}for(var x=b?0:o+1;k>x;x++)C.getIntersections(r,l[x],p,g[x],e,!b&&(x===o+1||x===k-1&&0===o)&&function(a){var b=a._parameter;return b>=m&&n>=b})}for(var y=e.length-1,o=y;o>=0;o--){var z=e[o],A=z._curve.getNext(),B=z._curve2.getNext();A&&z._parameter>=n&&(z._parameter=0,z._curve=A),B&&z._parameter2>=n&&(z._parameter2=0,z._curve2=B)}if(y>0){e.sort(d);for(var o=y;o>=1;o--)e[o].equals(e[0===o?y:o-1])&&(e.splice(o,1),y--)}if(c){for(var o=y;o>=0;o--)e.push(e[o].getIntersection());e.sort(d)}return e},setPathData:function(a){function b(a,b){var c=+d[a];return i&&(c+=j[b]),c}function c(a){return new h(b(a,"x"),b(a+1,"y"))}var d,e,f,g=a.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),i=!1,j=new h,l=new h;this.clear();for(var m=0,n=g.length;n>m;m++){var o=g[m],p=o[0],q=p.toLowerCase();d=o.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var r=d&&d.length;switch(i=p===q,"z"!==e||/[mz]/.test(q)||this.moveTo(j=l),q){case"m":case"l":var s="m"===q;s&&e&&"z"!==e&&this.closePath(!0);for(var t=0;r>t;t+=2)this[0===t&&s?"moveTo":"lineTo"](j=c(t));f=j,s&&(l=j);break;case"h":case"v":for(var u="h"===q?"x":"y",t=0;r>t;t++)j[u]=b(t,u),this.lineTo(j);f=j;break;case"c":for(var t=0;r>t;t+=6)this.cubicCurveTo(c(t),f=c(t+2),j=c(t+4));break;case"s":for(var t=0;r>t;t+=4)this.cubicCurveTo(/[cs]/.test(e)?j.multiply(2).subtract(f):j,f=c(t),j=c(t+2)),e=q;break;case"q":for(var t=0;r>t;t+=4)this.quadraticCurveTo(f=c(t),j=c(t+2));break;case"t":for(var t=0;r>t;t+=2)this.quadraticCurveTo(f=/[qt]/.test(e)?j.multiply(2).subtract(f):j,j=c(t)),e=q;break;case"a":for(var t=0;r>t;t+=7)this.arcTo(j=c(t+5),new k(+d[0],+d[1]),+d[2],+d[4],+d[3]);break;case"z":this.closePath(!0)}e=q}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(a){var b=this._getWinding(a,!1,!0);return!!("evenodd"===this.getWindingRule()?1&b:b)}}),F=E.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(b){this._closed=!1,this._segments=[];var c=Array.isArray(b)?"object"==typeof b[0]?b:arguments:!b||b.size!==a||b.x===a&&b.point===a?null:arguments;c&&c.length>0?this.setSegments(c):(this._curves=a,this._selectedSegmentState=0,c||"string"!=typeof b||(this.setPathData(b),b=null)),this._initialize(!c&&b)},_equals:function(a){return b.equals(this._segments,a._segments)},clone:function(b){var c=new F(t.NO_INSERT);return c.setSegments(this._segments),c._closed=this._closed,this._clockwise!==a&&(c._clockwise=this._clockwise),this._clone(c,b)},_changed:function rb(b){if(rb.base.call(this,b),8&b){var c=this._parent;if(c&&(c._currentPath=a),this._length=this._clockwise=a,this._curves&&!(16&b))for(var d=0,e=this._curves.length;e>d;d++)this._curves[d]._changed();this._monoCurves=a}else 32&b&&(this._bounds=a)},getStyle:function(){var a=this._parent;return(a instanceof G?a:this)._style},getSegments:function(){return this._segments},setSegments:function(b){var c=this.isFullySelected();this._segments.length=0,this._selectedSegmentState=0,this._curves=a,b&&b.length>0&&this._add(A.readAll(b)),c&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var a=this._curves,b=this._segments;if(!a){var c=this._countCurves();a=this._curves=Array(c);for(var d=0;c>d;d++)a[d]=new C(this,b[d],b[d+1]||b[0])}return a},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var a=this.getCurves();return a[a.length-1]},isClosed:function(){return this._closed},setClosed:function(a){if(this._closed!=(a=!!a)){if(this._closed=a,this._curves){var b=this._curves.length=this._countCurves();a&&(this._curves[b-1]=new C(this,this._segments[b-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(a,b){function c(b,c){b._transformCoordinates(a,p,!1),d=p[0],e=p[1],q?(r.push("M"+o.pair(d,e)),q=!1):(i=p[2],j=p[3],i===d&&j===e&&k===g&&l===h?c||r.push("l"+o.pair(d-g,e-h)):r.push("c"+o.pair(k-g,l-h)+" "+o.pair(i-g,j-h)+" "+o.pair(d-g,e-h))),g=d,h=e,k=p[4],l=p[5]
}var d,e,g,h,i,j,k,l,m=this._segments,n=m.length,o=new f(b),p=Array(6),q=!0,r=[];if(0===n)return"";for(var s=0;n>s;s++)c(m[s]);return this._closed&&n>0&&(c(m[0],!0),r.push("z")),r.join("")}},{isEmpty:function(){return 0===this._segments.length},isPolygon:function(){for(var a=0,b=this._segments.length;b>a;a++)if(!this._segments[a].isLinear())return!1;return!0},_transformContent:function(a){for(var b=Array(6),c=0,d=this._segments.length;d>c;c++)this._segments[c]._transformCoordinates(a,b,!0);return!0},_add:function(a,b){for(var c=this._segments,d=this._curves,e=a.length,f=null==b,b=f?c.length:b,g=0;e>g;g++){var h=a[g];h._path&&(h=a[g]=h.clone()),h._path=this,h._index=b+g,h._selectionState&&this._updateSelection(h,0,h._selectionState)}if(f)c.push.apply(c,a);else{c.splice.apply(c,[b,0].concat(a));for(var g=b+e,i=c.length;i>g;g++)c[g]._index=g}if(d||a._curves){d||(d=this._curves=[]);var j=b>0?b-1:b,k=j,l=Math.min(j+e,this._countCurves());a._curves&&(d.splice.apply(d,[j,0].concat(a._curves)),k+=a._curves.length);for(var g=k;l>g;g++)d.splice(g,0,new C(this,null,null));this._adjustCurves(j,l)}return this._changed(25),a},_adjustCurves:function(a,b){for(var c,d=this._segments,e=this._curves,f=a;b>f;f++)c=e[f],c._path=this,c._segment1=d[f],c._segment2=d[f+1]||d[0],c._changed();(c=e[this._closed&&0===a?d.length-1:a-1])&&(c._segment2=d[a]||d[0],c._changed()),(c=e[b])&&(c._segment1=d[b],c._changed())},_countCurves:function(){var a=this._segments.length;return!this._closed&&a>0?a-1:a},add:function(a){return arguments.length>1&&"number"!=typeof a?this._add(A.readAll(arguments)):this._add([A.read(arguments)])[0]},insert:function(a,b){return arguments.length>2&&"number"!=typeof b?this._add(A.readAll(arguments,1),a):this._add([A.read(arguments,1)],a)[0]},addSegment:function(){return this._add([A.read(arguments)])[0]},insertSegment:function(a){return this._add([A.read(arguments,1)],a)[0]},addSegments:function(a){return this._add(A.readAll(a))},insertSegments:function(a,b){return this._add(A.readAll(b),a)},removeSegment:function(a){return this.removeSegments(a,a+1)[0]||null},removeSegments:function(a,c,d){a=a||0,c=b.pick(c,this._segments.length);var e=this._segments,f=this._curves,g=e.length,h=e.splice(a,c-a),i=h.length;if(!i)return h;for(var j=0;i>j;j++){var k=h[j];k._selectionState&&this._updateSelection(k,k._selectionState,0),k._index=k._path=null}for(var j=a,l=e.length;l>j;j++)e[j]._index=j;if(f){var m=a>0&&c===g+(this._closed?1:0)?a-1:a,f=f.splice(m,i);d&&(h._curves=f.slice(1)),this._adjustCurves(m,m)}return this._changed(25),h},clear:"#removeSegments",getLength:function(){if(null==this._length){var a=this.getCurves();this._length=0;for(var b=0,c=a.length;c>b;b++)this._length+=a[b].getLength()}return this._length},getArea:function(){for(var a=this.getCurves(),b=0,c=0,d=a.length;d>c;c++)b+=a[c].getArea();return b},isFullySelected:function(){var a=this._segments.length;return this._selected&&a>0&&this._selectedSegmentState===7*a},setFullySelected:function(a){a&&this._selectSegments(!0),this.setSelected(a)},setSelected:function sb(a){a||this._selectSegments(!1),sb.base.call(this,a)},_selectSegments:function(a){var b=this._segments.length;this._selectedSegmentState=a?7*b:0;for(var c=0;b>c;c++)this._segments[c]._selectionState=a?7:0},_updateSelection:function(a,b,c){a._selectionState=c;var d=this._selectedSegmentState+=c-b;d>0&&this.setSelected(!0)},flatten:function(a){for(var b=new H(this),c=0,d=b.length/Math.ceil(b.length/a),e=b.length+(this._closed?-d:d)/2,f=[];e>=c;)f.push(new A(b.evaluate(c,0))),c+=d;this.setSegments(f)},reduce:function(){for(var a=this.getCurves(),b=a.length-1;b>=0;b--){var c=a[b];c.isLinear()&&0===c.getLength()&&c.remove()}return this},simplify:function(a){if(this._segments.length>2){var b=new I(this,a||2.5);this.setSegments(b.fit())}},split:function(a,b){if(null!==b){if(1===arguments.length){var c=a;"number"==typeof c&&(c=this.getLocationAt(c)),a=c.index,b=c.parameter}var d=1e-5;b>=1-d&&(a++,b--);var e=this.getCurves();if(a>=0&&a<e.length){b>d&&e[a++].divide(b,!0);var f,g=this.removeSegments(a,this._segments.length,!0);return this._closed?(this.setClosed(!1),f=this):a>0&&(f=this._clone((new F).insertAbove(this,!0))),f._add(g,0),this.addSegment(g[0]),f}return null}},isClockwise:function(){return this._clockwise!==a?this._clockwise:F.isClockwise(this._segments)},setClockwise:function(a){this.isClockwise()!=(a=!!a)&&this.reverse(),this._clockwise=a},reverse:function(){this._segments.reverse();for(var b=0,c=this._segments.length;c>b;b++){var d=this._segments[b],e=d._handleIn;d._handleIn=d._handleOut,d._handleOut=e,d._index=b}this._curves=null,this._clockwise!==a&&(this._clockwise=!this._clockwise),this._changed(9)},join:function(a){if(a){var b=a._segments,c=this.getLastSegment(),d=a.getLastSegment();c._point.equals(d._point)&&a.reverse();var e,f=a.getFirstSegment();c._point.equals(f._point)?(c.setHandleOut(f._handleOut),this._add(b.slice(1))):(e=this.getFirstSegment(),e._point.equals(f._point)&&a.reverse(),d=a.getLastSegment(),e._point.equals(d._point)?(e.setHandleIn(d._handleIn),this._add(b.slice(0,b.length-1),0)):this._add(b.slice())),a.closed&&this._add([b[0]]),a.remove()}var g=this.getFirstSegment(),h=this.getLastSegment();g!==h&&g._point.equals(h._point)&&(g.setHandleIn(h._handleIn),h.remove(),this.setClosed(!0))},toShape:function(b){function c(a,b){return m[a].isColinear(m[b])}function d(a){return m[a].isOrthogonal()}function e(a){return m[a].isArc()}function f(a,b){return m[a]._point.getDistance(m[b]._point)}if(!this._closed)return null;var h,i,j,l,m=this._segments;if(this.isPolygon()&&4===m.length&&c(0,2)&&c(1,3)&&d(1)?(h=w.Rectangle,i=new k(f(0,3),f(0,1)),l=m[1]._point.add(m[2]._point).divide(2)):8===m.length&&e(0)&&e(2)&&e(4)&&e(6)&&c(1,5)&&c(3,7)?(h=w.Rectangle,i=new k(f(1,6),f(0,3)),j=i.subtract(new k(f(0,7),f(1,2))).divide(2),l=m[3]._point.add(m[4]._point).divide(2)):4===m.length&&e(0)&&e(1)&&e(2)&&e(3)&&(g.isZero(f(0,2)-f(1,3))?(h=w.Circle,j=f(0,2)/2):(h=w.Ellipse,j=new k(f(2,0)/2,f(3,1)/2)),l=m[1]._point),h){var n=this.getPosition(!0),o=new h({center:n,size:i,radius:j,insert:!1});return o.rotate(l.subtract(n).getAngle()+90),o.setStyle(this._style),(b||b===a)&&o.insertAbove(this),o}return null},_hitTestSelf:function(a,b){function c(b,c){return a.subtract(b).divide(c).length<=1}function d(a,d,e){if(!b.selected||d.isSelected()){var f=a._point;if(d!==f&&(d=d.add(f)),c(d,u))return new z(e,o,{segment:a,point:d})}}function e(a,c){return(c||b.segments)&&d(a,a._point,"segment")||!c&&b.handles&&(d(a,a._handleIn,"handle-in")||d(a,a._handleOut,"handle-out"))}function f(a){l.add(a)}function g(b){if(("round"!==i||"round"!==j)&&(l=new F({internal:!0,closed:!0}),s||b._index>0&&b._index<r-1?"round"!==i&&(b._handleIn.isZero()||b._handleOut.isZero())&&F._addBevelJoin(b,i,y,k,f,!0):"round"!==j&&F._addSquareCap(b,j,y,f,!0),!l.isEmpty())){var d;return l.contains(a)||(d=l.getNearestLocation(a))&&c(d.getPoint(),t)}return c(b._point,u)}var i,j,k,l,m,n,o=this,p=this.getStyle(),q=this._segments,r=q.length,s=this._closed,t=b._tolerancePadding,u=t,v=b.stroke&&p.hasStroke(),w=b.fill&&p.hasFill(),x=b.curves,y=v?p.getStrokeWidth()/2:w&&b.tolerance>0||x?0:null;if(null!==y&&(y>0?(i=p.getStrokeJoin(),j=p.getStrokeCap(),k=y*p.getMiterLimit(),u=t.add(new h(y,y))):i=j="round"),!b.ends||b.segments||s){if(b.segments||b.handles)for(var A=0;r>A;A++)if(n=e(q[A]))return n}else if(n=e(q[0],!0)||e(q[r-1],!0))return n;if(null!==y){if(m=this.getNearestLocation(a)){var B=m.getParameter();0===B||1===B&&r>1?g(m.getSegment())||(m=null):c(m.getPoint(),u)||(m=null)}if(!m&&"miter"===i&&r>1)for(var A=0;r>A;A++){var C=q[A];if(a.getDistance(C._point)<=k&&g(C)){m=C.getLocation();break}}}return!m&&w&&this._contains(a)||m&&!v&&!x?new z("fill",this):m?new z(v?"stroke":"curve",this,{location:m,point:m.getPoint()}):null}},{beans:!1,_getOffset:function(a){var b=a&&a.getIndex();if(null!=b){for(var c=this.getCurves(),d=0,e=0;b>e;e++)d+=c[e].getLength();var f=c[b],g=a.getParameter();return g>0&&(d+=f.getPartLength(0,g)),d}return null},getLocationOf:function(){for(var a=h.read(arguments),b=this.getCurves(),c=0,d=b.length;d>c;c++){var e=b[c].getLocationOf(a);if(e)return e}return null},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getLocationAt:function(a,b){var c=this.getCurves(),d=0;if(b){var e=~~a;return c[e].getLocationAt(a-e,!0)}for(var f=0,g=c.length;g>f;f++){var h=d,i=c[f];if(d+=i.getLength(),d>a)return i.getLocationAt(a-h)}return a<=this.getLength()?new D(c[c.length-1],1):null},getPointAt:function(a,b){var c=this.getLocationAt(a,b);return c&&c.getPoint()},getTangentAt:function(a,b){var c=this.getLocationAt(a,b);return c&&c.getTangent()},getNormalAt:function(a,b){var c=this.getLocationAt(a,b);return c&&c.getNormal()},getNearestLocation:function(){for(var a=h.read(arguments),b=this.getCurves(),c=1/0,d=null,e=0,f=b.length;f>e;e++){var g=b[e].getNearestLocation(a);g._distance<c&&(c=g._distance,d=g)}return d},getNearestPoint:function(){return this.getNearestLocation.apply(this,arguments).getPoint()}},new function(){function a(a,b,c,d){function e(b){var c=g[b],d=g[b+1];(l!=c||m!=d)&&(a.beginPath(),a.moveTo(l,m),a.lineTo(c,d),a.stroke(),a.beginPath(),a.arc(c,d,f,0,2*Math.PI,!0),a.fill())}for(var f=d/2,g=Array(6),h=0,i=b.length;i>h;h++){var j=b[h];j._transformCoordinates(c,g,!1);var k=j._selectionState,l=g[0],m=g[1];if(1&k&&e(2),2&k&&e(4),a.fillRect(l-f,m-f,d,d),!(4&k)){var n=a.fillStyle;a.fillStyle="#ffffff",a.fillRect(l-f+1,m-f+1,d-2,d-2),a.fillStyle=n}}}function b(a,b,c){function d(b){if(c)b._transformCoordinates(c,o,!1),e=o[0],f=o[1];else{var d=b._point;e=d._x,f=d._y}if(p)a.moveTo(e,f),p=!1;else{if(c)i=o[2],j=o[3];else{var m=b._handleIn;i=e+m._x,j=f+m._y}i===e&&j===f&&k===g&&l===h?a.lineTo(e,f):a.bezierCurveTo(k,l,i,j,e,f)}if(g=e,h=f,c)k=o[4],l=o[5];else{var m=b._handleOut;k=g+m._x,l=h+m._y}}for(var e,f,g,h,i,j,k,l,m=b._segments,n=m.length,o=Array(6),p=!0,q=0;n>q;q++)d(m[q]);b._closed&&n>0&&d(m[0])}return{_draw:function(a,c,d){function e(a){return k[(a%l+l)%l]}var f=c.dontStart,g=c.dontFinish||c.clip,h=this.getStyle(),i=h.hasFill(),j=h.hasStroke(),k=h.getDashArray(),l=!paper.support.nativeDash&&j&&k&&k.length;if(f||a.beginPath(),!f&&this._currentPath?a.currentPath=this._currentPath:(i||j&&!l||g)&&(b(a,this,d),this._closed&&a.closePath(),f||(this._currentPath=a.currentPath)),!g&&(i||j)&&(this._setStyles(a),i&&(a.fill(h.getWindingRule()),a.shadowColor="rgba(0,0,0,0)"),j)){if(l){f||a.beginPath();var m,n=new H(this,d),o=n.length,p=-h.getDashOffset(),q=0;for(p%=o;p>0;)p-=e(q--)+e(q--);for(;o>p;)m=p+e(q++),(p>0||m>0)&&n.drawPart(a,Math.max(p,0),Math.max(m,0)),p=m+e(q++)}a.stroke()}},_drawSelected:function(c,d){c.beginPath(),b(c,this,d),c.stroke(),a(c,this._segments,d,paper.settings.handleSize)}}},new function(){function a(a){var b=a.length,c=[],d=[],e=2;c[0]=a[0]/e;for(var f=1;b>f;f++)d[f]=1/e,e=(b-1>f?4:2)-d[f],c[f]=(a[f]-c[f-1])/e;for(var f=1;b>f;f++)c[b-f-1]-=d[b-f]*c[b-f];return c}return{smooth:function(){var b=this._segments,c=b.length,d=this._closed,e=c,f=0;if(!(2>=c)){d&&(f=Math.min(c,4),e+=2*Math.min(c,f));for(var g=[],i=0;c>i;i++)g[i+f]=b[i]._point;if(d)for(var i=0;f>i;i++)g[i]=b[i+c-f]._point,g[i+c+f]=b[i]._point;else e--;for(var j=[],i=1;e-1>i;i++)j[i]=4*g[i]._x+2*g[i+1]._x;j[0]=g[0]._x+2*g[1]._x,j[e-1]=3*g[e-1]._x;for(var k=a(j),i=1;e-1>i;i++)j[i]=4*g[i]._y+2*g[i+1]._y;j[0]=g[0]._y+2*g[1]._y,j[e-1]=3*g[e-1]._y;var l=a(j);if(d){for(var i=0,m=c;f>i;i++,m++){var n=i/f,o=1-n,p=i+f,q=m+f;k[m]=k[i]*n+k[m]*o,l[m]=l[i]*n+l[m]*o,k[q]=k[p]*o+k[q]*n,l[q]=l[p]*o+l[q]*n}e--}for(var r=null,i=f;e-f>=i;i++){var s=b[i-f];r&&s.setHandleIn(r.subtract(s._point)),e>i&&(s.setHandleOut(new h(k[i],l[i]).subtract(s._point)),r=e-1>i?new h(2*g[i+1]._x-k[i+1],2*g[i+1]._y-l[i+1]):new h((g[e]._x+k[e-1])/2,(g[e]._y+l[e-1])/2))}if(d&&r){var s=this._segments[0];s.setHandleIn(r.subtract(s._point))}}}}},new function(){function a(a){var b=a._segments;if(0===b.length)throw Error("Use a moveTo() command first");return b[b.length-1]}return{moveTo:function(){var a=this._segments;1===a.length&&this.removeSegment(0),a.length||this._add([new A(h.read(arguments))])},moveBy:function(){throw Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new A(h.read(arguments))])},cubicCurveTo:function(){var b=h.read(arguments),c=h.read(arguments),d=h.read(arguments),e=a(this);e.setHandleOut(b.subtract(e._point)),this._add([new A(d,c.subtract(d))])},quadraticCurveTo:function(){var b=h.read(arguments),c=h.read(arguments),d=a(this)._point;this.cubicCurveTo(b.add(d.subtract(b).multiply(1/3)),b.add(c.subtract(b).multiply(1/3)),c)},curveTo:function(){var c=h.read(arguments),d=h.read(arguments),e=b.pick(b.read(arguments),.5),f=1-e,g=a(this)._point,i=c.subtract(g.multiply(f*f)).subtract(d.multiply(e*e)).divide(2*e*f);if(i.isNaN())throw Error("Cannot put a curve through points with parameter = "+e);this.quadraticCurveTo(i,d)},arcTo:function(){var c,d,e,f,g,i=a(this),j=i._point,l=h.read(arguments),m=b.peek(arguments),n=b.pick(m,!0);if("boolean"==typeof n)var o=j.add(l).divide(2),c=o.add(o.subtract(j).rotate(n?-90:90));else if(b.remain(arguments)<=2)c=l,l=h.read(arguments);else{var r=k.read(arguments);if(r.isZero())return this.lineTo(l);var s=b.read(arguments),n=!!b.read(arguments),t=!!b.read(arguments),o=j.add(l).divide(2),u=j.subtract(o).rotate(-s),v=u.x,w=u.y,x=Math.abs,y=1e-11,z=x(r.width),B=x(r.height),C=z*z,D=B*B,E=v*v,F=w*w,G=Math.sqrt(E/C+F/D);if(G>1&&(z*=G,B*=G,C=z*z,D=B*B),G=(C*D-C*F-D*E)/(C*F+D*E),x(G)<y&&(G=0),0>G)throw Error("Cannot create an arc with the given arguments");d=new h(z*w/B,-B*v/z).multiply((t===n?-1:1)*Math.sqrt(G)).rotate(s).add(o),g=(new p).translate(d).rotate(s).scale(z,B),f=g._inverseTransform(j),e=f.getDirectedAngle(g._inverseTransform(l)),!n&&e>0?e-=360:n&&0>e&&(e+=360)}if(c){var H=new q(j.add(c).divide(2),c.subtract(j).rotate(90),!0),I=new q(c.add(l).divide(2),l.subtract(c).rotate(90),!0),J=new q(j,l),K=J.getSide(c);if(d=H.intersect(I,!0),!d){if(!K)return this.lineTo(l);throw Error("Cannot create an arc with the given arguments")}f=j.subtract(d),e=f.getDirectedAngle(l.subtract(d));var L=J.getSide(d);0===L?e=K*Math.abs(e):K===L&&(e+=0>e?360:-360)}for(var M=Math.abs(e),N=M>=360?4:Math.ceil(M/90),O=e/N,P=O*Math.PI/360,Q=4/3*Math.sin(P)/(1+Math.cos(P)),R=[],S=0;N>=S;S++){var u=l,T=null;if(N>S&&(T=f.rotate(90).multiply(Q),g?(u=g._transformPoint(f),T=g._transformPoint(f.add(T)).subtract(u)):u=d.add(f)),0===S)i.setHandleOut(T);else{var U=f.rotate(-90).multiply(Q);g&&(U=g._transformPoint(f.add(U)).subtract(u)),R.push(new A(u,U,T))}f=f.rotate(O)}this._add(R)},lineBy:function(){var b=h.read(arguments),c=a(this)._point;this.lineTo(c.add(b))},curveBy:function(){var c=h.read(arguments),d=h.read(arguments),e=b.read(arguments),f=a(this)._point;this.curveTo(f.add(c),f.add(d),e)},cubicCurveBy:function(){var b=h.read(arguments),c=h.read(arguments),d=h.read(arguments),e=a(this)._point;this.cubicCurveTo(e.add(b),e.add(c),e.add(d))},quadraticCurveBy:function(){var b=h.read(arguments),c=h.read(arguments),d=a(this)._point;this.quadraticCurveTo(d.add(b),d.add(c))},arcBy:function(){var c=a(this)._point,d=c.add(h.read(arguments)),e=b.pick(b.peek(arguments),!0);"boolean"==typeof e?this.arcTo(d,e):this.arcTo(d,c.add(h.read(arguments)))},closePath:function(a){this.setClosed(!0),a&&this.join()}}},{_getBounds:function(a,b){return F[a](this._segments,this._closed,this.getStyle(),b)},statics:{isClockwise:function(a){for(var b=0,c=0,d=a.length;d>c;c++)for(var e=C.getValues(a[c],a[d>c+1?c+1:0]),f=2;8>f;f+=2)b+=(e[f-2]-e[f])*(e[f+1]+e[f-1]);return b>0},getBounds:function(a,b,c,d,e){function f(a){a._transformCoordinates(d,h,!1);for(var b=0;2>b;b++)C._addBounds(i[b],i[b+4],h[b+2],h[b],b,e?e[b]:0,j,k,l);var c=i;i=h,h=c}var g=a[0];if(!g)return new n;for(var h=Array(6),i=g._transformCoordinates(d,Array(6),!1),j=i.slice(0,2),k=j.slice(),l=Array(2),m=1,o=a.length;o>m;m++)f(a[m]);return b&&f(g),new n(j[0],j[1],k[0]-j[0],k[1]-j[1])},getStrokeBounds:function(a,b,c,d){function e(a){m=m.include(d?d._transformPoint(a,a):a)}function f(a){m=m.unite(r.setCenter(d?d._transformPoint(a._point):a._point))}function g(a,b){var c=a._handleIn,d=a._handleOut;"round"===b||!c.isZero()&&!d.isZero()&&c.isColinear(d)?f(a):F._addBevelJoin(a,b,j,q,e)}function h(a,b){"round"===b?f(a):F._addSquareCap(a,b,j,e)}if(!c.hasStroke())return F.getBounds(a,b,c,d);for(var i=a.length-(b?0:1),j=c.getStrokeWidth()/2,l=F._getPenPadding(j,d),m=F.getBounds(a,b,c,d,l),o=c.getStrokeJoin(),p=c.getStrokeCap(),q=j*c.getMiterLimit(),r=new n(new k(l).multiply(2)),s=1;i>s;s++)g(a[s],o);return b?g(a[0],o):i>0&&(h(a[0],p),h(a[a.length-1],p)),m},_getPenPadding:function(a,b){if(!b)return[a,a];var c=b.shiftless(),d=c.transform(new h(a,0)),e=c.transform(new h(0,a)),f=d.getAngleInRadians(),g=d.getLength(),i=e.getLength(),j=Math.sin(f),k=Math.cos(f),l=Math.tan(f),m=-Math.atan(i*l/g),n=Math.atan(i/(l*g));return[Math.abs(g*Math.cos(m)*k-i*Math.sin(m)*j),Math.abs(i*Math.sin(n)*k+g*Math.cos(n)*j)]},_addBevelJoin:function(a,b,c,d,e,f){var g=a.getCurve(),i=g.getPrevious(),j=g.getPointAt(0,!0),k=i.getNormalAt(1,!0),l=g.getNormalAt(0,!0),m=k.getDirectedAngle(l)<0?-c:c;if(k.setLength(m),l.setLength(m),f&&(e(j),e(j.add(k))),"miter"===b){var n=new q(j.add(k),new h(-k.y,k.x),!0).intersect(new q(j.add(l),new h(-l.y,l.x),!0),!0);if(n&&j.getDistance(n)<=d&&(e(n),!f))return}f||e(j.add(k)),e(j.add(l))},_addSquareCap:function(a,b,c,d,e){var f=a._point,g=a.getLocation(),h=g.getNormal().normalize(c);e&&(d(f.subtract(h)),d(f.add(h))),"square"===b&&(f=f.add(h.rotate(0===g.getParameter()?-90:90))),d(f.add(h)),d(f.subtract(h))},getHandleBounds:function(a,b,c,d,e,f){for(var g=Array(6),h=1/0,i=-h,j=h,k=i,l=0,m=a.length;m>l;l++){var o=a[l];o._transformCoordinates(d,g,!1);for(var p=0;6>p;p+=2){var q=0===p?f:e,r=q?q[0]:0,s=q?q[1]:0,t=g[p],u=g[p+1],v=t-r,w=t+r,x=u-s,y=u+s;h>v&&(h=v),w>i&&(i=w),j>x&&(j=x),y>k&&(k=y)}}return new n(h,j,i-h,k-j)},getRoughBounds:function(a,b,c,d){var e=c.hasStroke()?c.getStrokeWidth()/2:0,f=e;return e>0&&("miter"===c.getStrokeJoin()&&(f=e*c.getMiterLimit()),"square"===c.getStrokeCap()&&(f=Math.max(f,e*Math.sqrt(2)))),F.getHandleBounds(a,b,c,d,F._getPenPadding(e,d),F._getPenPadding(f,d))}}});F.inject({statics:new function(){function a(a,c,d){var e=b.getNamed(d),f=new F(e&&e.insert===!1&&t.NO_INSERT);return f._add(a),f._closed=c,f.set(e)}function c(b,c,d){for(var f=Array(4),g=0;4>g;g++){var h=e[g];f[g]=new A(h._point.multiply(c).add(b),h._handleIn.multiply(c),h._handleOut.multiply(c))}return a(f,!0,d)}var d=.5522847498307936,e=[new A([-1,0],[0,d],[0,-d]),new A([0,-1],[-d,0],[d,0]),new A([1,0],[0,-d],[0,d]),new A([0,1],[d,0],[-d,0])];return{Line:function(){return a([new A(h.readNamed(arguments,"from")),new A(h.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var a=h.readNamed(arguments,"center"),d=b.readNamed(arguments,"radius");return c(a,new k(d),arguments)},Rectangle:function(){var b,c=n.readNamed(arguments,"rectangle"),e=k.readNamed(arguments,"radius",0,{readNull:!0}),f=c.getBottomLeft(!0),g=c.getTopLeft(!0),h=c.getTopRight(!0),i=c.getBottomRight(!0);if(!e||e.isZero())b=[new A(f),new A(g),new A(h),new A(i)];else{e=k.min(e,c.getSize(!0).divide(2));var j=e.width,l=e.height,m=j*d,o=l*d;b=[new A(f.add(j,0),null,[-m,0]),new A(f.subtract(0,l),[0,o]),new A(g.add(0,l),null,[0,-o]),new A(g.add(j,0),[-m,0],null),new A(h.subtract(j,0),null,[m,0]),new A(h.add(0,l),[0,-o],null),new A(i.subtract(0,l),null,[0,o]),new A(i.subtract(j,0),[m,0])]}return a(b,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var a=w._readEllipse(arguments);return c(a.center,a.radius,arguments)},Oval:"#Ellipse",Arc:function(){var a=h.readNamed(arguments,"from"),c=h.readNamed(arguments,"through"),d=h.readNamed(arguments,"to"),e=b.getNamed(arguments),f=new F(e&&e.insert===!1&&t.NO_INSERT);return f.moveTo(a),f.arcTo(c,d),f.set(e)},RegularPolygon:function(){for(var c=h.readNamed(arguments,"center"),d=b.readNamed(arguments,"sides"),e=b.readNamed(arguments,"radius"),f=360/d,g=!(d%3),i=new h(0,g?-e:e),j=g?-1:.5,k=Array(d),l=0;d>l;l++)k[l]=new A(c.add(i.rotate((l+j)*f)));return a(k,!0,arguments)},Star:function(){for(var c=h.readNamed(arguments,"center"),d=2*b.readNamed(arguments,"points"),e=b.readNamed(arguments,"radius1"),f=b.readNamed(arguments,"radius2"),g=360/d,i=new h(0,-1),j=Array(d),k=0;d>k;k++)j[k]=new A(c.add(i.rotate(g*k).multiply(k%2?f:e)));return a(j,!0,arguments)}}}});var G=E.extend({_class:"CompoundPath",_serializeFields:{children:[]},initialize:function(a){this._children=[],this._namedChildren={},this._initialize(a)||("string"==typeof a?this.setPathData(a):this.addChildren(Array.isArray(a)?a:arguments))},insertChildren:function tb(b,c,d){c=tb.base.call(this,b,c,d,F);for(var e=0,f=!d&&c&&c.length;f>e;e++){var g=c[e];g._clockwise===a&&g.setClockwise(0===g._index)}return c},reverse:function(){for(var a=this._children,b=0,c=a.length;c>b;b++)a[b].reverse()},smooth:function(){for(var a=0,b=this._children.length;b>a;a++)this._children[a].smooth()},isClockwise:function(){var a=this.getFirstChild();return a&&a.isClockwise()},setClockwise:function(a){this.isClockwise()!==!!a&&this.reverse()},getFirstSegment:function(){var a=this.getFirstChild();return a&&a.getFirstSegment()},getLastSegment:function(){var a=this.getLastChild();return a&&a.getLastSegment()},getCurves:function(){for(var a=this._children,b=[],c=0,d=a.length;d>c;c++)b.push.apply(b,a[c].getCurves());return b},getFirstCurve:function(){var a=this.getFirstChild();return a&&a.getFirstCurve()},getLastCurve:function(){var a=this.getLastChild();return a&&a.getFirstCurve()},getArea:function(){for(var a=this._children,b=0,c=0,d=a.length;d>c;c++)b+=a[c].getArea();return b}},{beans:!0,getPathData:function(a,b){for(var c=this._children,d=[],e=0,f=c.length;f>e;e++){var g=c[e],h=g._matrix;d.push(g.getPathData(a&&!h.isIdentity()?a.chain(h):h,b))}return d.join(" ")}},{_getChildHitTestOptions:function(a){return a.class===F||"path"===a.type?a:new b(a,{fill:!1})},_draw:function(a,b,c){var d=this._children;if(0!==d.length){if(this._currentPath)a.currentPath=this._currentPath;else{b=b.extend({dontStart:!0,dontFinish:!0}),a.beginPath();for(var e=0,f=d.length;f>e;e++)d[e].draw(a,b,c);this._currentPath=a.currentPath}if(!b.clip){this._setStyles(a);var g=this._style;g.hasFill()&&(a.fill(g.getWindingRule()),a.shadowColor="rgba(0,0,0,0)"),g.hasStroke()&&a.stroke()}}},_drawSelected:function(a,b,c){for(var d=this._children,e=0,f=d.length;f>e;e++){var g=d[e],h=g._matrix;c[g._id]||g._drawSelected(a,h.isIdentity()?b:b.chain(h))}}},new function(){function a(a,b){var c=a._children;if(b&&0===c.length)throw Error("Use a moveTo() command first");return c[c.length-1]}var c={moveTo:function(){var b=a(this),c=b&&b.isEmpty()?b:new F;c!==b&&this.addChild(c),c.moveTo.apply(c,arguments)},moveBy:function(){var b=a(this,!0),c=b&&b.getLastSegment(),d=h.read(arguments);this.moveTo(c?d.add(c._point):d)},closePath:function(b){a(this,!0).closePath(b)}};return b.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(b){c[b]=function(){var c=a(this,!0);c[b].apply(c,arguments)}}),c});E.inject(new function(){function a(a,e,f,g){function h(a){return a.clone(!1).reduce().reorient().transform(null,!0)}function i(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];o.push.apply(o,d._segments),p.push.apply(p,d._getMonoCurves())}}var j=h(a),k=e&&a!==e&&h(e);j.isClockwise()||j.reverse(),!k||g^k.isClockwise()||k.reverse(),b(j.getIntersections(k,!0));var l=[],m=[],n=[],o=[],p=[];i(j._children||[j]),k&&i(k._children||[k]),o.sort(function(a,b){var c=a._intersection,d=b._intersection;return!c&&!d||c&&d?0:c?-1:1});for(var q=0,r=o.length;r>q;q++){var s=o[q];if(null==s._winding){l.length=m.length=n.length=0;var t=0,u=s;do l.push(s),n.push(t+=s.getCurve().getLength()),s=s.getNext();while(s&&!s._intersection&&s!==u);for(var v=0;3>v;v++){var w=t*Math.random(),x=n.length,y=0;do if(n[y]>=w){y>0&&(w-=n[y-1]);break}while(++y<x);var z=l[y].getCurve(),A=z.getPointAt(w),B=z.isHorizontal(),C=z._path;C._parent instanceof G&&(C=C._parent),m[v]=g&&k&&(C===j&&k._getWinding(A,B)||C===k&&!j._getWinding(A,B))?0:c(A,p,B)}m.sort();for(var D=m[1],v=l.length-1;v>=0;v--)l[v]._winding=D}}var E=new G;return E.addChildren(d(o,f),!0),j.remove(),k&&k.remove(),E=E.reduce(),E.setStyle(a._style),E}function b(a){function b(){for(var a=0,b=c.length;b>a;a++){var d=c[a];d._handleOut.set(0,0),d._handleIn.set(0,0)}}for(var c,d,e,f=1e-5,g=a.length-1;g>=0;g--){var h=a[g],i=h._parameter;e&&e._curve===h._curve&&e._parameter>0?i/=e._parameter:(c&&b(),d=h._curve,c=d.isLinear()&&[]);var j,k;(j=d.divide(i,!0,!0))?(k=j._segment1,d=j.getPrevious()):k=f>i?d._segment1:i>1-f?d._segment2:d.getPartLength(0,i)<d.getPartLength(i,1)?d._segment1:d._segment2,k._intersection=h.getIntersection(),h._segment=k,c&&c.push(k),e=h}c&&b()}function c(a,b,d,e){var f=1e-5,g=a.x,i=a.y,j=0,k=0,l=[],m=Math.abs,n=1-f;if(d){for(var o=-1/0,p=1/0,q=i-f,r=i+f,s=0,t=b.length;t>s;s++){var u=b[s].values;if(C.solveCubic(u,0,g,l,0,1)>0)for(var v=l.length-1;v>=0;v--){var w=C.evaluate(u,l[v],0).y;q>w&&w>o?o=w:w>r&&p>w&&(p=w)}}o=(o+i)/2,p=(p+i)/2,o>-1/0&&(j=c(new h(g,o),b)),1/0>p&&(k=c(new h(g,p),b))}else for(var x=g-f,y=g+f,s=0,t=b.length;t>s;s++){var z=b[s],u=z.values,A=z.winding,B=z.next;if(A&&(1===A&&i>=u[1]&&i<=u[7]||i>=u[7]&&i<=u[1])&&1===C.solveCubic(u,1,i,l,0,B.winding||B.values[1]!==i?n:1)){var D=l[0],E=C.evaluate(u,D,0).x,F=C.evaluate(u,D,1).y;m(F)<f&&!C.isLinear(u)||f>D&&F*C.evaluate(z.previous.values,D,1).y<0?e&&E>=x&&y>=E&&(++j,++k):x>=E?j+=A:E>=y&&(k+=A)}}return Math.max(m(j),m(k))}function d(a,b,c){b=b||function(){return!0};for(var d,e,f=[],g=.001,h=.999,i=0,j=a.length;j>i;i++)if(d=e=a[i],!d._visited&&b(d._winding)){var k=new F(t.NO_INSERT),l=d._intersection,m=l&&l._segment,n=!1,o=1;do{var p,q=o>0?d._handleIn:d._handleOut,r=o>0?d._handleOut:d._handleIn;if(n&&(!b(d._winding)||c)&&(l=d._intersection)&&(p=l._segment)&&p!==e){if(c)d._visited=p._visited,d=p,o=1;else{var s=d.getCurve();o>0&&(s=s.getPrevious());var u=s.getTangentAt(1>o?g:h,!0),v=p.getCurve(),w=v.getPrevious(),x=w.getTangentAt(h,!0),y=v.getTangentAt(g,!0),z=u.cross(x),B=u.cross(y);if(0!==z*B){var C=B>z?w:v,D=b(C._segment1._winding)?C:B>z?v:w,E=D._segment1;o=D===w?-1:1,E._visited&&d._path!==E._path||!b(E._winding)?o=1:(d._visited=p._visited,d=p,E._visited&&(o=1))}else o=1}r=o>0?d._handleOut:d._handleIn}k.add(new A(d._point,n&&q,r)),n=!0,d._visited=!0,d=o>0?d.getNext():d.getPrevious()}while(d&&!d._visited&&d!==e&&d!==m&&(d._intersection||b(d._winding)));!d||d!==e&&d!==m?k.lastSegment._handleOut.set(0,0):(k.firstSegment.setHandleIn((d===m?m:d)._handleIn),k.setClosed(!0)),k._segments.length>(k._closed?k.isPolygon()?2:0:1)&&f.push(k)}return f}return{_getWinding:function(a,b,d){return c(a,this._getMonoCurves(),b,d)},unite:function(b){return a(this,b,function(a){return 1===a||0===a},!1)},intersect:function(b){return a(this,b,function(a){return 2===a},!1)},subtract:function(b){return a(this,b,function(a){return 1===a},!0)},exclude:function(a){return new u([this.subtract(a),a.subtract(this)])},divide:function(a){return new u([this.subtract(a),this.intersect(a)])}}}),F.inject({_getMonoCurves:function(){function a(a){var b=a[1],e=a[7],f={values:a,winding:b===e?0:b>e?-1:1,previous:c,next:null};c&&(c.next=f),d.push(f),c=f}function b(b){if(0!==C.getLength(b)){var c=b[1],d=b[3],e=b[5],f=b[7];if(C.isLinear(b))a(b);else{var h=3*(d-e)-c+f,i=2*(c+e)-4*d,j=d-c,k=1e-5,l=[],m=g.solveQuadratic(h,i,j,l,k,1-k);if(0===m)a(b);else{l.sort();var n=l[0],o=C.subdivide(b,n);a(o[0]),m>1&&(n=(l[1]-n)/(1-n),o=C.subdivide(o[1],n),a(o[0])),a(o[1])}}}}var c,d=this._monoCurves;if(!d){d=this._monoCurves=[];for(var e=this.getCurves(),f=this._segments,h=0,i=e.length;i>h;h++)b(e[h].getValues());if(!this._closed&&f.length>1){var j=f[f.length-1]._point,k=f[0]._point,l=j._x,m=j._y,n=k._x,o=k._y;b([l,m,l,m,n,o,n,o])}if(d.length>0){var p=d[0],q=d[d.length-1];p.previous=q,q.next=p}}return d},getInteriorPoint:function(){var a=this.getBounds(),b=a.getCenter(!0);if(!this.contains(b)){for(var c=this._getMonoCurves(),d=[],e=b.y,f=[],g=0,h=c.length;h>g;g++){var i=c[g].values;if((1===c[g].winding&&e>=i[1]&&e<=i[7]||e>=i[7]&&e<=i[1])&&C.solveCubic(i,1,e,d,0,1)>0)for(var j=d.length-1;j>=0;j--)f.push(C.evaluate(i,d[j],0).x);if(f.length>1)break}b.x=(f[0]+f[1])/2}return b},reorient:function(){return this.setClockwise(!0),this}}),G.inject({_getMonoCurves:function(){for(var a=this._children,b=[],c=0,d=a.length;d>c;c++)b.push.apply(b,a[c]._getMonoCurves());return b},reorient:function(){var a=this.removeChildren().sort(function(a,b){return b.getBounds().getArea()-a.getBounds().getArea()});this.addChildren(a);for(var b=a[0].isClockwise(),c=1,d=a.length;d>c;c++){for(var e=a[c].getInteriorPoint(),f=0,g=c-1;g>=0;g--)a[g].contains(e)&&f++;a[c].setClockwise(0===f%2&&b)}return this}});var H=b.extend({initialize:function(a,b){function c(a,c){var d=C.getValues(a,c,b);g.curves.push(d),g._computeParts(d,a._index,0,1)}this.curves=[],this.parts=[],this.length=0,this.index=0;for(var d,e=a._segments,f=e[0],g=this,h=1,i=e.length;i>h;h++)d=e[h],c(f,d),f=d;a._closed&&c(d,e[0])},_computeParts:function(a,b,c,d){if(d-c>1/32&&!C.isFlatEnough(a,.25)){var e=C.subdivide(a),f=(c+d)/2;this._computeParts(e[0],b,c,f),this._computeParts(e[1],b,f,d)}else{var g=a[6]-a[0],h=a[7]-a[1],i=Math.sqrt(g*g+h*h);i>1e-5&&(this.length+=i,this.parts.push({offset:this.length,value:d,index:b}))}},getParameterAt:function(a){for(var b,c=this.index;b=c,!(0==c||this.parts[--c].offset<a););for(var d=this.parts.length;d>b;b++){var e=this.parts[b];if(e.offset>=a){this.index=b;var f=this.parts[b-1],g=f&&f.index==e.index?f.value:0,h=f?f.offset:0;return{value:g+(e.value-g)*(a-h)/(e.offset-h),index:e.index}}}var e=this.parts[this.parts.length-1];return{value:1,index:e.index}},evaluate:function(a,b){var c=this.getParameterAt(a);return C.evaluate(this.curves[c.index],c.value,b)},drawPart:function(a,b,c){b=this.getParameterAt(b),c=this.getParameterAt(c);for(var d=b.index;d<=c.index;d++){var e=C.getPart(this.curves[d],d==b.index?b.value:0,d==c.index?c.value:1);d==b.index&&a.moveTo(e[0],e[1]),a.bezierCurveTo.apply(a,e.slice(2))}}}),I=b.extend({initialize:function(a,b){this.points=[];for(var c,d=a._segments,e=0,f=d.length;f>e;e++){var g=d[e].point.clone();c&&c.equals(g)||(this.points.push(g),c=g)}this.error=b},fit:function(){var a=this.points,b=a.length;return this.segments=b>0?[new A(a[0])]:[],b>1&&this.fitCubic(0,b-1,a[1].subtract(a[0]).normalize(),a[b-2].subtract(a[b-1]).normalize()),this.segments},fitCubic:function(b,c,d,e){if(1==c-b){var f=this.points[b],g=this.points[c],h=f.getDistance(g)/3;return this.addCurve([f,f.add(d.normalize(h)),g.add(e.normalize(h)),g]),a}for(var i,j=this.chordLengthParameterize(b,c),k=Math.max(this.error,this.error*this.error),l=0;4>=l;l++){var m=this.generateBezier(b,c,j,d,e),n=this.findMaxError(b,c,m,j);if(n.error<this.error)return this.addCurve(m),a;if(i=n.index,n.error>=k)break;this.reparameterize(b,c,j,m),k=n.error}var o=this.points[i-1].subtract(this.points[i]),p=this.points[i].subtract(this.points[i+1]),q=o.add(p).divide(2).normalize();this.fitCubic(b,i,d,q),this.fitCubic(i,c,q.negate(),e)},addCurve:function(a){var b=this.segments[this.segments.length-1];b.setHandleOut(a[1].subtract(a[0])),this.segments.push(new A(a[3],a[2].subtract(a[3])))},generateBezier:function(a,b,c,d,e){for(var f=1e-11,g=this.points[a],h=this.points[b],i=[[0,0],[0,0]],j=[0,0],k=0,l=b-a+1;l>k;k++){var m=c[k],n=1-m,o=3*m*n,p=n*n*n,q=o*n,r=o*m,s=m*m*m,t=d.normalize(q),u=e.normalize(r),v=this.points[a+k].subtract(g.multiply(p+q)).subtract(h.multiply(r+s));i[0][0]+=t.dot(t),i[0][1]+=t.dot(u),i[1][0]=i[0][1],i[1][1]+=u.dot(u),j[0]+=t.dot(v),j[1]+=u.dot(v)}var w,x,y=i[0][0]*i[1][1]-i[1][0]*i[0][1];if(Math.abs(y)>f){var z=i[0][0]*j[1]-i[1][0]*j[0],A=j[0]*i[1][1]-j[1]*i[0][1];w=A/y,x=z/y}else{var B=i[0][0]+i[0][1],C=i[1][0]+i[1][1];w=x=Math.abs(B)>f?j[0]/B:Math.abs(C)>f?j[1]/C:0
}var D=h.getDistance(g);return f*=D,(f>w||f>x)&&(w=x=D/3),[g,g.add(d.normalize(w)),h.add(e.normalize(x)),h]},reparameterize:function(a,b,c,d){for(var e=a;b>=e;e++)c[e-a]=this.findRoot(d,this.points[e],c[e-a])},findRoot:function(a,b,c){for(var d=[],e=[],f=0;2>=f;f++)d[f]=a[f+1].subtract(a[f]).multiply(3);for(var f=0;1>=f;f++)e[f]=d[f+1].subtract(d[f]).multiply(2);var g=this.evaluate(3,a,c),h=this.evaluate(2,d,c),i=this.evaluate(1,e,c),j=g.subtract(b),k=h.dot(h)+j.dot(i);return Math.abs(k)<1e-5?c:c-j.dot(h)/k},evaluate:function(a,b,c){for(var d=b.slice(),e=1;a>=e;e++)for(var f=0;a-e>=f;f++)d[f]=d[f].multiply(1-c).add(d[f+1].multiply(c));return d[0]},chordLengthParameterize:function(a,b){for(var c=[0],d=a+1;b>=d;d++)c[d-a]=c[d-a-1]+this.points[d].getDistance(this.points[d-1]);for(var d=1,e=b-a;e>=d;d++)c[d]/=c[e];return c},findMaxError:function(a,b,c,d){for(var e=Math.floor((b-a+1)/2),f=0,g=a+1;b>g;g++){var h=this.evaluate(3,c,d[g-a]),i=h.subtract(this.points[g]),j=i.x*i.x+i.y*i.y;j>=f&&(f=j,e=g)}return{error:f,index:e}}}),J=t.extend({_class:"TextItem",_boundsSelected:!0,_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsGetter:"getBounds",initialize:function(c){this._content="",this._lines=[];var d=c&&b.isPlainObject(c)&&c.x===a&&c.y===a;this._initialize(d&&c,!d&&h.read(arguments))},_equals:function(a){return this._content===a._content},_clone:function ub(a){return a.setContent(this._content),ub.base.call(this,a)},getContent:function(){return this._content},setContent:function(a){this._content=""+a,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),K=J.extend({_class:"PointText",initialize:function(){J.apply(this,arguments)},clone:function(a){return this._clone(new K(t.NO_INSERT),a)},getPoint:function(){var a=this._matrix.getTranslation();return new j(a.x,a.y,this,"setPoint")},setPoint:function(){var a=h.read(arguments);this.translate(a.subtract(this._matrix.getTranslation()))},_draw:function(a){if(this._content){this._setStyles(a);var b=this._style,c=this._lines,d=b.getLeading(),e=a.shadowColor;a.font=b.getFontStyle(),a.textAlign=b.getJustification();for(var f=0,g=c.length;g>f;f++){a.shadowColor=e;var h=c[f];b.hasFill()&&(a.fillText(h,0,0),a.shadowColor="rgba(0,0,0,0)"),b.hasStroke()&&a.strokeText(h,0,0),a.translate(0,d)}}},_getBounds:function(a,b){var c=this._style,d=this._lines,e=d.length,f=c.getJustification(),g=c.getLeading(),h=this.getView().getTextWidth(c.getFontStyle(),d),i=0;"left"!==f&&(i-=h/("center"===f?2:1));var j=new n(i,e?-.75*g:0,h,e*g);return b?b._transformBounds(j,j):j}}),L=b.extend(new function(){function a(a){var b,d=a.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(d){b=[0,0,0];for(var e=0;3>e;e++){var f=d[e+1];b[e]=parseInt(1==f.length?f+f:f,16)/255}}else if(d=a.match(/^rgba?\((.*)\)$/)){b=d[1].split(",");for(var e=0,h=b.length;h>e;e++){var f=+b[e];b[e]=3>e?f/255:f}}else{var i=g[a];if(!i){c||(c=Z.getContext(1,1),c.globalCompositeOperation="copy"),c.fillStyle="rgba(0,0,0,0)",c.fillStyle=a,c.fillRect(0,0,1,1);var j=c.getImageData(0,0,1,1).data;i=g[a]=[j[0]/255,j[1]/255,j[2]/255]}b=i.slice()}return b}var c,d={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},e={},g={},i=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],j={"rgb-hsb":function(a,b,c){var d=Math.max(a,b,c),e=Math.min(a,b,c),f=d-e,g=0===f?0:60*(d==a?(b-c)/f+(c>b?6:0):d==b?(c-a)/f+2:(a-b)/f+4);return[g,0===d?0:f/d,d]},"hsb-rgb":function(a,b,c){a=(a/60%6+6)%6;var d=Math.floor(a),e=a-d,d=i[d],f=[c,c*(1-b),c*(1-b*e),c*(1-b*(1-e))];return[f[d[0]],f[d[1]],f[d[2]]]},"rgb-hsl":function(a,b,c){var d=Math.max(a,b,c),e=Math.min(a,b,c),f=d-e,g=0===f,h=g?0:60*(d==a?(b-c)/f+(c>b?6:0):d==b?(c-a)/f+2:(a-b)/f+4),i=(d+e)/2,j=g?0:.5>i?f/(d+e):f/(2-d-e);return[h,j,i]},"hsl-rgb":function(a,b,c){if(a=(a/360%1+1)%1,0===b)return[c,c,c];for(var d=[a+1/3,a,a-1/3],e=.5>c?c*(1+b):c+b-c*b,f=2*c-e,g=[],h=0;3>h;h++){var i=d[h];0>i&&(i+=1),i>1&&(i-=1),g[h]=1>6*i?f+6*(e-f)*i:1>2*i?e:2>3*i?f+6*(e-f)*(2/3-i):f}return g},"rgb-gray":function(a,b,c){return[.2989*a+.587*b+.114*c]},"gray-rgb":function(a){return[a,a,a]},"gray-hsb":function(a){return[0,0,a]},"gray-hsl":function(a){return[0,0,a]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return b.each(d,function(a,c){e[c]=[],b.each(a,function(a,f){var g=b.capitalize(a),i=/^(hue|saturation)$/.test(a),j=e[c][f]="gradient"===a?function(a){var b=this._components[0];return a=M.read(Array.isArray(a)?a:arguments,0,{readNull:!0}),b!==a&&(b&&b._removeOwner(this),a&&a._addOwner(this)),a}:"gradient"===c?function(){return h.read(arguments,0,{readNull:"highlight"===a,clone:!0})}:function(a){return null==a||isNaN(a)?0:a};this["get"+g]=function(){return this._type===c||i&&/^hs[bl]$/.test(this._type)?this._components[f]:this._convert(c)[f]},this["set"+g]=function(a){this._type===c||i&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(c),this._properties=d[c],this._type=c),a=j.call(this,a),null!=a&&(this._components[f]=a,this._changed())}},this)},{_class:"Color",_readIndex:!0,initialize:function k(b){var c,f,g,h,i=Array.prototype.slice,j=arguments,l=0;Array.isArray(b)&&(j=b,b=j[0]);var m=null!=b&&typeof b;if("string"===m&&b in d&&(c=b,b=j[1],Array.isArray(b)?(f=b,g=j[2]):(this.__read&&(l=1),j=i.call(j,1),m=typeof b)),!f){if(h="number"===m?j:"object"===m&&null!=b.length?b:null){c||(c=h.length>=3?"rgb":"gray");var n=d[c].length;g=h[n],this.__read&&(l+=h===arguments?n+(null!=g?1:0):1),h.length>n&&(h=i.call(h,0,n))}else if("string"===m)c="rgb",f=a(b),4===f.length&&(g=f[3],f.length--);else if("object"===m)if(b.constructor===k){if(c=b._type,f=b._components.slice(),g=b._alpha,"gradient"===c)for(var o=1,p=f.length;p>o;o++){var q=f[o];q&&(f[o]=q.clone())}}else if(b.constructor===M)c="gradient",h=j;else{c="hue"in b?"lightness"in b?"hsl":"hsb":"gradient"in b||"stops"in b||"radial"in b?"gradient":"gray"in b?"gray":"rgb";var r=d[c];t=e[c],this._components=f=[];for(var o=0,p=r.length;p>o;o++){var s=b[r[o]];null==s&&0===o&&"gradient"===c&&"stops"in b&&(s={stops:b.stops,radial:b.radial}),s=t[o].call(this,s),null!=s&&(f[o]=s)}g=b.alpha}this.__read&&c&&(l=1)}if(this._type=c||"rgb","gradient"===c&&(this._id=k._id=(k._id||0)+1),!f){this._components=f=[];for(var t=e[this._type],o=0,p=t.length;p>o;o++){var s=t[o].call(this,h&&h[o]);null!=s&&(f[o]=s)}}this._components=f,this._properties=d[this._type],this._alpha=g,this.__read&&(this.__read=l)},_serialize:function(a,c){var d=this.getComponents();return b.serialize(/^(gray|rgb)$/.test(this._type)?d:[this._type].concat(d),a,!0,c)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(a){var b;return this._type===a?this._components.slice():(b=j[this._type+"-"+a])?b.apply(this,this._components):j["rgb-"+a].apply(this,j[this._type+"-rgb"].apply(this,this._components))},convert:function(a){return new L(a,this._convert(a),this._alpha)},getType:function(){return this._type},setType:function(a){this._components=this._convert(a),this._properties=d[a],this._type=a},getComponents:function(){var a=this._components.slice();return null!=this._alpha&&a.push(this._alpha),a},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(a){this._alpha=null==a?null:Math.min(Math.max(a,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(a){var c=b.isPlainValue(a,!0)?L.read(arguments):a;return c===this||c&&this._class===c._class&&this._type===c._type&&this._alpha===c._alpha&&b.equals(this._components,c._components)||!1},toString:function(){for(var a=this._properties,b=[],c="gradient"===this._type,d=f.instance,e=0,g=a.length;g>e;e++){var h=this._components[e];null!=h&&b.push(a[e]+": "+(c?h:d.number(h)))}return null!=this._alpha&&b.push("alpha: "+d.number(this._alpha)),"{ "+b.join(", ")+" }"},toCSS:function(a){function b(a){return Math.round(255*(0>a?0:a>1?1:a))}var c=this._convert("rgb"),d=a||null==this._alpha?1:this._alpha;return c=[b(c[0]),b(c[1]),b(c[2])],1>d&&c.push(0>d?0:d),a?"#"+((1<<24)+(c[0]<<16)+(c[1]<<8)+c[2]).toString(16).slice(1):(4==c.length?"rgba(":"rgb(")+c.join(",")+")"},toCanvasStyle:function(a){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var b,c=this._components,d=c[0],e=d._stops,f=c[1],g=c[2];if(d._radial){var h=g.getDistance(f),i=c[3];if(i){var j=i.subtract(f);j.getLength()>h&&(i=f.add(j.normalize(h-.1)))}var k=i||f;b=a.createRadialGradient(k.x,k.y,0,f.x,f.y,h)}else b=a.createLinearGradient(f.x,f.y,g.x,g.y);for(var l=0,m=e.length;m>l;l++){var n=e[l];b.addColorStop(n._rampPoint,n._color.toCanvasStyle())}return this._canvasStyle=b},transform:function(a){if("gradient"===this._type){for(var b=this._components,c=1,d=b.length;d>c;c++){var e=b[c];a._transformPoint(e,e,!0)}this._changed()}},statics:{_types:d,random:function(){var a=Math.random;return new L(a(),a(),a())}}})},new function(){var a={add:function(a,b){return a+b},subtract:function(a,b){return a-b},multiply:function(a,b){return a*b},divide:function(a,b){return a/b}};return b.each(a,function(a,b){this[b]=function(b){b=L.read(arguments);for(var c=this._type,d=this._components,e=b._convert(c),f=0,g=d.length;g>f;f++)e[f]=a(d[f],e[f]);return new L(c,e,null!=this._alpha?a(this._alpha,b.getAlpha()):null)}},{})});b.each(L._types,function(a,c){var d=this[b.capitalize(c)+"Color"]=function(a){var b=null!=a&&typeof a,d="object"===b&&null!=a.length?a:"string"===b?null:arguments;return d?new L(c,d):new L(a)};if(3==c.length){var e=c.toUpperCase();L[e]=this[e+"Color"]=d}},b.exports);var M=b.extend({_class:"Gradient",initialize:function vb(a,b){this._id=vb._id=(vb._id||0)+1,a&&this._set(a)&&(a=b=null),this._stops||this.setStops(a||["white","black"]),null==this._radial&&this.setRadial("string"==typeof b&&"radial"===b||b||!1)},_serialize:function(a,c){return c.add(this,function(){return b.serialize([this._stops,this._radial],a,!0,c)})},_changed:function(){for(var a=0,b=this._owners&&this._owners.length;b>a;a++)this._owners[a]._changed()},_addOwner:function(a){this._owners||(this._owners=[]),this._owners.push(a)},_removeOwner:function(b){var c=this._owners?this._owners.indexOf(b):-1;-1!=c&&(this._owners.splice(c,1),0===this._owners.length&&(this._owners=a))},clone:function(){for(var a=[],b=0,c=this._stops.length;c>b;b++)a[b]=this._stops[b].clone();return new M(a)},getStops:function(){return this._stops},setStops:function(b){if(this.stops)for(var c=0,d=this._stops.length;d>c;c++)this._stops[c]._owner=a;if(b.length<2)throw Error("Gradient stop list needs to contain at least two stops.");this._stops=N.readAll(b,0,{clone:!0});for(var c=0,d=this._stops.length;d>c;c++){var e=this._stops[c];e._owner=this,e._defaultRamp&&e.setRampPoint(c/(d-1))}this._changed()},getRadial:function(){return this._radial},setRadial:function(a){this._radial=a,this._changed()},equals:function(a){if(a===this)return!0;if(a&&this._class===a._class&&this._stops.length===a._stops.length){for(var b=0,c=this._stops.length;c>b;b++)if(!this._stops[b].equals(a._stops[b]))return!1;return!0}return!1}}),N=b.extend({_class:"GradientStop",initialize:function(b,c){if(b){var d,e;c===a&&Array.isArray(b)?(d=b[0],e=b[1]):b.color?(d=b.color,e=b.rampPoint):(d=b,e=c),this.setColor(d),this.setRampPoint(e)}},clone:function(){return new N(this._color.clone(),this._rampPoint)},_serialize:function(a,c){return b.serialize([this._color,this._rampPoint],a,!0,c)},_changed:function(){this._owner&&this._owner._changed(65)},getRampPoint:function(){return this._rampPoint},setRampPoint:function(a){this._defaultRamp=null==a,this._rampPoint=a||0,this._changed()},getColor:function(){return this._color},setColor:function(a){this._color=L.read(arguments),this._color===a&&(this._color=a.clone()),this._color._owner=this,this._changed()},equals:function(a){return a===this||a&&this._class===a._class&&this._color.equals(a._color)&&this._rampPoint==a._rampPoint||!1}}),O=b.extend(new function(){var c={fillColor:a,strokeColor:a,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],windingRule:"nonzero",shadowColor:a,shadowBlur:0,shadowOffset:new h,selectedColor:a,fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,font:"sans-serif",leading:null,justification:"left"},d={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},e={beans:!0},f={_defaults:c,_textDefaults:new b(c,{fillColor:new L}),beans:!0};return b.each(c,function(c,g){var h=/Color$/.test(g),i=b.capitalize(g),j=d[g],k="set"+i,l="get"+i;f[k]=function(b){var c=this._owner,d=c&&c._children;if(d&&d.length>0&&!(c instanceof G))for(var e=0,f=d.length;f>e;e++)d[e]._style[k](b);else{var i=this._values[g];i!=b&&(h&&(i&&(i._owner=a),b&&b.constructor===L&&(b._owner&&(b=b.clone()),b._owner=c)),this._values[g]=b,c&&c._changed(j||65))}},f[l]=function(c){var d,e=this._owner,f=e&&e._children;if(!f||0===f.length||c||e instanceof G){var d=this._values[g];return d===a?(d=this._defaults[g],d&&d.clone&&(d=d.clone()),this._values[g]=d):!h||d&&d.constructor===L||(this._values[g]=d=L.read([d],0,{readNull:!0,clone:!0}),d&&(d._owner=e)),d}for(var i=0,j=f.length;j>i;i++){var k=f[i]._style[l]();if(0===i)d=k;else if(!b.equals(d,k))return a}return d},e[l]=function(a){return this._style[l](a)},e[k]=function(a){this._style[k](a)}}),t.inject(e),f},{_class:"Style",initialize:function(a,b,c){this._values={},this._owner=b,this._project=b&&b._project||c||paper.project,b instanceof J&&(this._defaults=this._textDefaults),a&&this.set(a)},set:function(a){var b=a instanceof O,c=b?a._values:a;if(c)for(var d in c)if(d in this._defaults){var e=c[d];this[d]=e&&b&&e.clone?e.clone():e}},equals:function(a){return a===this||a&&this._class===a._class&&b.equals(this._values,a._values)||!1},hasFill:function(){return!!this.getFillColor()},hasStroke:function(){return!!this.getStrokeColor()&&this.getStrokeWidth()>0},hasShadow:function(){return!!this.getShadowColor()&&this.getShadowBlur()>0},getView:function(){return this._project.getView()},getFontStyle:function(){var a=this.getFontSize();return this.getFontWeight()+" "+a+(/[a-z]/i.test(a+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function wb(){var a=wb.base.call(this),b=this.getFontSize();return/pt|em|%|px/.test(b)&&(b=this.getView().getPixelSize(b)),null!=a?a:1.2*b}}),P=new function(){function c(a,d){for(var e=[],f=0,g=a&&a.length;g>f;){var h=a[f++];if("string"==typeof h)h=document.createElement(h);else if(!h||!h.nodeType)continue;b.isPlainObject(a[f])&&P.set(h,a[f++]),Array.isArray(a[f])&&c(a[f++],h),d&&d.appendChild(h),e.push(h)}return e}function d(a,b,c,d){for(var e=["","webkit","moz","Moz","ms","o"],f=b[0].toUpperCase()+b.substring(1),g=0;6>g;g++){var h=e[g],i=h?h+f:b;if(i in a){if(!c)return a[i];a[i]=d;break}}}var e=/^(checked|value|selected|disabled)$/i,f={text:"textContent",html:"innerHTML"},g={lineHeight:1,zoom:1,zIndex:1,opacity:1};return{create:function(a,b){var d=Array.isArray(a),e=c(d?a:arguments,d?b:null);return 1==e.length?e[0]:e},find:function(a,b){return(b||document).querySelector(a)},findAll:function(a,b){return(b||document).querySelectorAll(a)},get:function(a,b){return a?e.test(b)?"value"===b||"string"!=typeof a[b]?a[b]:!0:b in f?a[f[b]]:a.getAttribute(b):null},set:function(b,c,d){if("string"!=typeof c)for(var g in c)c.hasOwnProperty(g)&&this.set(b,g,c[g]);else{if(!b||d===a)return b;e.test(c)?b[c]=d:c in f?b[f[c]]=d:"style"===c?this.setStyle(b,d):"events"===c?Q.add(b,d):b.setAttribute(c,d)}return b},getStyles:function(a){var b=a&&9!==a.nodeType?a.ownerDocument:a,c=b&&b.defaultView;return c&&c.getComputedStyle(a,"")},getStyle:function(a,b){return a&&a.style[b]||this.getStyles(a)[b]||null},setStyle:function(a,b,c){if("string"!=typeof b)for(var d in b)b.hasOwnProperty(d)&&this.setStyle(a,d,b[d]);else!/^-?[\d\.]+$/.test(c)||b in g||(c+="px"),a.style[b]=c;return a},hasClass:function(a,b){return RegExp("\\s*"+b+"\\s*").test(a.className)},addClass:function(a,b){a.className=(a.className+" "+b).trim()},removeClass:function(a,b){a.className=a.className.replace(RegExp("\\s*"+b+"\\s*")," ").trim()},remove:function(a){a.parentNode&&a.parentNode.removeChild(a)},removeChildren:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},getBounds:function(a,b){var c,d=a.ownerDocument,e=d.body,f=d.documentElement;try{c=a.getBoundingClientRect()}catch(g){c={left:0,top:0,width:0,height:0}}var h=c.left-(f.clientLeft||e.clientLeft||0),i=c.top-(f.clientTop||e.clientTop||0);if(!b){var j=d.defaultView;h+=j.pageXOffset||f.scrollLeft||e.scrollLeft,i+=j.pageYOffset||f.scrollTop||e.scrollTop}return new n(h,i,c.width,c.height)},getViewportBounds:function(a){var b=a.ownerDocument,c=b.defaultView,d=b.documentElement;return new n(0,0,c.innerWidth||d.clientWidth,c.innerHeight||d.clientHeight)},getOffset:function(a,b){return this.getBounds(a,b).getPoint()},getSize:function(a){return this.getBounds(a,!0).getSize()},isInvisible:function(a){return this.getSize(a).equals(new k(0,0))},isInView:function(a){return!this.isInvisible(a)&&this.getViewportBounds(a).intersects(this.getBounds(a,!0))},getPrefixed:function(a,b){return d(a,b)},setPrefixed:function(a,b,c){if("object"==typeof b)for(var e in b)d(a,e,!0,b[e]);else d(a,b,!0,c)}}},Q={add:function(a,b){for(var c in b)for(var d=b[c],e=c.split(/[\s,]+/g),f=0,g=e.length;g>f;f++)a.addEventListener(e[f],d,!1)},remove:function(a,b){for(var c in b)for(var d=b[c],e=c.split(/[\s,]+/g),f=0,g=e.length;g>f;f++)a.removeEventListener(e[f],d,!1)},getPoint:function(a){var b=a.targetTouches?a.targetTouches.length?a.targetTouches[0]:a.changedTouches[0]:a;return new h(b.pageX||b.clientX+document.documentElement.scrollLeft,b.pageY||b.clientY+document.documentElement.scrollTop)},getTarget:function(a){return a.target||a.srcElement},getRelatedTarget:function(a){return a.relatedTarget||a.toElement},getOffset:function(a,b){return Q.getPoint(a).subtract(P.getOffset(b||Q.getTarget(a)))},stop:function(a){a.stopPropagation(),a.preventDefault()}};Q.requestAnimationFrame=new function(){function a(){for(var b=f.length-1;b>=0;b--){var h=f[b],i=h[0],j=h[1];(!j||("true"==d.getAttribute(j,"keepalive")||g)&&P.isInView(j))&&(f.splice(b,1),i())}c&&(f.length?c(a):e=!1)}var b,c=P.getPrefixed(window,"requestAnimationFrame"),e=!1,f=[],g=!0;return Q.add(window,{focus:function(){g=!0},blur:function(){g=!1}}),function(d,g){f.push([d,g]),c?e||(c(a),e=!0):b||(b=setInterval(a,1e3/60))}};var R=b.extend(c,{_class:"View",initialize:function xb(a,b){this._project=a,this._scope=a._scope,this._element=b;var c;this._pixelRatio||(this._pixelRatio=window.devicePixelRatio||1),this._id=b.getAttribute("id"),null==this._id&&b.setAttribute("id",this._id="view-"+xb._id++),Q.add(b,this._viewEvents);var e="none";if(P.setPrefixed(b.style,{userSelect:e,touchAction:e,touchCallout:e,contentZooming:e,userDrag:e,tapHighlightColor:"rgba(0,0,0,0)"}),d.hasAttribute(b,"resize")){var f=P.getOffset(b,!0),g=this;c=P.getViewportBounds(b).getSize().subtract(f),this._windowEvents={resize:function(){P.isInvisible(b)||(f=P.getOffset(b,!0)),g.setViewSize(P.getViewportBounds(b).getSize().subtract(f))}},Q.add(window,this._windowEvents)}else if(c=P.getSize(b),c.isNaN()||c.isZero()){var h=function(a){return b[a]||parseInt(b.getAttribute(a),10)};c=new k(h("width"),h("height"))}if(this._setViewSize(c),d.hasAttribute(b,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var i=this._stats.domElement,j=i.style,f=P.getOffset(b);j.position="absolute",j.left=f.x+"px",j.top=f.y+"px",document.body.appendChild(i)}xb._views.push(this),xb._viewsById[this._id]=this,this._viewSize=c,(this._matrix=new p)._owner=this,this._zoom=1,xb._focused||(xb._focused=this),this._frameItems={},this._frameItemCount=0},remove:function(){return this._project?(R._focused===this&&(R._focused=null),R._views.splice(R._views.indexOf(this),1),delete R._viewsById[this._id],this._project._view===this&&(this._project._view=null),Q.remove(this._element,this._viewEvents),Q.remove(window,this._windowEvents),this._element=this._project=null,this.detach("frame"),this._animate=!1,this._frameItems={},!0):!1},_events:{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}},onResize:{}},_animate:!1,_time:0,_count:0,_requestFrame:function(){var a=this;Q.requestAnimationFrame(function(){a._requested=!1,a._animate&&(a._requestFrame(),a._handleFrame())},this._element),this._requested=!0},_handleFrame:function(){paper=this._scope;var a=Date.now()/1e3,c=this._before?a-this._before:0;this._before=a,this._handlingFrame=!0,this.fire("frame",new b({delta:c,time:this._time+=c,count:this._count++})),this._stats&&this._stats.update(),this._handlingFrame=!1,this.update()},_animateItem:function(a,b){var c=this._frameItems;b?(c[a._id]={item:a,time:0,count:0},1===++this._frameItemCount&&this.attach("frame",this._handleFrameItems)):(delete c[a._id],0===--this._frameItemCount&&this.detach("frame",this._handleFrameItems))},_handleFrameItems:function(a){for(var c in this._frameItems){var d=this._frameItems[c];d.item.fire("frame",new b(a,{time:d.time+=a.delta,count:d.count++}))}},_update:function(){this._project._needsUpdate=!0,this._handlingFrame||(this._animate?this._handleFrame():this.update())},_changed:function(a){1&a&&(this._project._needsUpdate=!0)},_transform:function(a){this._matrix.concatenate(a),this._bounds=null,this._update()},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var a=this._viewSize;return new m(a.width,a.height,this,"setViewSize")},setViewSize:function(){var a=k.read(arguments),b=a.subtract(this._viewSize);b.isZero()||(this._viewSize.set(a.width,a.height),this._setViewSize(a),this._bounds=null,this.fire("resize",{size:a,delta:b}),this._update())},_setViewSize:function(a){var b=this._element;b.width=a.width,b.height=a.height},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new n(new h,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var a=h.read(arguments);this.scrollBy(a.subtract(this.getCenter()))},getZoom:function(){return this._zoom},setZoom:function(a){this._transform((new p).scale(a/this._zoom,this.getCenter())),this._zoom=a},isVisible:function(){return P.isInView(this._element)},scrollBy:function(){this._transform((new p).translate(h.read(arguments).negate()))},play:function(){this._animate=!0,this._requested||this._requestFrame()},pause:function(){this._animate=!1},draw:function(){this.update()},projectToView:function(){return this._matrix._transformPoint(h.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(h.read(arguments))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(a,b){return"string"==typeof b&&(b=document.getElementById(b)),new S(a,b)}}},new function(){function a(a){var b=Q.getTarget(a);return b.getAttribute&&R._viewsById[b.getAttribute("id")]}function b(a,b){return a.viewToProject(Q.getOffset(b,a._element))}function c(){if(!R._focused||!R._focused.isVisible())for(var a=0,b=R._views.length;b>a;a++){var c=R._views[a];if(c&&c.isVisible()){R._focused=g=c;break}}}function d(a,b,c){a._handleEvent("mousemove",b,c);var d=a._scope.tool;return d&&d._handleEvent(k&&d.responds("mousedrag")?"mousedrag":"mousemove",b,c),a.update(),d}var e,f,g,h,i,j,k=!1,l=window.navigator;l.pointerEnabled||l.msPointerEnabled?(h="pointerdown MSPointerDown",i="pointermove MSPointerMove",j="pointerup pointercancel MSPointerUp MSPointerCancel"):(h="touchstart",i="touchmove",j="touchend touchcancel","ontouchstart"in window&&l.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(h+=" mousedown",i+=" mousemove",j+=" mouseup"));var m={"selectstart dragstart":function(a){k&&a.preventDefault()}},n={mouseout:function(a){var c=R._focused,e=Q.getRelatedTarget(a);!c||e&&"HTML"!==e.nodeName||d(c,b(c,a),a)},scroll:c};return m[h]=function(c){var d=R._focused=a(c),f=b(d,c);k=!0,d._handleEvent("mousedown",f,c),(e=d._scope.tool)&&e._handleEvent("mousedown",f,c),d.update()},n[i]=function(h){var i=R._focused;if(!k){var j=a(h);j?(i!==j&&d(i,b(i,h),h),f=i,i=R._focused=g=j):g&&g===i&&(i=R._focused=f,c())}if(i){var l=b(i,h);(k||i.getBounds().contains(l))&&(e=d(i,l,h))}},n[j]=function(a){var c=R._focused;if(c&&k){var d=b(c,a);k=!1,c._handleEvent("mouseup",d,a),e&&e._handleEvent("mouseup",d,a),c.update()}},Q.add(document,n),Q.add(window,{load:c}),{_viewEvents:m,_handleEvent:function(){},statics:{updateFocus:c}}}),S=R.extend({_class:"CanvasView",initialize:function(a,b){if(!(b instanceof HTMLCanvasElement)){var c=k.read(arguments);if(c.isZero())throw Error("Cannot create CanvasView with the provided argument: "+[].slice.call(arguments,1));b=Z.getCanvas(c)}if(this._context=b.getContext("2d"),this._eventCounters={},this._pixelRatio=1,"off"!==d.getAttribute(b,"hidpi")){var e=window.devicePixelRatio||1,f=P.getPrefixed(this._context,"backingStorePixelRatio")||1;this._pixelRatio=e/f}R.call(this,a,b)},_setViewSize:function(a){var b=a.width,c=a.height,d=this._pixelRatio,e=this._element,f=e.style;e.width=b*d,e.height=c*d,1!==d&&(f.width=b+"px",f.height=c+"px",this._context.scale(d,d))},getPixelSize:function(a){var b=this._context,c=b.font;return b.font=a+" serif",a=parseFloat(b.font),b.font=c,a},getTextWidth:function(a,b){var c=this._context,d=c.font,e=0;c.font=a;for(var f=0,g=b.length;g>f;f++)e=Math.max(e,c.measureText(b[f]).width);return c.font=d,e},update:function(){var a=this._project;if(!a||!a._needsUpdate)return!1;var b=this._context,c=this._viewSize;return b.clearRect(0,0,c.width+1,c.height+1),a.draw(b,this._matrix,this._pixelRatio),a._needsUpdate=!1,!0}},new function(){function b(b,c,d,e,f,g){function h(b){return b.responds(c)&&(i||(i=new W(c,d,e,f,g?e.subtract(g):null)),b.fire(c,i)&&i.isStopped)?(d.preventDefault(),!0):a}for(var i,j=f;j;){if(h(j))return!0;j=j.getParent()}return h(b)?!0:!1}var c,d,e,f,g,h,i,j,k;return{_handleEvent:function(a,l,m){if(this._eventCounters[a]){var n=this._project,o=n.hitTest(l,{tolerance:0,fill:!0,stroke:!0}),p=o&&o.item,q=!1;switch(a){case"mousedown":for(q=b(this,a,m,l,p),j=g==p&&Date.now()-k<300,f=g=p,c=d=e=l,i=!q&&p;i&&!i.responds("mousedrag");)i=i._parent;break;case"mouseup":q=b(this,a,m,l,p,c),i&&(d&&!d.equals(l)&&b(this,"mousedrag",m,l,i,d),p!==i&&(e=l,b(this,"mousemove",m,l,p,e))),!q&&p&&p===f&&(k=Date.now(),b(this,j&&f.responds("doubleclick")?"doubleclick":"click",m,c,p),j=!1),f=i=null;break;case"mousemove":i&&(q=b(this,"mousedrag",m,l,i,d)),q||(p!==h&&(e=l),q=b(this,a,m,l,p,e)),d=e=l,p!==h&&(b(this,"mouseleave",m,l,h),h=p,b(this,"mouseenter",m,l,p))}return q}}}}),T=b.extend({_class:"Event",initialize:function(a){this.event=a},isPrevented:!1,isStopped:!1,preventDefault:function(){this.isPrevented=!0,this.event.preventDefault()},stopPropagation:function(){this.isStopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getModifiers:function(){return V.modifiers}}),U=T.extend({_class:"KeyEvent",initialize:function(a,b,c,d){T.call(this,d),this.type=a?"keydown":"keyup",this.key=b,this.character=c},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),V=new function(){function a(a,c,e,i){var j,k=e?String.fromCharCode(e):"",l=d[c],m=l||k.toLowerCase(),n=a?"keydown":"keyup",o=R._focused,p=o&&o.isVisible()&&o._scope,q=p&&p.tool;h[m]=a,l&&(j=b.camelize(l))in f&&(f[j]=a),a?g[c]=e:delete g[c],q&&q.responds(n)&&(paper=p,q.fire(n,new U(a,m,k,i)),o&&o.update())}var c,d={8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"option",19:"pause",20:"caps-lock",27:"escape",32:"space",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete",91:"command",93:"command",224:"command"},e={9:!0,13:!0,32:!0},f=new b({shift:!1,control:!1,option:!1,command:!1,capsLock:!1,space:!1}),g={},h={};return Q.add(document,{keydown:function(b){var g=b.which||b.keyCode;g in d||f.command?a(!0,g,g in e||f.command?g:0,b):c=g},keypress:function(b){null!=c&&(a(!0,c,b.which||b.keyCode,b),c=null)},keyup:function(b){var c=b.which||b.keyCode;c in g&&a(!1,c,g[c],b)}}),Q.add(window,{blur:function(b){for(var c in g)a(!1,c,g[c],b)}}),{modifiers:f,isDown:function(a){return!!h[a]}}},W=T.extend({_class:"MouseEvent",initialize:function(a,b,c,d,e){T.call(this,b),this.type=a,this.point=c,this.target=d,this.delta=e},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),X=T.extend({_class:"ToolEvent",_item:null,initialize:function(a,b,c){this.tool=a,this.type=b,this.event=c},_choosePoint:function(a,b){return a?a:b?b.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(a){this._point=a},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(a){this._lastPoint=a},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(a){this._downPoint=a},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(a){this._middlePoint=a},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(a){this._delta=a},getCount:function(){return/^mouse(down|up)$/.test(this.type)?this.tool._downCount:this.tool._count},setCount:function(a){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=a},getItem:function(){if(!this._item){var a=this.tool._scope.project.hitTest(this.getPoint());if(a){for(var b=a.item,c=b._parent;/^(Group|CompoundPath)$/.test(c._class);)b=c,c=c._parent;this._item=b}}return this._item},setItem:function(a){this._item=a},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}});e.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onActivate","onDeactivate","onEditOptions","onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onKeyDown","onKeyUp"],initialize:function(a){e.call(this),this._firstMove=!0,this._count=0,this._downCount=0,this._set(a)},getMinDistance:function(){return this._minDistance},setMinDistance:function(a){this._minDistance=a,null!=this._minDistance&&null!=this._maxDistance&&this._minDistance>this._maxDistance&&(this._maxDistance=this._minDistance)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(a){this._maxDistance=a,null!=this._minDistance&&null!=this._maxDistance&&this._maxDistance<this._minDistance&&(this._minDistance=a)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(a){this._minDistance=a,this._maxDistance=a},_updateEvent:function(a,b,c,d,e,f,g){if(!e){if(null!=c||null!=d){var h=null!=c?c:0,i=b.subtract(this._point),j=i.getLength();if(h>j)return!1;var k=null!=d?d:0;if(0!=k)if(j>k)b=this._point.add(i.normalize(k));else if(g)return!1}if(f&&b.equals(this._point))return!1}switch(this._lastPoint=e&&"mousemove"==a?b:this._point,this._point=b,a){case"mousedown":this._lastPoint=this._downPoint,this._downPoint=this._point,this._downCount++;break;case"mouseup":this._lastPoint=this._downPoint}return this._count=e?0:this._count+1,!0},_fireEvent:function(a,b){var c=paper.project._removeSets;if(c){"mouseup"===a&&(c.mousedrag=null);
var d=c[a];if(d){for(var e in d){var f=d[e];for(var g in c){var h=c[g];h&&h!=d&&delete h[f._id]}f.remove()}c[a]=null}}return this.responds(a)&&this.fire(a,new X(this,a,b))},_handleEvent:function(a,b,c){paper=this._scope;var d=!1;switch(a){case"mousedown":this._updateEvent(a,b,null,null,!0,!1,!1),d=this._fireEvent(a,c);break;case"mousedrag":for(var e=!1,f=!1;this._updateEvent(a,b,this.minDistance,this.maxDistance,!1,e,f);)d=this._fireEvent(a,c)||d,e=!0,f=!0;break;case"mouseup":!b.equals(this._point)&&this._updateEvent("mousedrag",b,this.minDistance,this.maxDistance,!1,!1,!1)&&(d=this._fireEvent("mousedrag",c)),this._updateEvent(a,b,null,this.maxDistance,!1,!1,!1),d=this._fireEvent(a,c)||d,this._updateEvent(a,b,null,null,!0,!1,!1),this._firstMove=!0;break;case"mousemove":for(;this._updateEvent(a,b,this.minDistance,this.maxDistance,this._firstMove,!0,!1);)d=this._fireEvent(a,c)||d,this._firstMove=!1}return d&&c.preventDefault(),d}});var Y={request:function(a,b,c){var d=new(window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP");return d.open(a.toUpperCase(),b,!0),"overrideMimeType"in d&&d.overrideMimeType("text/plain"),d.onreadystatechange=function(){if(4===d.readyState){var a=d.status;if(0!==a&&200!==a)throw Error("Could not load "+b+" (Error "+a+")");c.call(d,d.responseText)}},d.send(null)}},Z={canvases:[],getCanvas:function(a,b){var c,d=!0;"object"==typeof a&&(b=a.height,a=a.width),c=this.canvases.length?this.canvases.pop():document.createElement("canvas");var e=c.getContext("2d");return c.width===a&&c.height===b?d&&e.clearRect(0,0,a+1,b+1):(c.width=a,c.height=b),e.save(),c},getContext:function(a,b){return this.getCanvas(a,b).getContext("2d")},release:function(a){var b=a.canvas?a.canvas:a;b.getContext("2d").restore(),this.canvases.push(b)}},$=new function(){function a(a,b,c){return.2989*a+.587*b+.114*c}function c(b,c,d,e){var f=e-a(b,c,d);n=b+f,o=c+f,p=d+f;var e=a(n,o,p),g=q(n,o,p),h=r(n,o,p);if(0>g){var i=e-g;n=e+(n-e)*e/i,o=e+(o-e)*e/i,p=e+(p-e)*e/i}if(h>255){var j=255-e,k=h-e;n=e+(n-e)*j/k,o=e+(o-e)*j/k,p=e+(p-e)*j/k}}function d(a,b,c){return r(a,b,c)-q(a,b,c)}function e(a,b,c,d){var e,f=[a,b,c],g=r(a,b,c),h=q(a,b,c);h=h===a?0:h===b?1:2,g=g===a?0:g===b?1:2,e=0===q(h,g)?1===r(h,g)?2:1:0,f[g]>f[h]?(f[e]=(f[e]-f[h])*d/(f[g]-f[h]),f[g]=d):f[e]=f[g]=0,f[h]=0,n=f[0],o=f[1],p=f[2]}var f,g,h,i,j,k,l,m,n,o,p,q=Math.min,r=Math.max,s=Math.abs,t={multiply:function(){n=j*f/255,o=k*g/255,p=l*h/255},screen:function(){n=j+f-j*f/255,o=k+g-k*g/255,p=l+h-l*h/255},overlay:function(){n=128>j?2*j*f/255:255-2*(255-j)*(255-f)/255,o=128>k?2*k*g/255:255-2*(255-k)*(255-g)/255,p=128>l?2*l*h/255:255-2*(255-l)*(255-h)/255},"soft-light":function(){var a=f*j/255;n=a+j*(255-(255-j)*(255-f)/255-a)/255,a=g*k/255,o=a+k*(255-(255-k)*(255-g)/255-a)/255,a=h*l/255,p=a+l*(255-(255-l)*(255-h)/255-a)/255},"hard-light":function(){n=128>f?2*f*j/255:255-2*(255-f)*(255-j)/255,o=128>g?2*g*k/255:255-2*(255-g)*(255-k)/255,p=128>h?2*h*l/255:255-2*(255-h)*(255-l)/255},"color-dodge":function(){n=0===j?0:255===f?255:q(255,255*j/(255-f)),o=0===k?0:255===g?255:q(255,255*k/(255-g)),p=0===l?0:255===h?255:q(255,255*l/(255-h))},"color-burn":function(){n=255===j?255:0===f?0:r(0,255-255*(255-j)/f),o=255===k?255:0===g?0:r(0,255-255*(255-k)/g),p=255===l?255:0===h?0:r(0,255-255*(255-l)/h)},darken:function(){n=f>j?j:f,o=g>k?k:g,p=h>l?l:h},lighten:function(){n=j>f?j:f,o=k>g?k:g,p=l>h?l:h},difference:function(){n=j-f,0>n&&(n=-n),o=k-g,0>o&&(o=-o),p=l-h,0>p&&(p=-p)},exclusion:function(){n=j+f*(255-j-j)/255,o=k+g*(255-k-k)/255,p=l+h*(255-l-l)/255},hue:function(){e(f,g,h,d(j,k,l)),c(n,o,p,a(j,k,l))},saturation:function(){e(j,k,l,d(f,g,h)),c(n,o,p,a(j,k,l))},luminosity:function(){c(j,k,l,a(f,g,h))},color:function(){c(f,g,h,a(j,k,l))},add:function(){n=q(j+f,255),o=q(k+g,255),p=q(l+h,255)},subtract:function(){n=r(j-f,0),o=r(k-g,0),p=r(l-h,0)},average:function(){n=(j+f)/2,o=(k+g)/2,p=(l+h)/2},negation:function(){n=255-s(255-f-j),o=255-s(255-g-k),p=255-s(255-h-l)}},u=this.nativeModes=b.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(a){this[a]=!0},{}),v=Z.getContext(1,1);b.each(t,function(a,b){var c="darken"===b,d=!1;v.save();try{v.fillStyle=c?"#300":"#a00",v.fillRect(0,0,1,1),v.globalCompositeOperation=b,v.globalCompositeOperation===b&&(v.fillStyle=c?"#a00":"#300",v.fillRect(0,0,1,1),d=v.getImageData(0,0,1,1).data[0]!==c?170:51)}catch(e){}v.restore(),u[b]=d}),Z.release(v),this.process=function(a,b,c,d,e){var q=b.canvas,r="normal"===a;if(r||u[a])c.save(),c.setTransform(1,0,0,1,0,0),c.globalAlpha=d,r||(c.globalCompositeOperation=a),c.drawImage(q,e.x,e.y),c.restore();else{var s=t[a];if(!s)return;for(var v=c.getImageData(e.x,e.y,q.width,q.height),w=v.data,x=b.getImageData(0,0,q.width,q.height).data,y=0,z=w.length;z>y;y+=4){f=x[y],j=w[y],g=x[y+1],k=w[y+1],h=x[y+2],l=w[y+2],i=x[y+3],m=w[y+3],s();var A=i*d/255,B=1-A;w[y]=A*n+B*j,w[y+1]=A*o+B*k,w[y+2]=A*p+B*l,w[y+3]=i*d+B*m}c.putImageData(v,e.x,e.y)}}},_=b.each({fillColor:["fill","color"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{"true":"none","false":"non-scaling-stroke"},function(a,b){return!b&&(a instanceof E||a instanceof w||a instanceof J)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","string"]},function(a,c){var d=b.capitalize(c),e=a[2];this[c]={type:a[1],property:c,attribute:a[0],toSVG:e,fromSVG:e&&b.each(e,function(a,b){this[a]=b},{}),exportFilter:a[3],get:"get"+d,set:"set"+d}},{}),ab={href:"http://www.w3.org/1999/xlink",xlink:"http://www.w3.org/2000/xmlns"};return new function(){function a(a,b){for(var c in b){var d=b[c],e=ab[c];"number"==typeof d&&(d=y.number(d)),e?a.setAttributeNS(e,c,d):a.setAttribute(c,d)}return a}function c(b,c){return a(document.createElementNS("http://www.w3.org/2000/svg",b),c)}function d(a,c,d){var e=new b,f=a.getTranslation();if(c){a=a.shiftless();var h=a._inverseTransform(f);e[d?"cx":"x"]=h.x,e[d?"cy":"y"]=h.y,f=null}if(!a.isIdentity()){var i=a.decompose();if(i&&!i.shearing){var j=[],k=i.rotation,l=i.scaling;f&&!f.isZero()&&j.push("translate("+y.point(f)+")"),k&&j.push("rotate("+y.number(k)+")"),g.isZero(l.x-1)&&g.isZero(l.y-1)||j.push("scale("+y.point(l)+")"),e.transform=j.join(" ")}else e.transform="matrix("+a.getValues().join(",")+")"}return e}function e(b,e){for(var f=d(b._matrix),g=b._children,h=c("g",f),i=0,j=g.length;j>i;i++){var k=g[i],l=w(k,e);if(l)if(k.isClipMask()){var m=c("clipPath");m.appendChild(l),u(k,m,"clip"),a(h,{"clip-path":"url(#"+m.id+")"})}else h.appendChild(l)}return h}function h(a){var b=d(a._matrix,!0),e=a.getSize();return b.x-=e.width/2,b.y-=e.height/2,b.width=e.width,b.height=e.height,b.href=a.toDataURL(),c("image",b)}function j(a,b){if(b.matchShapes){var e=a.toShape(!1);if(e)return k(e,b)}var f,g=a._segments,h=d(a._matrix);if(0===g.length)return null;if(a.isPolygon())if(g.length>=3){f=a._closed?"polygon":"polyline";var j=[];for(i=0,l=g.length;l>i;i++)j.push(y.point(g[i]._point));h.points=j.join(" ")}else{f="line";var m=g[0]._point,n=g[g.length-1]._point;h.set({x1:m.x,y1:m.y,x2:n.x,y2:n.y})}else f="path",h.d=a.getPathData(null,b.precision);return c(f,h)}function k(a){var b=a._type,e=a._radius,f=d(a._matrix,!0,"rectangle"!==b);if("rectangle"===b){b="rect";var g=a._size,h=g.width,i=g.height;f.x-=h/2,f.y-=i/2,f.width=h,f.height=i,e.isZero()&&(e=null)}return e&&("circle"===b?f.r=e:(f.rx=e.width,f.ry=e.height)),c(b,f)}function m(a,b){var e=d(a._matrix),f=a.getPathData(null,b.precision);return f&&(e.d=f),c("path",e)}function n(a,b){var e=d(a._matrix,!0),f=a.getSymbol(),g=s(f,"symbol"),h=f.getDefinition(),i=h.getBounds();return g||(g=c("symbol",{viewBox:y.rectangle(i)}),g.appendChild(w(h,b)),u(f,g,"symbol")),e.href="#"+g.id,e.x+=i.x,e.y+=i.y,e.width=y.number(i.width),e.height=y.number(i.height),c("use",e)}function o(a){var b=s(a,"color");if(!b){var d,e=a.getGradient(),f=e._radial,g=a.getOrigin().transform(),h=a.getDestination().transform();if(f){d={cx:g.x,cy:g.y,r:g.getDistance(h)};var i=a.getHighlight();i&&(i=i.transform(),d.fx=i.x,d.fy=i.y)}else d={x1:g.x,y1:g.y,x2:h.x,y2:h.y};d.gradientUnits="userSpaceOnUse",b=c((f?"radial":"linear")+"Gradient",d);for(var j=e._stops,k=0,l=j.length;l>k;k++){var m=j[k],n=m._color,o=n.getAlpha();d={offset:m._rampPoint,"stop-color":n.toCSS(!0)},1>o&&(d["stop-opacity"]=o),b.appendChild(c("stop",d))}u(a,b,"color")}return"url(#"+b.id+")"}function p(a){var b=c("text",d(a._matrix,!0));return b.textContent=a._content,b}function q(c,d,e){var f={},g=!e&&c.getParent();return null!=c._name&&(f.id=c._name),b.each(_,function(a){var d=a.get,e=a.type,h=c[d]();if(a.exportFilter?a.exportFilter(c,h):!g||!b.equals(g[d](),h)){if("color"===e&&null!=h){var i=h.getAlpha();1>i&&(f[a.attribute+"-opacity"]=i)}f[a.attribute]=null==h?"none":"number"===e?y.number(h):"color"===e?h.gradient?o(h,c):h.toCSS(!0):"array"===e?h.join(","):"lookup"===e?a.toSVG[h]:h}}),1===f.opacity&&delete f.opacity,c._visible||(f.visibility="hidden"),a(d,f)}function s(a,b){return z||(z={ids:{},svgs:{}}),a&&z.svgs[b+"-"+a._id]}function u(a,b,c){z||s();var d=z.ids[c]=(z.ids[c]||0)+1;b.id=c+"-"+d,z.svgs[c+"-"+a._id]=b}function v(a,b){var d=a,e=null;if(z){d="svg"===a.nodeName.toLowerCase()&&a;for(var f in z.svgs)e||(d||(d=c("svg"),d.appendChild(a)),e=d.insertBefore(c("defs"),d.firstChild)),e.appendChild(z.svgs[f]);z=null}return b.asString?(new XMLSerializer).serializeToString(d):d}function w(a,b,c){var d=A[a._class],e=d&&d(a,b);if(e){var f=b.onExport;f&&(e=f(a,e,b)||e);var g=JSON.stringify(a._data);g&&"{}"!==g&&e.setAttribute("data-paper-data",g)}return e&&q(a,e,c)}function x(a){return a||(a={}),y=new f(a.precision),a}var y,z,A={Group:e,Layer:e,Raster:h,Path:j,Shape:k,CompoundPath:m,PlacedSymbol:n,PointText:p};t.inject({exportSVG:function(a){return a=x(a),v(w(this,a,!0),a)}}),r.inject({exportSVG:function(a){a=x(a);var b=this.layers,e=this.getView(),f=e.getViewSize(),g=c("svg",{x:0,y:0,width:f.width,height:f.height,version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),h=g,i=e._matrix;i.isIdentity()||(h=g.appendChild(c("g",d(i))));for(var j=0,k=b.length;k>j;j++)h.appendChild(w(b[j],a,!0));return v(g,a)}})},new function(){function c(a,b,c,d){var e=ab[b],f=e?a.getAttributeNS(e,b):a.getAttribute(b);return"null"===f&&(f=null),null==f?d?null:c?"":0:c?f:parseFloat(f)}function d(a,b,d,e){return b=c(a,b,!1,e),d=c(a,d,!1,e),!e||null!=b&&null!=d?new h(b,d):null}function e(a,b,d,e){return b=c(a,b,!1,e),d=c(a,d,!1,e),!e||null!=b&&null!=d?new k(b,d):null}function f(a,b,c){return"none"===a?null:"number"===b?parseFloat(a):"array"===b?a?a.split(/[\s,]+/g).map(parseFloat):[]:"color"===b?y(a)||a:"lookup"===b?c[a]:a}function g(a,b,c,d){var e=a.childNodes,f="clippath"===b,g=new u,h=g._project,i=h._currentStyle,j=[];f||(g=v(g,a,d),h._currentStyle=g._style.clone());for(var k=0,l=e.length;l>k;k++){var m,n=e[k];1!==n.nodeType||!(m=z(n,c,!1))||m instanceof s||j.push(m)}return g.addChildren(j),f&&(g=v(g.reduce(),a,d)),h._currentStyle=i,(f||"defs"===b)&&(g.remove(),g=null),g}function i(a,b){for(var c=a.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),d=[],e=0,f=c.length;f>e;e+=2)d.push(new h(parseFloat(c[e]),parseFloat(c[e+1])));var g=new F(d);return"polygon"===b&&g.closePath(),g}function j(a){var b=a.getAttribute("d"),c={pathData:b};return b.match(/m/gi).length>1||/z\S+/i.test(b)?new G(c):new F(c)}function l(a,b){var e,f=(c(a,"href",!0)||"").substring(1),g="radialgradient"===b;if(f)e=C[f].getGradient();else{for(var h=a.childNodes,i=[],j=0,k=h.length;k>j;j++){var l=h[j];1===l.nodeType&&i.push(v(new N,l))}e=new M(i,g)}var m,n,o;return g?(m=d(a,"cx","cy"),n=m.add(c(a,"r"),0),o=d(a,"fx","fy",!0)):(m=d(a,"x1","y1"),n=d(a,"x2","y2")),v(new L(e,m,n,o),a),null}function m(a,b,c,d){for(var e=(d.getAttribute(c)||"").split(/\)\s*/g),f=new p,g=0,h=e.length;h>g;g++){var i=e[g];if(!i)break;for(var j=i.split("("),k=j[0],l=j[1].split(/[\s,]+/g),m=0,n=l.length;n>m;m++)l[m]=parseFloat(l[m]);switch(k){case"matrix":f.concatenate(new p(l[0],l[1],l[2],l[3],l[4],l[5]));break;case"rotate":f.rotate(l[0],l[1],l[2]);break;case"translate":f.translate(l[0],l[1]);break;case"scale":f.scale(l);break;case"skewX":f.skew(l[0],0);break;case"skewY":f.skew(0,l[0])}}a.transform(f)}function o(a,b,c){var d=a["fill-opacity"===c?"getFillColor":"getStrokeColor"]();d&&d.setAlpha(parseFloat(b))}function q(c,d,e){var f=c.attributes[d],g=f&&f.value;if(!g){var h=b.camelize(d);g=c.style[h],g||e.node[h]===e.parent[h]||(g=e.node[h])}return g?"none"===g?null:g:a}function v(c,d,e){var f={node:P.getStyles(d)||{},parent:!e&&P.getStyles(d.parentNode)||{}};return b.each(B,function(e,g){var h=q(d,g,f);h!==a&&(c=b.pick(e(c,h,g,d,f),c))}),c}function y(a){var b=a&&a.match(/\((?:#|)([^)']+)/);return b&&C[b[1]]}function z(a,b,c){function d(a){paper=f;var d=z(a,b,c),e=b.onLoad,g=f.project&&f.getView();e&&e.call(this,d),g.update()}if(!a)return null;b?"function"==typeof b&&(b={onLoad:b}):b={};var e=a,f=paper;if(c)if("string"!=typeof a||/^.*</.test(a)){if("undefined"!=typeof File&&a instanceof File){var g=new FileReader;return g.onload=function(){d(g.result)},g.readAsText(a)}}else{if(e=document.getElementById(a),!e)return Y.request("get",a,d);a=null}if("string"==typeof a&&(e=(new DOMParser).parseFromString(a,"image/svg+xml")),!e.nodeName)throw Error("Unsupported SVG source: "+a);var h,i=e.nodeName.toLowerCase(),j=A[i],k=e.getAttribute&&e.getAttribute("data-paper-data"),l=f.settings,m=l.applyMatrix;if(l.applyMatrix=!1,h=j&&j(e,i,b,c)||null,l.applyMatrix=m,h){"#document"===i||h instanceof u||(h=v(h,e,c));var n=b.onImport;n&&(h=n(e,h,b)||h),b.expandShapes&&h instanceof w&&(h.remove(),h=h.toPath()),k&&(h._data=JSON.parse(k))}return c&&(C={}),h}var A={"#document":function(a,b,c,d){for(var e=a.childNodes,f=0,g=e.length;g>f;f++){var h=e[f];if(1===h.nodeType){var i=h.nextSibling;document.body.appendChild(h);var j=z(h,c,d);return i?a.insertBefore(h,i):a.appendChild(h),j}}},g:g,svg:g,clippath:g,polygon:i,polyline:i,path:j,lineargradient:l,radialgradient:l,image:function(a){var b=new x(c(a,"href",!0));return b.attach("load",function(){var b=e(a,"width","height");this.setSize(b);var c=this._matrix._transformPoint(d(a,"x","y").add(b.divide(2)));this.translate(c)}),b},symbol:function(a,b,c,d){return new s(g(a,b,c,d),!0)},defs:g,use:function(a){var b=(c(a,"href",!0)||"").substring(1),e=C[b],f=d(a,"x","y");return e?e instanceof s?e.place(f):e.clone().translate(f):null},circle:function(a){return new w.Circle(d(a,"cx","cy"),c(a,"r"))},ellipse:function(a){return new w.Ellipse({center:d(a,"cx","cy"),radius:e(a,"rx","ry")})},rect:function(a){var b=d(a,"x","y"),c=e(a,"width","height"),f=e(a,"rx","ry");return new w.Rectangle(new n(b,c),f)},line:function(a){return new F.Line(d(a,"x1","y1"),d(a,"x2","y2"))},text:function(a){var b=new K(d(a,"x","y").add(d(a,"dx","dy")));return b.setContent(a.textContent.trim()||""),b}},B=b.each(_,function(a){this[a.attribute]=function(b,c){if(b[a.set](f(c,a.type,a.fromSVG)),"color"===a.type&&b instanceof w){var d=b[a.get]();d&&d.transform((new p).translate(b.getPosition(!0).negate()))}}},{id:function(a,b){C[b]=a,a.setName&&a.setName(b)},"clip-path":function(a,b){var c=y(b);if(c){if(c=c.clone(),c.setClipMask(!0),!(a instanceof u))return new u(c,a);a.insertChild(0,c)}},gradientTransform:m,transform:m,"fill-opacity":o,"stroke-opacity":o,visibility:function(a,b){a.setVisible("visible"===b)},display:function(a,b){a.setVisible(null!==b)},"stop-color":function(a,b){a.setColor&&a.setColor(b)},"stop-opacity":function(a,b){a._color&&a._color.setAlpha(parseFloat(b))},offset:function(a,b){var c=b.match(/(.*)%$/);a.setRampPoint(c?c[1]/100:parseFloat(b))},viewBox:function(a,b,c,d,g){var h=new n(f(b,"array")),i=e(d,"width","height",!0);if(a instanceof u){var j=i?h.getSize().divide(i):1,k=(new p).translate(h.getPoint()).scale(j);a.transform(k.inverted())}else if(a instanceof s){i&&h.setSize(i);var l="visible"!=q(d,"overflow",g),m=a._definition;l&&!h.contains(m.getBounds())&&(l=new w.Rectangle(h).transform(m._matrix),l.setClipMask(!0),m.addChild(l))}}}),C={};t.inject({importSVG:function(a,b){return this.addChild(z(a,b,!0))}}),r.inject({importSVG:function(a,b){return this.activate(),z(a,b,!0)}})},paper=new(d.inject(b.exports,{enumerable:!0,Base:b,Numerical:g,DomElement:P,DomEvent:Q,Http:Y,Key:V})),"function"==typeof define&&define.amd?define("paper",paper):"object"==typeof module&&module&&"object"==typeof module.exports&&(module.exports=paper),paper};!function(){this.MooTools={version:"1.5.1",build:"0542c135fdeb7feed7d9917e01447a408f22c876"};var a=this.typeOf=function(a){if(null==a)return"null";if(null!=a.$family)return a.$family();if(a.nodeName){if(1==a.nodeType)return"element";if(3==a.nodeType)return/\S/.test(a.nodeValue)?"textnode":"whitespace"}else if("number"==typeof a.length){if("callee"in a)return"arguments";if("item"in a)return"collection"}return typeof a},b=(this.instanceOf=function(a,b){if(null==a)return!1;for(var c=a.$constructor||a.constructor;c;){if(c===b)return!0;c=c.parent}return a.hasOwnProperty?a instanceof b:!1},this.Function),c=!0;for(var d in{toString:1})c=null;c&&(c=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]),b.prototype.overloadSetter=function(a){var b=this;return function(d,e){if(null==d)return this;if(a||"string"!=typeof d){for(var f in d)b.call(this,f,d[f]);if(c)for(var g=c.length;g--;)f=c[g],d.hasOwnProperty(f)&&b.call(this,f,d[f])}else b.call(this,d,e);return this}},b.prototype.overloadGetter=function(a){var b=this;return function(c){var d,e;if("string"!=typeof c?d=c:arguments.length>1?d=arguments:a&&(d=[c]),d){e={};for(var f=0;f<d.length;f++)e[d[f]]=b.call(this,d[f])}else e=b.call(this,c);return e}},b.prototype.extend=function(a,b){this[a]=b}.overloadSetter(),b.prototype.implement=function(a,b){this.prototype[a]=b}.overloadSetter();var e=Array.prototype.slice;b.from=function(b){return"function"==a(b)?b:function(){return b}},Array.from=function(b){return null==b?[]:f.isEnumerable(b)&&"string"!=typeof b?"array"==a(b)?b:e.call(b):[b]},Number.from=function(a){var b=parseFloat(a);return isFinite(b)?b:null},String.from=function(a){return a+""},b.implement({hide:function(){return this.$hidden=!0,this},protect:function(){return this.$protected=!0,this}});var f=this.Type=function(b,c){if(b){var d=b.toLowerCase(),e=function(b){return a(b)==d};f["is"+b]=e,null!=c&&(c.prototype.$family=function(){return d}.hide())}return null==c?null:(c.extend(this),c.$constructor=f,c.prototype.$constructor=c,c)},g=Object.prototype.toString;f.isEnumerable=function(a){return null!=a&&"number"==typeof a.length&&"[object Function]"!=g.call(a)};var h={},i=function(b){var c=a(b.prototype);return h[c]||(h[c]=[])},j=function(b,c){if(!c||!c.$hidden){for(var d=i(this),f=0;f<d.length;f++){var g=d[f];"type"==a(g)?j.call(g,b,c):g.call(this,b,c)}var h=this.prototype[b];null!=h&&h.$protected||(this.prototype[b]=c),null==this[b]&&"function"==a(c)&&k.call(this,b,function(a){return c.apply(a,e.call(arguments,1))})}},k=function(a,b){if(!b||!b.$hidden){var c=this[a];null!=c&&c.$protected||(this[a]=b)}};f.implement({implement:j.overloadSetter(),extend:k.overloadSetter(),alias:function(a,b){j.call(this,a,this.prototype[b])}.overloadSetter(),mirror:function(a){return i(this).push(a),this}}),new f("Type",f);var l=function(a,b,c){var d=b!=Object,e=b.prototype;d&&(b=new f(a,b));for(var g=0,h=c.length;h>g;g++){var i=c[g],j=b[i],k=e[i];j&&j.protect(),d&&k&&b.implement(i,k.protect())}if(d){var m=e.propertyIsEnumerable(c[0]);b.forEachMethod=function(a){if(!m)for(var b=0,d=c.length;d>b;b++)a.call(e,e[c[b]],c[b]);for(var f in e)a.call(e,e[f],f)}}return l};l("String",String,["charAt","charCodeAt","concat","contains","indexOf","lastIndexOf","match","quote","replace","search","slice","split","substr","substring","trim","toLowerCase","toUpperCase"])("Array",Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight"])("Number",Number,["toExponential","toFixed","toLocaleString","toPrecision"])("Function",b,["apply","call","bind"])("RegExp",RegExp,["exec","test"])("Object",Object,["create","defineProperty","defineProperties","keys","getPrototypeOf","getOwnPropertyDescriptor","getOwnPropertyNames","preventExtensions","isExtensible","seal","isSealed","freeze","isFrozen"])("Date",Date,["now"]),Object.extend=k.overloadSetter(),Date.extend("now",function(){return+new Date}),new f("Boolean",Boolean),Number.prototype.$family=function(){return isFinite(this)?"number":"null"}.hide(),Number.extend("random",function(a,b){return Math.floor(Math.random()*(b-a+1)+a)});var m=Object.prototype.hasOwnProperty;Object.extend("forEach",function(a,b,c){for(var d in a)m.call(a,d)&&b.call(c,a[d],d,a)}),Object.each=Object.forEach,Array.implement({forEach:function(a,b){for(var c=0,d=this.length;d>c;c++)c in this&&a.call(b,this[c],c,this)},each:function(a,b){return Array.forEach(this,a,b),this}});var n=function(b){switch(a(b)){case"array":return b.clone();case"object":return Object.clone(b);default:return b}};Array.implement("clone",function(){for(var a=this.length,b=new Array(a);a--;)b[a]=n(this[a]);return b});var o=function(b,c,d){switch(a(d)){case"object":"object"==a(b[c])?Object.merge(b[c],d):b[c]=Object.clone(d);break;case"array":b[c]=d.clone();break;default:b[c]=d}return b};Object.extend({merge:function(b,c,d){if("string"==a(c))return o(b,c,d);for(var e=1,f=arguments.length;f>e;e++){var g=arguments[e];for(var h in g)o(b,h,g[h])}return b},clone:function(a){var b={};for(var c in a)b[c]=n(a[c]);return b},append:function(a){for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b]||{};for(var e in d)a[e]=d[e]}return a}}),["Object","WhiteSpace","TextNode","Collection","Arguments"].each(function(a){new f(a)});var p=Date.now();String.extend("uniqueID",function(){return(p++).toString(36)})}(),Array.implement({every:function(a,b){for(var c=0,d=this.length>>>0;d>c;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0},filter:function(a,b){for(var c,d=[],e=0,f=this.length>>>0;f>e;e++)e in this&&(c=this[e],a.call(b,c,e,this)&&d.push(c));return d},indexOf:function(a,b){for(var c=this.length>>>0,d=0>b?Math.max(0,c+b):b||0;c>d;d++)if(this[d]===a)return d;return-1},map:function(a,b){for(var c=this.length>>>0,d=Array(c),e=0;c>e;e++)e in this&&(d[e]=a.call(b,this[e],e,this));return d},some:function(a,b){for(var c=0,d=this.length>>>0;d>c;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1},clean:function(){return this.filter(function(a){return null!=a})},invoke:function(a){var b=Array.slice(arguments,1);return this.map(function(c){return c[a].apply(c,b)})},associate:function(a){for(var b={},c=Math.min(this.length,a.length),d=0;c>d;d++)b[a[d]]=this[d];return b},link:function(a){for(var b={},c=0,d=this.length;d>c;c++)for(var e in a)if(a[e](this[c])){b[e]=this[c],delete a[e];break}return b},contains:function(a,b){return-1!=this.indexOf(a,b)},append:function(a){return this.push.apply(this,a),this},getLast:function(){return this.length?this[this.length-1]:null},getRandom:function(){return this.length?this[Number.random(0,this.length-1)]:null},include:function(a){return this.contains(a)||this.push(a),this},combine:function(a){for(var b=0,c=a.length;c>b;b++)this.include(a[b]);return this},erase:function(a){for(var b=this.length;b--;)this[b]===a&&this.splice(b,1);return this},empty:function(){return this.length=0,this},flatten:function(){for(var a=[],b=0,c=this.length;c>b;b++){var d=typeOf(this[b]);"null"!=d&&(a=a.concat("array"==d||"collection"==d||"arguments"==d||instanceOf(this[b],Array)?Array.flatten(this[b]):this[b]))}return a},pick:function(){for(var a=0,b=this.length;b>a;a++)if(null!=this[a])return this[a];return null},hexToRgb:function(a){if(3!=this.length)return null;var b=this.map(function(a){return 1==a.length&&(a+=a),parseInt(a,16)});return a?b:"rgb("+b+")"},rgbToHex:function(a){if(this.length<3)return null;if(4==this.length&&0==this[3]&&!a)return"transparent";for(var b=[],c=0;3>c;c++){var d=(this[c]-0).toString(16);b.push(1==d.length?"0"+d:d)}return a?b:"#"+b.join("")}}),Function.extend({attempt:function(){for(var a=0,b=arguments.length;b>a;a++)try{return arguments[a]()}catch(c){}return null}}),Function.implement({attempt:function(a,b){try{return this.apply(b,Array.from(a))}catch(c){}return null},bind:function(a){var b=this,c=arguments.length>1?Array.slice(arguments,1):null,d=function(){},e=function(){var f=a,g=arguments.length;this instanceof e&&(d.prototype=b.prototype,f=new d);var h=c||g?b.apply(f,c&&g?c.concat(Array.slice(arguments)):c||arguments):b.call(f);return f==a?h:f};return e},pass:function(a,b){var c=this;return null!=a&&(a=Array.from(a)),function(){return c.apply(b,a||arguments)}},delay:function(a,b,c){return setTimeout(this.pass(null==c?[]:c,b),a)},periodical:function(a,b,c){return setInterval(this.pass(null==c?[]:c,b),a)}}),Number.implement({limit:function(a,b){return Math.min(b,Math.max(a,this))},round:function(a){return a=Math.pow(10,a||0).toFixed(0>a?-a:0),Math.round(this*a)/a},times:function(a,b){for(var c=0;this>c;c++)a.call(b,c,this)},toFloat:function(){return parseFloat(this)},toInt:function(a){return parseInt(this,a||10)}}),Number.alias("each","times"),function(a){var b={};a.each(function(a){Number[a]||(b[a]=function(){return Math[a].apply(null,[this].concat(Array.from(arguments)))})}),Number.implement(b)}(["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","sin","sqrt","tan"]),String.implement({contains:function(a,b){return(b?String(this).slice(b):String(this)).indexOf(a)>-1},test:function(a,b){return("regexp"==typeOf(a)?a:new RegExp(""+a,b)).test(this)},trim:function(){return String(this).replace(/^\s+|\s+$/g,"")},clean:function(){return String(this).replace(/\s+/g," ").trim()},camelCase:function(){return String(this).replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()})},hyphenate:function(){return String(this).replace(/[A-Z]/g,function(a){return"-"+a.charAt(0).toLowerCase()})},capitalize:function(){return String(this).replace(/\b[a-z]/g,function(a){return a.toUpperCase()})},escapeRegExp:function(){return String(this).replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},toInt:function(a){return parseInt(this,a||10)},toFloat:function(){return parseFloat(this)},hexToRgb:function(a){var b=String(this).match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return b?b.slice(1).hexToRgb(a):null},rgbToHex:function(a){var b=String(this).match(/\d{1,3}/g);return b?b.rgbToHex(a):null},substitute:function(a,b){return String(this).replace(b||/\\?\{([^{}]+)\}/g,function(b,c){return"\\"==b.charAt(0)?b.slice(1):null!=a[c]?a[c]:""})}}),function(){var a=this.document,b=a.window=this,c=function(a,b){a=a.toLowerCase(),b=b?b.toLowerCase():"";var c=a.match(/(opera|ie|firefox|chrome|trident|crios|version)[\s\/:]([\w\d\.]+)?.*?(safari|(?:rv[\s\/:]|version[\s\/:])([\w\d\.]+)|$)/)||[null,"unknown",0];return"trident"==c[1]?(c[1]="ie",c[4]&&(c[2]=c[4])):"crios"==c[1]&&(c[1]="chrome"),b=a.match(/ip(?:ad|od|hone)/)?"ios":(a.match(/(?:webos|android)/)||b.match(/mac|win|linux/)||["other"])[0],"win"==b&&(b="windows"),{extend:Function.prototype.extend,name:"version"==c[1]?c[3]:c[1],version:parseFloat("opera"==c[1]&&c[4]?c[4]:c[2]),platform:b}},d=this.Browser=c(navigator.userAgent,navigator.platform);if("ie"==d.name&&(d.version=a.documentMode),d.extend({Features:{xpath:!!a.evaluate,air:!!b.runtime,query:!!a.querySelector,json:!!b.JSON},parseUA:c}),d.Request=function(){var a=function(){return new XMLHttpRequest},b=function(){return new ActiveXObject("MSXML2.XMLHTTP")},c=function(){return new ActiveXObject("Microsoft.XMLHTTP")};return Function.attempt(function(){return a(),a},function(){return b(),b},function(){return c(),c})}(),d.Features.xhr=!!d.Request,d.exec=function(c){if(!c)return c;if(b.execScript)b.execScript(c);else{var d=a.createElement("script");d.setAttribute("type","text/javascript"),d.text=c,a.head.appendChild(d),a.head.removeChild(d)}return c},String.implement("stripScripts",function(a){var b="",c=this.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(a,c){return b+=c+"\n",""});return a===!0?d.exec(b):"function"==typeOf(a)&&a(b,c),c}),d.extend({Document:this.Document,Window:this.Window,Element:this.Element,Event:this.Event}),this.Window=this.$constructor=new Type("Window",function(){}),this.$family=Function.from("window").hide(),Window.mirror(function(a,c){b[a]=c}),this.Document=a.$constructor=new Type("Document",function(){}),a.$family=Function.from("document").hide(),Document.mirror(function(b,c){a[b]=c}),a.html=a.documentElement,a.head||(a.head=a.getElementsByTagName("head")[0]),a.execCommand)try{a.execCommand("BackgroundImageCache",!1,!0)}catch(e){}if(this.attachEvent&&!this.addEventListener){var f=function(){this.detachEvent("onunload",f),a.head=a.html=a.window=null,b=this.Window=a=null};this.attachEvent("onunload",f)}var g=Array.from;try{g(a.html.childNodes)}catch(e){Array.from=function(a){if("string"!=typeof a&&Type.isEnumerable(a)&&"array"!=typeOf(a)){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}return g(a)};var h=Array.prototype,i=h.slice;["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice"].each(function(a){var b=h[a];Array[a]=function(a){return b.apply(Array.from(a),i.call(arguments,1))}})}}(),function(){var a=this.Class=new Type("Class",function(d){instanceOf(d,Function)&&(d={initialize:d});var e=function(){if(c(this),e.$prototyping)return this;this.$caller=null;var a=this.initialize?this.initialize.apply(this,arguments):this;return this.$caller=this.caller=null,a}.extend(this).implement(d);return e.$constructor=a,e.prototype.$constructor=e,e.prototype.parent=b,e}),b=function(){if(!this.$caller)throw new Error('The method "parent" cannot be called.');var a=this.$caller.$name,b=this.$caller.$owner.parent,c=b?b.prototype[a]:null;if(!c)throw new Error('The method "'+a+'" has no parent.');return c.apply(this,arguments)},c=function(a){for(var b in a){var d=a[b];switch(typeOf(d)){case"object":var e=function(){};e.prototype=d,a[b]=c(new e);break;case"array":a[b]=d.clone()}}return a},d=function(a,b,c){c.$origin&&(c=c.$origin);var d=function(){if(c.$protected&&null==this.$caller)throw new Error('The method "'+b+'" cannot be called.');var a=this.caller,e=this.$caller;this.caller=e,this.$caller=d;var f=c.apply(this,arguments);return this.$caller=e,this.caller=a,f}.extend({$owner:a,$origin:c,$name:b});return d},e=function(b,c,e){if(a.Mutators.hasOwnProperty(b)&&(c=a.Mutators[b].call(this,c),null==c))return this;if("function"==typeOf(c)){if(c.$hidden)return this;this.prototype[b]=e?c:d(this,b,c)}else Object.merge(this.prototype,b,c);return this},f=function(a){a.$prototyping=!0;var b=new a;return delete a.$prototyping,b};a.implement("implement",e.overloadSetter()),a.Mutators={Extends:function(a){this.parent=a,this.prototype=f(a)},Implements:function(a){Array.from(a).each(function(a){var b=new a;for(var c in b)e.call(this,c,b[c],!0)},this)}}}(),function(){this.Chain=new Class({$chain:[],chain:function(){return this.$chain.append(Array.flatten(arguments)),this},callChain:function(){return this.$chain.length?this.$chain.shift().apply(this,arguments):!1},clearChain:function(){return this.$chain.empty(),this}});var a=function(a){return a.replace(/^on([A-Z])/,function(a,b){return b.toLowerCase()})};this.Events=new Class({$events:{},addEvent:function(b,c,d){return b=a(b),this.$events[b]=(this.$events[b]||[]).include(c),d&&(c.internal=!0),this
},addEvents:function(a){for(var b in a)this.addEvent(b,a[b]);return this},fireEvent:function(b,c,d){b=a(b);var e=this.$events[b];return e?(c=Array.from(c),e.each(function(a){d?a.delay(d,this,c):a.apply(this,c)},this),this):this},removeEvent:function(b,c){b=a(b);var d=this.$events[b];if(d&&!c.internal){var e=d.indexOf(c);-1!=e&&delete d[e]}return this},removeEvents:function(b){var c;if("object"==typeOf(b)){for(c in b)this.removeEvent(c,b[c]);return this}b&&(b=a(b));for(c in this.$events)if(!b||b==c)for(var d=this.$events[c],e=d.length;e--;)e in d&&this.removeEvent(c,d[e]);return this}}),this.Options=new Class({setOptions:function(){var a=this.options=Object.merge.apply(null,[{},this.options].append(arguments));if(this.addEvent)for(var b in a)"function"==typeOf(a[b])&&/^on[A-Z]/.test(b)&&(this.addEvent(b,a[b]),delete a[b]);return this}})}(),function(){var a=Object.prototype.hasOwnProperty;Object.extend({subset:function(a,b){for(var c={},d=0,e=b.length;e>d;d++){var f=b[d];f in a&&(c[f]=a[f])}return c},map:function(b,c,d){var e={};for(var f in b)a.call(b,f)&&(e[f]=c.call(d,b[f],f,b));return e},filter:function(b,c,d){var e={};for(var f in b){var g=b[f];a.call(b,f)&&c.call(d,g,f,b)&&(e[f]=g)}return e},every:function(b,c,d){for(var e in b)if(a.call(b,e)&&!c.call(d,b[e],e))return!1;return!0},some:function(b,c,d){for(var e in b)if(a.call(b,e)&&c.call(d,b[e],e))return!0;return!1},keys:function(b){var c=[];for(var d in b)a.call(b,d)&&c.push(d);return c},values:function(b){var c=[];for(var d in b)a.call(b,d)&&c.push(b[d]);return c},getLength:function(a){return Object.keys(a).length},keyOf:function(b,c){for(var d in b)if(a.call(b,d)&&b[d]===c)return d;return null},contains:function(a,b){return null!=Object.keyOf(a,b)},toQueryString:function(a,b){var c=[];return Object.each(a,function(a,d){b&&(d=b+"["+d+"]");var e;switch(typeOf(a)){case"object":e=Object.toQueryString(a,d);break;case"array":var f={};a.each(function(a,b){f[b]=a}),e=Object.toQueryString(f,d);break;default:e=d+"="+encodeURIComponent(a)}null!=a&&c.push(e)}),c.join("&")}})}(),function(){function a(a,f,g,i,k,m,n,o,p,q,r,s,t,u,v,w){if((f||-1===c)&&(b.expressions[++c]=[],d=-1,f))return"";if(g||i||-1===d){g=g||" ";var x=b.expressions[c];e&&x[d]&&(x[d].reverseCombinator=j(g)),x[++d]={combinator:g,tag:"*"}}var y=b.expressions[c][d];if(k)y.tag=k.replace(h,"");else if(m)y.id=m.replace(h,"");else if(n)n=n.replace(h,""),y.classList||(y.classList=[]),y.classes||(y.classes=[]),y.classList.push(n),y.classes.push({value:n,regexp:new RegExp("(^|\\s)"+l(n)+"(\\s|$)")});else if(t)w=w||v,w=w?w.replace(h,""):null,y.pseudos||(y.pseudos=[]),y.pseudos.push({key:t.replace(h,""),value:w,type:1==s.length?"class":"element"});else if(o){o=o.replace(h,""),r=(r||"").replace(h,"");var z,A;switch(p){case"^=":A=new RegExp("^"+l(r));break;case"$=":A=new RegExp(l(r)+"$");break;case"~=":A=new RegExp("(^|\\s)"+l(r)+"(\\s|$)");break;case"|=":A=new RegExp("^"+l(r)+"(-|$)");break;case"=":z=function(a){return r==a};break;case"*=":z=function(a){return a&&a.indexOf(r)>-1};break;case"!=":z=function(a){return r!=a};break;default:z=function(a){return!!a}}""==r&&/^[*$^]=$/.test(p)&&(z=function(){return!1}),z||(z=function(a){return a&&A.test(a)}),y.attributes||(y.attributes=[]),y.attributes.push({key:o,operator:p,value:r,test:z})}return""}var b,c,d,e,f={},g={},h=/\\/g,i=function(d,h){if(null==d)return null;if(d.Slick===!0)return d;d=(""+d).replace(/^\s+|\s+$/g,""),e=!!h;var j=e?g:f;if(j[d])return j[d];for(b={Slick:!0,expressions:[],raw:d,reverse:function(){return i(this.raw,!0)}},c=-1;d!=(d=d.replace(m,a)););return b.length=b.expressions.length,j[b.raw]=e?k(b):b},j=function(a){return"!"===a?" ":" "===a?"!":/^!/.test(a)?a.replace(/^!/,""):"!"+a},k=function(a){for(var b=a.expressions,c=0;c<b.length;c++){for(var d=b[c],e={parts:[],tag:"*",combinator:j(d[0].combinator)},f=0;f<d.length;f++){var g=d[f];g.reverseCombinator||(g.reverseCombinator=" "),g.combinator=g.reverseCombinator,delete g.reverseCombinator}d.reverse().push(e)}return a},l=function(a){return a.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(a){return"\\"+a})},m=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+l(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),n=this.Slick||{};n.parse=function(a){return i(a)},n.escapeRegExp=l,this.Slick||(this.Slick=n)}.apply("undefined"!=typeof exports?exports:this),function(){var a={},b={},c=Object.prototype.toString;a.isNativeCode=function(a){return/\{\s*\[native code\]\s*\}/.test(""+a)},a.isXML=function(a){return!!a.xmlVersion||!!a.xml||"[object XMLDocument]"==c.call(a)||9==a.nodeType&&"HTML"!=a.documentElement.nodeName},a.setDocument=function(a){var c=a.nodeType;if(9==c);else if(c)a=a.ownerDocument;else{if(!a.navigator)return;a=a.document}if(this.document!==a){this.document=a;var d,e=a.documentElement,f=this.getUIDXML(e),g=b[f];if(g)for(d in g)this[d]=g[d];else{g=b[f]={},g.root=e,g.isXMLDocument=this.isXML(a),g.brokenStarGEBTN=g.starSelectsClosedQSA=g.idGetsName=g.brokenMixedCaseQSA=g.brokenGEBCN=g.brokenCheckedQSA=g.brokenEmptyAttributeQSA=g.isHTMLDocument=g.nativeMatchesSelector=!1;var h,i,j,k,l,m,n="slick_uniqueid",o=a.createElement("div"),p=a.body||a.getElementsByTagName("body")[0]||e;p.appendChild(o);try{o.innerHTML='<a id="'+n+'"></a>',g.isHTMLDocument=!!a.getElementById(n)}catch(q){}if(g.isHTMLDocument){o.style.display="none",o.appendChild(a.createComment("")),i=o.getElementsByTagName("*").length>1;try{o.innerHTML="foo</foo>",m=o.getElementsByTagName("*"),h=m&&!!m.length&&"/"==m[0].nodeName.charAt(0)}catch(q){}g.brokenStarGEBTN=i||h;try{o.innerHTML='<a name="'+n+'"></a><b id="'+n+'"></b>',g.idGetsName=a.getElementById(n)===o.firstChild}catch(q){}if(o.getElementsByClassName){try{o.innerHTML='<a class="f"></a><a class="b"></a>',o.getElementsByClassName("b").length,o.firstChild.className="b",k=2!=o.getElementsByClassName("b").length}catch(q){}try{o.innerHTML='<a class="a"></a><a class="f b a"></a>',j=2!=o.getElementsByClassName("a").length}catch(q){}g.brokenGEBCN=k||j}if(o.querySelectorAll){try{o.innerHTML="foo</foo>",m=o.querySelectorAll("*"),g.starSelectsClosedQSA=m&&!!m.length&&"/"==m[0].nodeName.charAt(0)}catch(q){}try{o.innerHTML='<a class="MiX"></a>',g.brokenMixedCaseQSA=!o.querySelectorAll(".MiX").length}catch(q){}try{o.innerHTML='<select><option selected="selected">a</option></select>',g.brokenCheckedQSA=0==o.querySelectorAll(":checked").length}catch(q){}try{o.innerHTML='<a class=""></a>',g.brokenEmptyAttributeQSA=0!=o.querySelectorAll('[class*=""]').length}catch(q){}}try{o.innerHTML='<form action="s"><input id="action"/></form>',l="s"!=o.firstChild.getAttribute("action")}catch(q){}if(g.nativeMatchesSelector=e.matches||e.mozMatchesSelector||e.webkitMatchesSelector,g.nativeMatchesSelector)try{g.nativeMatchesSelector.call(e,":slick"),g.nativeMatchesSelector=null}catch(q){}}try{e.slick_expando=1,delete e.slick_expando,g.getUID=this.getUIDHTML}catch(q){g.getUID=this.getUIDXML}p.removeChild(o),o=m=p=null,g.getAttribute=g.isHTMLDocument&&l?function(a,b){var c=this.attributeGetters[b];if(c)return c.call(a);var d=a.getAttributeNode(b);return d?d.nodeValue:null}:function(a,b){var c=this.attributeGetters[b];return c?c.call(a):a.getAttribute(b)},g.hasAttribute=e&&this.isNativeCode(e.hasAttribute)?function(a,b){return a.hasAttribute(b)}:function(a,b){return a=a.getAttributeNode(b),!(!a||!a.specified&&!a.nodeValue)};var r=e&&this.isNativeCode(e.contains),s=a&&this.isNativeCode(a.contains);g.contains=r&&s?function(a,b){return a.contains(b)}:r&&!s?function(b,c){return b===c||(b===a?a.documentElement:b).contains(c)}:e&&e.compareDocumentPosition?function(a,b){return a===b||!!(16&a.compareDocumentPosition(b))}:function(a,b){if(b)do if(b===a)return!0;while(b=b.parentNode);return!1},g.documentSorter=e.compareDocumentPosition?function(a,b){return a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b)?-1:a===b?0:1:0}:"sourceIndex"in e?function(a,b){return a.sourceIndex&&b.sourceIndex?a.sourceIndex-b.sourceIndex:0}:a.createRange?function(a,b){if(!a.ownerDocument||!b.ownerDocument)return 0;var c=a.ownerDocument.createRange(),d=b.ownerDocument.createRange();return c.setStart(a,0),c.setEnd(a,0),d.setStart(b,0),d.setEnd(b,0),c.compareBoundaryPoints(Range.START_TO_END,d)}:null,e=null;for(d in g)this[d]=g[d]}}};var d=/^([#.]?)((?:[\w-]+|\*))$/,e=/\[.+[*$^]=(?:""|'')?\]/,f={};a.search=function(a,b,c,g){var h=this.found=g?null:c||[];if(!a)return h;if(a.navigator)a=a.document;else if(!a.nodeType)return h;var i,j,k=this.uniques={},m=!(!c||!c.length),n=9==a.nodeType;if(this.document!==(n?a:a.ownerDocument)&&this.setDocument(a),m)for(j=h.length;j--;)k[this.getUID(h[j])]=!0;if("string"==typeof b){var o=b.match(d);a:if(o){var p,q,r=o[1],s=o[2];if(r){if("#"==r){if(!this.isHTMLDocument||!n)break a;if(p=a.getElementById(s),!p)return h;if(this.idGetsName&&p.getAttributeNode("id").nodeValue!=s)break a;if(g)return p||null;m&&k[this.getUID(p)]||h.push(p)}else if("."==r){if(!this.isHTMLDocument||(!a.getElementsByClassName||this.brokenGEBCN)&&a.querySelectorAll)break a;if(a.getElementsByClassName&&!this.brokenGEBCN){if(q=a.getElementsByClassName(s),g)return q[0]||null;for(j=0;p=q[j++];)m&&k[this.getUID(p)]||h.push(p)}else{var t=new RegExp("(^|\\s)"+l.escapeRegExp(s)+"(\\s|$)");for(q=a.getElementsByTagName("*"),j=0;p=q[j++];)if(className=p.className,className&&t.test(className)){if(g)return p;m&&k[this.getUID(p)]||h.push(p)}}}}else{if("*"==s&&this.brokenStarGEBTN)break a;if(q=a.getElementsByTagName(s),g)return q[0]||null;for(j=0;p=q[j++];)m&&k[this.getUID(p)]||h.push(p)}return m&&this.sort(h),g?null:h}a:if(a.querySelectorAll){if(!this.isHTMLDocument||f[b]||this.brokenMixedCaseQSA||this.brokenCheckedQSA&&b.indexOf(":checked")>-1||this.brokenEmptyAttributeQSA&&e.test(b)||!n&&b.indexOf(",")>-1||l.disableQSA)break a;var u=b,v=a;if(!n){var w=v.getAttribute("id"),x="slickid__";v.setAttribute("id",x),u="#"+x+" "+u,a=v.parentNode}try{if(g)return a.querySelector(u)||null;q=a.querySelectorAll(u)}catch(y){f[b]=1;break a}finally{n||(w?v.setAttribute("id",w):v.removeAttribute("id"),a=v)}if(this.starSelectsClosedQSA)for(j=0;p=q[j++];)!(p.nodeName>"@")||m&&k[this.getUID(p)]||h.push(p);else for(j=0;p=q[j++];)m&&k[this.getUID(p)]||h.push(p);return m&&this.sort(h),h}if(i=this.Slick.parse(b),!i.length)return h}else{if(null==b)return h;if(!b.Slick)return this.contains(a.documentElement||a,b)?(h?h.push(b):h=b,h):h;i=b}this.posNTH={},this.posNTHLast={},this.posNTHType={},this.posNTHTypeLast={},this.push=!m&&(g||1==i.length&&1==i.expressions[0].length)?this.pushArray:this.pushUID,null==h&&(h=[]);var z,A,B,C,D,E,F,G,H,I,J,K,L,M,N=i.expressions;a:for(j=0;K=N[j];j++)for(z=0;L=K[z];z++){if(C="combinator:"+L.combinator,!this[C])continue a;if(D=this.isXMLDocument?L.tag:L.tag.toUpperCase(),E=L.id,F=L.classList,G=L.classes,H=L.attributes,I=L.pseudos,M=z===K.length-1,this.bitUniques={},M?(this.uniques=k,this.found=h):(this.uniques={},this.found=[]),0===z){if(this[C](a,D,E,G,H,I,F),g&&M&&h.length)break a}else if(g&&M){for(A=0,B=J.length;B>A;A++)if(this[C](J[A],D,E,G,H,I,F),h.length)break a}else for(A=0,B=J.length;B>A;A++)this[C](J[A],D,E,G,H,I,F);J=this.found}return(m||i.expressions.length>1)&&this.sort(h),g?h[0]||null:h},a.uidx=1,a.uidk="slick-uniqueid",a.getUIDXML=function(a){var b=a.getAttribute(this.uidk);return b||(b=this.uidx++,a.setAttribute(this.uidk,b)),b},a.getUIDHTML=function(a){return a.uniqueNumber||(a.uniqueNumber=this.uidx++)},a.sort=function(a){return this.documentSorter?(a.sort(this.documentSorter),a):a},a.cacheNTH={},a.matchNTH=/^([+-]?\d*)?([a-z]+)?([+-]\d+)?$/,a.parseNTHArgument=function(a){var b=a.match(this.matchNTH);if(!b)return!1;var c=b[2]||!1,d=b[1]||1;"-"==d&&(d=-1);var e=+b[3]||0;return b="n"==c?{a:d,b:e}:"odd"==c?{a:2,b:1}:"even"==c?{a:2,b:0}:{a:0,b:d},this.cacheNTH[a]=b},a.createNTHPseudo=function(a,b,c,d){return function(e,f){var g=this.getUID(e);if(!this[c][g]){var h=e.parentNode;if(!h)return!1;var i=h[a],j=1;if(d){var k=e.nodeName;do i.nodeName==k&&(this[c][this.getUID(i)]=j++);while(i=i[b])}else do 1==i.nodeType&&(this[c][this.getUID(i)]=j++);while(i=i[b])}f=f||"n";var l=this.cacheNTH[f]||this.parseNTHArgument(f);if(!l)return!1;var m=l.a,n=l.b,o=this[c][g];if(0==m)return n==o;if(m>0){if(n>o)return!1}else if(o>n)return!1;return(o-n)%m==0}},a.pushArray=function(a,b,c,d,e,f){this.matchSelector(a,b,c,d,e,f)&&this.found.push(a)},a.pushUID=function(a,b,c,d,e,f){var g=this.getUID(a);!this.uniques[g]&&this.matchSelector(a,b,c,d,e,f)&&(this.uniques[g]=!0,this.found.push(a))},a.matchNode=function(a,b){if(this.isHTMLDocument&&this.nativeMatchesSelector)try{return this.nativeMatchesSelector.call(a,b.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(c){}var d=this.Slick.parse(b);if(!d)return!0;var e,f,g=d.expressions,h=0;for(e=0;f=g[e];e++)if(1==f.length){var i=f[0];if(this.matchSelector(a,this.isXMLDocument?i.tag:i.tag.toUpperCase(),i.id,i.classes,i.attributes,i.pseudos))return!0;h++}if(h==d.length)return!1;var j,k=this.search(this.document,d);for(e=0;j=k[e++];)if(j===a)return!0;return!1},a.matchPseudo=function(a,b,c){var d="pseudo:"+b;if(this[d])return this[d](a,c);var e=this.getAttribute(a,b);return c?c==e:!!e},a.matchSelector=function(a,b,c,d,e,f){if(b){var g=this.isXMLDocument?a.nodeName:a.nodeName.toUpperCase();if("*"==b){if("@">g)return!1}else if(g!=b)return!1}if(c&&a.getAttribute("id")!=c)return!1;var h,i,j;if(d)for(h=d.length;h--;)if(j=this.getAttribute(a,"class"),!j||!d[h].regexp.test(j))return!1;if(e)for(h=e.length;h--;)if(i=e[h],i.operator?!i.test(this.getAttribute(a,i.key)):!this.hasAttribute(a,i.key))return!1;if(f)for(h=f.length;h--;)if(i=f[h],!this.matchPseudo(a,i.key,i.value))return!1;return!0};var g={" ":function(a,b,c,d,e,f,g){var h,i,j;if(this.isHTMLDocument){a:if(c){if(i=this.document.getElementById(c),!i&&a.all||this.idGetsName&&i&&i.getAttributeNode("id").nodeValue!=c){if(j=a.all[c],!j)return;for(j[0]||(j=[j]),h=0;i=j[h++];){var k=i.getAttributeNode("id");if(k&&k.nodeValue==c){this.push(i,b,null,d,e,f);break}}return}if(!i){if(this.contains(this.root,a))return;break a}if(this.document!==a&&!this.contains(a,i))return;return void this.push(i,b,null,d,e,f)}a:if(d&&a.getElementsByClassName&&!this.brokenGEBCN){if(j=a.getElementsByClassName(g.join(" ")),!j||!j.length)break a;for(h=0;i=j[h++];)this.push(i,b,c,null,e,f);return}}if(j=a.getElementsByTagName(b),j&&j.length)for(this.brokenStarGEBTN||(b=null),h=0;i=j[h++];)this.push(i,b,c,d,e,f)},">":function(a,b,c,d,e,f){if(a=a.firstChild)do 1==a.nodeType&&this.push(a,b,c,d,e,f);while(a=a.nextSibling)},"+":function(a,b,c,d,e,f){for(;a=a.nextSibling;)if(1==a.nodeType){this.push(a,b,c,d,e,f);break}},"^":function(a,b,c,d,e,f){a=a.firstChild,a&&(1==a.nodeType?this.push(a,b,c,d,e,f):this["combinator:+"](a,b,c,d,e,f))},"~":function(a,b,c,d,e,f){for(;a=a.nextSibling;)if(1==a.nodeType){var g=this.getUID(a);if(this.bitUniques[g])break;this.bitUniques[g]=!0,this.push(a,b,c,d,e,f)}},"++":function(a,b,c,d,e,f){this["combinator:+"](a,b,c,d,e,f),this["combinator:!+"](a,b,c,d,e,f)},"~~":function(a,b,c,d,e,f){this["combinator:~"](a,b,c,d,e,f),this["combinator:!~"](a,b,c,d,e,f)},"!":function(a,b,c,d,e,f){for(;a=a.parentNode;)a!==this.document&&this.push(a,b,c,d,e,f)},"!>":function(a,b,c,d,e,f){a=a.parentNode,a!==this.document&&this.push(a,b,c,d,e,f)},"!+":function(a,b,c,d,e,f){for(;a=a.previousSibling;)if(1==a.nodeType){this.push(a,b,c,d,e,f);break}},"!^":function(a,b,c,d,e,f){a=a.lastChild,a&&(1==a.nodeType?this.push(a,b,c,d,e,f):this["combinator:!+"](a,b,c,d,e,f))},"!~":function(a,b,c,d,e,f){for(;a=a.previousSibling;)if(1==a.nodeType){var g=this.getUID(a);if(this.bitUniques[g])break;this.bitUniques[g]=!0,this.push(a,b,c,d,e,f)}}};for(var h in g)a["combinator:"+h]=g[h];var i={empty:function(a){var b=a.firstChild;return!(b&&1==b.nodeType||(a.innerText||a.textContent||"").length)},not:function(a,b){return!this.matchNode(a,b)},contains:function(a,b){return(a.innerText||a.textContent||"").indexOf(b)>-1},"first-child":function(a){for(;a=a.previousSibling;)if(1==a.nodeType)return!1;return!0},"last-child":function(a){for(;a=a.nextSibling;)if(1==a.nodeType)return!1;return!0},"only-child":function(a){for(var b=a;b=b.previousSibling;)if(1==b.nodeType)return!1;for(var c=a;c=c.nextSibling;)if(1==c.nodeType)return!1;return!0},"nth-child":a.createNTHPseudo("firstChild","nextSibling","posNTH"),"nth-last-child":a.createNTHPseudo("lastChild","previousSibling","posNTHLast"),"nth-of-type":a.createNTHPseudo("firstChild","nextSibling","posNTHType",!0),"nth-last-of-type":a.createNTHPseudo("lastChild","previousSibling","posNTHTypeLast",!0),index:function(a,b){return this["pseudo:nth-child"](a,""+(b+1))},even:function(a){return this["pseudo:nth-child"](a,"2n")},odd:function(a){return this["pseudo:nth-child"](a,"2n+1")},"first-of-type":function(a){for(var b=a.nodeName;a=a.previousSibling;)if(a.nodeName==b)return!1;return!0},"last-of-type":function(a){for(var b=a.nodeName;a=a.nextSibling;)if(a.nodeName==b)return!1;return!0},"only-of-type":function(a){for(var b=a,c=a.nodeName;b=b.previousSibling;)if(b.nodeName==c)return!1;for(var d=a;d=d.nextSibling;)if(d.nodeName==c)return!1;return!0},enabled:function(a){return!a.disabled},disabled:function(a){return a.disabled},checked:function(a){return a.checked||a.selected},focus:function(a){return this.isHTMLDocument&&this.document.activeElement===a&&(a.href||a.type||this.hasAttribute(a,"tabindex"))},root:function(a){return a===this.root},selected:function(a){return a.selected}};for(var j in i)a["pseudo:"+j]=i[j];var k=a.attributeGetters={"for":function(){return"htmlFor"in this?this.htmlFor:this.getAttribute("for")},href:function(){return"href"in this?this.getAttribute("href",2):this.getAttribute("href")},style:function(){return this.style?this.style.cssText:this.getAttribute("style")},tabindex:function(){var a=this.getAttributeNode("tabindex");return a&&a.specified?a.nodeValue:null},type:function(){return this.getAttribute("type")},maxlength:function(){var a=this.getAttributeNode("maxLength");return a&&a.specified?a.nodeValue:null}};k.MAXLENGTH=k.maxLength=k.maxlength;var l=a.Slick=this.Slick||{};l.version="1.1.7",l.search=function(b,c,d){return a.search(b,c,d)},l.find=function(b,c){return a.search(b,c,null,!0)},l.contains=function(b,c){return a.setDocument(b),a.contains(b,c)},l.getAttribute=function(b,c){return a.setDocument(b),a.getAttribute(b,c)},l.hasAttribute=function(b,c){return a.setDocument(b),a.hasAttribute(b,c)},l.match=function(b,c){return b&&c?c&&c!==b?(a.setDocument(b),a.matchNode(b,c)):!0:!1},l.defineAttributeGetter=function(b,c){return a.attributeGetters[b]=c,this},l.lookupAttributeGetter=function(b){return a.attributeGetters[b]},l.definePseudo=function(b,c){return a["pseudo:"+b]=function(a,b){return c.call(a,b)},this},l.lookupPseudo=function(b){var c=a["pseudo:"+b];return c?function(a){return c.call(this,a)}:null},l.override=function(b,c){return a.override(b,c),this},l.isXML=a.isXML,l.uidOf=function(b){return a.getUIDHTML(b)},this.Slick||(this.Slick=l)}.apply("undefined"!=typeof exports?exports:this);var Element=this.Element=function(a,b){var c=Element.Constructors[a];if(c)return c(b);if("string"!=typeof a)return document.id(a).set(b);if(b||(b={}),!/^[\w-]+$/.test(a)){var d=Slick.parse(a).expressions[0][0];a="*"==d.tag?"div":d.tag,d.id&&null==b.id&&(b.id=d.id);var e=d.attributes;if(e)for(var f,g=0,h=e.length;h>g;g++)f=e[g],null==b[f.key]&&(null!=f.value&&"="==f.operator?b[f.key]=f.value:f.value||f.operator||(b[f.key]=!0));d.classList&&null==b["class"]&&(b["class"]=d.classList.join(" "))}return document.newElement(a,b)};Browser.Element&&(Element.prototype=Browser.Element.prototype,Element.prototype._fireEvent=function(a){return function(b,c){return a.call(this,b,c)}}(Element.prototype.fireEvent)),new Type("Element",Element).mirror(function(a){if(!Array.prototype[a]){var b={};b[a]=function(){for(var b=[],c=arguments,d=!0,e=0,f=this.length;f>e;e++){var g=this[e],h=b[e]=g[a].apply(g,c);d=d&&"element"==typeOf(h)}return d?new Elements(b):b},Elements.implement(b)}}),Browser.Element||(Element.parent=Object,Element.Prototype={$constructor:Element,$family:Function.from("element").hide()},Element.mirror(function(a,b){Element.Prototype[a]=b})),Element.Constructors={};var IFrame=new Type("IFrame",function(){var a,b=Array.link(arguments,{properties:Type.isObject,iframe:function(a){return null!=a}}),c=b.properties||{};b.iframe&&(a=document.id(b.iframe));var d=c.onload||function(){};delete c.onload,c.id=c.name=[c.id,c.name,a?a.id||a.name:"IFrame_"+String.uniqueID()].pick(),a=new Element(a||"iframe",c);var e=function(){d.call(a.contentWindow)};return window.frames[c.id]?e():a.addListener("load",e),a}),Elements=this.Elements=function(a){if(a&&a.length)for(var b,c={},d=0;b=a[d++];){var e=Slick.uidOf(b);c[e]||(c[e]=!0,this.push(b))}};Elements.prototype={length:0},Elements.parent=Array,new Type("Elements",Elements).implement({filter:function(a,b){return a?new Elements(Array.filter(this,"string"==typeOf(a)?function(b){return b.match(a)}:a,b)):this}.protect(),push:function(){for(var a=this.length,b=0,c=arguments.length;c>b;b++){var d=document.id(arguments[b]);d&&(this[a++]=d)}return this.length=a}.protect(),unshift:function(){for(var a=[],b=0,c=arguments.length;c>b;b++){var d=document.id(arguments[b]);d&&a.push(d)}return Array.prototype.unshift.apply(this,a)}.protect(),concat:function(){for(var a=new Elements(this),b=0,c=arguments.length;c>b;b++){var d=arguments[b];Type.isEnumerable(d)?a.append(d):a.push(d)}return a}.protect(),append:function(a){for(var b=0,c=a.length;c>b;b++)this.push(a[b]);return this}.protect(),empty:function(){for(;this.length;)delete this[--this.length];return this}.protect()}),function(){var a=Array.prototype.splice,b={0:0,1:1,length:2};a.call(b,1,1),1==b[1]&&Elements.implement("splice",function(){for(var b=this.length,c=a.apply(this,arguments);b>=this.length;)delete this[b--];return c}.protect()),Array.forEachMethod(function(a,b){Elements.implement(b,a)}),Array.mirror(Elements);var c;try{c="x"==document.createElement("<input name=x>").name}catch(d){}var e=function(a){return(""+a).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},f=function(){var a=document.createElement("style"),b=!1;try{a.innerHTML="#justTesing{margin: 0px;}",b=!!a.innerHTML}catch(c){}return b}();Document.implement({newElement:function(a,b){if(b){if(null!=b.checked&&(b.defaultChecked=b.checked),"checkbox"!=b.type&&"radio"!=b.type||null!=b.value||(b.value="on"),!f&&"style"==a){var d=document.createElement("style");return d.setAttribute("type","text/css"),b.type&&delete b.type,this.id(d).set(b)}c&&(a="<"+a,b.name&&(a+=' name="'+e(b.name)+'"'),b.type&&(a+=' type="'+e(b.type)+'"'),a+=">",delete b.name,delete b.type)}return this.id(this.createElement(a)).set(b)}})}(),function(){Slick.uidOf(window),Slick.uidOf(document),Document.implement({newTextNode:function(a){return this.createTextNode(a)},getDocument:function(){return this},getWindow:function(){return this.window},id:function(){var a={string:function(b,c,d){return b=Slick.find(d,"#"+b.replace(/(\W)/g,"\\$1")),b?a.element(b,c):null},element:function(a,b){if(Slick.uidOf(a),!b&&!a.$family&&!/^(?:object|embed)$/i.test(a.tagName)){var c=a.fireEvent;a._fireEvent=function(a,b){return c(a,b)},Object.append(a,Element.Prototype)}return a},object:function(b,c,d){return b.toElement?a.element(b.toElement(d),c):null}};return a.textnode=a.whitespace=a.window=a.document=function(a){return a},function(b,c,d){if(b&&b.$family&&b.uniqueNumber)return b;var e=typeOf(b);return a[e]?a[e](b,c,d||document):null}}()}),null==window.$&&Window.implement("$",function(a,b){return document.id(a,b,this.document)}),Window.implement({getDocument:function(){return this.document},getWindow:function(){return this}}),[Document,Element].invoke("implement",{getElements:function(a){return Slick.search(this,a,new Elements)},getElement:function(a){return document.id(Slick.find(this,a))}});var a={contains:function(a){return Slick.contains(this,a)}};document.contains||Document.implement(a),document.createElement("div").contains||Element.implement(a);var b=function(a,b){if(!a)return b;a=Object.clone(Slick.parse(a));for(var c=a.expressions,d=c.length;d--;)c[d][0].combinator=b;return a};Object.forEach({getNext:"~",getPrevious:"!~",getParent:"!"},function(a,c){Element.implement(c,function(c){return this.getElement(b(c,a))})}),Object.forEach({getAllNext:"~",getAllPrevious:"!~",getSiblings:"~~",getChildren:">",getParents:"!"},function(a,c){Element.implement(c,function(c){return this.getElements(b(c,a))})}),Element.implement({getFirst:function(a){return document.id(Slick.search(this,b(a,">"))[0])},getLast:function(a){return document.id(Slick.search(this,b(a,">")).getLast())},getWindow:function(){return this.ownerDocument.window},getDocument:function(){return this.ownerDocument},getElementById:function(a){return document.id(Slick.find(this,"#"+(""+a).replace(/(\W)/g,"\\$1")))},match:function(a){return!a||Slick.match(this,a)}}),null==window.$$&&Window.implement("$$",function(a){if(1==arguments.length){if("string"==typeof a)return Slick.search(this.document,a,new Elements);if(Type.isEnumerable(a))return new Elements(a)}return new Elements(arguments)});var c={before:function(a,b){var c=b.parentNode;c&&c.insertBefore(a,b)},after:function(a,b){var c=b.parentNode;c&&c.insertBefore(a,b.nextSibling)},bottom:function(a,b){b.appendChild(a)},top:function(a,b){b.insertBefore(a,b.firstChild)}};c.inside=c.bottom;var d={},e={},f={};Array.forEach(["type","value","defaultValue","accessKey","cellPadding","cellSpacing","colSpan","frameBorder","rowSpan","tabIndex","useMap"],function(a){f[a.toLowerCase()]=a}),f.html="innerHTML",f.text=null==document.createElement("div").textContent?"innerText":"textContent",Object.forEach(f,function(a,b){e[b]=function(b,c){b[a]=c},d[b]=function(b){return b[a]}}),e.text=function(){return function(a,b){"style"==a.get("tag")?a.set("html",b):a[f.text]=b}}(e.text),d.text=function(a){return function(b){return"style"==b.get("tag")?b.innerHTML:a(b)}}(d.text);var g=["compact","nowrap","ismap","declare","noshade","checked","disabled","readOnly","multiple","selected","noresize","defer","defaultChecked","autofocus","controls","autoplay","loop"],h={};Array.forEach(g,function(a){var b=a.toLowerCase();h[b]=a,e[b]=function(b,c){b[a]=!!c},d[b]=function(b){return!!b[a]}}),Object.append(e,{"class":function(a,b){"className"in a?a.className=b||"":a.setAttribute("class",b)},"for":function(a,b){"htmlFor"in a?a.htmlFor=b:a.setAttribute("for",b)},style:function(a,b){a.style?a.style.cssText=b:a.setAttribute("style",b)},value:function(a,b){a.value=null!=b?b:""}}),d["class"]=function(a){return"className"in a?a.className||null:a.getAttribute("class")};var i=document.createElement("button");try{i.type="button"}catch(j){}"button"!=i.type&&(e.type=function(a,b){a.setAttribute("type",b)}),i=null;var k,l,m=function(){var a=document.createElement("style"),b=!1;try{a.innerHTML="#justTesing{margin: 0px;}",b=!!a.innerHTML}catch(c){}return b}(),n=document.createElement("input");n.value="t",n.type="submit",k="t"!=n.value;try{n.type="email",l="email"==n.type}catch(j){}n=null,(k||!l)&&(e.type=function(a,b){try{var c=a.value;a.type=b,a.value=c}catch(d){}});var o=function(a){return a.random="attribute","attribute"==a.getAttribute("random")}(document.createElement("div")),p=function(a){return a.innerHTML='<object><param name="should_fix" value="the unknown" /></object>',1!=a.cloneNode(!0).firstChild.childNodes.length}(document.createElement("div")),q=!!document.createElement("div").classList,r=function(a){var b=(a||"").clean().split(" "),c={};return b.filter(function(a){return""===a||c[a]?void 0:c[a]=a})},s=function(a){this.classList.add(a)},t=function(a){this.classList.remove(a)};Element.implement({setProperty:function(a,b){var c=e[a.toLowerCase()];if(c)c(this,b);else{var d;o&&(d=this.retrieve("$attributeWhiteList",{})),null==b?(this.removeAttribute(a),o&&delete d[a]):(this.setAttribute(a,""+b),o&&(d[a]=!0))}return this},setProperties:function(a){for(var b in a)this.setProperty(b,a[b]);return this},getProperty:function(a){var b=d[a.toLowerCase()];if(b)return b(this);if(o){var c=this.getAttributeNode(a),e=this.retrieve("$attributeWhiteList",{});if(!c)return null;if(c.expando&&!e[a]){var f=this.outerHTML;if(f.substr(0,f.search(/\/?['"]?>(?![^<]*<['"])/)).indexOf(a)<0)return null;e[a]=!0}}var g=Slick.getAttribute(this,a);return g||Slick.hasAttribute(this,a)?g:null},getProperties:function(){var a=Array.from(arguments);return a.map(this.getProperty,this).associate(a)},removeProperty:function(a){return this.setProperty(a,null)},removeProperties:function(){return Array.each(arguments,this.removeProperty,this),this},set:function(a,b){var c=Element.Properties[a];c&&c.set?c.set.call(this,b):this.setProperty(a,b)}.overloadSetter(),get:function(a){var b=Element.Properties[a];return b&&b.get?b.get.apply(this):this.getProperty(a)}.overloadGetter(),erase:function(a){var b=Element.Properties[a];return b&&b.erase?b.erase.apply(this):this.removeProperty(a),this},hasClass:q?function(a){return this.classList.contains(a)}:function(a){return r(this.className).contains(a)},addClass:q?function(a){return r(a).forEach(s,this),this}:function(a){return this.className=r(a+" "+this.className).join(" "),this},removeClass:q?function(a){return r(a).forEach(t,this),this}:function(a){var b=r(this.className);return r(a).forEach(b.erase,b),this.className=b.join(" "),this},toggleClass:function(a,b){return null==b&&(b=!this.hasClass(a)),b?this.addClass(a):this.removeClass(a)},adopt:function(){var a,b=this,c=Array.flatten(arguments),d=c.length;d>1&&(b=a=document.createDocumentFragment());for(var e=0;d>e;e++){var f=document.id(c[e],!0);f&&b.appendChild(f)}return a&&this.appendChild(a),this},appendText:function(a,b){return this.grab(this.getDocument().newTextNode(a),b)},grab:function(a,b){return c[b||"bottom"](document.id(a,!0),this),this},inject:function(a,b){return c[b||"bottom"](this,document.id(a,!0)),this},replaces:function(a){return a=document.id(a,!0),a.parentNode.replaceChild(this,a),this},wraps:function(a,b){return a=document.id(a,!0),this.replaces(a).grab(a,b)},getSelected:function(){return this.selectedIndex,new Elements(Array.from(this.options).filter(function(a){return a.selected}))},toQueryString:function(){var a=[];return this.getElements("input, select, textarea").each(function(b){var c=b.type;if(b.name&&!b.disabled&&"submit"!=c&&"reset"!=c&&"file"!=c&&"image"!=c){var d="select"==b.get("tag")?b.getSelected().map(function(a){return document.id(a).get("value")}):"radio"!=c&&"checkbox"!=c||b.checked?b.get("value"):null;Array.from(d).each(function(c){"undefined"!=typeof c&&a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(c))})}}),a.join("&")}});var u={before:"beforeBegin",after:"afterEnd",bottom:"beforeEnd",top:"afterBegin",inside:"beforeEnd"};Element.implement("appendHTML","insertAdjacentHTML"in document.createElement("div")?function(a,b){return this.insertAdjacentHTML(u[b||"bottom"],a),this}:function(a,b){var d=new Element("div",{html:a}),e=d.childNodes,f=d.firstChild;if(!f)return this;if(e.length>1){f=document.createDocumentFragment();for(var g=0,h=e.length;h>g;g++)f.appendChild(e[g])}return c[b||"bottom"](f,this),this});var v={},w={},x=function(a){return w[a]||(w[a]={})},y=function(a){var b=a.uniqueNumber;return a.removeEvents&&a.removeEvents(),a.clearAttributes&&a.clearAttributes(),null!=b&&(delete v[b],delete w[b]),a},z={input:"checked",option:"selected",textarea:"value"};if(Element.implement({destroy:function(){var a=y(this).getElementsByTagName("*");return Array.each(a,y),Element.dispose(this),null},empty:function(){return Array.from(this.childNodes).each(Element.dispose),this
},dispose:function(){return this.parentNode?this.parentNode.removeChild(this):this},clone:function(a,b){a=a!==!1;var c,d=this.cloneNode(a),e=[d],f=[this];for(a&&(e.append(Array.from(d.getElementsByTagName("*"))),f.append(Array.from(this.getElementsByTagName("*")))),c=e.length;c--;){var g=e[c],h=f[c];if(b||g.removeAttribute("id"),g.clearAttributes&&(g.clearAttributes(),g.mergeAttributes(h),g.removeAttribute("uniqueNumber"),g.options))for(var i=g.options,j=h.options,k=i.length;k--;)i[k].selected=j[k].selected;var l=z[h.tagName.toLowerCase()];l&&h[l]&&(g[l]=h[l])}if(p){var m=d.getElementsByTagName("object"),n=this.getElementsByTagName("object");for(c=m.length;c--;)m[c].outerHTML=n[c].outerHTML}return document.id(d)}}),[Element,Window,Document].invoke("implement",{addListener:function(a,b){return window.attachEvent&&!window.addEventListener&&(v[Slick.uidOf(this)]=this),this.addEventListener?this.addEventListener(a,b,!!arguments[2]):this.attachEvent("on"+a,b),this},removeListener:function(a,b){return this.removeEventListener?this.removeEventListener(a,b,!!arguments[2]):this.detachEvent("on"+a,b),this},retrieve:function(a,b){var c=x(Slick.uidOf(this)),d=c[a];return null!=b&&null==d&&(d=c[a]=b),null!=d?d:null},store:function(a,b){var c=x(Slick.uidOf(this));return c[a]=b,this},eliminate:function(a){var b=x(Slick.uidOf(this));return delete b[a],this}}),window.attachEvent&&!window.addEventListener){var A=function(){Object.each(v,y),window.CollectGarbage&&CollectGarbage(),window.removeListener("unload",A)};window.addListener("unload",A)}Element.Properties={},Element.Properties.style={set:function(a){this.style.cssText=a},get:function(){return this.style.cssText},erase:function(){this.style.cssText=""}},Element.Properties.tag={get:function(){return this.tagName.toLowerCase()}},Element.Properties.html={set:function(a){null==a?a="":"array"==typeOf(a)&&(a=a.join("")),this.styleSheet&&!m?this.styleSheet.cssText=a:this.innerHTML=a},erase:function(){this.set("html","")}};var B=!0,C=!0,D=!0,E=document.createElement("div");if(E.innerHTML="<nav></nav>",B=1==E.childNodes.length,!B)for(var F="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" "),G=document.createDocumentFragment(),H=F.length;H--;)G.createElement(F[H]);E=null,C=Function.attempt(function(){var a=document.createElement("table");return a.innerHTML="<tr><td></td></tr>",!0});var I=document.createElement("tr"),J="<td></td>";I.innerHTML=J,D=I.innerHTML==J,I=null,C&&D&&B||(Element.Properties.html.set=function(a){var b={table:[1,"<table>","</table>"],select:[1,"<select>","</select>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"]};return b.thead=b.tfoot=b.tbody,function(c){if(this.styleSheet)return a.call(this,c);var d=b[this.get("tag")];if(d||B||(d=[0,"",""]),!d)return a.call(this,c);var e=d[0],f=document.createElement("div"),g=f;for(B||G.appendChild(f),f.innerHTML=[d[1],c,d[2]].flatten().join("");e--;)g=g.firstChild;this.empty().adopt(g.childNodes),B||G.removeChild(f),f=null}}(Element.Properties.html.set));var K=document.createElement("form");K.innerHTML="<select><option>s</option></select>","s"!=K.firstChild.value&&(Element.Properties.value={set:function(a){var b=this.get("tag");if("select"!=b)return this.setProperty("value",a);var c=this.getElements("option");a=String(a);for(var d=0;d<c.length;d++){var e=c[d],f=e.getAttributeNode("value"),g=f&&f.specified?e.value:e.get("text");if(g===a)return e.selected=!0}},get:function(){var a=this,b=a.get("tag");if("select"!=b&&"option"!=b)return this.getProperty("value");if("select"==b&&!(a=a.getSelected()[0]))return"";var c=a.getAttributeNode("value");return c&&c.specified?a.value:a.get("text")}}),K=null,document.createElement("div").getAttributeNode("id")&&(Element.Properties.id={set:function(a){this.id=this.getAttributeNode("id").value=a},get:function(){return this.id||null},erase:function(){this.id=this.getAttributeNode("id").value=""}})}(),function(){var a={},b=function(a){var b;if(a.wheelDelta)b=a.wheelDelta%120==0?a.wheelDelta/120:a.wheelDelta/12;else{var c=a.deltaY||a.detail||0;b=-(c%3==0?c/3:10*c)}return b},c=this.DOMEvent=new Type("DOMEvent",function(c,d){if(d||(d=window),c=c||d.event,c.$extended)return c;this.event=c,this.$extended=!0,this.shift=c.shiftKey,this.control=c.ctrlKey,this.alt=c.altKey,this.meta=c.metaKey;for(var e=this.type=c.type,f=c.target||c.srcElement;f&&3==f.nodeType;)f=f.parentNode;if(this.target=document.id(f),0==e.indexOf("key")){var g=this.code=c.which||c.keyCode;this.key=a[g],("keydown"==e||"keyup"==e)&&(g>111&&124>g?this.key="f"+(g-111):g>95&&106>g&&(this.key=g-96)),null==this.key&&(this.key=String.fromCharCode(g).toLowerCase())}else if("click"==e||"dblclick"==e||"contextmenu"==e||"wheel"==e||"DOMMouseScroll"==e||0==e.indexOf("mouse")){var h=d.document;if(h=h.compatMode&&"CSS1Compat"!=h.compatMode?h.body:h.html,this.page={x:null!=c.pageX?c.pageX:c.clientX+h.scrollLeft,y:null!=c.pageY?c.pageY:c.clientY+h.scrollTop},this.client={x:null!=c.pageX?c.pageX-d.pageXOffset:c.clientX,y:null!=c.pageY?c.pageY-d.pageYOffset:c.clientY},("DOMMouseScroll"==e||"wheel"==e||"mousewheel"==e)&&(this.wheel=b(c)),this.rightClick=3==c.which||2==c.button,"mouseover"==e||"mouseout"==e){for(var i=c.relatedTarget||c[("mouseover"==e?"from":"to")+"Element"];i&&3==i.nodeType;)i=i.parentNode;this.relatedTarget=document.id(i)}}else if(0==e.indexOf("touch")||0==e.indexOf("gesture")){this.rotation=c.rotation,this.scale=c.scale,this.targetTouches=c.targetTouches,this.changedTouches=c.changedTouches;var j=this.touches=c.touches;if(j&&j[0]){var k=j[0];this.page={x:k.pageX,y:k.pageY},this.client={x:k.clientX,y:k.clientY}}}this.client||(this.client={}),this.page||(this.page={})});c.implement({stop:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){return this.event.stopPropagation?this.event.stopPropagation():this.event.cancelBubble=!0,this},preventDefault:function(){return this.event.preventDefault?this.event.preventDefault():this.event.returnValue=!1,this}}),c.defineKey=function(b,c){return a[b]=c,this},c.defineKeys=c.defineKey.overloadSetter(!0),c.defineKeys({38:"up",40:"down",37:"left",39:"right",27:"esc",32:"space",8:"backspace",9:"tab",46:"delete",13:"enter"})}(),function(){Element.Properties.events={set:function(a){this.addEvents(a)}},[Element,Window,Document].invoke("implement",{addEvent:function(a,b){var c=this.retrieve("events",{});if(c[a]||(c[a]={keys:[],values:[]}),c[a].keys.contains(b))return this;c[a].keys.push(b);var d=a,e=Element.Events[a],f=b,g=this;e&&(e.onAdd&&e.onAdd.call(this,b,a),e.condition&&(f=function(c){return e.condition.call(this,c,a)?b.call(this,c):!0}),e.base&&(d=Function.from(e.base).call(this,a)));var h=function(){return b.call(g)},i=Element.NativeEvents[d];return i&&(2==i&&(h=function(a){a=new DOMEvent(a,g.getWindow()),f.call(g,a)===!1&&a.stop()}),this.addListener(d,h,arguments[2])),c[a].values.push(h),this},removeEvent:function(a,b){var c=this.retrieve("events");if(!c||!c[a])return this;var d=c[a],e=d.keys.indexOf(b);if(-1==e)return this;var f=d.values[e];delete d.keys[e],delete d.values[e];var g=Element.Events[a];return g&&(g.onRemove&&g.onRemove.call(this,b,a),g.base&&(a=Function.from(g.base).call(this,a))),Element.NativeEvents[a]?this.removeListener(a,f,arguments[2]):this},addEvents:function(a){for(var b in a)this.addEvent(b,a[b]);return this},removeEvents:function(a){var b;if("object"==typeOf(a)){for(b in a)this.removeEvent(b,a[b]);return this}var c=this.retrieve("events");if(!c)return this;if(a)c[a]&&(c[a].keys.each(function(b){this.removeEvent(a,b)},this),delete c[a]);else{for(b in c)this.removeEvents(b);this.eliminate("events")}return this},fireEvent:function(a,b,c){var d=this.retrieve("events");return d&&d[a]?(b=Array.from(b),d[a].keys.each(function(a){c?a.delay(c,this,b):a.apply(this,b)},this),this):this},cloneEvents:function(a,b){a=document.id(a);var c=a.retrieve("events");if(!c)return this;if(b)c[b]&&c[b].keys.each(function(a){this.addEvent(b,a)},this);else for(var d in c)this.cloneEvents(a,d);return this}}),Element.NativeEvents={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,wheel:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,keyup:2,orientationchange:2,touchstart:2,touchmove:2,touchend:2,touchcancel:2,gesturestart:2,gesturechange:2,gestureend:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,paste:2,input:2,load:2,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,hashchange:1,popstate:2,error:1,abort:1,scroll:1,message:2},Element.Events={mousewheel:{base:"onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll"}};var a=function(a){var b=a.relatedTarget;return null==b?!0:b?b!=this&&"xul"!=b.prefix&&"document"!=typeOf(this)&&!this.contains(b):!1};"onmouseenter"in document.documentElement?(Element.NativeEvents.mouseenter=Element.NativeEvents.mouseleave=2,Element.MouseenterCheck=a):(Element.Events.mouseenter={base:"mouseover",condition:a},Element.Events.mouseleave={base:"mouseout",condition:a}),window.addEventListener||(Element.NativeEvents.propertychange=2,Element.Events.change={base:function(){var a=this.type;return"input"!=this.get("tag")||"radio"!=a&&"checkbox"!=a?"change":"propertychange"},condition:function(a){return"propertychange"!=a.type||"checked"==a.event.propertyName}})}(),function(){var a=!!window.addEventListener;Element.NativeEvents.focusin=Element.NativeEvents.focusout=2;var b=function(a,b,c,d,e){for(;e&&e!=a;){if(b(e,d))return c.call(e,d,e);e=document.id(e.parentNode)}},c={mouseenter:{base:"mouseover",condition:Element.MouseenterCheck},mouseleave:{base:"mouseout",condition:Element.MouseenterCheck},focus:{base:"focus"+(a?"":"in"),capture:!0},blur:{base:a?"blur":"focusout",capture:!0}},d="$delegation:",e=function(a){return{base:"focusin",remove:function(b,c){var e=b.retrieve(d+a+"listeners",{})[c];if(e&&e.forms)for(var f=e.forms.length;f--;)e.forms[f].removeEvent&&e.forms[f].removeEvent(a,e.fns[f])},listen:function(c,e,f,g,h,i){var j="form"==h.get("tag")?h:g.target.getParent("form");if(j){var k=c.retrieve(d+a+"listeners",{}),l=k[i]||{forms:[],fns:[]},m=l.forms,n=l.fns;if(-1==m.indexOf(j)){m.push(j);var o=function(a){b(c,e,f,a,h)};j.addEvent(a,o),n.push(o),k[i]=l,c.store(d+a+"listeners",k)}}}}},f=function(a){return{base:"focusin",listen:function(c,d,e,f,g){var h={blur:function(){this.removeEvents(h)}};h[a]=function(a){b(c,d,e,a,g)},f.target.addEvents(h)}}};a||Object.append(c,{submit:e("submit"),reset:e("reset"),change:f("change"),select:f("select")});var g=Element.prototype,h=g.addEvent,i=g.removeEvent,j=function(a,b){return function(c,d,e){if(-1==c.indexOf(":relay"))return a.call(this,c,d,e);var f=Slick.parse(c).expressions[0][0];if("relay"!=f.pseudos[0].key)return a.call(this,c,d,e);var g=f.tag;return f.pseudos.slice(1).each(function(a){g+=":"+a.key+(a.value?"("+a.value+")":"")}),a.call(this,c,d),b.call(this,g,f.pseudos[0].value,d)}},k={addEvent:function(a,d,e){var f=this.retrieve("$delegates",{}),g=f[a];if(g)for(var i in g)if(g[i].fn==e&&g[i].match==d)return this;var j=a,k=d,l=e,m=c[a]||{};a=m.base||j,d=function(a){return Slick.match(a,k)};var n=Element.Events[j];if(m.condition||n&&n.condition){var o=d,p=m.condition||n.condition;d=function(b,c){return o(b,c)&&p.call(b,c,a)}}var q=this,r=String.uniqueID(),s=m.listen?function(a,b){!b&&a&&a.target&&(b=a.target),b&&m.listen(q,d,e,a,b,r)}:function(a,c){!c&&a&&a.target&&(c=a.target),c&&b(q,d,e,a,c)};return g||(g={}),g[r]={match:k,fn:l,delegator:s},f[j]=g,h.call(this,a,s,m.capture)},removeEvent:function(a,b,d,e){var f=this.retrieve("$delegates",{}),g=f[a];if(!g)return this;if(e){var h=a,j=g[e].delegator,l=c[a]||{};return a=l.base||h,l.remove&&l.remove(this,e),delete g[e],f[h]=g,i.call(this,a,j,l.capture)}var m,n;if(d){for(m in g)if(n=g[m],n.match==b&&n.fn==d)return k.removeEvent.call(this,a,b,d,m)}else for(m in g)n=g[m],n.match==b&&k.removeEvent.call(this,a,b,n.fn,m);return this}};[Element,Window,Document].invoke("implement",{addEvent:j(h,k.addEvent),removeEvent:j(i,k.removeEvent)})}(),function(){var a,b=document.html;a=document.createElement("div"),a.style.color="red",a.style.color=null;var c="red"==a.style.color,d="1px solid #123abc";a.style.border=d;var e=a.style.border!=d;a=null;var f=!!window.getComputedStyle,g=null!=document.createElement("div").style.borderRadius;Element.Properties.styles={set:function(a){this.setStyles(a)}};var h=null!=b.style.opacity,i=null!=b.style.filter,j=/alpha\(opacity=([\d.]+)\)/i,k=function(a,b){a.store("$opacity",b),a.style.visibility=b>0||null==b?"visible":"hidden"},l=function(a,b,c){var d=a.style,e=d.filter||a.getComputedStyle("filter")||"";d.filter=(b.test(e)?e.replace(b,c):e+" "+c).trim(),d.filter||d.removeAttribute("filter")},m=h?function(a,b){a.style.opacity=b}:i?function(a,b){a.currentStyle&&a.currentStyle.hasLayout||(a.style.zoom=1),null==b||1==b?(l(a,j,""),1==b&&1!=n(a)&&l(a,j,"alpha(opacity=100)")):l(a,j,"alpha(opacity="+(100*b).limit(0,100).round()+")")}:k,n=h?function(a){var b=a.style.opacity||a.getComputedStyle("opacity");return""==b?1:b.toFloat()}:i?function(a){var b,c=a.style.filter||a.getComputedStyle("filter");return c&&(b=c.match(j)),null==b||null==c?1:b[1]/100}:function(a){var b=a.retrieve("$opacity");return null==b&&(b="hidden"==a.style.visibility?0:1),b},o=null==b.style.cssFloat?"styleFloat":"cssFloat",p={left:"0%",top:"0%",center:"50%",right:"100%",bottom:"100%"},q=null!=b.style.backgroundPositionX,r=function(a,b){"backgroundPosition"==b&&(a.removeAttribute(b+"X"),b+="Y"),a.removeAttribute(b)};Element.implement({getComputedStyle:function(a){if(!f&&this.currentStyle)return this.currentStyle[a.camelCase()];var b=Element.getDocument(this).defaultView,c=b?b.getComputedStyle(this,null):null;return c?c.getPropertyValue(a==o?"float":a.hyphenate()):""},setStyle:function(a,b){if("opacity"==a)return null!=b&&(b=parseFloat(b)),m(this,b),this;if(a=("float"==a?o:a).camelCase(),"string"!=typeOf(b)){var d=(Element.Styles[a]||"@").split(" ");b=Array.from(b).map(function(a,b){return d[b]?"number"==typeOf(a)?d[b].replace("@",Math.round(a)):a:""}).join(" ")}else b==String(Number(b))&&(b=Math.round(b));return this.style[a]=b,(""==b||null==b)&&c&&this.style.removeAttribute&&r(this.style,a),this},getStyle:function(a){if("opacity"==a)return n(this);if(a=("float"==a?o:a).camelCase(),g&&-1!=a.indexOf("borderRadius"))return["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"].map(function(a){return this.style[a]||"0px"},this).join(" ");var b=this.style[a];if(!b||"zIndex"==a){if(Element.ShortStyles.hasOwnProperty(a)){b=[];for(var c in Element.ShortStyles[a])b.push(this.getStyle(c));return b.join(" ")}b=this.getComputedStyle(a)}if(q&&/^backgroundPosition[XY]?$/.test(a))return b.replace(/(top|right|bottom|left)/g,function(a){return p[a]})||"0px";if(!b&&"backgroundPosition"==a)return"0px 0px";if(b){b=String(b);var d=b.match(/rgba?\([\d\s,]+\)/);d&&(b=b.replace(d[0],d[0].rgbToHex()))}if(!f&&!this.style[a]){if(/^(height|width)$/.test(a)&&!/px$/.test(b)){var h="width"==a?["left","right"]:["top","bottom"],i=0;return h.each(function(a){i+=this.getStyle("border-"+a+"-width").toInt()+this.getStyle("padding-"+a).toInt()},this),this["offset"+a.capitalize()]-i+"px"}if(/^border(.+)Width|margin|padding/.test(a)&&isNaN(parseFloat(b)))return"0px"}return e&&/^border(Top|Right|Bottom|Left)?$/.test(a)&&/^#/.test(b)?b.replace(/^(.+)\s(.+)\s(.+)$/,"$2 $3 $1"):b},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},getStyles:function(){var a={};return Array.flatten(arguments).each(function(b){a[b]=this.getStyle(b)},this),a}}),Element.Styles={left:"@px",top:"@px",bottom:"@px",right:"@px",width:"@px",height:"@px",maxWidth:"@px",maxHeight:"@px",minWidth:"@px",minHeight:"@px",backgroundColor:"rgb(@, @, @)",backgroundSize:"@px",backgroundPosition:"@px @px",color:"rgb(@, @, @)",fontSize:"@px",letterSpacing:"@px",lineHeight:"@px",clip:"rect(@px @px @px @px)",margin:"@px @px @px @px",padding:"@px @px @px @px",border:"@px @ rgb(@, @, @) @px @ rgb(@, @, @) @px @ rgb(@, @, @)",borderWidth:"@px @px @px @px",borderStyle:"@ @ @ @",borderColor:"rgb(@, @, @) rgb(@, @, @) rgb(@, @, @) rgb(@, @, @)",zIndex:"@",zoom:"@",fontWeight:"@",textIndent:"@px",opacity:"@",borderRadius:"@px @px @px @px"},Element.ShortStyles={margin:{},padding:{},border:{},borderWidth:{},borderStyle:{},borderColor:{}},["Top","Right","Bottom","Left"].each(function(a){var b=Element.ShortStyles,c=Element.Styles;["margin","padding"].each(function(d){var e=d+a;b[d][e]=c[e]="@px"});var d="border"+a;b.border[d]=c[d]="@px @ rgb(@, @, @)";var e=d+"Width",f=d+"Style",g=d+"Color";b[d]={},b.borderWidth[e]=b[d][e]=c[e]="@px",b.borderStyle[f]=b[d][f]=c[f]="@",b.borderColor[g]=b[d][g]=c[g]="rgb(@, @, @)"}),q&&(Element.ShortStyles.backgroundPosition={backgroundPositionX:"@",backgroundPositionY:"@"})}(),function(){function a(a,b){return n(a,b).toInt()||0}function b(b){return a(b,"border-top-width")}function c(b){return a(b,"border-left-width")}function d(a){return/^(?:body|html)$/i.test(a.tagName)}function e(a){var b=a.getDocument();return b.compatMode&&"CSS1Compat"!=b.compatMode?b.body:b.html}var f=document.createElement("div"),g=document.createElement("div");f.style.height="0",f.appendChild(g);var h=g.offsetParent===f;f=g=null;var i=["height","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],j=["width","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],k=function(a){var b=window.getComputedStyle(a),c={x:0,y:0};return i.each(function(a){c.y+=parseFloat(b[a])}),j.each(function(a){c.x+=parseFloat(b[a])}),c},l=function(a){return"static"!=n(a,"position")||d(a)},m=function(a){return l(a)||/^(?:table|td|th)$/i.test(a.tagName)};Element.implement({scrollTo:function(a,b){return d(this)?this.getWindow().scrollTo(a,b):(this.scrollLeft=a,this.scrollTop=b),this},getSize:function(){if(d(this))return this.getWindow().getSize();if(!window.getComputedStyle)return{x:this.offsetWidth,y:this.offsetHeight};if("svg"==this.get("tag"))return k(this);var a=this.getBoundingClientRect();return{x:a.width,y:a.height}},getScrollSize:function(){return d(this)?this.getWindow().getScrollSize():{x:this.scrollWidth,y:this.scrollHeight}},getScroll:function(){return d(this)?this.getWindow().getScroll():{x:this.scrollLeft,y:this.scrollTop}},getScrolls:function(){for(var a=this.parentNode,b={x:0,y:0};a&&!d(a);)b.x+=a.scrollLeft,b.y+=a.scrollTop,a=a.parentNode;return b},getOffsetParent:h?function(){var a=this;if(d(a)||"fixed"==n(a,"position"))return null;for(var b="static"==n(a,"position")?m:l;a=a.parentNode;)if(b(a))return a;return null}:function(){var a=this;if(d(a)||"fixed"==n(a,"position"))return null;try{return a.offsetParent}catch(b){}return null},getOffsets:function(){var a=this.getBoundingClientRect;if(a){var b=this.getBoundingClientRect(),c=document.id(this.getDocument().documentElement),e=c.getScroll(),f=this.getScrolls(),g="fixed"==n(this,"position");return{x:b.left.toInt()+f.x+(g?0:e.x)-c.clientLeft,y:b.top.toInt()+f.y+(g?0:e.y)-c.clientTop}}var h=this,i={x:0,y:0};if(d(this))return i;for(;h&&!d(h);)i.x+=h.offsetLeft,i.y+=h.offsetTop,h=h.offsetParent;return i},getPosition:function(a){var d=this.getOffsets(),e=this.getScrolls(),f={x:d.x-e.x,y:d.y-e.y};if(a&&(a=document.id(a))){var g=a.getPosition();return{x:f.x-g.x-c(a),y:f.y-g.y-b(a)}}return f},getCoordinates:function(a){if(d(this))return this.getWindow().getCoordinates();var b=this.getPosition(a),c=this.getSize(),e={left:b.x,top:b.y,width:c.x,height:c.y};return e.right=e.left+e.width,e.bottom=e.top+e.height,e},computePosition:function(b){return{left:b.x-a(this,"margin-left"),top:b.y-a(this,"margin-top")}},setPosition:function(a){return this.setStyles(this.computePosition(a))}}),[Document,Window].invoke("implement",{getSize:function(){var a=e(this);return{x:a.clientWidth,y:a.clientHeight}},getScroll:function(){var a=this.getWindow(),b=e(this);return{x:a.pageXOffset||b.scrollLeft,y:a.pageYOffset||b.scrollTop}},getScrollSize:function(){var a=e(this),b=this.getSize(),c=this.getDocument().body;return{x:Math.max(a.scrollWidth,c.scrollWidth,b.x),y:Math.max(a.scrollHeight,c.scrollHeight,b.y)}},getPosition:function(){return{x:0,y:0}},getCoordinates:function(){var a=this.getSize();return{top:0,left:0,bottom:a.y,right:a.x,height:a.y,width:a.x}}});var n=Element.getComputedStyle}(),Element.alias({position:"setPosition"}),[Window,Document,Element].invoke("implement",{getHeight:function(){return this.getSize().y},getWidth:function(){return this.getSize().x},getScrollTop:function(){return this.getScroll().y},getScrollLeft:function(){return this.getScroll().x},getScrollHeight:function(){return this.getScrollSize().y},getScrollWidth:function(){return this.getScrollSize().x},getTop:function(){return this.getPosition().y},getLeft:function(){return this.getPosition().x}}),function(){var a=this.Fx=new Class({Implements:[Chain,Events,Options],options:{fps:60,unit:!1,duration:500,frames:null,frameSkip:!0,link:"ignore"},initialize:function(a){this.subject=this.subject||this,this.setOptions(a)},getTransition:function(){return function(a){return-(Math.cos(Math.PI*a)-1)/2}},step:function(a){if(this.options.frameSkip){var b=null!=this.time?a-this.time:0,c=b/this.frameInterval;this.time=a,this.frame+=c}else this.frame++;if(this.frame<this.frames){var d=this.transition(this.frame/this.frames);this.set(this.compute(this.from,this.to,d))}else this.frame=this.frames,this.set(this.compute(this.from,this.to,1)),this.stop()},set:function(a){return a},compute:function(b,c,d){return a.compute(b,c,d)},check:function(){if(!this.isRunning())return!0;switch(this.options.link){case"cancel":return this.cancel(),!0;case"chain":return this.chain(this.caller.pass(arguments,this)),!1}return!1},start:function(b,c){if(!this.check(b,c))return this;this.from=b,this.to=c,this.frame=this.options.frameSkip?0:-1,this.time=null,this.transition=this.getTransition();var d=this.options.frames,f=this.options.fps,g=this.options.duration;return this.duration=a.Durations[g]||g.toInt(),this.frameInterval=1e3/f,this.frames=d||Math.round(this.duration/this.frameInterval),this.fireEvent("start",this.subject),e.call(this,f),this},stop:function(){return this.isRunning()&&(this.time=null,f.call(this,this.options.fps),this.frames==this.frame?(this.fireEvent("complete",this.subject),this.callChain()||this.fireEvent("chainComplete",this.subject)):this.fireEvent("stop",this.subject)),this},cancel:function(){return this.isRunning()&&(this.time=null,f.call(this,this.options.fps),this.frame=this.frames,this.fireEvent("cancel",this.subject).clearChain()),this},pause:function(){return this.isRunning()&&(this.time=null,f.call(this,this.options.fps)),this},resume:function(){return this.isPaused()&&e.call(this,this.options.fps),this},isRunning:function(){var a=b[this.options.fps];return a&&a.contains(this)},isPaused:function(){return this.frame<this.frames&&!this.isRunning()}});a.compute=function(a,b,c){return(b-a)*c+a},a.Durations={"short":250,normal:500,"long":1e3};var b={},c={},d=function(){for(var a=Date.now(),b=this.length;b--;){var c=this[b];c&&c.step(a)}},e=function(a){var e=b[a]||(b[a]=[]);e.push(this),c[a]||(c[a]=d.periodical(Math.round(1e3/a),e))},f=function(a){var d=b[a];d&&(d.erase(this),!d.length&&c[a]&&(delete b[a],c[a]=clearInterval(c[a])))}}(),Fx.CSS=new Class({Extends:Fx,prepare:function(a,b,c){c=Array.from(c);var d=c[0],e=c[1];if(null==e){e=d,d=a.getStyle(b);var f=this.options.unit;if(f&&d&&"string"==typeof d&&d.slice(-f.length)!=f&&0!=parseFloat(d)){a.setStyle(b,e+f);var g=a.getComputedStyle(b);if(!/px$/.test(g)&&(g=a.style[("pixel-"+b).camelCase()],null==g)){var h=a.style.left;a.style.left=e+f,g=a.style.pixelLeft,a.style.left=h}d=(e||1)/(parseFloat(g)||1)*(parseFloat(d)||0),a.setStyle(b,d+f)}}return{from:this.parse(d),to:this.parse(e)}},parse:function(a){return a=Function.from(a)(),a="string"==typeof a?a.split(" "):Array.from(a),a.map(function(a){a=String(a);var b=!1;return Object.each(Fx.CSS.Parsers,function(c){if(!b){var d=c.parse(a);(d||0===d)&&(b={value:d,parser:c})}}),b=b||{value:a,parser:Fx.CSS.Parsers.String}})},compute:function(a,b,c){var d=[];return Math.min(a.length,b.length).times(function(e){d.push({value:a[e].parser.compute(a[e].value,b[e].value,c),parser:a[e].parser})}),d.$family=Function.from("fx:css:value"),d},serve:function(a,b){"fx:css:value"!=typeOf(a)&&(a=this.parse(a));var c=[];return a.each(function(a){c=c.concat(a.parser.serve(a.value,b))}),c},render:function(a,b,c,d){a.setStyle(b,this.serve(c,d))},search:function(a){if(Fx.CSS.Cache[a])return Fx.CSS.Cache[a];var b={},c=new RegExp("^"+a.escapeRegExp()+"$"),d=function(a){Array.each(a,function(a){if(a.media)return void d(a.rules||a.cssRules);if(a.style){var e=a.selectorText?a.selectorText.replace(/^\w+/,function(a){return a.toLowerCase()}):null;e&&c.test(e)&&Object.each(Element.Styles,function(c,d){a.style[d]&&!Element.ShortStyles[d]&&(c=String(a.style[d]),b[d]=/^rgb/.test(c)?c.rgbToHex():c)})}})};return Array.each(document.styleSheets,function(a){var b=a.href;if(!(b&&b.indexOf("://")>-1&&-1==b.indexOf(document.domain))){var c=a.rules||a.cssRules;d(c)}}),Fx.CSS.Cache[a]=b}}),Fx.CSS.Cache={},Fx.CSS.Parsers={Color:{parse:function(a){return a.match(/^#[0-9a-f]{3,6}$/i)?a.hexToRgb(!0):(a=a.match(/(\d+),\s*(\d+),\s*(\d+)/))?[a[1],a[2],a[3]]:!1},compute:function(a,b,c){return a.map(function(d,e){return Math.round(Fx.compute(a[e],b[e],c))})},serve:function(a){return a.map(Number)}},Number:{parse:parseFloat,compute:Fx.compute,serve:function(a,b){return b?a+b:a}},String:{parse:Function.from(!1),compute:function(a,b){return b},serve:function(a){return a}}},Fx.Morph=new Class({Extends:Fx.CSS,initialize:function(a,b){this.element=this.subject=document.id(a),this.parent(b)},set:function(a){"string"==typeof a&&(a=this.search(a));for(var b in a)this.render(this.element,b,a[b],this.options.unit);return this},compute:function(a,b,c){var d={};for(var e in a)d[e]=this.parent(a[e],b[e],c);return d},start:function(a){if(!this.check(a))return this;"string"==typeof a&&(a=this.search(a));var b={},c={};for(var d in a){var e=this.prepare(this.element,d,a[d]);b[d]=e.from,c[d]=e.to}return this.parent(b,c)}}),Element.Properties.morph={set:function(a){return this.get("morph").cancel().setOptions(a),this},get:function(){var a=this.retrieve("morph");return a||(a=new Fx.Morph(this,{link:"cancel"}),this.store("morph",a)),a}},Element.implement({morph:function(a){return this.get("morph").start(a),this}}),Fx.implement({getTransition:function(){var a=this.options.transition||Fx.Transitions.Sine.easeInOut;if("string"==typeof a){var b=a.split(":");a=Fx.Transitions,a=a[b[0]]||a[b[0].capitalize()],b[1]&&(a=a["ease"+b[1].capitalize()+(b[2]?b[2].capitalize():"")])}return a}}),Fx.Transition=function(a,b){b=Array.from(b);var c=function(c){return a(c,b)};return Object.append(c,{easeIn:c,easeOut:function(c){return 1-a(1-c,b)},easeInOut:function(c){return(.5>=c?a(2*c,b):2-a(2*(1-c),b))/2}})},Fx.Transitions={linear:function(a){return a}},Fx.Transitions.extend=function(a){for(var b in a)Fx.Transitions[b]=new Fx.Transition(a[b])},Fx.Transitions.extend({Pow:function(a,b){return Math.pow(a,b&&b[0]||6)},Expo:function(a){return Math.pow(2,8*(a-1))},Circ:function(a){return 1-Math.sin(Math.acos(a))},Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Back:function(a,b){return b=b&&b[0]||1.618,Math.pow(a,2)*((b+1)*a-b)},Bounce:function(a){for(var b,c=0,d=1;1;c+=d,d/=2)if(a>=(7-4*c)/11){b=d*d-Math.pow((11-6*c-11*a)/4,2);break}return b},Elastic:function(a,b){return Math.pow(2,10*--a)*Math.cos(20*a*Math.PI*(b&&b[0]||1)/3)}}),["Quad","Cubic","Quart","Quint"].each(function(a,b){Fx.Transitions[a]=new Fx.Transition(function(a){return Math.pow(a,b+2)})}),Fx.Tween=new Class({Extends:Fx.CSS,initialize:function(a,b){this.element=this.subject=document.id(a),this.parent(b)},set:function(a,b){return 1==arguments.length&&(b=a,a=this.property||this.options.property),this.render(this.element,a,b,this.options.unit),this},start:function(a,b,c){if(!this.check(a,b,c))return this;var d=Array.flatten(arguments);this.property=this.options.property||d.shift();var e=this.prepare(this.element,this.property,d);return this.parent(e.from,e.to)}}),Element.Properties.tween={set:function(a){return this.get("tween").cancel().setOptions(a),this},get:function(){var a=this.retrieve("tween");return a||(a=new Fx.Tween(this,{link:"cancel"}),this.store("tween",a)),a}},Element.implement({tween:function(a,b,c){return this.get("tween").start(a,b,c),this},fade:function(){var a,b,c=this.get("tween"),d=["opacity"].append(arguments);switch(null==d[1]&&(d[1]="toggle"),d[1]){case"in":a="start",d[1]=1;break;case"out":a="start",d[1]=0;break;case"show":a="set",d[1]=1;break;case"hide":a="set",d[1]=0;break;case"toggle":var e=this.retrieve("fade:flag",1==this.getStyle("opacity"));a="start",d[1]=e?0:1,this.store("fade:flag",!e),b=!0;break;default:a="start"}b||this.eliminate("fade:flag"),c[a].apply(c,d);var f=d[d.length-1];return"set"==a||0!=f?this.setStyle("visibility",0==f?"hidden":"visible"):c.chain(function(){this.element.setStyle("visibility","hidden"),this.callChain()}),this},highlight:function(a,b){b||(b=this.retrieve("highlight:original",this.getStyle("background-color")),b="transparent"==b?"#fff":b);var c=this.get("tween");return c.start("background-color",a||"#ffff88",b).chain(function(){this.setStyle("background-color",this.retrieve("highlight:original")),c.callChain()}.bind(this)),this}}),function(){var a=function(){},b="onprogress"in new Browser.Request,c=this.Request=new Class({Implements:[Chain,Events,Options],options:{url:"",data:"",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},async:!0,format:!1,method:"post",link:"ignore",isSuccess:null,emulation:!0,urlEncoded:!0,encoding:"utf-8",evalScripts:!1,evalResponse:!1,timeout:0,noCache:!1},initialize:function(a){this.xhr=new Browser.Request,this.setOptions(a),this.headers=this.options.headers},onStateChange:function(){var c=this.xhr;4==c.readyState&&this.running&&(this.running=!1,this.status=0,Function.attempt(function(){var a=c.status;this.status=1223==a?204:a}.bind(this)),c.onreadystatechange=a,b&&(c.onprogress=c.onloadstart=a),this.timer&&(clearTimeout(this.timer),delete this.timer),this.response={text:this.xhr.responseText||"",xml:this.xhr.responseXML},this.options.isSuccess.call(this,this.status)?this.success(this.response.text,this.response.xml):this.failure())},isSuccess:function(){var a=this.status;return a>=200&&300>a},isRunning:function(){return!!this.running},processScripts:function(a){return this.options.evalResponse||/(ecma|java)script/.test(this.getHeader("Content-type"))?Browser.exec(a):a.stripScripts(this.options.evalScripts)},success:function(a,b){this.onSuccess(this.processScripts(a),b)},onSuccess:function(){this.fireEvent("complete",arguments).fireEvent("success",arguments).callChain()},failure:function(){this.onFailure()},onFailure:function(){this.fireEvent("complete").fireEvent("failure",this.xhr)},loadstart:function(a){this.fireEvent("loadstart",[a,this.xhr])},progress:function(a){this.fireEvent("progress",[a,this.xhr])},timeout:function(){this.fireEvent("timeout",this.xhr)},setHeader:function(a,b){return this.headers[a]=b,this},getHeader:function(a){return Function.attempt(function(){return this.xhr.getResponseHeader(a)}.bind(this))},check:function(){if(!this.running)return!0;switch(this.options.link){case"cancel":return this.cancel(),!0;case"chain":return this.chain(this.caller.pass(arguments,this)),!1}return!1},send:function(a){if(!this.check(a))return this;this.options.isSuccess=this.options.isSuccess||this.isSuccess,this.running=!0;var c=typeOf(a);("string"==c||"element"==c)&&(a={data:a});var d=this.options;a=Object.append({data:d.data,url:d.url,method:d.method},a);var e=a.data,f=String(a.url),g=a.method.toLowerCase();
switch(typeOf(e)){case"element":e=document.id(e).toQueryString();break;case"object":case"hash":e=Object.toQueryString(e)}if(this.options.format){var h="format="+this.options.format;e=e?h+"&"+e:h}if(this.options.emulation&&!["get","post"].contains(g)){var i="_method="+g;e=e?i+"&"+e:i,g="post"}if(this.options.urlEncoded&&["post","put"].contains(g)){var j=this.options.encoding?"; charset="+this.options.encoding:"";this.headers["Content-type"]="application/x-www-form-urlencoded"+j}f||(f=document.location.pathname);var k=f.lastIndexOf("/");k>-1&&(k=f.indexOf("#"))>-1&&(f=f.substr(0,k)),this.options.noCache&&(f+=(f.indexOf("?")>-1?"&":"?")+String.uniqueID()),!e||"get"!=g&&"delete"!=g||(f+=(f.indexOf("?")>-1?"&":"?")+e,e=null);var l=this.xhr;return b&&(l.onloadstart=this.loadstart.bind(this),l.onprogress=this.progress.bind(this)),l.open(g.toUpperCase(),f,this.options.async,this.options.user,this.options.password),this.options.withCredentials&&"withCredentials"in l&&(l.withCredentials=!0),l.onreadystatechange=this.onStateChange.bind(this),Object.each(this.headers,function(a,b){try{l.setRequestHeader(b,a)}catch(c){this.fireEvent("exception",[b,a])}},this),this.fireEvent("request"),l.send(e),this.options.async?this.options.timeout&&(this.timer=this.timeout.delay(this.options.timeout,this)):this.onStateChange(),this},cancel:function(){if(!this.running)return this;this.running=!1;var c=this.xhr;return c.abort(),this.timer&&(clearTimeout(this.timer),delete this.timer),c.onreadystatechange=a,b&&(c.onprogress=c.onloadstart=a),this.xhr=new Browser.Request,this.fireEvent("cancel"),this}}),d={};["get","post","put","delete","patch","head","GET","POST","PUT","DELETE","PATCH","HEAD"].each(function(a){d[a]=function(b){var c={method:a};return null!=b&&(c.data=b),this.send(c)}}),c.implement(d),Element.Properties.send={set:function(a){var b=this.get("send").cancel();return b.setOptions(a),this},get:function(){var a=this.retrieve("send");return a||(a=new c({data:this,link:"cancel",method:this.get("method")||"post",url:this.get("action")}),this.store("send",a)),a}},Element.implement({send:function(a){var b=this.get("send");return b.send({data:this,url:a||b.options.url}),this}})}(),Request.HTML=new Class({Extends:Request,options:{update:!1,append:!1,evalScripts:!0,filter:!1,headers:{Accept:"text/html, application/xml, text/xml, */*"}},success:function(a){var b=this.options,c=this.response;c.html=a.stripScripts(function(a){c.javascript=a});var d=c.html.match(/<body[^>]*>([\s\S]*?)<\/body>/i);d&&(c.html=d[1]);var e=new Element("div").set("html",c.html);if(c.tree=e.childNodes,c.elements=e.getElements(b.filter||"*"),b.filter&&(c.tree=c.elements),b.update){var f=document.id(b.update).empty();b.filter?f.adopt(c.elements):f.set("html",c.html)}else if(b.append){var g=document.id(b.append);b.filter?c.elements.reverse().inject(g):g.adopt(e.getChildren())}b.evalScripts&&Browser.exec(c.javascript),this.onSuccess(c.tree,c.elements,c.html,c.javascript)}}),Element.Properties.load={set:function(a){var b=this.get("load").cancel();return b.setOptions(a),this},get:function(){var a=this.retrieve("load");return a||(a=new Request.HTML({data:this,link:"cancel",update:this,method:"get"}),this.store("load",a)),a}},Element.implement({load:function(){return this.get("load").send(Array.link(arguments,{data:Type.isObject,url:Type.isString})),this}}),"undefined"==typeof JSON&&(this.JSON={}),function(){var special={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escape=function(a){return special[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)};JSON.validate=function(a){return a=a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(a)},JSON.encode=JSON.stringify?function(a){return JSON.stringify(a)}:function(a){switch(a&&a.toJSON&&(a=a.toJSON()),typeOf(a)){case"string":return'"'+a.replace(/[\x00-\x1f\\"]/g,escape)+'"';case"array":return"["+a.map(JSON.encode).clean()+"]";case"object":case"hash":var b=[];return Object.each(a,function(a,c){var d=JSON.encode(a);d&&b.push(JSON.encode(c)+":"+d)}),"{"+b+"}";case"number":case"boolean":return""+a;case"null":return"null"}return null},JSON.secure=!0,JSON.decode=function(string,secure){if(!string||"string"!=typeOf(string))return null;if(null==secure&&(secure=JSON.secure),secure){if(JSON.parse)return JSON.parse(string);if(!JSON.validate(string))throw new Error("JSON could not decode the input; security is enabled and the value is not secure.")}return eval("("+string+")")}}(),Request.JSON=new Class({Extends:Request,options:{secure:!0},initialize:function(a){this.parent(a),Object.append(this.headers,{Accept:"application/json","X-Request":"JSON"})},success:function(a){var b;try{b=this.response.json=JSON.decode(a,this.options.secure)}catch(c){return void this.fireEvent("error",[a,c])}null==b?this.onFailure():this.onSuccess(b,a)}});var Cookie=new Class({Implements:Options,options:{path:"/",domain:!1,duration:!1,secure:!1,document:document,encode:!0},initialize:function(a,b){this.key=a,this.setOptions(b)},write:function(a){if(this.options.encode&&(a=encodeURIComponent(a)),this.options.domain&&(a+="; domain="+this.options.domain),this.options.path&&(a+="; path="+this.options.path),this.options.duration){var b=new Date;b.setTime(b.getTime()+24*this.options.duration*60*60*1e3),a+="; expires="+b.toGMTString()}return this.options.secure&&(a+="; secure"),this.options.document.cookie=this.key+"="+a,this},read:function(){var a=this.options.document.cookie.match("(?:^|;)\\s*"+this.key.escapeRegExp()+"=([^;]*)");return a?decodeURIComponent(a[1]):null},dispose:function(){return new Cookie(this.key,Object.merge({},this.options,{duration:-1})).write(""),this}});Cookie.write=function(a,b,c){return new Cookie(a,c).write(b)},Cookie.read=function(a){return new Cookie(a).read()},Cookie.dispose=function(a,b){return new Cookie(a,b).dispose()},function(a,b){var c,d,e,f,g=[],h=b.createElement("div"),i=function(){clearTimeout(f),c||(Browser.loaded=c=!0,b.removeListener("DOMContentLoaded",i).removeListener("readystatechange",j),b.fireEvent("domready"),a.fireEvent("domready")),b=a=h=null},j=function(){for(var a=g.length;a--;)if(g[a]())return i(),!0;return!1},k=function(){clearTimeout(f),j()||(f=setTimeout(k,10))};b.addListener("DOMContentLoaded",i);var l=function(){try{return h.doScroll(),!0}catch(a){}return!1};h.doScroll&&!l()&&(g.push(l),e=!0),b.readyState&&g.push(function(){var a=b.readyState;return"loaded"==a||"complete"==a}),"onreadystatechange"in b?b.addListener("readystatechange",j):e=!0,e&&k(),Element.Events.domready={onAdd:function(a){c&&a.call(this)}},Element.Events.load={base:"load",onAdd:function(b){d&&this==a&&b.call(this)},condition:function(){return this==a&&(i(),delete Element.Events.load),!0}},a.addEvent("load",function(){d=!0})}(window,document),!function(){this.MooTools={version:"1.5.1",build:"0542c135fdeb7feed7d9917e01447a408f22c876"};var a=this.typeOf=function(a){if(null==a)return"null";if(null!=a.$family)return a.$family();if(a.nodeName){if(1==a.nodeType)return"element";if(3==a.nodeType)return/\S/.test(a.nodeValue)?"textnode":"whitespace"}else if("number"==typeof a.length){if("callee"in a)return"arguments";if("item"in a)return"collection"}return typeof a},b=(this.instanceOf=function(a,b){if(null==a)return!1;for(var c=a.$constructor||a.constructor;c;){if(c===b)return!0;c=c.parent}return a.hasOwnProperty?a instanceof b:!1},this.Function),c=!0;for(var d in{toString:1})c=null;c&&(c=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]),b.prototype.overloadSetter=function(a){var b=this;return function(d,e){if(null==d)return this;if(a||"string"!=typeof d){for(var f in d)b.call(this,f,d[f]);if(c)for(var g=c.length;g--;)f=c[g],d.hasOwnProperty(f)&&b.call(this,f,d[f])}else b.call(this,d,e);return this}},b.prototype.overloadGetter=function(a){var b=this;return function(c){var d,e;if("string"!=typeof c?d=c:arguments.length>1?d=arguments:a&&(d=[c]),d){e={};for(var f=0;f<d.length;f++)e[d[f]]=b.call(this,d[f])}else e=b.call(this,c);return e}},b.prototype.extend=function(a,b){this[a]=b}.overloadSetter(),b.prototype.implement=function(a,b){this.prototype[a]=b}.overloadSetter();var e=Array.prototype.slice;b.from=function(b){return"function"==a(b)?b:function(){return b}},Array.from=function(b){return null==b?[]:f.isEnumerable(b)&&"string"!=typeof b?"array"==a(b)?b:e.call(b):[b]},Number.from=function(a){var b=parseFloat(a);return isFinite(b)?b:null},String.from=function(a){return a+""},b.implement({hide:function(){return this.$hidden=!0,this},protect:function(){return this.$protected=!0,this}});var f=this.Type=function(b,c){if(b){var d=b.toLowerCase(),e=function(b){return a(b)==d};f["is"+b]=e,null!=c&&(c.prototype.$family=function(){return d}.hide())}return null==c?null:(c.extend(this),c.$constructor=f,c.prototype.$constructor=c,c)},g=Object.prototype.toString;f.isEnumerable=function(a){return null!=a&&"number"==typeof a.length&&"[object Function]"!=g.call(a)};var h={},i=function(b){var c=a(b.prototype);return h[c]||(h[c]=[])},j=function(b,c){if(!c||!c.$hidden){for(var d=i(this),f=0;f<d.length;f++){var g=d[f];"type"==a(g)?j.call(g,b,c):g.call(this,b,c)}var h=this.prototype[b];null!=h&&h.$protected||(this.prototype[b]=c),null==this[b]&&"function"==a(c)&&k.call(this,b,function(a){return c.apply(a,e.call(arguments,1))})}},k=function(a,b){if(!b||!b.$hidden){var c=this[a];null!=c&&c.$protected||(this[a]=b)}};f.implement({implement:j.overloadSetter(),extend:k.overloadSetter(),alias:function(a,b){j.call(this,a,this.prototype[b])}.overloadSetter(),mirror:function(a){return i(this).push(a),this}}),new f("Type",f);var l=function(a,b,c){var d=b!=Object,e=b.prototype;d&&(b=new f(a,b));for(var g=0,h=c.length;h>g;g++){var i=c[g],j=b[i],k=e[i];j&&j.protect(),d&&k&&b.implement(i,k.protect())}if(d){var m=e.propertyIsEnumerable(c[0]);b.forEachMethod=function(a){if(!m)for(var b=0,d=c.length;d>b;b++)a.call(e,e[c[b]],c[b]);for(var f in e)a.call(e,e[f],f)}}return l};l("String",String,["charAt","charCodeAt","concat","contains","indexOf","lastIndexOf","match","quote","replace","search","slice","split","substr","substring","trim","toLowerCase","toUpperCase"])("Array",Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight"])("Number",Number,["toExponential","toFixed","toLocaleString","toPrecision"])("Function",b,["apply","call","bind"])("RegExp",RegExp,["exec","test"])("Object",Object,["create","defineProperty","defineProperties","keys","getPrototypeOf","getOwnPropertyDescriptor","getOwnPropertyNames","preventExtensions","isExtensible","seal","isSealed","freeze","isFrozen"])("Date",Date,["now"]),Object.extend=k.overloadSetter(),Date.extend("now",function(){return+new Date}),new f("Boolean",Boolean),Number.prototype.$family=function(){return isFinite(this)?"number":"null"}.hide(),Number.extend("random",function(a,b){return Math.floor(Math.random()*(b-a+1)+a)});var m=Object.prototype.hasOwnProperty;Object.extend("forEach",function(a,b,c){for(var d in a)m.call(a,d)&&b.call(c,a[d],d,a)}),Object.each=Object.forEach,Array.implement({forEach:function(a,b){for(var c=0,d=this.length;d>c;c++)c in this&&a.call(b,this[c],c,this)},each:function(a,b){return Array.forEach(this,a,b),this}});var n=function(b){switch(a(b)){case"array":return b.clone();case"object":return Object.clone(b);default:return b}};Array.implement("clone",function(){for(var a=this.length,b=new Array(a);a--;)b[a]=n(this[a]);return b});var o=function(b,c,d){switch(a(d)){case"object":"object"==a(b[c])?Object.merge(b[c],d):b[c]=Object.clone(d);break;case"array":b[c]=d.clone();break;default:b[c]=d}return b};Object.extend({merge:function(b,c,d){if("string"==a(c))return o(b,c,d);for(var e=1,f=arguments.length;f>e;e++){var g=arguments[e];for(var h in g)o(b,h,g[h])}return b},clone:function(a){var b={};for(var c in a)b[c]=n(a[c]);return b},append:function(a){for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b]||{};for(var e in d)a[e]=d[e]}return a}}),["Object","WhiteSpace","TextNode","Collection","Arguments"].each(function(a){new f(a)});var p=Date.now();String.extend("uniqueID",function(){return(p++).toString(36)})}(),Array.implement({every:function(a,b){for(var c=0,d=this.length>>>0;d>c;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0},filter:function(a,b){for(var c,d=[],e=0,f=this.length>>>0;f>e;e++)e in this&&(c=this[e],a.call(b,c,e,this)&&d.push(c));return d},indexOf:function(a,b){for(var c=this.length>>>0,d=0>b?Math.max(0,c+b):b||0;c>d;d++)if(this[d]===a)return d;return-1},map:function(a,b){for(var c=this.length>>>0,d=Array(c),e=0;c>e;e++)e in this&&(d[e]=a.call(b,this[e],e,this));return d},some:function(a,b){for(var c=0,d=this.length>>>0;d>c;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1},clean:function(){return this.filter(function(a){return null!=a})},invoke:function(a){var b=Array.slice(arguments,1);return this.map(function(c){return c[a].apply(c,b)})},associate:function(a){for(var b={},c=Math.min(this.length,a.length),d=0;c>d;d++)b[a[d]]=this[d];return b},link:function(a){for(var b={},c=0,d=this.length;d>c;c++)for(var e in a)if(a[e](this[c])){b[e]=this[c],delete a[e];break}return b},contains:function(a,b){return-1!=this.indexOf(a,b)},append:function(a){return this.push.apply(this,a),this},getLast:function(){return this.length?this[this.length-1]:null},getRandom:function(){return this.length?this[Number.random(0,this.length-1)]:null},include:function(a){return this.contains(a)||this.push(a),this},combine:function(a){for(var b=0,c=a.length;c>b;b++)this.include(a[b]);return this},erase:function(a){for(var b=this.length;b--;)this[b]===a&&this.splice(b,1);return this},empty:function(){return this.length=0,this},flatten:function(){for(var a=[],b=0,c=this.length;c>b;b++){var d=typeOf(this[b]);"null"!=d&&(a=a.concat("array"==d||"collection"==d||"arguments"==d||instanceOf(this[b],Array)?Array.flatten(this[b]):this[b]))}return a},pick:function(){for(var a=0,b=this.length;b>a;a++)if(null!=this[a])return this[a];return null},hexToRgb:function(a){if(3!=this.length)return null;var b=this.map(function(a){return 1==a.length&&(a+=a),parseInt(a,16)});return a?b:"rgb("+b+")"},rgbToHex:function(a){if(this.length<3)return null;if(4==this.length&&0==this[3]&&!a)return"transparent";for(var b=[],c=0;3>c;c++){var d=(this[c]-0).toString(16);b.push(1==d.length?"0"+d:d)}return a?b:"#"+b.join("")}}),String.implement({contains:function(a,b){return(b?String(this).slice(b):String(this)).indexOf(a)>-1},test:function(a,b){return("regexp"==typeOf(a)?a:new RegExp(""+a,b)).test(this)},trim:function(){return String(this).replace(/^\s+|\s+$/g,"")},clean:function(){return String(this).replace(/\s+/g," ").trim()},camelCase:function(){return String(this).replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()})},hyphenate:function(){return String(this).replace(/[A-Z]/g,function(a){return"-"+a.charAt(0).toLowerCase()})},capitalize:function(){return String(this).replace(/\b[a-z]/g,function(a){return a.toUpperCase()})},escapeRegExp:function(){return String(this).replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},toInt:function(a){return parseInt(this,a||10)},toFloat:function(){return parseFloat(this)},hexToRgb:function(a){var b=String(this).match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return b?b.slice(1).hexToRgb(a):null},rgbToHex:function(a){var b=String(this).match(/\d{1,3}/g);return b?b.rgbToHex(a):null},substitute:function(a,b){return String(this).replace(b||/\\?\{([^{}]+)\}/g,function(b,c){return"\\"==b.charAt(0)?b.slice(1):null!=a[c]?a[c]:""})}}),Function.extend({attempt:function(){for(var a=0,b=arguments.length;b>a;a++)try{return arguments[a]()}catch(c){}return null}}),Function.implement({attempt:function(a,b){try{return this.apply(b,Array.from(a))}catch(c){}return null},bind:function(a){var b=this,c=arguments.length>1?Array.slice(arguments,1):null,d=function(){},e=function(){var f=a,g=arguments.length;this instanceof e&&(d.prototype=b.prototype,f=new d);var h=c||g?b.apply(f,c&&g?c.concat(Array.slice(arguments)):c||arguments):b.call(f);return f==a?h:f};return e},pass:function(a,b){var c=this;return null!=a&&(a=Array.from(a)),function(){return c.apply(b,a||arguments)}},delay:function(a,b,c){return setTimeout(this.pass(null==c?[]:c,b),a)},periodical:function(a,b,c){return setInterval(this.pass(null==c?[]:c,b),a)}}),Number.implement({limit:function(a,b){return Math.min(b,Math.max(a,this))},round:function(a){return a=Math.pow(10,a||0).toFixed(0>a?-a:0),Math.round(this*a)/a},times:function(a,b){for(var c=0;this>c;c++)a.call(b,c,this)},toFloat:function(){return parseFloat(this)},toInt:function(a){return parseInt(this,a||10)}}),Number.alias("each","times"),function(a){var b={};a.each(function(a){Number[a]||(b[a]=function(){return Math[a].apply(null,[this].concat(Array.from(arguments)))})}),Number.implement(b)}(["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","sin","sqrt","tan"]),function(){var a=this.Class=new Type("Class",function(d){instanceOf(d,Function)&&(d={initialize:d});var e=function(){if(c(this),e.$prototyping)return this;this.$caller=null;var a=this.initialize?this.initialize.apply(this,arguments):this;return this.$caller=this.caller=null,a}.extend(this).implement(d);return e.$constructor=a,e.prototype.$constructor=e,e.prototype.parent=b,e}),b=function(){if(!this.$caller)throw new Error('The method "parent" cannot be called.');var a=this.$caller.$name,b=this.$caller.$owner.parent,c=b?b.prototype[a]:null;if(!c)throw new Error('The method "'+a+'" has no parent.');return c.apply(this,arguments)},c=function(a){for(var b in a){var d=a[b];switch(typeOf(d)){case"object":var e=function(){};e.prototype=d,a[b]=c(new e);break;case"array":a[b]=d.clone()}}return a},d=function(a,b,c){c.$origin&&(c=c.$origin);var d=function(){if(c.$protected&&null==this.$caller)throw new Error('The method "'+b+'" cannot be called.');var a=this.caller,e=this.$caller;this.caller=e,this.$caller=d;var f=c.apply(this,arguments);return this.$caller=e,this.caller=a,f}.extend({$owner:a,$origin:c,$name:b});return d},e=function(b,c,e){if(a.Mutators.hasOwnProperty(b)&&(c=a.Mutators[b].call(this,c),null==c))return this;if("function"==typeOf(c)){if(c.$hidden)return this;this.prototype[b]=e?c:d(this,b,c)}else Object.merge(this.prototype,b,c);return this},f=function(a){a.$prototyping=!0;var b=new a;return delete a.$prototyping,b};a.implement("implement",e.overloadSetter()),a.Mutators={Extends:function(a){this.parent=a,this.prototype=f(a)},Implements:function(a){Array.from(a).each(function(a){var b=new a;for(var c in b)e.call(this,c,b[c],!0)},this)}}}(),function(){this.Chain=new Class({$chain:[],chain:function(){return this.$chain.append(Array.flatten(arguments)),this},callChain:function(){return this.$chain.length?this.$chain.shift().apply(this,arguments):!1},clearChain:function(){return this.$chain.empty(),this}});var a=function(a){return a.replace(/^on([A-Z])/,function(a,b){return b.toLowerCase()})};this.Events=new Class({$events:{},addEvent:function(b,c,d){return b=a(b),this.$events[b]=(this.$events[b]||[]).include(c),d&&(c.internal=!0),this},addEvents:function(a){for(var b in a)this.addEvent(b,a[b]);return this},fireEvent:function(b,c,d){b=a(b);var e=this.$events[b];return e?(c=Array.from(c),e.each(function(a){d?a.delay(d,this,c):a.apply(this,c)},this),this):this},removeEvent:function(b,c){b=a(b);var d=this.$events[b];if(d&&!c.internal){var e=d.indexOf(c);-1!=e&&delete d[e]}return this},removeEvents:function(b){var c;if("object"==typeOf(b)){for(c in b)this.removeEvent(c,b[c]);return this}b&&(b=a(b));for(c in this.$events)if(!b||b==c)for(var d=this.$events[c],e=d.length;e--;)e in d&&this.removeEvent(c,d[e]);return this}}),this.Options=new Class({setOptions:function(){var a=this.options=Object.merge.apply(null,[{},this.options].append(arguments));if(this.addEvent)for(var b in a)"function"==typeOf(a[b])&&/^on[A-Z]/.test(b)&&(this.addEvent(b,a[b]),delete a[b]);return this}})}(),function(){var a=this.document,b=a.window=this,c=function(a,b){a=a.toLowerCase(),b=b?b.toLowerCase():"";var c=a.match(/(opera|ie|firefox|chrome|trident|crios|version)[\s\/:]([\w\d\.]+)?.*?(safari|(?:rv[\s\/:]|version[\s\/:])([\w\d\.]+)|$)/)||[null,"unknown",0];return"trident"==c[1]?(c[1]="ie",c[4]&&(c[2]=c[4])):"crios"==c[1]&&(c[1]="chrome"),b=a.match(/ip(?:ad|od|hone)/)?"ios":(a.match(/(?:webos|android)/)||b.match(/mac|win|linux/)||["other"])[0],"win"==b&&(b="windows"),{extend:Function.prototype.extend,name:"version"==c[1]?c[3]:c[1],version:parseFloat("opera"==c[1]&&c[4]?c[4]:c[2]),platform:b}},d=this.Browser=c(navigator.userAgent,navigator.platform);if("ie"==d.name&&(d.version=a.documentMode),d.extend({Features:{xpath:!!a.evaluate,air:!!b.runtime,query:!!a.querySelector,json:!!b.JSON},parseUA:c}),d.Request=function(){var a=function(){return new XMLHttpRequest},b=function(){return new ActiveXObject("MSXML2.XMLHTTP")},c=function(){return new ActiveXObject("Microsoft.XMLHTTP")};return Function.attempt(function(){return a(),a},function(){return b(),b},function(){return c(),c})}(),d.Features.xhr=!!d.Request,d.exec=function(c){if(!c)return c;if(b.execScript)b.execScript(c);else{var d=a.createElement("script");d.setAttribute("type","text/javascript"),d.text=c,a.head.appendChild(d),a.head.removeChild(d)}return c},String.implement("stripScripts",function(a){var b="",c=this.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(a,c){return b+=c+"\n",""});return a===!0?d.exec(b):"function"==typeOf(a)&&a(b,c),c}),d.extend({Document:this.Document,Window:this.Window,Element:this.Element,Event:this.Event}),this.Window=this.$constructor=new Type("Window",function(){}),this.$family=Function.from("window").hide(),Window.mirror(function(a,c){b[a]=c}),this.Document=a.$constructor=new Type("Document",function(){}),a.$family=Function.from("document").hide(),Document.mirror(function(b,c){a[b]=c}),a.html=a.documentElement,a.head||(a.head=a.getElementsByTagName("head")[0]),a.execCommand)try{a.execCommand("BackgroundImageCache",!1,!0)}catch(e){}if(this.attachEvent&&!this.addEventListener){var f=function(){this.detachEvent("onunload",f),a.head=a.html=a.window=null,b=this.Window=a=null};this.attachEvent("onunload",f)}var g=Array.from;try{g(a.html.childNodes)}catch(e){Array.from=function(a){if("string"!=typeof a&&Type.isEnumerable(a)&&"array"!=typeOf(a)){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}return g(a)};var h=Array.prototype,i=h.slice;["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice"].each(function(a){var b=h[a];Array[a]=function(a){return b.apply(Array.from(a),i.call(arguments,1))}})}}(),function(){var a=Object.prototype.hasOwnProperty;Object.extend({subset:function(a,b){for(var c={},d=0,e=b.length;e>d;d++){var f=b[d];f in a&&(c[f]=a[f])}return c},map:function(b,c,d){var e={};for(var f in b)a.call(b,f)&&(e[f]=c.call(d,b[f],f,b));return e},filter:function(b,c,d){var e={};for(var f in b){var g=b[f];a.call(b,f)&&c.call(d,g,f,b)&&(e[f]=g)}return e},every:function(b,c,d){for(var e in b)if(a.call(b,e)&&!c.call(d,b[e],e))return!1;return!0},some:function(b,c,d){for(var e in b)if(a.call(b,e)&&c.call(d,b[e],e))return!0;return!1},keys:function(b){var c=[];for(var d in b)a.call(b,d)&&c.push(d);return c},values:function(b){var c=[];for(var d in b)a.call(b,d)&&c.push(b[d]);return c},getLength:function(a){return Object.keys(a).length},keyOf:function(b,c){for(var d in b)if(a.call(b,d)&&b[d]===c)return d;return null},contains:function(a,b){return null!=Object.keyOf(a,b)},toQueryString:function(a,b){var c=[];return Object.each(a,function(a,d){b&&(d=b+"["+d+"]");var e;switch(typeOf(a)){case"object":e=Object.toQueryString(a,d);break;case"array":var f={};a.each(function(a,b){f[b]=a}),e=Object.toQueryString(f,d);break;default:e=d+"="+encodeURIComponent(a)}null!=a&&c.push(e)}),c.join("&")}})}(),function(){function a(a,f,g,i,k,m,n,o,p,q,r,s,t,u,v,w){if((f||-1===c)&&(b.expressions[++c]=[],d=-1,f))return"";if(g||i||-1===d){g=g||" ";var x=b.expressions[c];e&&x[d]&&(x[d].reverseCombinator=j(g)),x[++d]={combinator:g,tag:"*"}}var y=b.expressions[c][d];if(k)y.tag=k.replace(h,"");else if(m)y.id=m.replace(h,"");else if(n)n=n.replace(h,""),y.classList||(y.classList=[]),y.classes||(y.classes=[]),y.classList.push(n),y.classes.push({value:n,regexp:new RegExp("(^|\\s)"+l(n)+"(\\s|$)")});else if(t)w=w||v,w=w?w.replace(h,""):null,y.pseudos||(y.pseudos=[]),y.pseudos.push({key:t.replace(h,""),value:w,type:1==s.length?"class":"element"});else if(o){o=o.replace(h,""),r=(r||"").replace(h,"");var z,A;switch(p){case"^=":A=new RegExp("^"+l(r));break;case"$=":A=new RegExp(l(r)+"$");break;case"~=":A=new RegExp("(^|\\s)"+l(r)+"(\\s|$)");break;case"|=":A=new RegExp("^"+l(r)+"(-|$)");break;case"=":z=function(a){return r==a};break;case"*=":z=function(a){return a&&a.indexOf(r)>-1};break;case"!=":z=function(a){return r!=a};break;default:z=function(a){return!!a}}""==r&&/^[*$^]=$/.test(p)&&(z=function(){return!1}),z||(z=function(a){return a&&A.test(a)}),y.attributes||(y.attributes=[]),y.attributes.push({key:o,operator:p,value:r,test:z})}return""}var b,c,d,e,f={},g={},h=/\\/g,i=function(d,h){if(null==d)return null;if(d.Slick===!0)return d;d=(""+d).replace(/^\s+|\s+$/g,""),e=!!h;var j=e?g:f;if(j[d])return j[d];for(b={Slick:!0,expressions:[],raw:d,reverse:function(){return i(this.raw,!0)}},c=-1;d!=(d=d.replace(m,a)););return b.length=b.expressions.length,j[b.raw]=e?k(b):b},j=function(a){return"!"===a?" ":" "===a?"!":/^!/.test(a)?a.replace(/^!/,""):"!"+a},k=function(a){for(var b=a.expressions,c=0;c<b.length;c++){for(var d=b[c],e={parts:[],tag:"*",combinator:j(d[0].combinator)},f=0;f<d.length;f++){var g=d[f];g.reverseCombinator||(g.reverseCombinator=" "),g.combinator=g.reverseCombinator,delete g.reverseCombinator}d.reverse().push(e)}return a},l=function(a){return a.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(a){return"\\"+a})},m=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+l(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),n=this.Slick||{};n.parse=function(a){return i(a)},n.escapeRegExp=l,this.Slick||(this.Slick=n)}.apply("undefined"!=typeof exports?exports:this),function(){var a={},b={},c=Object.prototype.toString;a.isNativeCode=function(a){return/\{\s*\[native code\]\s*\}/.test(""+a)},a.isXML=function(a){return!!a.xmlVersion||!!a.xml||"[object XMLDocument]"==c.call(a)||9==a.nodeType&&"HTML"!=a.documentElement.nodeName},a.setDocument=function(a){var c=a.nodeType;if(9==c);else if(c)a=a.ownerDocument;else{if(!a.navigator)return;a=a.document}if(this.document!==a){this.document=a;var d,e=a.documentElement,f=this.getUIDXML(e),g=b[f];if(g)for(d in g)this[d]=g[d];else{g=b[f]={},g.root=e,g.isXMLDocument=this.isXML(a),g.brokenStarGEBTN=g.starSelectsClosedQSA=g.idGetsName=g.brokenMixedCaseQSA=g.brokenGEBCN=g.brokenCheckedQSA=g.brokenEmptyAttributeQSA=g.isHTMLDocument=g.nativeMatchesSelector=!1;var h,i,j,k,l,m,n="slick_uniqueid",o=a.createElement("div"),p=a.body||a.getElementsByTagName("body")[0]||e;p.appendChild(o);try{o.innerHTML='<a id="'+n+'"></a>',g.isHTMLDocument=!!a.getElementById(n)}catch(q){}if(g.isHTMLDocument){o.style.display="none",o.appendChild(a.createComment("")),i=o.getElementsByTagName("*").length>1;try{o.innerHTML="foo</foo>",m=o.getElementsByTagName("*"),h=m&&!!m.length&&"/"==m[0].nodeName.charAt(0)}catch(q){}g.brokenStarGEBTN=i||h;try{o.innerHTML='<a name="'+n+'"></a><b id="'+n+'"></b>',g.idGetsName=a.getElementById(n)===o.firstChild}catch(q){}if(o.getElementsByClassName){try{o.innerHTML='<a class="f"></a><a class="b"></a>',o.getElementsByClassName("b").length,o.firstChild.className="b",k=2!=o.getElementsByClassName("b").length}catch(q){}try{o.innerHTML='<a class="a"></a><a class="f b a"></a>',j=2!=o.getElementsByClassName("a").length}catch(q){}g.brokenGEBCN=k||j}if(o.querySelectorAll){try{o.innerHTML="foo</foo>",m=o.querySelectorAll("*"),g.starSelectsClosedQSA=m&&!!m.length&&"/"==m[0].nodeName.charAt(0)}catch(q){}try{o.innerHTML='<a class="MiX"></a>',g.brokenMixedCaseQSA=!o.querySelectorAll(".MiX").length}catch(q){}try{o.innerHTML='<select><option selected="selected">a</option></select>',g.brokenCheckedQSA=0==o.querySelectorAll(":checked").length}catch(q){}try{o.innerHTML='<a class=""></a>',g.brokenEmptyAttributeQSA=0!=o.querySelectorAll('[class*=""]').length}catch(q){}}try{o.innerHTML='<form action="s"><input id="action"/></form>',l="s"!=o.firstChild.getAttribute("action")}catch(q){}if(g.nativeMatchesSelector=e.matches||e.mozMatchesSelector||e.webkitMatchesSelector,g.nativeMatchesSelector)try{g.nativeMatchesSelector.call(e,":slick"),g.nativeMatchesSelector=null}catch(q){}}try{e.slick_expando=1,delete e.slick_expando,g.getUID=this.getUIDHTML}catch(q){g.getUID=this.getUIDXML}p.removeChild(o),o=m=p=null,g.getAttribute=g.isHTMLDocument&&l?function(a,b){var c=this.attributeGetters[b];if(c)return c.call(a);var d=a.getAttributeNode(b);return d?d.nodeValue:null}:function(a,b){var c=this.attributeGetters[b];return c?c.call(a):a.getAttribute(b)},g.hasAttribute=e&&this.isNativeCode(e.hasAttribute)?function(a,b){return a.hasAttribute(b)}:function(a,b){return a=a.getAttributeNode(b),!(!a||!a.specified&&!a.nodeValue)};var r=e&&this.isNativeCode(e.contains),s=a&&this.isNativeCode(a.contains);g.contains=r&&s?function(a,b){return a.contains(b)}:r&&!s?function(b,c){return b===c||(b===a?a.documentElement:b).contains(c)}:e&&e.compareDocumentPosition?function(a,b){return a===b||!!(16&a.compareDocumentPosition(b))}:function(a,b){if(b)do if(b===a)return!0;while(b=b.parentNode);return!1},g.documentSorter=e.compareDocumentPosition?function(a,b){return a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b)?-1:a===b?0:1:0}:"sourceIndex"in e?function(a,b){return a.sourceIndex&&b.sourceIndex?a.sourceIndex-b.sourceIndex:0}:a.createRange?function(a,b){if(!a.ownerDocument||!b.ownerDocument)return 0;var c=a.ownerDocument.createRange(),d=b.ownerDocument.createRange();return c.setStart(a,0),c.setEnd(a,0),d.setStart(b,0),d.setEnd(b,0),c.compareBoundaryPoints(Range.START_TO_END,d)}:null,e=null;for(d in g)this[d]=g[d]}}};var d=/^([#.]?)((?:[\w-]+|\*))$/,e=/\[.+[*$^]=(?:""|'')?\]/,f={};a.search=function(a,b,c,g){var h=this.found=g?null:c||[];if(!a)return h;if(a.navigator)a=a.document;else if(!a.nodeType)return h;var i,j,k=this.uniques={},m=!(!c||!c.length),n=9==a.nodeType;if(this.document!==(n?a:a.ownerDocument)&&this.setDocument(a),m)for(j=h.length;j--;)k[this.getUID(h[j])]=!0;if("string"==typeof b){var o=b.match(d);a:if(o){var p,q,r=o[1],s=o[2];if(r){if("#"==r){if(!this.isHTMLDocument||!n)break a;if(p=a.getElementById(s),!p)return h;if(this.idGetsName&&p.getAttributeNode("id").nodeValue!=s)break a;if(g)return p||null;m&&k[this.getUID(p)]||h.push(p)}else if("."==r){if(!this.isHTMLDocument||(!a.getElementsByClassName||this.brokenGEBCN)&&a.querySelectorAll)break a;if(a.getElementsByClassName&&!this.brokenGEBCN){if(q=a.getElementsByClassName(s),g)return q[0]||null;for(j=0;p=q[j++];)m&&k[this.getUID(p)]||h.push(p)}else{var t=new RegExp("(^|\\s)"+l.escapeRegExp(s)+"(\\s|$)");for(q=a.getElementsByTagName("*"),j=0;p=q[j++];)if(className=p.className,className&&t.test(className)){if(g)return p;m&&k[this.getUID(p)]||h.push(p)}}}}else{if("*"==s&&this.brokenStarGEBTN)break a;if(q=a.getElementsByTagName(s),g)return q[0]||null;for(j=0;p=q[j++];)m&&k[this.getUID(p)]||h.push(p)}return m&&this.sort(h),g?null:h}a:if(a.querySelectorAll){if(!this.isHTMLDocument||f[b]||this.brokenMixedCaseQSA||this.brokenCheckedQSA&&b.indexOf(":checked")>-1||this.brokenEmptyAttributeQSA&&e.test(b)||!n&&b.indexOf(",")>-1||l.disableQSA)break a;
var u=b,v=a;if(!n){var w=v.getAttribute("id"),x="slickid__";v.setAttribute("id",x),u="#"+x+" "+u,a=v.parentNode}try{if(g)return a.querySelector(u)||null;q=a.querySelectorAll(u)}catch(y){f[b]=1;break a}finally{n||(w?v.setAttribute("id",w):v.removeAttribute("id"),a=v)}if(this.starSelectsClosedQSA)for(j=0;p=q[j++];)!(p.nodeName>"@")||m&&k[this.getUID(p)]||h.push(p);else for(j=0;p=q[j++];)m&&k[this.getUID(p)]||h.push(p);return m&&this.sort(h),h}if(i=this.Slick.parse(b),!i.length)return h}else{if(null==b)return h;if(!b.Slick)return this.contains(a.documentElement||a,b)?(h?h.push(b):h=b,h):h;i=b}this.posNTH={},this.posNTHLast={},this.posNTHType={},this.posNTHTypeLast={},this.push=!m&&(g||1==i.length&&1==i.expressions[0].length)?this.pushArray:this.pushUID,null==h&&(h=[]);var z,A,B,C,D,E,F,G,H,I,J,K,L,M,N=i.expressions;a:for(j=0;K=N[j];j++)for(z=0;L=K[z];z++){if(C="combinator:"+L.combinator,!this[C])continue a;if(D=this.isXMLDocument?L.tag:L.tag.toUpperCase(),E=L.id,F=L.classList,G=L.classes,H=L.attributes,I=L.pseudos,M=z===K.length-1,this.bitUniques={},M?(this.uniques=k,this.found=h):(this.uniques={},this.found=[]),0===z){if(this[C](a,D,E,G,H,I,F),g&&M&&h.length)break a}else if(g&&M){for(A=0,B=J.length;B>A;A++)if(this[C](J[A],D,E,G,H,I,F),h.length)break a}else for(A=0,B=J.length;B>A;A++)this[C](J[A],D,E,G,H,I,F);J=this.found}return(m||i.expressions.length>1)&&this.sort(h),g?h[0]||null:h},a.uidx=1,a.uidk="slick-uniqueid",a.getUIDXML=function(a){var b=a.getAttribute(this.uidk);return b||(b=this.uidx++,a.setAttribute(this.uidk,b)),b},a.getUIDHTML=function(a){return a.uniqueNumber||(a.uniqueNumber=this.uidx++)},a.sort=function(a){return this.documentSorter?(a.sort(this.documentSorter),a):a},a.cacheNTH={},a.matchNTH=/^([+-]?\d*)?([a-z]+)?([+-]\d+)?$/,a.parseNTHArgument=function(a){var b=a.match(this.matchNTH);if(!b)return!1;var c=b[2]||!1,d=b[1]||1;"-"==d&&(d=-1);var e=+b[3]||0;return b="n"==c?{a:d,b:e}:"odd"==c?{a:2,b:1}:"even"==c?{a:2,b:0}:{a:0,b:d},this.cacheNTH[a]=b},a.createNTHPseudo=function(a,b,c,d){return function(e,f){var g=this.getUID(e);if(!this[c][g]){var h=e.parentNode;if(!h)return!1;var i=h[a],j=1;if(d){var k=e.nodeName;do i.nodeName==k&&(this[c][this.getUID(i)]=j++);while(i=i[b])}else do 1==i.nodeType&&(this[c][this.getUID(i)]=j++);while(i=i[b])}f=f||"n";var l=this.cacheNTH[f]||this.parseNTHArgument(f);if(!l)return!1;var m=l.a,n=l.b,o=this[c][g];if(0==m)return n==o;if(m>0){if(n>o)return!1}else if(o>n)return!1;return(o-n)%m==0}},a.pushArray=function(a,b,c,d,e,f){this.matchSelector(a,b,c,d,e,f)&&this.found.push(a)},a.pushUID=function(a,b,c,d,e,f){var g=this.getUID(a);!this.uniques[g]&&this.matchSelector(a,b,c,d,e,f)&&(this.uniques[g]=!0,this.found.push(a))},a.matchNode=function(a,b){if(this.isHTMLDocument&&this.nativeMatchesSelector)try{return this.nativeMatchesSelector.call(a,b.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(c){}var d=this.Slick.parse(b);if(!d)return!0;var e,f,g=d.expressions,h=0;for(e=0;f=g[e];e++)if(1==f.length){var i=f[0];if(this.matchSelector(a,this.isXMLDocument?i.tag:i.tag.toUpperCase(),i.id,i.classes,i.attributes,i.pseudos))return!0;h++}if(h==d.length)return!1;var j,k=this.search(this.document,d);for(e=0;j=k[e++];)if(j===a)return!0;return!1},a.matchPseudo=function(a,b,c){var d="pseudo:"+b;if(this[d])return this[d](a,c);var e=this.getAttribute(a,b);return c?c==e:!!e},a.matchSelector=function(a,b,c,d,e,f){if(b){var g=this.isXMLDocument?a.nodeName:a.nodeName.toUpperCase();if("*"==b){if("@">g)return!1}else if(g!=b)return!1}if(c&&a.getAttribute("id")!=c)return!1;var h,i,j;if(d)for(h=d.length;h--;)if(j=this.getAttribute(a,"class"),!j||!d[h].regexp.test(j))return!1;if(e)for(h=e.length;h--;)if(i=e[h],i.operator?!i.test(this.getAttribute(a,i.key)):!this.hasAttribute(a,i.key))return!1;if(f)for(h=f.length;h--;)if(i=f[h],!this.matchPseudo(a,i.key,i.value))return!1;return!0};var g={" ":function(a,b,c,d,e,f,g){var h,i,j;if(this.isHTMLDocument){a:if(c){if(i=this.document.getElementById(c),!i&&a.all||this.idGetsName&&i&&i.getAttributeNode("id").nodeValue!=c){if(j=a.all[c],!j)return;for(j[0]||(j=[j]),h=0;i=j[h++];){var k=i.getAttributeNode("id");if(k&&k.nodeValue==c){this.push(i,b,null,d,e,f);break}}return}if(!i){if(this.contains(this.root,a))return;break a}if(this.document!==a&&!this.contains(a,i))return;return void this.push(i,b,null,d,e,f)}a:if(d&&a.getElementsByClassName&&!this.brokenGEBCN){if(j=a.getElementsByClassName(g.join(" ")),!j||!j.length)break a;for(h=0;i=j[h++];)this.push(i,b,c,null,e,f);return}}if(j=a.getElementsByTagName(b),j&&j.length)for(this.brokenStarGEBTN||(b=null),h=0;i=j[h++];)this.push(i,b,c,d,e,f)},">":function(a,b,c,d,e,f){if(a=a.firstChild)do 1==a.nodeType&&this.push(a,b,c,d,e,f);while(a=a.nextSibling)},"+":function(a,b,c,d,e,f){for(;a=a.nextSibling;)if(1==a.nodeType){this.push(a,b,c,d,e,f);break}},"^":function(a,b,c,d,e,f){a=a.firstChild,a&&(1==a.nodeType?this.push(a,b,c,d,e,f):this["combinator:+"](a,b,c,d,e,f))},"~":function(a,b,c,d,e,f){for(;a=a.nextSibling;)if(1==a.nodeType){var g=this.getUID(a);if(this.bitUniques[g])break;this.bitUniques[g]=!0,this.push(a,b,c,d,e,f)}},"++":function(a,b,c,d,e,f){this["combinator:+"](a,b,c,d,e,f),this["combinator:!+"](a,b,c,d,e,f)},"~~":function(a,b,c,d,e,f){this["combinator:~"](a,b,c,d,e,f),this["combinator:!~"](a,b,c,d,e,f)},"!":function(a,b,c,d,e,f){for(;a=a.parentNode;)a!==this.document&&this.push(a,b,c,d,e,f)},"!>":function(a,b,c,d,e,f){a=a.parentNode,a!==this.document&&this.push(a,b,c,d,e,f)},"!+":function(a,b,c,d,e,f){for(;a=a.previousSibling;)if(1==a.nodeType){this.push(a,b,c,d,e,f);break}},"!^":function(a,b,c,d,e,f){a=a.lastChild,a&&(1==a.nodeType?this.push(a,b,c,d,e,f):this["combinator:!+"](a,b,c,d,e,f))},"!~":function(a,b,c,d,e,f){for(;a=a.previousSibling;)if(1==a.nodeType){var g=this.getUID(a);if(this.bitUniques[g])break;this.bitUniques[g]=!0,this.push(a,b,c,d,e,f)}}};for(var h in g)a["combinator:"+h]=g[h];var i={empty:function(a){var b=a.firstChild;return!(b&&1==b.nodeType||(a.innerText||a.textContent||"").length)},not:function(a,b){return!this.matchNode(a,b)},contains:function(a,b){return(a.innerText||a.textContent||"").indexOf(b)>-1},"first-child":function(a){for(;a=a.previousSibling;)if(1==a.nodeType)return!1;return!0},"last-child":function(a){for(;a=a.nextSibling;)if(1==a.nodeType)return!1;return!0},"only-child":function(a){for(var b=a;b=b.previousSibling;)if(1==b.nodeType)return!1;for(var c=a;c=c.nextSibling;)if(1==c.nodeType)return!1;return!0},"nth-child":a.createNTHPseudo("firstChild","nextSibling","posNTH"),"nth-last-child":a.createNTHPseudo("lastChild","previousSibling","posNTHLast"),"nth-of-type":a.createNTHPseudo("firstChild","nextSibling","posNTHType",!0),"nth-last-of-type":a.createNTHPseudo("lastChild","previousSibling","posNTHTypeLast",!0),index:function(a,b){return this["pseudo:nth-child"](a,""+(b+1))},even:function(a){return this["pseudo:nth-child"](a,"2n")},odd:function(a){return this["pseudo:nth-child"](a,"2n+1")},"first-of-type":function(a){for(var b=a.nodeName;a=a.previousSibling;)if(a.nodeName==b)return!1;return!0},"last-of-type":function(a){for(var b=a.nodeName;a=a.nextSibling;)if(a.nodeName==b)return!1;return!0},"only-of-type":function(a){for(var b=a,c=a.nodeName;b=b.previousSibling;)if(b.nodeName==c)return!1;for(var d=a;d=d.nextSibling;)if(d.nodeName==c)return!1;return!0},enabled:function(a){return!a.disabled},disabled:function(a){return a.disabled},checked:function(a){return a.checked||a.selected},focus:function(a){return this.isHTMLDocument&&this.document.activeElement===a&&(a.href||a.type||this.hasAttribute(a,"tabindex"))},root:function(a){return a===this.root},selected:function(a){return a.selected}};for(var j in i)a["pseudo:"+j]=i[j];var k=a.attributeGetters={"for":function(){return"htmlFor"in this?this.htmlFor:this.getAttribute("for")},href:function(){return"href"in this?this.getAttribute("href",2):this.getAttribute("href")},style:function(){return this.style?this.style.cssText:this.getAttribute("style")},tabindex:function(){var a=this.getAttributeNode("tabindex");return a&&a.specified?a.nodeValue:null},type:function(){return this.getAttribute("type")},maxlength:function(){var a=this.getAttributeNode("maxLength");return a&&a.specified?a.nodeValue:null}};k.MAXLENGTH=k.maxLength=k.maxlength;var l=a.Slick=this.Slick||{};l.version="1.1.7",l.search=function(b,c,d){return a.search(b,c,d)},l.find=function(b,c){return a.search(b,c,null,!0)},l.contains=function(b,c){return a.setDocument(b),a.contains(b,c)},l.getAttribute=function(b,c){return a.setDocument(b),a.getAttribute(b,c)},l.hasAttribute=function(b,c){return a.setDocument(b),a.hasAttribute(b,c)},l.match=function(b,c){return b&&c?c&&c!==b?(a.setDocument(b),a.matchNode(b,c)):!0:!1},l.defineAttributeGetter=function(b,c){return a.attributeGetters[b]=c,this},l.lookupAttributeGetter=function(b){return a.attributeGetters[b]},l.definePseudo=function(b,c){return a["pseudo:"+b]=function(a,b){return c.call(a,b)},this},l.lookupPseudo=function(b){var c=a["pseudo:"+b];return c?function(a){return c.call(this,a)}:null},l.override=function(b,c){return a.override(b,c),this},l.isXML=a.isXML,l.uidOf=function(b){return a.getUIDHTML(b)},this.Slick||(this.Slick=l)}.apply("undefined"!=typeof exports?exports:this);var Element=this.Element=function(a,b){var c=Element.Constructors[a];if(c)return c(b);if("string"!=typeof a)return document.id(a).set(b);if(b||(b={}),!/^[\w-]+$/.test(a)){var d=Slick.parse(a).expressions[0][0];a="*"==d.tag?"div":d.tag,d.id&&null==b.id&&(b.id=d.id);var e=d.attributes;if(e)for(var f,g=0,h=e.length;h>g;g++)f=e[g],null==b[f.key]&&(null!=f.value&&"="==f.operator?b[f.key]=f.value:f.value||f.operator||(b[f.key]=!0));d.classList&&null==b["class"]&&(b["class"]=d.classList.join(" "))}return document.newElement(a,b)};Browser.Element&&(Element.prototype=Browser.Element.prototype,Element.prototype._fireEvent=function(a){return function(b,c){return a.call(this,b,c)}}(Element.prototype.fireEvent)),new Type("Element",Element).mirror(function(a){if(!Array.prototype[a]){var b={};b[a]=function(){for(var b=[],c=arguments,d=!0,e=0,f=this.length;f>e;e++){var g=this[e],h=b[e]=g[a].apply(g,c);d=d&&"element"==typeOf(h)}return d?new Elements(b):b},Elements.implement(b)}}),Browser.Element||(Element.parent=Object,Element.Prototype={$constructor:Element,$family:Function.from("element").hide()},Element.mirror(function(a,b){Element.Prototype[a]=b})),Element.Constructors={};var IFrame=new Type("IFrame",function(){var a,b=Array.link(arguments,{properties:Type.isObject,iframe:function(a){return null!=a}}),c=b.properties||{};b.iframe&&(a=document.id(b.iframe));var d=c.onload||function(){};delete c.onload,c.id=c.name=[c.id,c.name,a?a.id||a.name:"IFrame_"+String.uniqueID()].pick(),a=new Element(a||"iframe",c);var e=function(){d.call(a.contentWindow)};return window.frames[c.id]?e():a.addListener("load",e),a}),Elements=this.Elements=function(a){if(a&&a.length)for(var b,c={},d=0;b=a[d++];){var e=Slick.uidOf(b);c[e]||(c[e]=!0,this.push(b))}};Elements.prototype={length:0},Elements.parent=Array,new Type("Elements",Elements).implement({filter:function(a,b){return a?new Elements(Array.filter(this,"string"==typeOf(a)?function(b){return b.match(a)}:a,b)):this}.protect(),push:function(){for(var a=this.length,b=0,c=arguments.length;c>b;b++){var d=document.id(arguments[b]);d&&(this[a++]=d)}return this.length=a}.protect(),unshift:function(){for(var a=[],b=0,c=arguments.length;c>b;b++){var d=document.id(arguments[b]);d&&a.push(d)}return Array.prototype.unshift.apply(this,a)}.protect(),concat:function(){for(var a=new Elements(this),b=0,c=arguments.length;c>b;b++){var d=arguments[b];Type.isEnumerable(d)?a.append(d):a.push(d)}return a}.protect(),append:function(a){for(var b=0,c=a.length;c>b;b++)this.push(a[b]);return this}.protect(),empty:function(){for(;this.length;)delete this[--this.length];return this}.protect()}),function(){var a=Array.prototype.splice,b={0:0,1:1,length:2};a.call(b,1,1),1==b[1]&&Elements.implement("splice",function(){for(var b=this.length,c=a.apply(this,arguments);b>=this.length;)delete this[b--];return c}.protect()),Array.forEachMethod(function(a,b){Elements.implement(b,a)}),Array.mirror(Elements);var c;try{c="x"==document.createElement("<input name=x>").name}catch(d){}var e=function(a){return(""+a).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},f=function(){var a=document.createElement("style"),b=!1;try{a.innerHTML="#justTesing{margin: 0px;}",b=!!a.innerHTML}catch(c){}return b}();Document.implement({newElement:function(a,b){if(b){if(null!=b.checked&&(b.defaultChecked=b.checked),"checkbox"!=b.type&&"radio"!=b.type||null!=b.value||(b.value="on"),!f&&"style"==a){var d=document.createElement("style");return d.setAttribute("type","text/css"),b.type&&delete b.type,this.id(d).set(b)}c&&(a="<"+a,b.name&&(a+=' name="'+e(b.name)+'"'),b.type&&(a+=' type="'+e(b.type)+'"'),a+=">",delete b.name,delete b.type)}return this.id(this.createElement(a)).set(b)}})}(),function(){Slick.uidOf(window),Slick.uidOf(document),Document.implement({newTextNode:function(a){return this.createTextNode(a)},getDocument:function(){return this},getWindow:function(){return this.window},id:function(){var a={string:function(b,c,d){return b=Slick.find(d,"#"+b.replace(/(\W)/g,"\\$1")),b?a.element(b,c):null},element:function(a,b){if(Slick.uidOf(a),!b&&!a.$family&&!/^(?:object|embed)$/i.test(a.tagName)){var c=a.fireEvent;a._fireEvent=function(a,b){return c(a,b)},Object.append(a,Element.Prototype)}return a},object:function(b,c,d){return b.toElement?a.element(b.toElement(d),c):null}};return a.textnode=a.whitespace=a.window=a.document=function(a){return a},function(b,c,d){if(b&&b.$family&&b.uniqueNumber)return b;var e=typeOf(b);return a[e]?a[e](b,c,d||document):null}}()}),null==window.$&&Window.implement("$",function(a,b){return document.id(a,b,this.document)}),Window.implement({getDocument:function(){return this.document},getWindow:function(){return this}}),[Document,Element].invoke("implement",{getElements:function(a){return Slick.search(this,a,new Elements)},getElement:function(a){return document.id(Slick.find(this,a))}});var a={contains:function(a){return Slick.contains(this,a)}};document.contains||Document.implement(a),document.createElement("div").contains||Element.implement(a);var b=function(a,b){if(!a)return b;a=Object.clone(Slick.parse(a));for(var c=a.expressions,d=c.length;d--;)c[d][0].combinator=b;return a};Object.forEach({getNext:"~",getPrevious:"!~",getParent:"!"},function(a,c){Element.implement(c,function(c){return this.getElement(b(c,a))})}),Object.forEach({getAllNext:"~",getAllPrevious:"!~",getSiblings:"~~",getChildren:">",getParents:"!"},function(a,c){Element.implement(c,function(c){return this.getElements(b(c,a))})}),Element.implement({getFirst:function(a){return document.id(Slick.search(this,b(a,">"))[0])},getLast:function(a){return document.id(Slick.search(this,b(a,">")).getLast())},getWindow:function(){return this.ownerDocument.window},getDocument:function(){return this.ownerDocument},getElementById:function(a){return document.id(Slick.find(this,"#"+(""+a).replace(/(\W)/g,"\\$1")))},match:function(a){return!a||Slick.match(this,a)}}),null==window.$$&&Window.implement("$$",function(a){if(1==arguments.length){if("string"==typeof a)return Slick.search(this.document,a,new Elements);if(Type.isEnumerable(a))return new Elements(a)}return new Elements(arguments)});var c={before:function(a,b){var c=b.parentNode;c&&c.insertBefore(a,b)},after:function(a,b){var c=b.parentNode;c&&c.insertBefore(a,b.nextSibling)},bottom:function(a,b){b.appendChild(a)},top:function(a,b){b.insertBefore(a,b.firstChild)}};c.inside=c.bottom;var d={},e={},f={};Array.forEach(["type","value","defaultValue","accessKey","cellPadding","cellSpacing","colSpan","frameBorder","rowSpan","tabIndex","useMap"],function(a){f[a.toLowerCase()]=a}),f.html="innerHTML",f.text=null==document.createElement("div").textContent?"innerText":"textContent",Object.forEach(f,function(a,b){e[b]=function(b,c){b[a]=c},d[b]=function(b){return b[a]}}),e.text=function(){return function(a,b){"style"==a.get("tag")?a.set("html",b):a[f.text]=b}}(e.text),d.text=function(a){return function(b){return"style"==b.get("tag")?b.innerHTML:a(b)}}(d.text);var g=["compact","nowrap","ismap","declare","noshade","checked","disabled","readOnly","multiple","selected","noresize","defer","defaultChecked","autofocus","controls","autoplay","loop"],h={};Array.forEach(g,function(a){var b=a.toLowerCase();h[b]=a,e[b]=function(b,c){b[a]=!!c},d[b]=function(b){return!!b[a]}}),Object.append(e,{"class":function(a,b){"className"in a?a.className=b||"":a.setAttribute("class",b)},"for":function(a,b){"htmlFor"in a?a.htmlFor=b:a.setAttribute("for",b)},style:function(a,b){a.style?a.style.cssText=b:a.setAttribute("style",b)},value:function(a,b){a.value=null!=b?b:""}}),d["class"]=function(a){return"className"in a?a.className||null:a.getAttribute("class")};var i=document.createElement("button");try{i.type="button"}catch(j){}"button"!=i.type&&(e.type=function(a,b){a.setAttribute("type",b)}),i=null;var k,l,m=function(){var a=document.createElement("style"),b=!1;try{a.innerHTML="#justTesing{margin: 0px;}",b=!!a.innerHTML}catch(c){}return b}(),n=document.createElement("input");n.value="t",n.type="submit",k="t"!=n.value;try{n.type="email",l="email"==n.type}catch(j){}n=null,(k||!l)&&(e.type=function(a,b){try{var c=a.value;a.type=b,a.value=c}catch(d){}});var o=function(a){return a.random="attribute","attribute"==a.getAttribute("random")}(document.createElement("div")),p=function(a){return a.innerHTML='<object><param name="should_fix" value="the unknown" /></object>',1!=a.cloneNode(!0).firstChild.childNodes.length}(document.createElement("div")),q=!!document.createElement("div").classList,r=function(a){var b=(a||"").clean().split(" "),c={};return b.filter(function(a){return""===a||c[a]?void 0:c[a]=a})},s=function(a){this.classList.add(a)},t=function(a){this.classList.remove(a)};Element.implement({setProperty:function(a,b){var c=e[a.toLowerCase()];if(c)c(this,b);else{var d;o&&(d=this.retrieve("$attributeWhiteList",{})),null==b?(this.removeAttribute(a),o&&delete d[a]):(this.setAttribute(a,""+b),o&&(d[a]=!0))}return this},setProperties:function(a){for(var b in a)this.setProperty(b,a[b]);return this},getProperty:function(a){var b=d[a.toLowerCase()];if(b)return b(this);if(o){var c=this.getAttributeNode(a),e=this.retrieve("$attributeWhiteList",{});if(!c)return null;if(c.expando&&!e[a]){var f=this.outerHTML;if(f.substr(0,f.search(/\/?['"]?>(?![^<]*<['"])/)).indexOf(a)<0)return null;e[a]=!0}}var g=Slick.getAttribute(this,a);return g||Slick.hasAttribute(this,a)?g:null},getProperties:function(){var a=Array.from(arguments);return a.map(this.getProperty,this).associate(a)},removeProperty:function(a){return this.setProperty(a,null)},removeProperties:function(){return Array.each(arguments,this.removeProperty,this),this},set:function(a,b){var c=Element.Properties[a];c&&c.set?c.set.call(this,b):this.setProperty(a,b)}.overloadSetter(),get:function(a){var b=Element.Properties[a];return b&&b.get?b.get.apply(this):this.getProperty(a)}.overloadGetter(),erase:function(a){var b=Element.Properties[a];return b&&b.erase?b.erase.apply(this):this.removeProperty(a),this},hasClass:q?function(a){return this.classList.contains(a)}:function(a){return r(this.className).contains(a)},addClass:q?function(a){return r(a).forEach(s,this),this}:function(a){return this.className=r(a+" "+this.className).join(" "),this},removeClass:q?function(a){return r(a).forEach(t,this),this}:function(a){var b=r(this.className);return r(a).forEach(b.erase,b),this.className=b.join(" "),this},toggleClass:function(a,b){return null==b&&(b=!this.hasClass(a)),b?this.addClass(a):this.removeClass(a)},adopt:function(){var a,b=this,c=Array.flatten(arguments),d=c.length;d>1&&(b=a=document.createDocumentFragment());for(var e=0;d>e;e++){var f=document.id(c[e],!0);f&&b.appendChild(f)}return a&&this.appendChild(a),this},appendText:function(a,b){return this.grab(this.getDocument().newTextNode(a),b)},grab:function(a,b){return c[b||"bottom"](document.id(a,!0),this),this},inject:function(a,b){return c[b||"bottom"](this,document.id(a,!0)),this},replaces:function(a){return a=document.id(a,!0),a.parentNode.replaceChild(this,a),this},wraps:function(a,b){return a=document.id(a,!0),this.replaces(a).grab(a,b)},getSelected:function(){return this.selectedIndex,new Elements(Array.from(this.options).filter(function(a){return a.selected}))},toQueryString:function(){var a=[];return this.getElements("input, select, textarea").each(function(b){var c=b.type;if(b.name&&!b.disabled&&"submit"!=c&&"reset"!=c&&"file"!=c&&"image"!=c){var d="select"==b.get("tag")?b.getSelected().map(function(a){return document.id(a).get("value")}):"radio"!=c&&"checkbox"!=c||b.checked?b.get("value"):null;Array.from(d).each(function(c){"undefined"!=typeof c&&a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(c))})}}),a.join("&")}});var u={before:"beforeBegin",after:"afterEnd",bottom:"beforeEnd",top:"afterBegin",inside:"beforeEnd"};Element.implement("appendHTML","insertAdjacentHTML"in document.createElement("div")?function(a,b){return this.insertAdjacentHTML(u[b||"bottom"],a),this}:function(a,b){var d=new Element("div",{html:a}),e=d.childNodes,f=d.firstChild;if(!f)return this;if(e.length>1){f=document.createDocumentFragment();for(var g=0,h=e.length;h>g;g++)f.appendChild(e[g])}return c[b||"bottom"](f,this),this});var v={},w={},x=function(a){return w[a]||(w[a]={})},y=function(a){var b=a.uniqueNumber;return a.removeEvents&&a.removeEvents(),a.clearAttributes&&a.clearAttributes(),null!=b&&(delete v[b],delete w[b]),a},z={input:"checked",option:"selected",textarea:"value"};if(Element.implement({destroy:function(){var a=y(this).getElementsByTagName("*");return Array.each(a,y),Element.dispose(this),null},empty:function(){return Array.from(this.childNodes).each(Element.dispose),this},dispose:function(){return this.parentNode?this.parentNode.removeChild(this):this},clone:function(a,b){a=a!==!1;var c,d=this.cloneNode(a),e=[d],f=[this];for(a&&(e.append(Array.from(d.getElementsByTagName("*"))),f.append(Array.from(this.getElementsByTagName("*")))),c=e.length;c--;){var g=e[c],h=f[c];if(b||g.removeAttribute("id"),g.clearAttributes&&(g.clearAttributes(),g.mergeAttributes(h),g.removeAttribute("uniqueNumber"),g.options))for(var i=g.options,j=h.options,k=i.length;k--;)i[k].selected=j[k].selected;var l=z[h.tagName.toLowerCase()];l&&h[l]&&(g[l]=h[l])}if(p){var m=d.getElementsByTagName("object"),n=this.getElementsByTagName("object");for(c=m.length;c--;)m[c].outerHTML=n[c].outerHTML}return document.id(d)}}),[Element,Window,Document].invoke("implement",{addListener:function(a,b){return window.attachEvent&&!window.addEventListener&&(v[Slick.uidOf(this)]=this),this.addEventListener?this.addEventListener(a,b,!!arguments[2]):this.attachEvent("on"+a,b),this},removeListener:function(a,b){return this.removeEventListener?this.removeEventListener(a,b,!!arguments[2]):this.detachEvent("on"+a,b),this},retrieve:function(a,b){var c=x(Slick.uidOf(this)),d=c[a];return null!=b&&null==d&&(d=c[a]=b),null!=d?d:null},store:function(a,b){var c=x(Slick.uidOf(this));return c[a]=b,this},eliminate:function(a){var b=x(Slick.uidOf(this));return delete b[a],this}}),window.attachEvent&&!window.addEventListener){var A=function(){Object.each(v,y),window.CollectGarbage&&CollectGarbage(),window.removeListener("unload",A)};window.addListener("unload",A)}Element.Properties={},Element.Properties.style={set:function(a){this.style.cssText=a},get:function(){return this.style.cssText},erase:function(){this.style.cssText=""}},Element.Properties.tag={get:function(){return this.tagName.toLowerCase()}},Element.Properties.html={set:function(a){null==a?a="":"array"==typeOf(a)&&(a=a.join("")),this.styleSheet&&!m?this.styleSheet.cssText=a:this.innerHTML=a},erase:function(){this.set("html","")}};var B=!0,C=!0,D=!0,E=document.createElement("div");if(E.innerHTML="<nav></nav>",B=1==E.childNodes.length,!B)for(var F="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" "),G=document.createDocumentFragment(),H=F.length;H--;)G.createElement(F[H]);E=null,C=Function.attempt(function(){var a=document.createElement("table");return a.innerHTML="<tr><td></td></tr>",!0});var I=document.createElement("tr"),J="<td></td>";I.innerHTML=J,D=I.innerHTML==J,I=null,C&&D&&B||(Element.Properties.html.set=function(a){var b={table:[1,"<table>","</table>"],select:[1,"<select>","</select>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"]};return b.thead=b.tfoot=b.tbody,function(c){if(this.styleSheet)return a.call(this,c);var d=b[this.get("tag")];if(d||B||(d=[0,"",""]),!d)return a.call(this,c);var e=d[0],f=document.createElement("div"),g=f;for(B||G.appendChild(f),f.innerHTML=[d[1],c,d[2]].flatten().join("");e--;)g=g.firstChild;this.empty().adopt(g.childNodes),B||G.removeChild(f),f=null}}(Element.Properties.html.set));var K=document.createElement("form");K.innerHTML="<select><option>s</option></select>","s"!=K.firstChild.value&&(Element.Properties.value={set:function(a){var b=this.get("tag");if("select"!=b)return this.setProperty("value",a);var c=this.getElements("option");a=String(a);for(var d=0;d<c.length;d++){var e=c[d],f=e.getAttributeNode("value"),g=f&&f.specified?e.value:e.get("text");if(g===a)return e.selected=!0}},get:function(){var a=this,b=a.get("tag");if("select"!=b&&"option"!=b)return this.getProperty("value");if("select"==b&&!(a=a.getSelected()[0]))return"";var c=a.getAttributeNode("value");return c&&c.specified?a.value:a.get("text")}}),K=null,document.createElement("div").getAttributeNode("id")&&(Element.Properties.id={set:function(a){this.id=this.getAttributeNode("id").value=a},get:function(){return this.id||null},erase:function(){this.id=this.getAttributeNode("id").value=""}})}(),function(){var a=this.Fx=new Class({Implements:[Chain,Events,Options],options:{fps:60,unit:!1,duration:500,frames:null,frameSkip:!0,link:"ignore"},initialize:function(a){this.subject=this.subject||this,this.setOptions(a)},getTransition:function(){return function(a){return-(Math.cos(Math.PI*a)-1)/2}},step:function(a){if(this.options.frameSkip){var b=null!=this.time?a-this.time:0,c=b/this.frameInterval;this.time=a,this.frame+=c}else this.frame++;if(this.frame<this.frames){var d=this.transition(this.frame/this.frames);this.set(this.compute(this.from,this.to,d))}else this.frame=this.frames,this.set(this.compute(this.from,this.to,1)),this.stop()},set:function(a){return a},compute:function(b,c,d){return a.compute(b,c,d)},check:function(){if(!this.isRunning())return!0;switch(this.options.link){case"cancel":return this.cancel(),!0;case"chain":return this.chain(this.caller.pass(arguments,this)),!1}return!1},start:function(b,c){if(!this.check(b,c))return this;this.from=b,this.to=c,this.frame=this.options.frameSkip?0:-1,this.time=null,this.transition=this.getTransition();var d=this.options.frames,f=this.options.fps,g=this.options.duration;return this.duration=a.Durations[g]||g.toInt(),this.frameInterval=1e3/f,this.frames=d||Math.round(this.duration/this.frameInterval),this.fireEvent("start",this.subject),e.call(this,f),this},stop:function(){return this.isRunning()&&(this.time=null,f.call(this,this.options.fps),this.frames==this.frame?(this.fireEvent("complete",this.subject),this.callChain()||this.fireEvent("chainComplete",this.subject)):this.fireEvent("stop",this.subject)),this},cancel:function(){return this.isRunning()&&(this.time=null,f.call(this,this.options.fps),this.frame=this.frames,this.fireEvent("cancel",this.subject).clearChain()),this},pause:function(){return this.isRunning()&&(this.time=null,f.call(this,this.options.fps)),this},resume:function(){return this.isPaused()&&e.call(this,this.options.fps),this},isRunning:function(){var a=b[this.options.fps];return a&&a.contains(this)},isPaused:function(){return this.frame<this.frames&&!this.isRunning()}});a.compute=function(a,b,c){return(b-a)*c+a},a.Durations={"short":250,normal:500,"long":1e3};var b={},c={},d=function(){for(var a=Date.now(),b=this.length;b--;){var c=this[b];c&&c.step(a)}},e=function(a){var e=b[a]||(b[a]=[]);e.push(this),c[a]||(c[a]=d.periodical(Math.round(1e3/a),e))},f=function(a){var d=b[a];d&&(d.erase(this),!d.length&&c[a]&&(delete b[a],c[a]=clearInterval(c[a])))}}(),MooTools.More={version:"1.5.1",build:"2dd695ba957196ae4b0275a690765d6636a61ccd"},function(){var a={wait:function(a){return this.chain(function(){return this.callChain.delay(null==a?500:a,this),this}.bind(this))}};Chain.implement(a),this.Fx&&Fx.implement(a),this.Element&&Element.implement&&this.Fx&&Element.implement({chains:function(a){return Array.from(a||["tween","morph","reveal"]).each(function(a){a=this.get(a),a&&a.setOptions({link:"chain"})},this),this},pauseFx:function(a,b){return this.chains(b).get(b||"tween").wait(a),this}})}(),Class.Mutators.Binds=function(a){return this.prototype.initialize||this.implement("initialize",function(){}),Array.from(a).concat(this.prototype.Binds||[])},Class.Mutators.initialize=function(a){return function(){return Array.from(this.Binds).each(function(a){var b=this[a];b&&(this[a]=b.bind(this))},this),a.apply(this,arguments)}},Class.Occlude=new Class({occlude:function(a,b){b=document.id(b||this.element);var c=b.retrieve(a||this.property);return c&&!this.occluded?this.occluded=c:(this.occluded=!1,b.store(a||this.property,this),this.occluded)}}),Class.refactor=function(a,b){return Object.each(b,function(b,c){var d=a.prototype[c];d=d&&d.$origin||d||function(){},a.implement(c,"function"==typeof b?function(){var a=this.previous;this.previous=d;var c=b.apply(this,arguments);return this.previous=a,c}:b)}),a},function(){Events.Pseudos=function(a,b,c){var d="_monitorEvents:",e=function(a){return{store:a.store?function(b,c){a.store(d+b,c)}:function(b,c){(a._monitorEvents||(a._monitorEvents={}))[b]=c},retrieve:a.retrieve?function(b,c){return a.retrieve(d+b,c)}:function(b,c){return a._monitorEvents?a._monitorEvents[b]||c:c}}},f=function(b){if(-1==b.indexOf(":")||!a)return null;for(var c=Slick.parse(b).expressions[0][0],d=c.pseudos,e=d.length,f=[];e--;){var g=d[e].key,h=a[g];null!=h&&f.push({event:c.tag,value:d[e].value,pseudo:g,original:b,listener:h})}return f.length?f:null};return{addEvent:function(a,c,d){var g=f(a);if(!g)return b.call(this,a,c,d);var h=e(this),i=h.retrieve(a,[]),j=g[0].event,k=Array.slice(arguments,2),l=c,m=this;return g.each(function(a){var b=a.listener,c=l;0==b?j+=":"+a.pseudo+"("+a.value+")":l=function(){b.call(m,a,c,arguments,l)}}),i.include({type:j,event:c,monitor:l}),h.store(a,i),a!=j&&b.apply(this,[a,c].concat(k)),b.apply(this,[j,l].concat(k))},removeEvent:function(a,b){var d=f(a);if(!d)return c.call(this,a,b);var g=e(this),h=g.retrieve(a);if(!h)return this;var i=Array.slice(arguments,2);return c.apply(this,[a,b].concat(i)),h.each(function(a,d){b&&a.event!=b||c.apply(this,[a.type,a.monitor].concat(i)),delete h[d]},this),g.store(a,h),this}}};var a={once:function(a,b,c,d){b.apply(this,c),this.removeEvent(a.event,d).removeEvent(a.original,b)},throttle:function(a,b,c){b._throttled||(b.apply(this,c),b._throttled=setTimeout(function(){b._throttled=!1},a.value||250))},pause:function(a,b,c){clearTimeout(b._pause),b._pause=b.delay(a.value||250,this,c)}};Events.definePseudo=function(b,c){return a[b]=c,this},Events.lookupPseudo=function(b){return a[b]};var b=Events.prototype;Events.implement(Events.Pseudos(a,b.addEvent,b.removeEvent)),["Request","Fx"].each(function(a){this[a]&&this[a].implement(Events.prototype)})}(),function(){var a,b=document.html;a=document.createElement("div"),a.style.color="red",a.style.color=null;var c="red"==a.style.color,d="1px solid #123abc";a.style.border=d;var e=a.style.border!=d;a=null;var f=!!window.getComputedStyle,g=null!=document.createElement("div").style.borderRadius;Element.Properties.styles={set:function(a){this.setStyles(a)}};var h=null!=b.style.opacity,i=null!=b.style.filter,j=/alpha\(opacity=([\d.]+)\)/i,k=function(a,b){a.store("$opacity",b),a.style.visibility=b>0||null==b?"visible":"hidden"
},l=function(a,b,c){var d=a.style,e=d.filter||a.getComputedStyle("filter")||"";d.filter=(b.test(e)?e.replace(b,c):e+" "+c).trim(),d.filter||d.removeAttribute("filter")},m=h?function(a,b){a.style.opacity=b}:i?function(a,b){a.currentStyle&&a.currentStyle.hasLayout||(a.style.zoom=1),null==b||1==b?(l(a,j,""),1==b&&1!=n(a)&&l(a,j,"alpha(opacity=100)")):l(a,j,"alpha(opacity="+(100*b).limit(0,100).round()+")")}:k,n=h?function(a){var b=a.style.opacity||a.getComputedStyle("opacity");return""==b?1:b.toFloat()}:i?function(a){var b,c=a.style.filter||a.getComputedStyle("filter");return c&&(b=c.match(j)),null==b||null==c?1:b[1]/100}:function(a){var b=a.retrieve("$opacity");return null==b&&(b="hidden"==a.style.visibility?0:1),b},o=null==b.style.cssFloat?"styleFloat":"cssFloat",p={left:"0%",top:"0%",center:"50%",right:"100%",bottom:"100%"},q=null!=b.style.backgroundPositionX,r=function(a,b){"backgroundPosition"==b&&(a.removeAttribute(b+"X"),b+="Y"),a.removeAttribute(b)};Element.implement({getComputedStyle:function(a){if(!f&&this.currentStyle)return this.currentStyle[a.camelCase()];var b=Element.getDocument(this).defaultView,c=b?b.getComputedStyle(this,null):null;return c?c.getPropertyValue(a==o?"float":a.hyphenate()):""},setStyle:function(a,b){if("opacity"==a)return null!=b&&(b=parseFloat(b)),m(this,b),this;if(a=("float"==a?o:a).camelCase(),"string"!=typeOf(b)){var d=(Element.Styles[a]||"@").split(" ");b=Array.from(b).map(function(a,b){return d[b]?"number"==typeOf(a)?d[b].replace("@",Math.round(a)):a:""}).join(" ")}else b==String(Number(b))&&(b=Math.round(b));return this.style[a]=b,(""==b||null==b)&&c&&this.style.removeAttribute&&r(this.style,a),this},getStyle:function(a){if("opacity"==a)return n(this);if(a=("float"==a?o:a).camelCase(),g&&-1!=a.indexOf("borderRadius"))return["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"].map(function(a){return this.style[a]||"0px"},this).join(" ");var b=this.style[a];if(!b||"zIndex"==a){if(Element.ShortStyles.hasOwnProperty(a)){b=[];for(var c in Element.ShortStyles[a])b.push(this.getStyle(c));return b.join(" ")}b=this.getComputedStyle(a)}if(q&&/^backgroundPosition[XY]?$/.test(a))return b.replace(/(top|right|bottom|left)/g,function(a){return p[a]})||"0px";if(!b&&"backgroundPosition"==a)return"0px 0px";if(b){b=String(b);var d=b.match(/rgba?\([\d\s,]+\)/);d&&(b=b.replace(d[0],d[0].rgbToHex()))}if(!f&&!this.style[a]){if(/^(height|width)$/.test(a)&&!/px$/.test(b)){var h="width"==a?["left","right"]:["top","bottom"],i=0;return h.each(function(a){i+=this.getStyle("border-"+a+"-width").toInt()+this.getStyle("padding-"+a).toInt()},this),this["offset"+a.capitalize()]-i+"px"}if(/^border(.+)Width|margin|padding/.test(a)&&isNaN(parseFloat(b)))return"0px"}return e&&/^border(Top|Right|Bottom|Left)?$/.test(a)&&/^#/.test(b)?b.replace(/^(.+)\s(.+)\s(.+)$/,"$2 $3 $1"):b},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},getStyles:function(){var a={};return Array.flatten(arguments).each(function(b){a[b]=this.getStyle(b)},this),a}}),Element.Styles={left:"@px",top:"@px",bottom:"@px",right:"@px",width:"@px",height:"@px",maxWidth:"@px",maxHeight:"@px",minWidth:"@px",minHeight:"@px",backgroundColor:"rgb(@, @, @)",backgroundSize:"@px",backgroundPosition:"@px @px",color:"rgb(@, @, @)",fontSize:"@px",letterSpacing:"@px",lineHeight:"@px",clip:"rect(@px @px @px @px)",margin:"@px @px @px @px",padding:"@px @px @px @px",border:"@px @ rgb(@, @, @) @px @ rgb(@, @, @) @px @ rgb(@, @, @)",borderWidth:"@px @px @px @px",borderStyle:"@ @ @ @",borderColor:"rgb(@, @, @) rgb(@, @, @) rgb(@, @, @) rgb(@, @, @)",zIndex:"@",zoom:"@",fontWeight:"@",textIndent:"@px",opacity:"@",borderRadius:"@px @px @px @px"},Element.ShortStyles={margin:{},padding:{},border:{},borderWidth:{},borderStyle:{},borderColor:{}},["Top","Right","Bottom","Left"].each(function(a){var b=Element.ShortStyles,c=Element.Styles;["margin","padding"].each(function(d){var e=d+a;b[d][e]=c[e]="@px"});var d="border"+a;b.border[d]=c[d]="@px @ rgb(@, @, @)";var e=d+"Width",f=d+"Style",g=d+"Color";b[d]={},b.borderWidth[e]=b[d][e]=c[e]="@px",b.borderStyle[f]=b[d][f]=c[f]="@",b.borderColor[g]=b[d][g]=c[g]="rgb(@, @, @)"}),q&&(Element.ShortStyles.backgroundPosition={backgroundPositionX:"@",backgroundPositionY:"@"})}(),function(){function a(a,b){return n(a,b).toInt()||0}function b(b){return a(b,"border-top-width")}function c(b){return a(b,"border-left-width")}function d(a){return/^(?:body|html)$/i.test(a.tagName)}function e(a){var b=a.getDocument();return b.compatMode&&"CSS1Compat"!=b.compatMode?b.body:b.html}var f=document.createElement("div"),g=document.createElement("div");f.style.height="0",f.appendChild(g);var h=g.offsetParent===f;f=g=null;var i=["height","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],j=["width","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],k=function(a){var b=window.getComputedStyle(a),c={x:0,y:0};return i.each(function(a){c.y+=parseFloat(b[a])}),j.each(function(a){c.x+=parseFloat(b[a])}),c},l=function(a){return"static"!=n(a,"position")||d(a)},m=function(a){return l(a)||/^(?:table|td|th)$/i.test(a.tagName)};Element.implement({scrollTo:function(a,b){return d(this)?this.getWindow().scrollTo(a,b):(this.scrollLeft=a,this.scrollTop=b),this},getSize:function(){if(d(this))return this.getWindow().getSize();if(!window.getComputedStyle)return{x:this.offsetWidth,y:this.offsetHeight};if("svg"==this.get("tag"))return k(this);var a=this.getBoundingClientRect();return{x:a.width,y:a.height}},getScrollSize:function(){return d(this)?this.getWindow().getScrollSize():{x:this.scrollWidth,y:this.scrollHeight}},getScroll:function(){return d(this)?this.getWindow().getScroll():{x:this.scrollLeft,y:this.scrollTop}},getScrolls:function(){for(var a=this.parentNode,b={x:0,y:0};a&&!d(a);)b.x+=a.scrollLeft,b.y+=a.scrollTop,a=a.parentNode;return b},getOffsetParent:h?function(){var a=this;if(d(a)||"fixed"==n(a,"position"))return null;for(var b="static"==n(a,"position")?m:l;a=a.parentNode;)if(b(a))return a;return null}:function(){var a=this;if(d(a)||"fixed"==n(a,"position"))return null;try{return a.offsetParent}catch(b){}return null},getOffsets:function(){var a=this.getBoundingClientRect;if(a){var b=this.getBoundingClientRect(),c=document.id(this.getDocument().documentElement),e=c.getScroll(),f=this.getScrolls(),g="fixed"==n(this,"position");return{x:b.left.toInt()+f.x+(g?0:e.x)-c.clientLeft,y:b.top.toInt()+f.y+(g?0:e.y)-c.clientTop}}var h=this,i={x:0,y:0};if(d(this))return i;for(;h&&!d(h);)i.x+=h.offsetLeft,i.y+=h.offsetTop,h=h.offsetParent;return i},getPosition:function(a){var d=this.getOffsets(),e=this.getScrolls(),f={x:d.x-e.x,y:d.y-e.y};if(a&&(a=document.id(a))){var g=a.getPosition();return{x:f.x-g.x-c(a),y:f.y-g.y-b(a)}}return f},getCoordinates:function(a){if(d(this))return this.getWindow().getCoordinates();var b=this.getPosition(a),c=this.getSize(),e={left:b.x,top:b.y,width:c.x,height:c.y};return e.right=e.left+e.width,e.bottom=e.top+e.height,e},computePosition:function(b){return{left:b.x-a(this,"margin-left"),top:b.y-a(this,"margin-top")}},setPosition:function(a){return this.setStyles(this.computePosition(a))}}),[Document,Window].invoke("implement",{getSize:function(){var a=e(this);return{x:a.clientWidth,y:a.clientHeight}},getScroll:function(){var a=this.getWindow(),b=e(this);return{x:a.pageXOffset||b.scrollLeft,y:a.pageYOffset||b.scrollTop}},getScrollSize:function(){var a=e(this),b=this.getSize(),c=this.getDocument().body;return{x:Math.max(a.scrollWidth,c.scrollWidth,b.x),y:Math.max(a.scrollHeight,c.scrollHeight,b.y)}},getPosition:function(){return{x:0,y:0}},getCoordinates:function(){var a=this.getSize();return{top:0,left:0,bottom:a.y,right:a.x,height:a.y,width:a.x}}});var n=Element.getComputedStyle}(),Element.alias({position:"setPosition"}),[Window,Document,Element].invoke("implement",{getHeight:function(){return this.getSize().y},getWidth:function(){return this.getSize().x},getScrollTop:function(){return this.getScroll().y},getScrollLeft:function(){return this.getScroll().x},getScrollHeight:function(){return this.getScrollSize().y},getScrollWidth:function(){return this.getScrollSize().x},getTop:function(){return this.getPosition().y},getLeft:function(){return this.getPosition().x}}),function(){var a={},b=function(a){var b;if(a.wheelDelta)b=a.wheelDelta%120==0?a.wheelDelta/120:a.wheelDelta/12;else{var c=a.deltaY||a.detail||0;b=-(c%3==0?c/3:10*c)}return b},c=this.DOMEvent=new Type("DOMEvent",function(c,d){if(d||(d=window),c=c||d.event,c.$extended)return c;this.event=c,this.$extended=!0,this.shift=c.shiftKey,this.control=c.ctrlKey,this.alt=c.altKey,this.meta=c.metaKey;for(var e=this.type=c.type,f=c.target||c.srcElement;f&&3==f.nodeType;)f=f.parentNode;if(this.target=document.id(f),0==e.indexOf("key")){var g=this.code=c.which||c.keyCode;this.key=a[g],("keydown"==e||"keyup"==e)&&(g>111&&124>g?this.key="f"+(g-111):g>95&&106>g&&(this.key=g-96)),null==this.key&&(this.key=String.fromCharCode(g).toLowerCase())}else if("click"==e||"dblclick"==e||"contextmenu"==e||"wheel"==e||"DOMMouseScroll"==e||0==e.indexOf("mouse")){var h=d.document;if(h=h.compatMode&&"CSS1Compat"!=h.compatMode?h.body:h.html,this.page={x:null!=c.pageX?c.pageX:c.clientX+h.scrollLeft,y:null!=c.pageY?c.pageY:c.clientY+h.scrollTop},this.client={x:null!=c.pageX?c.pageX-d.pageXOffset:c.clientX,y:null!=c.pageY?c.pageY-d.pageYOffset:c.clientY},("DOMMouseScroll"==e||"wheel"==e||"mousewheel"==e)&&(this.wheel=b(c)),this.rightClick=3==c.which||2==c.button,"mouseover"==e||"mouseout"==e){for(var i=c.relatedTarget||c[("mouseover"==e?"from":"to")+"Element"];i&&3==i.nodeType;)i=i.parentNode;this.relatedTarget=document.id(i)}}else if(0==e.indexOf("touch")||0==e.indexOf("gesture")){this.rotation=c.rotation,this.scale=c.scale,this.targetTouches=c.targetTouches,this.changedTouches=c.changedTouches;var j=this.touches=c.touches;if(j&&j[0]){var k=j[0];this.page={x:k.pageX,y:k.pageY},this.client={x:k.clientX,y:k.clientY}}}this.client||(this.client={}),this.page||(this.page={})});c.implement({stop:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){return this.event.stopPropagation?this.event.stopPropagation():this.event.cancelBubble=!0,this},preventDefault:function(){return this.event.preventDefault?this.event.preventDefault():this.event.returnValue=!1,this}}),c.defineKey=function(b,c){return a[b]=c,this},c.defineKeys=c.defineKey.overloadSetter(!0),c.defineKeys({38:"up",40:"down",37:"left",39:"right",27:"esc",32:"space",8:"backspace",9:"tab",46:"delete",13:"enter"})}(),function(){Element.Properties.events={set:function(a){this.addEvents(a)}},[Element,Window,Document].invoke("implement",{addEvent:function(a,b){var c=this.retrieve("events",{});if(c[a]||(c[a]={keys:[],values:[]}),c[a].keys.contains(b))return this;c[a].keys.push(b);var d=a,e=Element.Events[a],f=b,g=this;e&&(e.onAdd&&e.onAdd.call(this,b,a),e.condition&&(f=function(c){return e.condition.call(this,c,a)?b.call(this,c):!0}),e.base&&(d=Function.from(e.base).call(this,a)));var h=function(){return b.call(g)},i=Element.NativeEvents[d];return i&&(2==i&&(h=function(a){a=new DOMEvent(a,g.getWindow()),f.call(g,a)===!1&&a.stop()}),this.addListener(d,h,arguments[2])),c[a].values.push(h),this},removeEvent:function(a,b){var c=this.retrieve("events");if(!c||!c[a])return this;var d=c[a],e=d.keys.indexOf(b);if(-1==e)return this;var f=d.values[e];delete d.keys[e],delete d.values[e];var g=Element.Events[a];return g&&(g.onRemove&&g.onRemove.call(this,b,a),g.base&&(a=Function.from(g.base).call(this,a))),Element.NativeEvents[a]?this.removeListener(a,f,arguments[2]):this},addEvents:function(a){for(var b in a)this.addEvent(b,a[b]);return this},removeEvents:function(a){var b;if("object"==typeOf(a)){for(b in a)this.removeEvent(b,a[b]);return this}var c=this.retrieve("events");if(!c)return this;if(a)c[a]&&(c[a].keys.each(function(b){this.removeEvent(a,b)},this),delete c[a]);else{for(b in c)this.removeEvents(b);this.eliminate("events")}return this},fireEvent:function(a,b,c){var d=this.retrieve("events");return d&&d[a]?(b=Array.from(b),d[a].keys.each(function(a){c?a.delay(c,this,b):a.apply(this,b)},this),this):this},cloneEvents:function(a,b){a=document.id(a);var c=a.retrieve("events");if(!c)return this;if(b)c[b]&&c[b].keys.each(function(a){this.addEvent(b,a)},this);else for(var d in c)this.cloneEvents(a,d);return this}}),Element.NativeEvents={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,wheel:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,keyup:2,orientationchange:2,touchstart:2,touchmove:2,touchend:2,touchcancel:2,gesturestart:2,gesturechange:2,gestureend:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,paste:2,input:2,load:2,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,hashchange:1,popstate:2,error:1,abort:1,scroll:1,message:2},Element.Events={mousewheel:{base:"onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll"}};var a=function(a){var b=a.relatedTarget;return null==b?!0:b?b!=this&&"xul"!=b.prefix&&"document"!=typeOf(this)&&!this.contains(b):!1};"onmouseenter"in document.documentElement?(Element.NativeEvents.mouseenter=Element.NativeEvents.mouseleave=2,Element.MouseenterCheck=a):(Element.Events.mouseenter={base:"mouseover",condition:a},Element.Events.mouseleave={base:"mouseout",condition:a}),window.addEventListener||(Element.NativeEvents.propertychange=2,Element.Events.change={base:function(){var a=this.type;return"input"!=this.get("tag")||"radio"!=a&&"checkbox"!=a?"change":"propertychange"},condition:function(a){return"propertychange"!=a.type||"checked"==a.event.propertyName}})}();var Drag=new Class({Implements:[Events,Options],options:{snap:6,unit:"px",grid:!1,style:!0,limit:!1,handle:!1,invert:!1,preventDefault:!1,stopPropagation:!1,compensateScroll:!1,modifiers:{x:"left",y:"top"}},initialize:function(){var a=Array.link(arguments,{options:Type.isObject,element:function(a){return null!=a}});this.element=document.id(a.element),this.document=this.element.getDocument(),this.setOptions(a.options||{});var b=typeOf(this.options.handle);this.handles=("array"==b||"collection"==b?$$(this.options.handle):document.id(this.options.handle))||this.element,this.mouse={now:{},pos:{}},this.value={start:{},now:{}},this.offsetParent=function(a){var b=a.getOffsetParent(),c=!b||/^(?:body|html)$/i.test(b.tagName);return c?window:document.id(b)}(this.element),this.selection="selectstart"in document?"selectstart":"mousedown",this.compensateScroll={start:{},diff:{},last:{}},!("ondragstart"in document)||"FileReader"in window||Drag.ondragstartFixed||(document.ondragstart=Function.from(!1),Drag.ondragstartFixed=!0),this.bound={start:this.start.bind(this),check:this.check.bind(this),drag:this.drag.bind(this),stop:this.stop.bind(this),cancel:this.cancel.bind(this),eventStop:Function.from(!1),scrollListener:this.scrollListener.bind(this)},this.attach()},attach:function(){return this.handles.addEvent("mousedown",this.bound.start),this.options.compensateScroll&&this.offsetParent.addEvent("scroll",this.bound.scrollListener),this},detach:function(){return this.handles.removeEvent("mousedown",this.bound.start),this.options.compensateScroll&&this.offsetParent.removeEvent("scroll",this.bound.scrollListener),this},scrollListener:function(){if(this.mouse.start){var a=this.offsetParent.getScroll();if("absolute"==this.element.getStyle("position")){var b=this.sumValues(a,this.compensateScroll.last,-1);this.mouse.now=this.sumValues(this.mouse.now,b,1)}else this.compensateScroll.diff=this.sumValues(a,this.compensateScroll.start,-1);this.offsetParent!=window&&(this.compensateScroll.diff=this.sumValues(this.compensateScroll.start,a,-1)),this.compensateScroll.last=a,this.render(this.options)}},sumValues:function(a,b,c){var d={},e=this.options;for(z in e.modifiers)e.modifiers[z]&&(d[z]=a[z]+b[z]*c);return d},start:function(a){var b=this.options;if(!a.rightClick){b.preventDefault&&a.preventDefault(),b.stopPropagation&&a.stopPropagation(),this.compensateScroll.start=this.compensateScroll.last=this.offsetParent.getScroll(),this.compensateScroll.diff={x:0,y:0},this.mouse.start=a.page,this.fireEvent("beforeStart",this.element);var c=b.limit;this.limit={x:[],y:[]};var d,e,f=this.offsetParent==window?null:this.offsetParent;for(d in b.modifiers)if(b.modifiers[d]){var g=this.element.getStyle(b.modifiers[d]);if(g&&!g.match(/px$/)&&(e||(e=this.element.getCoordinates(f)),g=e[b.modifiers[d]]),this.value.now[d]=b.style?(g||0).toInt():this.element[b.modifiers[d]],b.invert&&(this.value.now[d]*=-1),this.mouse.pos[d]=a.page[d]-this.value.now[d],c&&c[d])for(var h=2;h--;){var i=c[d][h];(i||0===i)&&(this.limit[d][h]="function"==typeof i?i():i)}}"number"==typeOf(this.options.grid)&&(this.options.grid={x:this.options.grid,y:this.options.grid});var j={mousemove:this.bound.check,mouseup:this.bound.cancel};j[this.selection]=this.bound.eventStop,this.document.addEvents(j)}},check:function(a){this.options.preventDefault&&a.preventDefault();var b=Math.round(Math.sqrt(Math.pow(a.page.x-this.mouse.start.x,2)+Math.pow(a.page.y-this.mouse.start.y,2)));b>this.options.snap&&(this.cancel(),this.document.addEvents({mousemove:this.bound.drag,mouseup:this.bound.stop}),this.fireEvent("start",[this.element,a]).fireEvent("snap",this.element))},drag:function(a){var b=this.options;b.preventDefault&&a.preventDefault(),this.mouse.now=this.sumValues(a.page,this.compensateScroll.diff,-1),this.render(b),this.fireEvent("drag",[this.element,a])},render:function(a){for(var b in a.modifiers)a.modifiers[b]&&(this.value.now[b]=this.mouse.now[b]-this.mouse.pos[b],a.invert&&(this.value.now[b]*=-1),a.limit&&this.limit[b]&&((this.limit[b][1]||0===this.limit[b][1])&&this.value.now[b]>this.limit[b][1]?this.value.now[b]=this.limit[b][1]:(this.limit[b][0]||0===this.limit[b][0])&&this.value.now[b]<this.limit[b][0]&&(this.value.now[b]=this.limit[b][0])),a.grid[b]&&(this.value.now[b]-=(this.value.now[b]-(this.limit[b][0]||0))%a.grid[b]),a.style?this.element.setStyle(a.modifiers[b],this.value.now[b]+a.unit):this.element[a.modifiers[b]]=this.value.now[b])},cancel:function(a){this.document.removeEvents({mousemove:this.bound.check,mouseup:this.bound.cancel}),a&&(this.document.removeEvent(this.selection,this.bound.eventStop),this.fireEvent("cancel",this.element))},stop:function(a){var b={mousemove:this.bound.drag,mouseup:this.bound.stop};b[this.selection]=this.bound.eventStop,this.document.removeEvents(b),this.mouse.start=null,a&&this.fireEvent("complete",[this.element,a])}});Element.implement({makeResizable:function(a){var b=new Drag(this,Object.merge({modifiers:{x:"width",y:"height"}},a));return this.store("resizer",b),b.addEvent("drag",function(){this.fireEvent("resize",b)}.bind(this))}}),Drag.Move=new Class({Extends:Drag,options:{droppables:[],container:!1,precalculate:!1,includeMargins:!0,checkDroppables:!0},initialize:function(a,b){if(this.parent(a,b),a=this.element,this.droppables=$$(this.options.droppables),this.setContainer(this.options.container),this.options.style){if("left"==this.options.modifiers.x&&"top"==this.options.modifiers.y){var c=a.getOffsetParent(),d=a.getStyles("left","top");!c||"auto"!=d.left&&"auto"!=d.top||a.setPosition(a.getPosition(c))}"static"==a.getStyle("position")&&a.setStyle("position","absolute")}this.addEvent("start",this.checkDroppables,!0),this.overed=null},setContainer:function(a){this.container=document.id(a),this.container&&"element"!=typeOf(this.container)&&(this.container=document.id(this.container.getDocument().body))},start:function(a){this.container&&(this.options.limit=this.calculateLimit()),this.options.precalculate&&(this.positions=this.droppables.map(function(a){return a.getCoordinates()})),this.parent(a)},calculateLimit:function(){var a=this.element,b=this.container,c=document.id(a.getOffsetParent())||document.body,d=b.getCoordinates(c),e={},f={},g={},h={},i={},j=c.getScroll();["top","right","bottom","left"].each(function(d){e[d]=a.getStyle("margin-"+d).toInt(),f[d]=a.getStyle("border-"+d).toInt(),g[d]=b.getStyle("margin-"+d).toInt(),h[d]=b.getStyle("border-"+d).toInt(),i[d]=c.getStyle("padding-"+d).toInt()},this);var k=a.offsetWidth+e.left+e.right,l=a.offsetHeight+e.top+e.bottom,m=0+j.x,n=0+j.y,o=d.right-h.right-k+j.x,p=d.bottom-h.bottom-l+j.y;if(this.options.includeMargins?(m+=e.left,n+=e.top):(o+=e.right,p+=e.bottom),"relative"==a.getStyle("position")){var q=a.getCoordinates(c);q.left-=a.getStyle("left").toInt(),q.top-=a.getStyle("top").toInt(),m-=q.left,n-=q.top,"relative"!=b.getStyle("position")&&(m+=h.left,n+=h.top),o+=e.left-q.left,p+=e.top-q.top,b!=c&&(m+=g.left+i.left,!i.left&&0>m&&(m=0),n+=c==document.body?0:g.top+i.top,!i.top&&0>n&&(n=0))}else m-=e.left,n-=e.top,b!=c&&(m+=d.left+h.left,n+=d.top+h.top);return{x:[m,o],y:[n,p]}},getDroppableCoordinates:function(a){var b=a.getCoordinates();if("fixed"==a.getStyle("position")){var c=window.getScroll();b.left+=c.x,b.right+=c.x,b.top+=c.y,b.bottom+=c.y}return b},checkDroppables:function(){var a=this.droppables.filter(function(a,b){a=this.positions?this.positions[b]:this.getDroppableCoordinates(a);var c=this.mouse.now;return c.x>a.left&&c.x<a.right&&c.y<a.bottom&&c.y>a.top},this).getLast();this.overed!=a&&(this.overed&&this.fireEvent("leave",[this.element,this.overed]),a&&this.fireEvent("enter",[this.element,a]),this.overed=a)},drag:function(a){this.parent(a),this.options.checkDroppables&&this.droppables.length&&this.checkDroppables()},stop:function(a){return this.checkDroppables(),this.fireEvent("drop",[this.element,this.overed,a]),this.overed=null,this.parent(a)}}),Element.implement({makeDraggable:function(a){var b=new Drag.Move(this,a);return this.store("dragger",b),b}}),function(){var a=function(a,b){var c=[];return Object.each(b,function(b){Object.each(b,function(b){a.each(function(a){c.push(a+"-"+b+("border"==a?"-width":""))})})}),c},b=function(a,b){var c=0;return Object.each(b,function(b,d){d.test(a)&&(c+=b.toInt())}),c},c=function(a){return!(a&&!a.offsetHeight&&!a.offsetWidth)};Element.implement({measure:function(a){if(c(this))return a.call(this);for(var b=this.getParent(),d=[];!c(b)&&b!=document.body;)d.push(b.expose()),b=b.getParent();var e=this.expose(),f=a.call(this);return e(),d.each(function(a){a()}),f},expose:function(){if("none"!=this.getStyle("display"))return function(){};var a=this.style.cssText;return this.setStyles({display:"block",position:"absolute",visibility:"hidden"}),function(){this.style.cssText=a}.bind(this)},getDimensions:function(a){a=Object.merge({computeSize:!1},a);var b={x:0,y:0},c=function(a,b){return b.computeSize?a.getComputedSize(b):a.getSize()},d=this.getParent("body");if(d&&"none"==this.getStyle("display"))b=this.measure(function(){return c(this,a)});else if(d)try{b=c(this,a)}catch(e){}return Object.append(b,b.x||0===b.x?{width:b.x,height:b.y}:{x:b.width,y:b.height})},getComputedSize:function(c){c=Object.merge({styles:["padding","border"],planes:{height:["top","bottom"],width:["left","right"]},mode:"both"},c);var d,e={},f={width:0,height:0};return"vertical"==c.mode?(delete f.width,delete c.planes.width):"horizontal"==c.mode&&(delete f.height,delete c.planes.height),a(c.styles,c.planes).each(function(a){e[a]=this.getStyle(a).toInt()},this),Object.each(c.planes,function(a,c){var g=c.capitalize(),h=this.getStyle(c);"auto"!=h||d||(d=this.getDimensions()),h=e[c]="auto"==h?d[c]:h.toInt(),f["total"+g]=h,a.each(function(a){var c=b(a,e);f["computed"+a.capitalize()]=c,f["total"+g]+=c})},this),Object.append(f,e)}})}();var Slider=new Class({Implements:[Events,Options],Binds:["clickedElement","draggedKnob","scrolledElement"],options:{onTick:function(a){this.setKnobPosition(a)},initialStep:0,snap:!1,offset:0,range:!1,wheel:!1,steps:100,mode:"horizontal"},initialize:function(a,b,c){this.setOptions(c),c=this.options,this.element=document.id(a),b=this.knob=document.id(b),this.previousChange=this.previousEnd=this.step=c.initialStep?c.initialStep:c.range?c.range[0]:0;var d={},e={x:!1,y:!1};switch(c.mode){case"vertical":this.axis="y",this.property="top",this.offset="offsetHeight";break;case"horizontal":this.axis="x",this.property="left",this.offset="offsetWidth"}this.setSliderDimensions(),this.setRange(c.range,null,!0),"static"==b.getStyle("position")&&b.setStyle("position","relative"),b.setStyle(this.property,-c.offset),e[this.axis]=this.property,d[this.axis]=[-c.offset,this.full-c.offset];var f={snap:0,limit:d,modifiers:e,onDrag:this.draggedKnob,onStart:this.draggedKnob,onBeforeStart:function(){this.isDragging=!0}.bind(this),onCancel:function(){this.isDragging=!1}.bind(this),onComplete:function(){this.isDragging=!1,this.draggedKnob(),this.end()}.bind(this)};c.snap&&this.setSnap(f),this.drag=new Drag(b,f),null!=c.initialStep&&this.set(c.initialStep,!0),this.attach()},attach:function(){return this.element.addEvent("mousedown",this.clickedElement),this.options.wheel&&this.element.addEvent("mousewheel",this.scrolledElement),this.drag.attach(),this},detach:function(){return this.element.removeEvent("mousedown",this.clickedElement).removeEvent("mousewheel",this.scrolledElement),this.drag.detach(),this},autosize:function(){return this.setSliderDimensions().setKnobPosition(this.toPosition(this.step)),this.drag.options.limit[this.axis]=[-this.options.offset,this.full-this.options.offset],this.options.snap&&this.setSnap(),this},setSnap:function(a){return a||(a=this.drag.options),a.grid=Math.ceil(this.stepWidth),a.limit[this.axis][1]=this.element[this.offset],this},setKnobPosition:function(a){return this.options.snap&&(a=this.toPosition(this.step)),this.knob.setStyle(this.property,a),this},setSliderDimensions:function(){return this.full=this.element.measure(function(){return this.half=this.knob[this.offset]/2,this.element[this.offset]-this.knob[this.offset]+2*this.options.offset}.bind(this)),this},set:function(a,b){return this.range>0^a<this.min||(a=this.min),this.range>0^a>this.max||(a=this.max),this.step=a.round(this.modulus.decimalLength),b?this.checkStep().setKnobPosition(this.toPosition(this.step)):this.checkStep().fireEvent("tick",this.toPosition(this.step)).fireEvent("move").end(),this},setRange:function(a,b,c){return this.min=Array.pick([a[0],0]),this.max=Array.pick([a[1],this.options.steps]),this.range=this.max-this.min,this.steps=this.options.steps||this.full,this.stepSize=Math.abs(this.range)/this.steps,this.stepWidth=this.stepSize*this.full/Math.abs(this.range),this.setModulus(),a&&this.set(Array.pick([b,this.step]).limit(this.min,this.max),c),this},setModulus:function(){for(var a=((this.stepSize+"").split(".")[1]||[]).length,b="1";a--;)b+="0";this.modulus={multiplier:b.toInt(10),decimalLength:b.length-1}},clickedElement:function(a){if(!this.isDragging&&a.target!=this.knob){var b=this.range<0?-1:1,c=a.page[this.axis]-this.element.getPosition()[this.axis]-this.half;c=c.limit(-this.options.offset,this.full-this.options.offset),this.step=(this.min+b*this.toStep(c)).round(this.modulus.decimalLength),this.checkStep().fireEvent("tick",c).fireEvent("move").end()}},scrolledElement:function(a){var b="horizontal"==this.options.mode?a.wheel<0:a.wheel>0;this.set(this.step+(b?-1:1)*this.stepSize),a.stop()},draggedKnob:function(){var a=this.range<0?-1:1,b=this.drag.value.now[this.axis];b=b.limit(-this.options.offset,this.full-this.options.offset),this.step=(this.min+a*this.toStep(b)).round(this.modulus.decimalLength),this.checkStep(),this.fireEvent("move")},checkStep:function(){var a=this.step;return this.previousChange!=a&&(this.previousChange=a,this.fireEvent("change",a)),this},end:function(){var a=this.step;return this.previousEnd!==a&&(this.previousEnd=a,this.fireEvent("complete",a+"")),this},toStep:function(a){var b=(a+this.options.offset)*this.stepSize/this.full*this.steps;return this.options.steps?(b-b*this.modulus.multiplier%(this.stepSize*this.modulus.multiplier)/this.modulus.multiplier).round(this.modulus.decimalLength):b},toPosition:function(a){return this.full*Math.abs(this.min-a)/(this.steps*this.stepSize)-this.options.offset||0}});Fx.CSS=new Class({Extends:Fx,prepare:function(a,b,c){c=Array.from(c);var d=c[0],e=c[1];if(null==e){e=d,d=a.getStyle(b);var f=this.options.unit;if(f&&d&&"string"==typeof d&&d.slice(-f.length)!=f&&0!=parseFloat(d)){a.setStyle(b,e+f);var g=a.getComputedStyle(b);if(!/px$/.test(g)&&(g=a.style[("pixel-"+b).camelCase()],null==g)){var h=a.style.left;a.style.left=e+f,g=a.style.pixelLeft,a.style.left=h}d=(e||1)/(parseFloat(g)||1)*(parseFloat(d)||0),a.setStyle(b,d+f)}}return{from:this.parse(d),to:this.parse(e)}},parse:function(a){return a=Function.from(a)(),a="string"==typeof a?a.split(" "):Array.from(a),a.map(function(a){a=String(a);var b=!1;return Object.each(Fx.CSS.Parsers,function(c){if(!b){var d=c.parse(a);(d||0===d)&&(b={value:d,parser:c})}}),b=b||{value:a,parser:Fx.CSS.Parsers.String}})},compute:function(a,b,c){var d=[];return Math.min(a.length,b.length).times(function(e){d.push({value:a[e].parser.compute(a[e].value,b[e].value,c),parser:a[e].parser})}),d.$family=Function.from("fx:css:value"),d},serve:function(a,b){"fx:css:value"!=typeOf(a)&&(a=this.parse(a));var c=[];return a.each(function(a){c=c.concat(a.parser.serve(a.value,b))}),c},render:function(a,b,c,d){a.setStyle(b,this.serve(c,d))},search:function(a){if(Fx.CSS.Cache[a])return Fx.CSS.Cache[a];var b={},c=new RegExp("^"+a.escapeRegExp()+"$"),d=function(a){Array.each(a,function(a){if(a.media)return void d(a.rules||a.cssRules);if(a.style){var e=a.selectorText?a.selectorText.replace(/^\w+/,function(a){return a.toLowerCase()}):null;e&&c.test(e)&&Object.each(Element.Styles,function(c,d){a.style[d]&&!Element.ShortStyles[d]&&(c=String(a.style[d]),b[d]=/^rgb/.test(c)?c.rgbToHex():c)})}})};return Array.each(document.styleSheets,function(a){var b=a.href;if(!(b&&b.indexOf("://")>-1&&-1==b.indexOf(document.domain))){var c=a.rules||a.cssRules;d(c)}}),Fx.CSS.Cache[a]=b}}),Fx.CSS.Cache={},Fx.CSS.Parsers={Color:{parse:function(a){return a.match(/^#[0-9a-f]{3,6}$/i)?a.hexToRgb(!0):(a=a.match(/(\d+),\s*(\d+),\s*(\d+)/))?[a[1],a[2],a[3]]:!1},compute:function(a,b,c){return a.map(function(d,e){return Math.round(Fx.compute(a[e],b[e],c))})},serve:function(a){return a.map(Number)}},Number:{parse:parseFloat,compute:Fx.compute,serve:function(a,b){return b?a+b:a}},String:{parse:Function.from(!1),compute:function(a,b){return b},serve:function(a){return a}}},Fx.Morph=new Class({Extends:Fx.CSS,initialize:function(a,b){this.element=this.subject=document.id(a),this.parent(b)},set:function(a){"string"==typeof a&&(a=this.search(a));for(var b in a)this.render(this.element,b,a[b],this.options.unit);return this},compute:function(a,b,c){var d={};for(var e in a)d[e]=this.parent(a[e],b[e],c);return d},start:function(a){if(!this.check(a))return this;"string"==typeof a&&(a=this.search(a));var b={},c={};for(var d in a){var e=this.prepare(this.element,d,a[d]);b[d]=e.from,c[d]=e.to}return this.parent(b,c)}}),Element.Properties.morph={set:function(a){return this.get("morph").cancel().setOptions(a),this},get:function(){var a=this.retrieve("morph");return a||(a=new Fx.Morph(this,{link:"cancel"}),this.store("morph",a)),a}},Element.implement({morph:function(a){return this.get("morph").start(a),this}});var Sortables=new Class({Implements:[Events,Options],options:{opacity:1,clone:!1,revert:!1,handle:!1,dragOptions:{},unDraggableTags:["button","input","a","textarea","select","option"]},initialize:function(a,b){this.setOptions(b),this.elements=[],this.lists=[],this.idle=!0,this.addLists($$(document.id(a)||a)),this.options.clone||(this.options.revert=!1),this.options.revert&&(this.effect=new Fx.Morph(null,Object.merge({duration:250,link:"cancel"},this.options.revert)))},attach:function(){return this.addLists(this.lists),this},detach:function(){return this.lists=this.removeLists(this.lists),this},addItems:function(){return Array.flatten(arguments).each(function(a){this.elements.push(a);var b=a.retrieve("sortables:start",function(b){this.start.call(this,b,a)}.bind(this));
(this.options.handle?a.getElement(this.options.handle)||a:a).addEvent("mousedown",b)},this),this},addLists:function(){return Array.flatten(arguments).each(function(a){this.lists.include(a),this.addItems(a.getChildren())},this),this},removeItems:function(){return $$(Array.flatten(arguments).map(function(a){this.elements.erase(a);var b=a.retrieve("sortables:start");return(this.options.handle?a.getElement(this.options.handle)||a:a).removeEvent("mousedown",b),a},this))},removeLists:function(){return $$(Array.flatten(arguments).map(function(a){return this.lists.erase(a),this.removeItems(a.getChildren()),a},this))},getDroppableCoordinates:function(a){var b=a.getOffsetParent(),c=a.getPosition(b),d={w:window.getScroll(),offsetParent:b.getScroll()};return c.x+=d.offsetParent.x,c.y+=d.offsetParent.y,"fixed"==b.getStyle("position")&&(c.x-=d.w.x,c.y-=d.w.y),c},getClone:function(a,b){if(!this.options.clone)return new Element(b.tagName).inject(document.body);if("function"==typeOf(this.options.clone))return this.options.clone.call(this,a,b,this.list);var c=b.clone(!0).setStyles({margin:0,position:"absolute",visibility:"hidden",width:b.getStyle("width")}).addEvent("mousedown",function(a){b.fireEvent("mousedown",a)});return c.get("html").test("radio")&&c.getElements("input[type=radio]").each(function(a,c){a.set("name","clone_"+c),a.get("checked")&&b.getElements("input[type=radio]")[c].set("checked",!0)}),c.inject(this.list).setPosition(this.getDroppableCoordinates(this.element))},getDroppables:function(){var a=this.list.getChildren().erase(this.clone).erase(this.element);return this.options.constrain||a.append(this.lists).erase(this.list),a},insert:function(a,b){var c="inside";this.lists.contains(b)?(this.list=b,this.drag.droppables=this.getDroppables()):c=this.element.getAllPrevious().contains(b)?"before":"after",this.element.inject(b,c),this.fireEvent("sort",[this.element,this.clone])},start:function(a,b){!this.idle||a.rightClick||!this.options.handle&&this.options.unDraggableTags.contains(a.target.get("tag"))||(this.idle=!1,this.element=b,this.opacity=b.getStyle("opacity"),this.list=b.getParent(),this.clone=this.getClone(a,b),this.drag=new Drag.Move(this.clone,Object.merge({droppables:this.getDroppables()},this.options.dragOptions)).addEvents({onSnap:function(){a.stop(),this.clone.setStyle("visibility","visible"),this.element.setStyle("opacity",this.options.opacity||0),this.fireEvent("start",[this.element,this.clone])}.bind(this),onEnter:this.insert.bind(this),onCancel:this.end.bind(this),onComplete:this.end.bind(this)}),this.clone.inject(this.element,"before"),this.drag.start(a))},end:function(){this.drag.detach(),this.element.setStyle("opacity",this.opacity);var a=this;if(this.effect){var b=this.element.getStyles("width","height"),c=this.clone,d=c.computePosition(this.getDroppableCoordinates(c)),e=function(){this.removeEvent("cancel",e),c.destroy(),a.reset()};this.effect.element=c,this.effect.start({top:d.top,left:d.left,width:b.width,height:b.height,opacity:.25}).addEvent("cancel",e).chain(e)}else this.clone.destroy(),a.reset()},reset:function(){this.idle=!0,this.fireEvent("complete",this.element)},serialize:function(){var a=Array.link(arguments,{modifier:Type.isFunction,index:function(a){return null!=a}}),b=this.lists.map(function(b){return b.getChildren().map(a.modifier||function(a){return a.get("id")},this)},this),c=a.index;return 1==this.lists.length&&(c=0),(c||0===c)&&c>=0&&c<this.lists.length?b[c]:b}});!function(){var a=!!window.addEventListener;Element.NativeEvents.focusin=Element.NativeEvents.focusout=2;var b=function(a,b,c,d,e){for(;e&&e!=a;){if(b(e,d))return c.call(e,d,e);e=document.id(e.parentNode)}},c={mouseenter:{base:"mouseover",condition:Element.MouseenterCheck},mouseleave:{base:"mouseout",condition:Element.MouseenterCheck},focus:{base:"focus"+(a?"":"in"),capture:!0},blur:{base:a?"blur":"focusout",capture:!0}},d="$delegation:",e=function(a){return{base:"focusin",remove:function(b,c){var e=b.retrieve(d+a+"listeners",{})[c];if(e&&e.forms)for(var f=e.forms.length;f--;)e.forms[f].removeEvent&&e.forms[f].removeEvent(a,e.fns[f])},listen:function(c,e,f,g,h,i){var j="form"==h.get("tag")?h:g.target.getParent("form");if(j){var k=c.retrieve(d+a+"listeners",{}),l=k[i]||{forms:[],fns:[]},m=l.forms,n=l.fns;if(-1==m.indexOf(j)){m.push(j);var o=function(a){b(c,e,f,a,h)};j.addEvent(a,o),n.push(o),k[i]=l,c.store(d+a+"listeners",k)}}}}},f=function(a){return{base:"focusin",listen:function(c,d,e,f,g){var h={blur:function(){this.removeEvents(h)}};h[a]=function(a){b(c,d,e,a,g)},f.target.addEvents(h)}}};a||Object.append(c,{submit:e("submit"),reset:e("reset"),change:f("change"),select:f("select")});var g=Element.prototype,h=g.addEvent,i=g.removeEvent,j=function(a,b){return function(c,d,e){if(-1==c.indexOf(":relay"))return a.call(this,c,d,e);var f=Slick.parse(c).expressions[0][0];if("relay"!=f.pseudos[0].key)return a.call(this,c,d,e);var g=f.tag;return f.pseudos.slice(1).each(function(a){g+=":"+a.key+(a.value?"("+a.value+")":"")}),a.call(this,c,d),b.call(this,g,f.pseudos[0].value,d)}},k={addEvent:function(a,d,e){var f=this.retrieve("$delegates",{}),g=f[a];if(g)for(var i in g)if(g[i].fn==e&&g[i].match==d)return this;var j=a,k=d,l=e,m=c[a]||{};a=m.base||j,d=function(a){return Slick.match(a,k)};var n=Element.Events[j];if(m.condition||n&&n.condition){var o=d,p=m.condition||n.condition;d=function(b,c){return o(b,c)&&p.call(b,c,a)}}var q=this,r=String.uniqueID(),s=m.listen?function(a,b){!b&&a&&a.target&&(b=a.target),b&&m.listen(q,d,e,a,b,r)}:function(a,c){!c&&a&&a.target&&(c=a.target),c&&b(q,d,e,a,c)};return g||(g={}),g[r]={match:k,fn:l,delegator:s},f[j]=g,h.call(this,a,s,m.capture)},removeEvent:function(a,b,d,e){var f=this.retrieve("$delegates",{}),g=f[a];if(!g)return this;if(e){var h=a,j=g[e].delegator,l=c[a]||{};return a=l.base||h,l.remove&&l.remove(this,e),delete g[e],f[h]=g,i.call(this,a,j,l.capture)}var m,n;if(d){for(m in g)if(n=g[m],n.match==b&&n.fn==d)return k.removeEvent.call(this,a,b,d,m)}else for(m in g)n=g[m],n.match==b&&k.removeEvent.call(this,a,b,n.fn,m);return this}};[Element,Window,Document].invoke("implement",{addEvent:j(h,k.addEvent),removeEvent:j(i,k.removeEvent)})}(),function(){for(var a={relay:!1},b=["once","throttle","pause"],c=b.length;c--;)a[b[c]]=Events.lookupPseudo(b[c]);DOMEvent.definePseudo=function(b,c){return a[b]=c,this};var d=Element.prototype;[Element,Window,Document].invoke("implement",Events.Pseudos(a,d.addEvent,d.removeEvent))}(),function(){var a="$moo:keys-pressed",b="$moo:keys-keyup";DOMEvent.definePseudo("keys",function(c,d,e){var f=e[0],g=[],h=this.retrieve(a,[]),i=c.value;if("+"!=i?g.append(i.replace("++",function(){return g.push("+"),""}).split("+")):g=["+"],h.include(f.key),g.every(function(a){return h.contains(a)})&&d.apply(this,e),this.store(a,h),!this.retrieve(b)){var j=function(b){(function(){h=this.retrieve(a,[]).erase(b.key),this.store(a,h)}).delay(0,this)};this.store(b,j).addEvent("keyup",j)}}),DOMEvent.defineKeys({16:"shift",17:"control",18:"alt",20:"capslock",33:"pageup",34:"pagedown",35:"end",36:"home",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",107:"+",109:"-",189:"-"})}(),function(){var a={a:/[]/g,A:/[]/g,c:/[]/g,C:/[]/g,d:/[]/g,D:/[]/g,e:/[]/g,E:/[]/g,g:/[]/g,G:/[]/g,i:/[]/g,I:/[]/g,l:/[]/g,L:/[]/g,n:/[]/g,N:/[]/g,o:/[]/g,O:/[]/g,r:/[]/g,R:/[]/g,s:/[]/g,S:/[]/g,t:/[]/g,T:/[]/g,u:/[]/g,U:/[]/g,y:/[]/g,Y:/[]/g,z:/[]/g,Z:/[]/g,th:/[]/g,TH:/[]/g,dh:/[]/g,DH:/[]/g,ss:/[]/g,oe:/[]/g,OE:/[]/g,ae:/[]/g,AE:/[]/g},b={" ":/[\xa0\u2002\u2003\u2009]/g,"*":/[\xb7]/g,"'":/[\u2018\u2019]/g,'"':/[\u201c\u201d]/g,"...":/[\u2026]/g,"-":/[\u2013]/g,"&raquo;":/[\uFFFD]/g},c={ms:1,s:1e3,m:6e4,h:36e5},d=/(\d*.?\d+)([msh]+)/,e=function(a,b){var c,d=a;for(c in b)d=d.replace(b[c],c);return d},f=function(a,b){a=a||"";var c=b?"<"+a+"(?!\\w)[^>]*>([\\s\\S]*?)</"+a+"(?!\\w)>":"</?"+a+"([^>]+)?>",d=new RegExp(c,"gi");return d};String.implement({standardize:function(){return e(this,a)},repeat:function(a){return new Array(a+1).join(this)},pad:function(a,b,c){if(this.length>=a)return this;var d=(null==b?" ":""+b).repeat(a-this.length).substr(0,a-this.length);return c&&"right"!=c?"left"==c?d+this:d.substr(0,(d.length/2).floor())+this+d.substr(0,(d.length/2).ceil()):this+d},getTags:function(a,b){return this.match(f(a,b))||[]},stripTags:function(a,b){return this.replace(f(a,b),"")},tidy:function(){return e(this,b)},truncate:function(a,b,c){var d=this;if(null==b&&1==arguments.length&&(b=""),d.length>a){if(d=d.substring(0,a),c){var e=d.lastIndexOf(c);-1!=e&&(d=d.substr(0,e))}b&&(d+=b)}return d},ms:function(){var a=d.exec(this);return null==a?Number(this):Number(a[1])*c[a[2]]}})}(),Element.implement({tidy:function(){this.set("value",this.get("value").tidy())},getTextInRange:function(a,b){return this.get("value").substring(a,b)},getSelectedText:function(){return this.setSelectionRange?this.getTextInRange(this.getSelectionStart(),this.getSelectionEnd()):document.selection.createRange().text},getSelectedRange:function(){if(null!=this.selectionStart)return{start:this.selectionStart,end:this.selectionEnd};var a={start:0,end:0},b=this.getDocument().selection.createRange();if(!b||b.parentElement()!=this)return a;var c=b.duplicate();if("text"==this.type)a.start=0-c.moveStart("character",-1e5),a.end=a.start+b.text.length;else{var d=this.get("value"),e=d.length;c.moveToElementText(this),c.setEndPoint("StartToEnd",b),c.text.length&&(e-=d.match(/[\n\r]*$/)[0].length),a.end=e-c.text.length,c.setEndPoint("StartToStart",b),a.start=e-c.text.length}return a},getSelectionStart:function(){return this.getSelectedRange().start},getSelectionEnd:function(){return this.getSelectedRange().end},setCaretPosition:function(a){return"end"==a&&(a=this.get("value").length),this.selectRange(a,a),this},getCaretPosition:function(){return this.getSelectedRange().start},selectRange:function(a,b){if(this.setSelectionRange)this.focus(),this.setSelectionRange(a,b);else{var c=this.get("value"),d=c.substr(a,b-a).replace(/\r/g,"").length;a=c.substr(0,a).replace(/\r/g,"").length;var e=this.createTextRange();e.collapse(!0),e.moveEnd("character",a+d),e.moveStart("character",a),e.select()}return this},insertAtCursor:function(a,b){var c=this.getSelectedRange(),d=this.get("value");return this.set("value",d.substring(0,c.start)+a+d.substring(c.end,d.length)),b!==!1?this.selectRange(c.start,c.start+a.length):this.setCaretPosition(c.start+a.length),this},insertAroundCursor:function(a,b){a=Object.append({before:"",defaultMiddle:"",after:""},a);var c=this.getSelectedText()||a.defaultMiddle,d=this.getSelectedRange(),e=this.get("value");if(d.start==d.end)this.set("value",e.substring(0,d.start)+a.before+c+a.after+e.substring(d.end,e.length)),this.selectRange(d.start+a.before.length,d.end+a.before.length+c.length);else{var f=e.substring(d.start,d.end);this.set("value",e.substring(0,d.start)+a.before+f+a.after+e.substring(d.end,e.length));var g=d.start+a.before.length;b!==!1?this.selectRange(g,g+f.length):this.setCaretPosition(g+e.length)}return this}}),function(){var a=!1,b=!1,c=function(){var c=new Element("div").setStyles({position:"fixed",top:0,right:0}).inject(document.body);a=0===c.offsetTop,c.dispose(),b=!0};Element.implement({pin:function(d,e){if(b||c(),"none"==this.getStyle("display"))return this;var f,g,h,i=window.getScroll();if(d!==!1){if(f=this.getPosition(),!this.retrieve("pin:_pinned")){var j={top:f.y-i.y,left:f.x-i.x,margin:"0px",padding:"0px"};if(a&&!e)this.setStyle("position","fixed").setStyles(j);else{g=this.getOffsetParent();var k=this.getPosition(g),l=this.getStyles("left","top");(g&&"auto"==l.left||"auto"==l.top)&&this.setPosition(k),"static"==this.getStyle("position")&&this.setStyle("position","absolute"),k={x:l.left.toInt()-i.x,y:l.top.toInt()-i.y},h=function(){if(this.retrieve("pin:_pinned")){var a=window.getScroll();this.setStyles({left:k.x+a.x,top:k.y+a.y})}}.bind(this),this.store("pin:_scrollFixer",h),window.addEvent("scroll",h)}this.store("pin:_pinned",!0)}}else{if(!this.retrieve("pin:_pinned"))return this;g=this.getParent(),"static"!=g.getComputedStyle("position")?g:g.getOffsetParent(),f=this.getPosition(),this.store("pin:_pinned",!1),h=this.retrieve("pin:_scrollFixer"),h?(this.store("pin:_scrollFixer",null),window.removeEvent("scroll",h)):this.setStyles({position:"absolute",top:f.y+i.y,left:f.x+i.x}),this.removeClass("isPinned")}return this},unpin:function(){return this.pin(!1)},togglePin:function(){return this.pin(!this.retrieve("pin:_pinned"))}})}(),function(a){var b=Element.Position={options:{relativeTo:document.body,position:{x:"center",y:"center"},offset:{x:0,y:0}},getOptions:function(a,c){return c=Object.merge({},b.options,c),b.setPositionOption(c),b.setEdgeOption(c),b.setOffsetOption(a,c),b.setDimensionsOption(a,c),c},setPositionOption:function(a){a.position=b.getCoordinateFromValue(a.position)},setEdgeOption:function(a){var c=b.getCoordinateFromValue(a.edge);a.edge=c?c:"center"==a.position.x&&"center"==a.position.y?{x:"center",y:"center"}:{x:"left",y:"top"}},setOffsetOption:function(a,b){var c={x:0,y:0},d={x:0,y:0},e=a.measure(function(){return document.id(this.getOffsetParent())});e&&e!=a.getDocument().body&&(d=e.getScroll(),c=e.measure(function(){var a=this.getPosition();if("fixed"==this.getStyle("position")){var b=window.getScroll();a.x+=b.x,a.y+=b.y}return a}),b.offset={parentPositioned:e!=document.id(b.relativeTo),x:b.offset.x-c.x+d.x,y:b.offset.y-c.y+d.y})},setDimensionsOption:function(a,b){b.dimensions=a.getDimensions({computeSize:!0,styles:["padding","border","margin"]})},getPosition:function(a,c){var d={};c=b.getOptions(a,c);var e=document.id(c.relativeTo)||document.body;b.setPositionCoordinates(c,d,e),c.edge&&b.toEdge(d,c);var f=c.offset;return d.left=(d.x>=0||f.parentPositioned||c.allowNegative?d.x:0).toInt(),d.top=(d.y>=0||f.parentPositioned||c.allowNegative?d.y:0).toInt(),b.toMinMax(d,c),(c.relFixedPosition||"fixed"==e.getStyle("position"))&&b.toRelFixedPosition(e,d),c.ignoreScroll&&b.toIgnoreScroll(e,d),c.ignoreMargins&&b.toIgnoreMargins(d,c),d.left=Math.ceil(d.left),d.top=Math.ceil(d.top),delete d.x,delete d.y,d},setPositionCoordinates:function(a,b,c){var d=a.offset.y,e=a.offset.x,f=c==document.body?window.getScroll():c.getPosition(),g=f.y,h=f.x,i=window.getSize();switch(a.position.x){case"left":b.x=h+e;break;case"right":b.x=h+e+c.offsetWidth;break;default:b.x=h+(c==document.body?i.x:c.offsetWidth)/2+e}switch(a.position.y){case"top":b.y=g+d;break;case"bottom":b.y=g+d+c.offsetHeight;break;default:b.y=g+(c==document.body?i.y:c.offsetHeight)/2+d}},toMinMax:function(a,b){var c,d={left:"x",top:"y"};["minimum","maximum"].each(function(e){["left","top"].each(function(f){c=b[e]?b[e][d[f]]:null,null!=c&&("minimum"==e?a[f]<c:a[f]>c)&&(a[f]=c)})})},toRelFixedPosition:function(a,b){var c=window.getScroll();b.top+=c.y,b.left+=c.x},toIgnoreScroll:function(a,b){var c=a.getScroll();b.top-=c.y,b.left-=c.x},toIgnoreMargins:function(a,b){a.left+="right"==b.edge.x?b.dimensions["margin-right"]:"center"!=b.edge.x?-b.dimensions["margin-left"]:-b.dimensions["margin-left"]+(b.dimensions["margin-right"]+b.dimensions["margin-left"])/2,a.top+="bottom"==b.edge.y?b.dimensions["margin-bottom"]:"center"!=b.edge.y?-b.dimensions["margin-top"]:-b.dimensions["margin-top"]+(b.dimensions["margin-bottom"]+b.dimensions["margin-top"])/2},toEdge:function(a,b){var c={},d=b.dimensions,e=b.edge;switch(e.x){case"left":c.x=0;break;case"right":c.x=-d.x-d.computedRight-d.computedLeft;break;default:c.x=-Math.round(d.totalWidth/2)}switch(e.y){case"top":c.y=0;break;case"bottom":c.y=-d.y-d.computedTop-d.computedBottom;break;default:c.y=-Math.round(d.totalHeight/2)}a.x+=c.x,a.y+=c.y},getCoordinateFromValue:function(a){return"string"!=typeOf(a)?a:(a=a.toLowerCase(),{x:a.test("left")?"left":a.test("right")?"right":"center",y:a.test(/upper|top/)?"top":a.test("bottom")?"bottom":"center"})}};Element.implement({position:function(b){if(b&&(null!=b.x||null!=b.y))return a?a.apply(this,arguments):this;var c=this.setStyle("position","absolute").calculatePosition(b);return b&&b.returnPos?c:this.setStyles(c)},calculatePosition:function(a){return b.getPosition(this,a)}})}(Element.prototype.position),Element.implement({isDisplayed:function(){return"none"!=this.getStyle("display")},isVisible:function(){var a=this.offsetWidth,b=this.offsetHeight;return 0==a&&0==b?!1:a>0&&b>0?!0:"none"!=this.style.display},toggle:function(){return this[this.isDisplayed()?"hide":"show"]()},hide:function(){var a;try{a=this.getStyle("display")}catch(b){}return"none"==a?this:this.store("element:_originalDisplay",a||"").setStyle("display","none")},show:function(a){return!a&&this.isDisplayed()?this:(a=a||this.retrieve("element:_originalDisplay")||"block",this.setStyle("display","none"==a?"block":a))},swapClass:function(a,b){return this.removeClass(a).addClass(b)}}),Document.implement({clearSelection:function(){if(window.getSelection){var a=window.getSelection();a&&a.removeAllRanges&&a.removeAllRanges()}else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(b){}}}),Elements.from=function(a,b){(b||null==b)&&(a=a.stripScripts());var c,d=a.match(/^\s*(?:<!--.*?-->\s*)*<(t[dhr]|tbody|tfoot|thead)/i);if(d){c=new Element("table");var e=d[1].toLowerCase();["td","th","tr"].contains(e)&&(c=new Element("tbody").inject(c),"tr"!=e&&(c=new Element("tr").inject(c)))}return(c||new Element("div")).set("html",a).getChildren()},function(){var a=function(){},b="onprogress"in new Browser.Request,c=this.Request=new Class({Implements:[Chain,Events,Options],options:{url:"",data:"",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},async:!0,format:!1,method:"post",link:"ignore",isSuccess:null,emulation:!0,urlEncoded:!0,encoding:"utf-8",evalScripts:!1,evalResponse:!1,timeout:0,noCache:!1},initialize:function(a){this.xhr=new Browser.Request,this.setOptions(a),this.headers=this.options.headers},onStateChange:function(){var c=this.xhr;4==c.readyState&&this.running&&(this.running=!1,this.status=0,Function.attempt(function(){var a=c.status;this.status=1223==a?204:a}.bind(this)),c.onreadystatechange=a,b&&(c.onprogress=c.onloadstart=a),this.timer&&(clearTimeout(this.timer),delete this.timer),this.response={text:this.xhr.responseText||"",xml:this.xhr.responseXML},this.options.isSuccess.call(this,this.status)?this.success(this.response.text,this.response.xml):this.failure())},isSuccess:function(){var a=this.status;return a>=200&&300>a},isRunning:function(){return!!this.running},processScripts:function(a){return this.options.evalResponse||/(ecma|java)script/.test(this.getHeader("Content-type"))?Browser.exec(a):a.stripScripts(this.options.evalScripts)},success:function(a,b){this.onSuccess(this.processScripts(a),b)},onSuccess:function(){this.fireEvent("complete",arguments).fireEvent("success",arguments).callChain()},failure:function(){this.onFailure()},onFailure:function(){this.fireEvent("complete").fireEvent("failure",this.xhr)},loadstart:function(a){this.fireEvent("loadstart",[a,this.xhr])},progress:function(a){this.fireEvent("progress",[a,this.xhr])},timeout:function(){this.fireEvent("timeout",this.xhr)},setHeader:function(a,b){return this.headers[a]=b,this},getHeader:function(a){return Function.attempt(function(){return this.xhr.getResponseHeader(a)}.bind(this))},check:function(){if(!this.running)return!0;switch(this.options.link){case"cancel":return this.cancel(),!0;case"chain":return this.chain(this.caller.pass(arguments,this)),!1}return!1},send:function(a){if(!this.check(a))return this;this.options.isSuccess=this.options.isSuccess||this.isSuccess,this.running=!0;var c=typeOf(a);("string"==c||"element"==c)&&(a={data:a});var d=this.options;a=Object.append({data:d.data,url:d.url,method:d.method},a);var e=a.data,f=String(a.url),g=a.method.toLowerCase();switch(typeOf(e)){case"element":e=document.id(e).toQueryString();break;case"object":case"hash":e=Object.toQueryString(e)}if(this.options.format){var h="format="+this.options.format;e=e?h+"&"+e:h}if(this.options.emulation&&!["get","post"].contains(g)){var i="_method="+g;e=e?i+"&"+e:i,g="post"}if(this.options.urlEncoded&&["post","put"].contains(g)){var j=this.options.encoding?"; charset="+this.options.encoding:"";this.headers["Content-type"]="application/x-www-form-urlencoded"+j}f||(f=document.location.pathname);var k=f.lastIndexOf("/");k>-1&&(k=f.indexOf("#"))>-1&&(f=f.substr(0,k)),this.options.noCache&&(f+=(f.indexOf("?")>-1?"&":"?")+String.uniqueID()),!e||"get"!=g&&"delete"!=g||(f+=(f.indexOf("?")>-1?"&":"?")+e,e=null);var l=this.xhr;return b&&(l.onloadstart=this.loadstart.bind(this),l.onprogress=this.progress.bind(this)),l.open(g.toUpperCase(),f,this.options.async,this.options.user,this.options.password),this.options.withCredentials&&"withCredentials"in l&&(l.withCredentials=!0),l.onreadystatechange=this.onStateChange.bind(this),Object.each(this.headers,function(a,b){try{l.setRequestHeader(b,a)}catch(c){this.fireEvent("exception",[b,a])}},this),this.fireEvent("request"),l.send(e),this.options.async?this.options.timeout&&(this.timer=this.timeout.delay(this.options.timeout,this)):this.onStateChange(),this},cancel:function(){if(!this.running)return this;this.running=!1;var c=this.xhr;return c.abort(),this.timer&&(clearTimeout(this.timer),delete this.timer),c.onreadystatechange=a,b&&(c.onprogress=c.onloadstart=a),this.xhr=new Browser.Request,this.fireEvent("cancel"),this}}),d={};["get","post","put","delete","patch","head","GET","POST","PUT","DELETE","PATCH","HEAD"].each(function(a){d[a]=function(b){var c={method:a};return null!=b&&(c.data=b),this.send(c)}}),c.implement(d),Element.Properties.send={set:function(a){var b=this.get("send").cancel();return b.setOptions(a),this},get:function(){var a=this.retrieve("send");return a||(a=new c({data:this,link:"cancel",method:this.get("method")||"post",url:this.get("action")}),this.store("send",a)),a}},Element.implement({send:function(a){var b=this.get("send");return b.send({data:this,url:a||b.options.url}),this}})}(),Request.HTML=new Class({Extends:Request,options:{update:!1,append:!1,evalScripts:!0,filter:!1,headers:{Accept:"text/html, application/xml, text/xml, */*"}},success:function(a){var b=this.options,c=this.response;c.html=a.stripScripts(function(a){c.javascript=a});var d=c.html.match(/<body[^>]*>([\s\S]*?)<\/body>/i);d&&(c.html=d[1]);var e=new Element("div").set("html",c.html);if(c.tree=e.childNodes,c.elements=e.getElements(b.filter||"*"),b.filter&&(c.tree=c.elements),b.update){var f=document.id(b.update).empty();b.filter?f.adopt(c.elements):f.set("html",c.html)}else if(b.append){var g=document.id(b.append);b.filter?c.elements.reverse().inject(g):g.adopt(e.getChildren())}b.evalScripts&&Browser.exec(c.javascript),this.onSuccess(c.tree,c.elements,c.html,c.javascript)}}),Element.Properties.load={set:function(a){var b=this.get("load").cancel();return b.setOptions(a),this},get:function(){var a=this.retrieve("load");return a||(a=new Request.HTML({data:this,link:"cancel",update:this,method:"get"}),this.store("load",a)),a}},Element.implement({load:function(){return this.get("load").send(Array.link(arguments,{data:Type.isObject,url:Type.isString})),this}}),Fx.Tween=new Class({Extends:Fx.CSS,initialize:function(a,b){this.element=this.subject=document.id(a),this.parent(b)},set:function(a,b){return 1==arguments.length&&(b=a,a=this.property||this.options.property),this.render(this.element,a,b,this.options.unit),this},start:function(a,b,c){if(!this.check(a,b,c))return this;var d=Array.flatten(arguments);this.property=this.options.property||d.shift();var e=this.prepare(this.element,this.property,d);return this.parent(e.from,e.to)}}),Element.Properties.tween={set:function(a){return this.get("tween").cancel().setOptions(a),this},get:function(){var a=this.retrieve("tween");return a||(a=new Fx.Tween(this,{link:"cancel"}),this.store("tween",a)),a}},Element.implement({tween:function(a,b,c){return this.get("tween").start(a,b,c),this},fade:function(){var a,b,c=this.get("tween"),d=["opacity"].append(arguments);switch(null==d[1]&&(d[1]="toggle"),d[1]){case"in":a="start",d[1]=1;break;case"out":a="start",d[1]=0;break;case"show":a="set",d[1]=1;break;case"hide":a="set",d[1]=0;break;case"toggle":var e=this.retrieve("fade:flag",1==this.getStyle("opacity"));a="start",d[1]=e?0:1,this.store("fade:flag",!e),b=!0;break;default:a="start"}b||this.eliminate("fade:flag"),c[a].apply(c,d);var f=d[d.length-1];return"set"==a||0!=f?this.setStyle("visibility",0==f?"hidden":"visible"):c.chain(function(){this.element.setStyle("visibility","hidden"),this.callChain()}),this},highlight:function(a,b){b||(b=this.retrieve("highlight:original",this.getStyle("background-color")),b="transparent"==b?"#fff":b);var c=this.get("tween");return c.start("background-color",a||"#ffff88",b).chain(function(){this.setStyle("background-color",this.retrieve("highlight:original")),c.callChain()}.bind(this)),this}}),function(){var a=!1;this.IframeShim=new Class({Implements:[Options,Events,Class.Occlude],options:{className:"iframeShim",src:'javascript:false;document.write("");',display:!1,zIndex:null,margin:0,offset:{x:0,y:0},browsers:a},property:"IframeShim",initialize:function(a,b){return this.element=document.id(a),this.occlude()?this.occluded:(this.setOptions(b),this.makeShim(),this)},makeShim:function(){if(this.options.browsers){var a=this.element.getStyle("zIndex").toInt();if(!a){a=1;var b=this.element.getStyle("position");"static"!=b&&b||this.element.setStyle("position","relative"),this.element.setStyle("zIndex",a)}a=(null!=this.options.zIndex||0===this.options.zIndex)&&a>this.options.zIndex?this.options.zIndex:a-1,0>a&&(a=1),this.shim=new Element("iframe",{src:this.options.src,scrolling:"no",frameborder:0,styles:{zIndex:a,position:"absolute",border:"none",filter:"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)"},"class":this.options.className}).store("IframeShim",this);var c=function(){this.shim.inject(this.element,"after"),this[this.options.display?"show":"hide"](),this.fireEvent("inject")}.bind(this);IframeShim.ready?c():window.addEvent("load",c)}else this.position=this.hide=this.show=this.dispose=Function.from(this)},position:function(){if(!IframeShim.ready||!this.shim)return this;var a=this.element.measure(function(){return this.getSize()});return void 0!=this.options.margin&&(a.x=a.x-2*this.options.margin,a.y=a.y-2*this.options.margin,this.options.offset.x+=this.options.margin,this.options.offset.y+=this.options.margin),this.shim.set({width:a.x,height:a.y}).position({relativeTo:this.element,offset:this.options.offset}),this},hide:function(){return this.shim&&this.shim.setStyle("display","none"),this},show:function(){return this.shim&&this.shim.setStyle("display","block"),this.position()},dispose:function(){return this.shim&&this.shim.dispose(),this},destroy:function(){return this.shim&&this.shim.destroy(),this}})}(),window.addEvent("load",function(){IframeShim.ready=!0});var Mask=new Class({Implements:[Options,Events],Binds:["position"],options:{style:{},"class":"mask",maskMargins:!1,useIframeShim:!0,iframeShimOptions:{}},initialize:function(a,b){this.target=document.id(a)||document.id(document.body),this.target.store("mask",this),this.setOptions(b),this.render(),this.inject()},render:function(){this.element=new Element("div",{"class":this.options["class"],id:this.options.id||"mask-"+String.uniqueID(),styles:Object.merge({},this.options.style,{display:"none"}),events:{click:function(a){this.fireEvent("click",a),this.options.hideOnClick&&this.hide()}.bind(this)}}),this.hidden=!0},toElement:function(){return this.element},inject:function(a,b){b=b||(this.options.inject?this.options.inject.where:"")||(this.target==document.body?"inside":"after"),a=a||this.options.inject&&this.options.inject.target||this.target,this.element.inject(a,b),this.options.useIframeShim&&(this.shim=new IframeShim(this.element,this.options.iframeShimOptions),this.addEvents({show:this.shim.show.bind(this.shim),hide:this.shim.hide.bind(this.shim),destroy:this.shim.destroy.bind(this.shim)}))},position:function(){return this.resize(this.options.width,this.options.height),this.element.position({relativeTo:this.target,position:"topLeft",ignoreMargins:!this.options.maskMargins,ignoreScroll:this.target==document.body}),this},resize:function(a,b){var c={styles:["padding","border"]};this.options.maskMargins&&c.styles.push("margin");var d=this.target.getComputedSize(c);if(this.target==document.body){this.element.setStyles({width:0,height:0});var e=window.getScrollSize();d.totalHeight<e.y&&(d.totalHeight=e.y),d.totalWidth<e.x&&(d.totalWidth=e.x)}return this.element.setStyles({width:Array.pick([a,d.totalWidth,d.x]),height:Array.pick([b,d.totalHeight,d.y])}),this},show:function(){return this.hidden?(window.addEvent("resize",this.position),this.position(),this.showMask.apply(this,arguments),this):this},showMask:function(){this.element.setStyle("display","block"),this.hidden=!1,this.fireEvent("show")},hide:function(){return this.hidden?this:(window.removeEvent("resize",this.position),this.hideMask.apply(this,arguments),this.options.destroyOnHide?this.destroy():this)},hideMask:function(){this.element.setStyle("display","none"),this.hidden=!0,this.fireEvent("hide")},toggle:function(){this[this.hidden?"show":"hide"]()},destroy:function(){this.hide(),this.element.destroy(),this.fireEvent("destroy"),this.target.eliminate("mask")}});Element.Properties.mask={set:function(a){var b=this.retrieve("mask");return b&&b.destroy(),this.eliminate("mask").store("mask:options",a)},get:function(){var a=this.retrieve("mask");return a||(a=new Mask(this,this.retrieve("mask:options")),this.store("mask",a)),a}},Element.implement({mask:function(a){return a&&this.set("mask",a),this.get("mask").show(),this},unmask:function(){return this.get("mask").hide(),this}});var Spinner=new Class({Extends:Mask,Implements:Chain,options:{"class":"spinner",containerPosition:{},content:{"class":"spinner-content"},messageContainer:{"class":"spinner-msg"},img:{"class":"spinner-img"},fxOptions:{link:"chain"}},initialize:function(a,b){this.target=document.id(a)||document.id(document.body),this.target.store("spinner",this),this.setOptions(b),this.render(),this.inject();var c=function(){this.active=!1}.bind(this);this.addEvents({hide:c,show:c})},render:function(){this.parent(),this.element.set("id",this.options.id||"spinner-"+String.uniqueID()),this.content=document.id(this.options.content)||new Element("div",this.options.content),this.content.inject(this.element),this.options.message&&(this.msg=document.id(this.options.message)||new Element("p",this.options.messageContainer).appendText(this.options.message),this.msg.inject(this.content)),this.options.img&&(this.img=document.id(this.options.img)||new Element("div",this.options.img),this.img.inject(this.content)),this.element.set("tween",this.options.fxOptions)},show:function(a){return this.active?this.chain(this.show.bind(this)):this.hidden?(this.target.set("aria-busy","true"),this.active=!0,this.parent(a)):(this.callChain.delay(20,this),this)},showMask:function(a){var b=function(){this.content.position(Object.merge({relativeTo:this.element},this.options.containerPosition))}.bind(this);a?(this.parent(),b()):(this.options.style.opacity||(this.options.style.opacity=this.element.getStyle("opacity").toFloat()),this.element.setStyles({display:"block",opacity:0}).tween("opacity",this.options.style.opacity),b(),this.hidden=!1,this.fireEvent("show"),this.callChain())},hide:function(a){return this.active?this.chain(this.hide.bind(this)):this.hidden?(this.callChain.delay(20,this),this):(this.target.set("aria-busy","false"),this.active=!0,this.parent(a))},hideMask:function(a){return a?this.parent():void this.element.tween("opacity",0).get("tween").chain(function(){this.element.setStyle("display","none"),this.hidden=!0,this.fireEvent("hide"),this.callChain()
}.bind(this))},destroy:function(){this.content.destroy(),this.parent(),this.target.eliminate("spinner")}});Request=Class.refactor(Request,{options:{useSpinner:!1,spinnerOptions:{},spinnerTarget:!1},initialize:function(a){this._send=this.send,this.send=function(a){var b=this.getSpinner();return b?b.chain(this._send.pass(a,this)).show():this._send(a),this},this.previous(a)},getSpinner:function(){if(!this.spinner){var a=document.id(this.options.spinnerTarget)||document.id(this.options.update);if(this.options.useSpinner&&a){a.set("spinner",this.options.spinnerOptions);var b=this.spinner=a.get("spinner");["complete","exception","cancel"].each(function(a){this.addEvent(a,b.hide.bind(b))},this)}}return this.spinner}}),Element.Properties.spinner={set:function(a){var b=this.retrieve("spinner");return b&&b.destroy(),this.eliminate("spinner").store("spinner:options",a)},get:function(){var a=this.retrieve("spinner");return a||(a=new Spinner(this,this.retrieve("spinner:options")),this.store("spinner",a)),a}},Element.implement({spin:function(a){return a&&this.set("spinner",a),this.get("spinner").show(),this},unspin:function(){return this.get("spinner").hide(),this}}),String.implement({parseQueryString:function(a,b){null==a&&(a=!0),null==b&&(b=!0);var c=this.split(/[&;]/),d={};return c.length?(c.each(function(c){var e=c.indexOf("=")+1,f=e?c.substr(e):"",g=e?c.substr(0,e-1).match(/([^\]\[]+|(\B)(?=\]))/g):[c],h=d;g&&(b&&(f=decodeURIComponent(f)),g.each(function(b,c){a&&(b=decodeURIComponent(b));var d=h[b];c<g.length-1?h=h[b]=d||{}:"array"==typeOf(d)?d.push(f):h[b]=null!=d?[d,f]:f}))}),d):d},cleanQueryString:function(a){return this.split("&").filter(function(b){var c=b.indexOf("="),d=0>c?"":b.substr(0,c),e=b.substr(c+1);return a?a.call(null,d,e):e||0===e}).join("&")}}),window.Form||(window.Form={}),function(){Form.Request=new Class({Binds:["onSubmit","onFormValidate"],Implements:[Options,Events,Class.Occlude],options:{requestOptions:{evalScripts:!0,useSpinner:!0,emulation:!1,link:"ignore"},sendButtonClicked:!0,extraData:{},resetForm:!0},property:"form.request",initialize:function(a,b,c){return this.element=document.id(a),this.occlude()?this.occluded:void this.setOptions(c).setTarget(b).attach()},setTarget:function(a){return this.target=document.id(a),this.request?this.request.setOptions({update:this.target}):this.makeRequest(),this},toElement:function(){return this.element},makeRequest:function(){var a=this;return this.request=new Request.HTML(Object.merge({update:this.target,emulation:!1,spinnerTarget:this.element,method:this.element.get("method")||"post"},this.options.requestOptions)).addEvents({success:function(b,c,d,e){["complete","success"].each(function(f){a.fireEvent(f,[a.target,b,c,d,e])})},failure:function(){a.fireEvent("complete",arguments).fireEvent("failure",arguments)},exception:function(){a.fireEvent("failure",arguments)}}),this.attachReset()},attachReset:function(){return this.options.resetForm?(this.request.addEvent("success",function(){Function.attempt(function(){this.element.reset()}.bind(this)),window.OverText&&OverText.update()}.bind(this)),this):this},attach:function(a){var b=0!=a?"addEvent":"removeEvent";this.element[b]("click:relay(button, input[type=submit])",this.saveClickedButton.bind(this));var c=this.element.retrieve("validator");return c?c[b]("onFormValidate",this.onFormValidate):this.element[b]("submit",this.onSubmit),this},detach:function(){return this.attach(!1)},enable:function(){return this.attach()},disable:function(){return this.detach()},onFormValidate:function(a,b,c){if(c){var d=this.element.retrieve("validator");(a||d&&!d.options.stopOnFailure)&&(c.stop(),this.send())}},onSubmit:function(a){var b=this.element.retrieve("validator");return b?(this.element.removeEvent("submit",this.onSubmit),b.addEvent("onFormValidate",this.onFormValidate),void b.validate(a)):(a&&a.stop(),void this.send())},saveClickedButton:function(a,b){var c=b.get("name");c&&this.options.sendButtonClicked&&(this.options.extraData[c]=b.get("value")||!0,this.clickedCleaner=function(){delete this.options.extraData[c],this.clickedCleaner=function(){}}.bind(this))},clickedCleaner:function(){},send:function(){var a=this.element.toQueryString().trim(),b=Object.toQueryString(this.options.extraData);return a?a+="&"+b:a=b,this.fireEvent("send",[this.element,a.parseQueryString()]),this.request.send({data:a,url:this.options.requestOptions.url||this.element.get("action")}),this.clickedCleaner(),this}}),Element.implement("formUpdate",function(a,b){var c=this.retrieve("form.request");return c?(a&&c.setTarget(a),b&&c.setOptions(b).makeRequest()):c=new Form.Request(this,a,b),c.send(),this})}(),function(){var a=function(a){var b=a.options.hideInputs;if(window.OverText){var c=[null];OverText.each(function(a){c.include("."+a.options.labelClass)}),c&&(b+=c.join(", "))}return b?a.element.getElements(b):null};Fx.Reveal=new Class({Extends:Fx.Morph,options:{link:"cancel",styles:["padding","border","margin"],transitionOpacity:"opacity"in document.documentElement,mode:"vertical",display:function(){return"tr"!=this.element.get("tag")?"block":"table-row"},opacity:1,hideInputs:"opacity"in document.documentElement?null:"select, input, textarea, object, embed"},dissolve:function(){if(this.hiding||this.showing)"chain"==this.options.link?this.chain(this.dissolve.bind(this)):"cancel"!=this.options.link||this.hiding||(this.cancel(),this.dissolve());else if("none"!=this.element.getStyle("display")){this.hiding=!0,this.showing=!1,this.hidden=!0,this.cssText=this.element.style.cssText;var b=this.element.getComputedSize({styles:this.options.styles,mode:this.options.mode});this.options.transitionOpacity&&(b.opacity=this.options.opacity);var c={};Object.each(b,function(a,b){c[b]=[a,0]}),this.element.setStyles({display:Function.from(this.options.display).call(this),overflow:"hidden"});var d=a(this);d&&d.setStyle("visibility","hidden"),this.$chain.unshift(function(){this.hidden&&(this.hiding=!1,this.element.style.cssText=this.cssText,this.element.setStyle("display","none"),d&&d.setStyle("visibility","visible")),this.fireEvent("hide",this.element),this.callChain()}.bind(this)),this.start(c)}else this.callChain.delay(10,this),this.fireEvent("complete",this.element),this.fireEvent("hide",this.element);return this},reveal:function(){if(this.showing||this.hiding)"chain"==this.options.link?this.chain(this.reveal.bind(this)):"cancel"!=this.options.link||this.showing||(this.cancel(),this.reveal());else if("none"==this.element.getStyle("display")){this.hiding=!1,this.showing=!0,this.hidden=!1,this.cssText=this.element.style.cssText;var b;this.element.measure(function(){b=this.element.getComputedSize({styles:this.options.styles,mode:this.options.mode})}.bind(this)),null!=this.options.heightOverride&&(b.height=this.options.heightOverride.toInt()),null!=this.options.widthOverride&&(b.width=this.options.widthOverride.toInt()),this.options.transitionOpacity&&(this.element.setStyle("opacity",0),b.opacity=this.options.opacity);var c={height:0,display:Function.from(this.options.display).call(this)};Object.each(b,function(a,b){c[b]=0}),c.overflow="hidden",this.element.setStyles(c);var d=a(this);d&&d.setStyle("visibility","hidden"),this.$chain.unshift(function(){this.element.style.cssText=this.cssText,this.element.setStyle("display",Function.from(this.options.display).call(this)),this.hidden||(this.showing=!1),d&&d.setStyle("visibility","visible"),this.callChain(),this.fireEvent("show",this.element)}.bind(this)),this.start(b)}else this.callChain(),this.fireEvent("complete",this.element),this.fireEvent("show",this.element);return this},toggle:function(){return"none"==this.element.getStyle("display")?this.reveal():this.dissolve(),this},cancel:function(){return this.parent.apply(this,arguments),null!=this.cssText&&(this.element.style.cssText=this.cssText),this.hiding=!1,this.showing=!1,this}}),Element.Properties.reveal={set:function(a){return this.get("reveal").cancel().setOptions(a),this},get:function(){var a=this.retrieve("reveal");return a||(a=new Fx.Reveal(this),this.store("reveal",a)),a}},Element.Properties.dissolve=Element.Properties.reveal,Element.implement({reveal:function(a){return this.get("reveal").setOptions(a).reveal(),this},dissolve:function(a){return this.get("reveal").setOptions(a).dissolve(),this},nix:function(a){var b=Array.link(arguments,{destroy:Type.isBoolean,options:Type.isObject});return this.get("reveal").setOptions(a).dissolve().chain(function(){this[b.destroy?"destroy":"dispose"]()}.bind(this)),this},wink:function(){var a=Array.link(arguments,{duration:Type.isNumber,options:Type.isObject}),b=this.get("reveal").setOptions(a.options);b.reveal().chain(function(){(function(){b.dissolve()}).delay(a.duration||2e3)})}})}(),Form.Request.Append=new Class({Extends:Form.Request,options:{useReveal:!0,revealOptions:{},inject:"bottom"},makeRequest:function(){this.request=new Request.HTML(Object.merge({url:this.element.get("action"),method:this.element.get("method")||"post",spinnerTarget:this.element},this.options.requestOptions,{evalScripts:!1})).addEvents({success:function(a,b,c,d){var e,f=Elements.from(c);e=1==f.length?f[0]:new Element("div",{styles:{display:"none"}}).adopt(f),e.inject(this.target,this.options.inject),this.options.requestOptions.evalScripts&&Browser.exec(d),this.fireEvent("beforeEffect",e);var g=function(){this.fireEvent("success",[e,this.target,a,b,c,d])}.bind(this);this.options.useReveal?(e.set("reveal",this.options.revealOptions).get("reveal").chain(g),e.reveal()):g()}.bind(this),failure:function(a){this.fireEvent("failure",a)}.bind(this)}),this.attachReset()}}),"undefined"==typeof JSON&&(this.JSON={}),function(){var special={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escape=function(a){return special[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)};JSON.validate=function(a){return a=a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(a)},JSON.encode=JSON.stringify?function(a){return JSON.stringify(a)}:function(a){switch(a&&a.toJSON&&(a=a.toJSON()),typeOf(a)){case"string":return'"'+a.replace(/[\x00-\x1f\\"]/g,escape)+'"';case"array":return"["+a.map(JSON.encode).clean()+"]";case"object":case"hash":var b=[];return Object.each(a,function(a,c){var d=JSON.encode(a);d&&b.push(JSON.encode(c)+":"+d)}),"{"+b+"}";case"number":case"boolean":return""+a;case"null":return"null"}return null},JSON.secure=!0,JSON.decode=function(string,secure){if(!string||"string"!=typeOf(string))return null;if(null==secure&&(secure=JSON.secure),secure){if(JSON.parse)return JSON.parse(string);if(!JSON.validate(string))throw new Error("JSON could not decode the input; security is enabled and the value is not secure.")}return eval("("+string+")")}}(),function(){var a=function(a){return null!=a},b=Object.prototype.hasOwnProperty;Object.extend({getFromPath:function(a,c){"string"==typeof c&&(c=c.split("."));for(var d=0,e=c.length;e>d;d++){if(!b.call(a,c[d]))return null;a=a[c[d]]}return a},cleanValues:function(b,c){c=c||a;for(var d in b)c(b[d])||delete b[d];return b},erase:function(a,c){return b.call(a,c)&&delete a[c],a},run:function(a){var b=Array.slice(arguments,1);for(var c in a)a[c].apply&&a[c].apply(a,b);return a}})}(),function(){var a=null,b={},c=function(a){return instanceOf(a,d.Set)?a:b[a]},d=this.Locale={define:function(c,e,f,g){var h;return instanceOf(c,d.Set)?(h=c.name,h&&(b[h]=c)):(h=c,b[h]||(b[h]=new d.Set(h)),c=b[h]),e&&c.define(e,f,g),a||(a=c),c},use:function(b){return b=c(b),b&&(a=b,this.fireEvent("change",b)),this},getCurrent:function(){return a},get:function(b,c){return a?a.get(b,c):""},inherit:function(a,b,d){return a=c(a),a&&a.inherit(b,d),this},list:function(){return Object.keys(b)}};Object.append(d,new Events),d.Set=new Class({sets:{},inherits:{locales:[],sets:{}},initialize:function(a){this.name=a||""},define:function(a,b,c){var d=this.sets[a];return d||(d={}),b&&("object"==typeOf(b)?d=Object.merge(d,b):d[b]=c),this.sets[a]=d,this},get:function(a,c,d){var e=Object.getFromPath(this.sets,a);if(null!=e){var f=typeOf(e);return"function"==f?e=e.apply(null,Array.from(c)):"object"==f&&(e=Object.clone(e)),e}var g=a.indexOf("."),h=0>g?a:a.substr(0,g),i=(this.inherits.sets[h]||[]).combine(this.inherits.locales).include("en-US");d||(d=[]);for(var j=0,k=i.length;k>j;j++)if(!d.contains(i[j])){d.include(i[j]);var l=b[i[j]];if(l&&(e=l.get(a,c,d),null!=e))return e}return""},inherit:function(a,b){a=Array.from(a),b&&!this.inherits.sets[b]&&(this.inherits.sets[b]=[]);for(var c=a.length;c--;)(b?this.inherits.sets[b]:this.inherits.locales).unshift(a[c]);return this}})}(),Locale.define("en-US","Date",{months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_abbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],days_abbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dateOrder:["month","date","year"],shortDate:"%m/%d/%Y",shortTime:"%I:%M%p",AM:"AM",PM:"PM",firstDayOfWeek:0,ordinal:function(a){return a>3&&21>a?"th":["th","st","nd","rd","th"][Math.min(a%10,4)]},lessThanMinuteAgo:"less than a minute ago",minuteAgo:"about a minute ago",minutesAgo:"{delta} minutes ago",hourAgo:"about an hour ago",hoursAgo:"about {delta} hours ago",dayAgo:"1 day ago",daysAgo:"{delta} days ago",weekAgo:"1 week ago",weeksAgo:"{delta} weeks ago",monthAgo:"1 month ago",monthsAgo:"{delta} months ago",yearAgo:"1 year ago",yearsAgo:"{delta} years ago",lessThanMinuteUntil:"less than a minute from now",minuteUntil:"about a minute from now",minutesUntil:"{delta} minutes from now",hourUntil:"about an hour from now",hoursUntil:"about {delta} hours from now",dayUntil:"1 day from now",daysUntil:"{delta} days from now",weekUntil:"1 week from now",weeksUntil:"{delta} weeks from now",monthUntil:"1 month from now",monthsUntil:"{delta} months from now",yearUntil:"1 year from now",yearsUntil:"{delta} years from now"}),function(){var a=this.Date,b=a.Methods={ms:"Milliseconds",year:"FullYear",min:"Minutes",mo:"Month",sec:"Seconds",hr:"Hours"};["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds","Time","TimezoneOffset","Week","Timezone","GMTOffset","DayOfYear","LastMonth","LastDayOfMonth","UTCDate","UTCDay","UTCFullYear","AMPM","Ordinal","UTCHours","UTCMilliseconds","UTCMinutes","UTCMonth","UTCSeconds","UTCMilliseconds"].each(function(b){a.Methods[b.toLowerCase()]=b});var c=function(a,b,d){return 1==b?a:a<Math.pow(10,b-1)?(d||"0")+c(a,b-1,d):a};a.implement({set:function(a,c){a=a.toLowerCase();var d=b[a]&&"set"+b[a];return d&&this[d]&&this[d](c),this}.overloadSetter(),get:function(a){a=a.toLowerCase();var c=b[a]&&"get"+b[a];return c&&this[c]?this[c]():null}.overloadGetter(),clone:function(){return new a(this.get("time"))},increment:function(b,c){switch(b=b||"day",c=null!=c?c:1,b){case"year":return this.increment("month",12*c);case"month":var d=this.get("date");return this.set("date",1).set("mo",this.get("mo")+c),this.set("date",d.min(this.get("lastdayofmonth")));case"week":return this.increment("day",7*c);case"day":return this.set("date",this.get("date")+c)}if(!a.units[b])throw new Error(b+" is not a supported interval");return this.set("time",this.get("time")+c*a.units[b]())},decrement:function(a,b){return this.increment(a,-1*(null!=b?b:1))},isLeapYear:function(){return a.isLeapYear(this.get("year"))},clearTime:function(){return this.set({hr:0,min:0,sec:0,ms:0})},diff:function(b,c){return"string"==typeOf(b)&&(b=a.parse(b)),((b-this)/a.units[c||"day"](3,3)).round()},getLastDayOfMonth:function(){return a.daysInMonth(this.get("mo"),this.get("year"))},getDayOfYear:function(){return(a.UTC(this.get("year"),this.get("mo"),this.get("date")+1)-a.UTC(this.get("year"),0,1))/a.units.day()},setDay:function(b,c){null==c&&(c=a.getMsg("firstDayOfWeek"),""===c&&(c=1)),b=(7+a.parseDay(b,!0)-c)%7;var d=(7+this.get("day")-c)%7;return this.increment("day",b-d)},getWeek:function(b){null==b&&(b=a.getMsg("firstDayOfWeek"),""===b&&(b=1));var c,d=this,e=(7+d.get("day")-b)%7,f=0;if(1==b){var g=d.get("month"),h=d.get("date")-e;if(11==g&&h>28)return 1;0==g&&-2>h&&(d=new a(d).decrement("day",e),e=0),c=new a(d.get("year"),0,1).get("day")||7,c>4&&(f=-7)}else c=new a(d.get("year"),0,1).get("day");return f+=d.get("dayofyear"),f+=6-e,f+=(7+c-b)%7,f/7},getOrdinal:function(b){return a.getMsg("ordinal",b||this.get("date"))},getTimezone:function(){return this.toString().replace(/^.*? ([A-Z]{3}).[0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},getGMTOffset:function(){var a=this.get("timezoneOffset");return(a>0?"-":"+")+c((a.abs()/60).floor(),2)+c(a%60,2)},setAMPM:function(a){a=a.toUpperCase();var b=this.get("hr");return b>11&&"AM"==a?this.decrement("hour",12):12>b&&"PM"==a?this.increment("hour",12):this},getAMPM:function(){return this.get("hr")<12?"AM":"PM"},parse:function(b){return this.set("time",a.parse(b)),this},isValid:function(a){return a||(a=this),"date"==typeOf(a)&&!isNaN(a.valueOf())},format:function(b){if(!this.isValid())return"invalid date";if(b||(b="%x %X"),"string"==typeof b&&(b=f[b.toLowerCase()]||b),"function"==typeof b)return b(this);var d=this;return b.replace(/%([a-z%])/gi,function(b,e){switch(e){case"a":return a.getMsg("days_abbr")[d.get("day")];case"A":return a.getMsg("days")[d.get("day")];case"b":return a.getMsg("months_abbr")[d.get("month")];case"B":return a.getMsg("months")[d.get("month")];case"c":return d.format("%a %b %d %H:%M:%S %Y");case"d":return c(d.get("date"),2);case"e":return c(d.get("date"),2," ");case"H":return c(d.get("hr"),2);case"I":return c(d.get("hr")%12||12,2);case"j":return c(d.get("dayofyear"),3);case"k":return c(d.get("hr"),2," ");case"l":return c(d.get("hr")%12||12,2," ");case"L":return c(d.get("ms"),3);case"m":return c(d.get("mo")+1,2);case"M":return c(d.get("min"),2);case"o":return d.get("ordinal");case"p":return a.getMsg(d.get("ampm"));case"s":return Math.round(d/1e3);case"S":return c(d.get("seconds"),2);case"T":return d.format("%H:%M:%S");case"U":return c(d.get("week"),2);case"w":return d.get("day");case"x":return d.format(a.getMsg("shortDate"));case"X":return d.format(a.getMsg("shortTime"));case"y":return d.get("year").toString().substr(2);case"Y":return d.get("year");case"z":return d.get("GMTOffset");case"Z":return d.get("Timezone")}return e})},toISOString:function(){return this.format("iso8601")}}).alias({toJSON:"toISOString",compare:"diff",strftime:"format"});var d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f={db:"%Y-%m-%d %H:%M:%S",compact:"%Y%m%dT%H%M%S","short":"%d %b %H:%M","long":"%B %d, %Y %H:%M",rfc822:function(a){return d[a.get("day")]+a.format(", %d ")+e[a.get("month")]+a.format(" %Y %H:%M:%S %Z")},rfc2822:function(a){return d[a.get("day")]+a.format(", %d ")+e[a.get("month")]+a.format(" %Y %H:%M:%S %z")},iso8601:function(a){return a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1,2)+"-"+c(a.getUTCDate(),2)+"T"+c(a.getUTCHours(),2)+":"+c(a.getUTCMinutes(),2)+":"+c(a.getUTCSeconds(),2)+"."+c(a.getUTCMilliseconds(),3)+"Z"}},g=[],h=a.parse,i=function(b,c,d){var e=-1,f=a.getMsg(b+"s");switch(typeOf(c)){case"object":e=f[c.get(b)];break;case"number":if(e=f[c],!e)throw new Error("Invalid "+b+" index: "+c);break;case"string":var g=f.filter(function(a){return this.test(a)},new RegExp("^"+c,"i"));if(!g.length)throw new Error("Invalid "+b+" string");if(g.length>1)throw new Error("Ambiguous "+b);e=g[0]}return d?f.indexOf(e):e},j=1900,k=70;a.extend({getMsg:function(a,b){return Locale.get("Date."+a,b)},units:{ms:Function.from(1),second:Function.from(1e3),minute:Function.from(6e4),hour:Function.from(36e5),day:Function.from(864e5),week:Function.from(6084e5),month:function(b,c){var d=new a;return 864e5*a.daysInMonth(null!=b?b:d.get("mo"),null!=c?c:d.get("year"))},year:function(b){return b=b||(new a).get("year"),a.isLeapYear(b)?316224e5:31536e6}},daysInMonth:function(b,c){return[31,a.isLeapYear(c)?29:28,31,30,31,30,31,31,30,31,30,31][b]},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},parse:function(b){var c=typeOf(b);if("number"==c)return new a(b);if("string"!=c)return b;if(b=b.clean(),!b.length)return null;var d;return g.some(function(a){var c=a.re.exec(b);return c?d=a.handler(c):!1}),d&&d.isValid()||(d=new a(h(b)),d&&d.isValid()||(d=new a(b.toInt()))),d},parseDay:function(a,b){return i("day",a,b)},parseMonth:function(a,b){return i("month",a,b)},parseUTC:function(b){var c=new a(b),d=a.UTC(c.get("year"),c.get("mo"),c.get("date"),c.get("hr"),c.get("min"),c.get("sec"),c.get("ms"));return new a(d)},orderIndex:function(b){return a.getMsg("dateOrder").indexOf(b)+1},defineFormat:function(a,b){return f[a]=b,this},defineParser:function(a){return g.push(a.re&&a.handler?a:q(a)),this},defineParsers:function(){return Array.flatten(arguments).each(a.defineParser),this},define2DigitYearStart:function(a){return k=a%100,j=a-k,this}}).extend({defineFormats:a.defineFormat.overloadSetter()});var l=function(b){return new RegExp("(?:"+a.getMsg(b).map(function(a){return a.substr(0,3)}).join("|")+")[a-z]*")},m=function(b){switch(b){case"T":return"%H:%M:%S";case"x":return(1==a.orderIndex("month")?"%m[-./]%d":"%d[-./]%m")+"([-./]%y)?";case"X":return"%H([.:]%M)?([.:]%S([.:]%s)?)? ?%p? ?%z?"}return null},n={d:/[0-2]?[0-9]|3[01]/,H:/[01]?[0-9]|2[0-3]/,I:/0?[1-9]|1[0-2]/,M:/[0-5]?\d/,s:/\d+/,o:/[a-z]*/,p:/[ap]\.?m\.?/,y:/\d{2}|\d{4}/,Y:/\d{4}/,z:/Z|[+-]\d{2}(?::?\d{2})?/};n.m=n.I,n.S=n.M;var o,p=function(a){o=a,n.a=n.A=l("days"),n.b=n.B=l("months"),g.each(function(a,b){a.format&&(g[b]=q(a.format))})},q=function(b){if(!o)return{format:b};var c=[],d=(b.source||b).replace(/%([a-z])/gi,function(a,b){return m(b)||a}).replace(/\((?!\?)/g,"(?:").replace(/ (?!\?|\*)/g,",? ").replace(/%([a-z%])/gi,function(a,b){var d=n[b];return d?(c.push(b),"("+d.source+")"):b}).replace(/\[a-z\]/gi,"[a-z\\u00c0-\\uffff;&]");return{format:b,re:new RegExp("^"+d+"$","i"),handler:function(b){b=b.slice(1).associate(c);var d=(new a).clearTime(),e=b.y||b.Y;null!=e&&r.call(d,"y",e),"d"in b&&r.call(d,"d",1),("m"in b||b.b||b.B)&&r.call(d,"m",1);for(var f in b)r.call(d,f,b[f]);return d}}},r=function(b,c){if(!c)return this;switch(b){case"a":case"A":return this.set("day",a.parseDay(c,!0));case"b":case"B":return this.set("mo",a.parseMonth(c,!0));case"d":return this.set("date",c);case"H":case"I":return this.set("hr",c);case"m":return this.set("mo",c-1);case"M":return this.set("min",c);case"p":return this.set("ampm",c.replace(/\./g,""));case"S":return this.set("sec",c);case"s":return this.set("ms",1e3*("0."+c));case"w":return this.set("day",c);case"Y":return this.set("year",c);case"y":return c=+c,100>c&&(c+=j+(k>c?100:0)),this.set("year",c);case"z":"Z"==c&&(c="+00");var d=c.match(/([+-])(\d{2}):?(\d{2})?/);return d=(d[1]+"1")*(60*d[2]+(+d[3]||0))+this.getTimezoneOffset(),this.set("time",this-6e4*d)}return this};a.defineParsers("%Y([-./]%m([-./]%d((T| )%X)?)?)?","%Y%m%d(T%H(%M%S?)?)?","%x( %X)?","%d%o( %b( %Y)?)?( %X)?","%b( %d%o)?( %Y)?( %X)?","%Y %b( %d%o( %X)?)?","%o %b %d %X %z %Y","%T","%H:%M( ?%p)?"),Locale.addEvent("change",function(a){Locale.get("Date")&&p(a)}).fireEvent("change",Locale.getCurrent())}(),Locale.define("en-US","FormValidator",{required:"This field is required.",length:"Please enter {length} characters (you entered {elLength} characters)",minLength:"Please enter at least {minLength} characters (you entered {length} characters).",maxLength:"Please enter no more than {maxLength} characters (you entered {length} characters).",integer:"Please enter an integer in this field. Numbers with decimals (e.g. 1.25) are not permitted.",numeric:'Please enter only numeric values in this field (i.e. "1" or "1.1" or "-1" or "-1.1").',digits:"Please use numbers and punctuation only in this field (for example, a phone number with dashes or dots is permitted).",alpha:"Please use only letters (a-z) within this field. No spaces or other characters are allowed.",alphanum:"Please use only letters (a-z) or numbers (0-9) in this field. No spaces or other characters are allowed.",dateSuchAs:"Please enter a valid date such as {date}",dateInFormatMDY:'Please enter a valid date such as MM/DD/YYYY (i.e. "12/31/1999")',email:'Please enter a valid email address. For example "fred@domain.com".',url:"Please enter a valid URL such as http://www.example.com.",currencyDollar:"Please enter a valid $ amount. For example $100.00 .",oneRequired:"Please enter something for at least one of these inputs.",errorPrefix:"Error: ",warningPrefix:"Warning: ",noSpace:"There can be no spaces in this input.",reqChkByNode:"No items are selected.",requiredChk:"This field is required.",reqChkByName:"Please select a {label}.",match:"This field needs to match the {matchName} field",startDate:"the start date",endDate:"the end date",currentDate:"the current date",afterDate:"The date should be the same or after {label}.",beforeDate:"The date should be the same or before {label}.",startMonth:"Please select a start month",sameMonth:"These two dates must be in the same month - you must change one or the other.",creditcard:"The credit card number entered is invalid. Please check the number and try again. {length} digits entered."}),window.Form||(window.Form={});var InputValidator=this.InputValidator=new Class({Implements:[Options],options:{errorMsg:"Validation failed.",test:Function.from(!0)},initialize:function(a,b){this.setOptions(b),this.className=a},test:function(a,b){return a=document.id(a),a?this.options.test(a,b||this.getProps(a)):!1},getError:function(a,b){a=document.id(a);var c=this.options.errorMsg;return"function"==typeOf(c)&&(c=c(a,b||this.getProps(a))),c},getProps:function(a){return a=document.id(a),a?a.get("validatorProps"):{}}});Element.Properties.validators={get:function(){return(this.get("data-validators")||this.className).clean().split(" ")}},Element.Properties.validatorProps={set:function(a){return this.eliminate("$moo:validatorProps").store("$moo:validatorProps",a)},get:function(a){if(a&&this.set(a),this.retrieve("$moo:validatorProps"))return this.retrieve("$moo:validatorProps");if(this.getProperty("data-validator-properties")||this.getProperty("validatorProps"))try{this.store("$moo:validatorProps",JSON.decode(this.getProperty("validatorProps")||this.getProperty("data-validator-properties"),!1))}catch(b){return{}}else{var c=this.get("validators").filter(function(a){return a.test(":")});c.length?(a={},c.each(function(b){var c=b.split(":");if(c[1])try{a[c[0]]=JSON.decode(c[1],!1)}catch(d){}}),this.store("$moo:validatorProps",a)):this.store("$moo:validatorProps",{})}return this.retrieve("$moo:validatorProps")}},Form.Validator=new Class({Implements:[Options,Events],options:{fieldSelectors:"input, select, textarea",ignoreHidden:!0,ignoreDisabled:!0,useTitles:!1,evaluateOnSubmit:!0,evaluateFieldsOnBlur:!0,evaluateFieldsOnChange:!0,serial:!0,stopOnFailure:!0,warningPrefix:function(){return Form.Validator.getMsg("warningPrefix")||"Warning: "},errorPrefix:function(){return Form.Validator.getMsg("errorPrefix")||"Error: "}},initialize:function(a,b){this.setOptions(b),this.element=document.id(a),this.warningPrefix=Function.from(this.options.warningPrefix)(),this.errorPrefix=Function.from(this.options.errorPrefix)(),this._bound={onSubmit:this.onSubmit.bind(this),blurOrChange:function(a,b){this.validationMonitor(b,!0)}.bind(this)},this.enable()},toElement:function(){return this.element},getFields:function(){return this.fields=this.element.getElements(this.options.fieldSelectors)},enable:function(){this.element.store("validator",this),this.options.evaluateOnSubmit&&this.element.addEvent("submit",this._bound.onSubmit),this.options.evaluateFieldsOnBlur&&this.element.addEvent("blur:relay(input,select,textarea)",this._bound.blurOrChange),this.options.evaluateFieldsOnChange&&this.element.addEvent("change:relay(input,select,textarea)",this._bound.blurOrChange)},disable:function(){this.element.eliminate("validator"),this.element.removeEvents({submit:this._bound.onSubmit,"blur:relay(input,select,textarea)":this._bound.blurOrChange,"change:relay(input,select,textarea)":this._bound.blurOrChange})},validationMonitor:function(){clearTimeout(this.timer),this.timer=this.validateField.delay(50,this,arguments)},onSubmit:function(a){this.validate(a)&&this.reset()},reset:function(){return this.getFields().each(this.resetField,this),this},validate:function(a){var b=this.getFields().map(function(a){return this.validateField(a,!0)},this).every(function(a){return a});return this.fireEvent("formValidate",[b,this.element,a]),this.options.stopOnFailure&&!b&&a&&a.preventDefault(),b},validateField:function(a,b){if(this.paused)return!0;a=document.id(a);var c,d,e=!a.hasClass("validation-failed");if(this.options.serial&&!b&&(c=this.element.getElement(".validation-failed"),d=this.element.getElement(".warning")),a&&(!c||b||a.hasClass("validation-failed")||c&&!this.options.serial)){var f=a.get("validators"),g=f.some(function(a){return this.getValidator(a)},this),h=[];f.each(function(b){b&&!this.test(b,a)&&h.include(b)},this),e=0===h.length,g&&!this.hasValidator(a,"warnOnly")&&(e?(a.addClass("validation-passed").removeClass("validation-failed"),this.fireEvent("elementPass",[a])):(a.addClass("validation-failed").removeClass("validation-passed"),this.fireEvent("elementFail",[a,h]))),d||(f.some(function(a){return a.test("^warn")?this.getValidator(a.replace(/^warn-/,"")):null},this),a.removeClass("warning"),f.map(function(b){return b.test("^warn")?this.test(b.replace(/^warn-/,""),a,!0):null},this))}return e},test:function(a,b,c){if(b=document.id(b),this.options.ignoreHidden&&!b.isVisible()||this.options.ignoreDisabled&&b.get("disabled"))return!0;var d=this.getValidator(a);null!=c&&(c=!1),this.hasValidator(b,"warnOnly")&&(c=!0);var e=b.hasClass("ignoreValidation")||(d?d.test(b):!0);return d&&this.fireEvent("elementValidate",[e,b,a,c]),c?!0:e},hasValidator:function(a,b){return a.get("validators").contains(b)},resetField:function(a){return a=document.id(a),a&&a.get("validators").each(function(b){b.test("^warn-")&&(b=b.replace(/^warn-/,"")),a.removeClass("validation-failed"),a.removeClass("warning"),a.removeClass("validation-passed")},this),this},stop:function(){return this.paused=!0,this},start:function(){return this.paused=!1,this},ignoreField:function(a,b){return a=document.id(a),a&&(this.enforceField(a),a.addClass(b?"warnOnly":"ignoreValidation")),this},enforceField:function(a){return a=document.id(a),a&&a.removeClass("warnOnly").removeClass("ignoreValidation"),this}}),Form.Validator.getMsg=function(a){return Locale.get("FormValidator."+a)},Form.Validator.adders={validators:{},add:function(a,b){this.validators[a]=new InputValidator(a,b),this.initialize||this.implement({validators:this.validators})},addAllThese:function(a){Array.from(a).each(function(a){this.add(a[0],a[1])},this)},getValidator:function(a){return this.validators[a.split(":")[0]]}},Object.append(Form.Validator,Form.Validator.adders),Form.Validator.implement(Form.Validator.adders),Form.Validator.add("IsEmpty",{errorMsg:!1,test:function(a){return"select-one"==a.type||"select"==a.type?!(a.selectedIndex>=0&&""!=a.options[a.selectedIndex].value):null==a.get("value")||0==a.get("value").length}}),Form.Validator.addAllThese([["required",{errorMsg:function(){return Form.Validator.getMsg("required")},test:function(a){return!Form.Validator.getValidator("IsEmpty").test(a)}}],["length",{errorMsg:function(a,b){return"null"!=typeOf(b.length)?Form.Validator.getMsg("length").substitute({length:b.length,elLength:a.get("value").length}):""},test:function(a,b){return"null"!=typeOf(b.length)?a.get("value").length==b.length||0==a.get("value").length:!0}}],["minLength",{errorMsg:function(a,b){return"null"!=typeOf(b.minLength)?Form.Validator.getMsg("minLength").substitute({minLength:b.minLength,length:a.get("value").length}):""
},test:function(a,b){return"null"!=typeOf(b.minLength)?a.get("value").length>=(b.minLength||0):!0}}],["maxLength",{errorMsg:function(a,b){return"null"!=typeOf(b.maxLength)?Form.Validator.getMsg("maxLength").substitute({maxLength:b.maxLength,length:a.get("value").length}):""},test:function(a,b){return a.get("value").length<=(b.maxLength||1e4)}}],["validate-integer",{errorMsg:Form.Validator.getMsg.pass("integer"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||/^(-?[1-9]\d*|0)$/.test(a.get("value"))}}],["validate-numeric",{errorMsg:Form.Validator.getMsg.pass("numeric"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||/^-?(?:0$0(?=\d*\.)|[1-9]|0)\d*(\.\d+)?$/.test(a.get("value"))}}],["validate-digits",{errorMsg:Form.Validator.getMsg.pass("digits"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||/^[\d() .:\-\+#]+$/.test(a.get("value"))}}],["validate-alpha",{errorMsg:Form.Validator.getMsg.pass("alpha"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||/^[a-zA-Z]+$/.test(a.get("value"))}}],["validate-alphanum",{errorMsg:Form.Validator.getMsg.pass("alphanum"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||!/\W/.test(a.get("value"))}}],["validate-date",{errorMsg:function(a,b){if(Date.parse){var c=b.dateFormat||"%x";return Form.Validator.getMsg("dateSuchAs").substitute({date:(new Date).format(c)})}return Form.Validator.getMsg("dateInFormatMDY")},test:function(a,b){if(Form.Validator.getValidator("IsEmpty").test(a))return!0;var c=Locale.get("Date"),d=new RegExp([c.days,c.days_abbr,c.months,c.months_abbr,c.AM,c.PM].flatten().join("|"),"i"),e=a.get("value"),f=e.match(/[a-z]+/gi);if(f&&!f.every(d.exec,d))return!1;var g=Date.parse(e);if(!g)return!1;var h=b.dateFormat||"%x",i=g.format(h);return"invalid date"!=i&&a.set("value",i),g.isValid()}}],["validate-email",{errorMsg:Form.Validator.getMsg.pass("email"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||/^(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]\.?){0,63}[a-z0-9!#$%&'*+\/=?^_`{|}~-]@(?:(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)*[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\])$/i.test(a.get("value"))}}],["validate-url",{errorMsg:Form.Validator.getMsg.pass("url"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||/^(https?|ftp|rmtp|mms):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i.test(a.get("value"))}}],["validate-currency-dollar",{errorMsg:Form.Validator.getMsg.pass("currencyDollar"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||/^\$?\-?([1-9]{1}[0-9]{0,2}(\,[0-9]{3})*(\.[0-9]{0,2})?|[1-9]{1}\d*(\.[0-9]{0,2})?|0(\.[0-9]{0,2})?|(\.[0-9]{1,2})?)$/.test(a.get("value"))}}],["validate-one-required",{errorMsg:Form.Validator.getMsg.pass("oneRequired"),test:function(a,b){var c=document.id(b["validate-one-required"])||a.getParent(b["validate-one-required"]);return c.getElements("input").some(function(a){return a.get(["checkbox","radio"].contains(a.get("type"))?"checked":"value")})}}]]),Element.Properties.validator={set:function(a){this.get("validator").setOptions(a)},get:function(){var a=this.retrieve("validator");return a||(a=new Form.Validator(this),this.store("validator",a)),a}},Element.implement({validate:function(a){return a&&this.set("validator",a),this.get("validator").validate()}}),Form.Validator.addAllThese([["validate-enforce-oncheck",{test:function(a,b){var c=a.getParent("form").retrieve("validator");return c?((b.toEnforce||document.id(b.enforceChildrenOf).getElements("input, select, textarea")).map(function(b){a.checked?c.enforceField(b):(c.ignoreField(b),c.resetField(b))}),!0):!0}}],["validate-ignore-oncheck",{test:function(a,b){var c=a.getParent("form").retrieve("validator");return c?((b.toIgnore||document.id(b.ignoreChildrenOf).getElements("input, select, textarea")).each(function(b){a.checked?(c.ignoreField(b),c.resetField(b)):c.enforceField(b)}),!0):!0}}],["validate-nospace",{errorMsg:function(){return Form.Validator.getMsg("noSpace")},test:function(a){return!a.get("value").test(/\s/)}}],["validate-toggle-oncheck",{test:function(a,b){var c=a.getParent("form").retrieve("validator");if(!c)return!0;var d=b.toToggle||document.id(b.toToggleChildrenOf).getElements("input, select, textarea");return d.each(a.checked?function(a){c.enforceField(a)}:function(a){c.ignoreField(a),c.resetField(a)}),!0}}],["validate-reqchk-bynode",{errorMsg:function(){return Form.Validator.getMsg("reqChkByNode")},test:function(a,b){return document.id(b.nodeId).getElements(b.selector||"input[type=checkbox], input[type=radio]").some(function(a){return a.checked})}}],["validate-required-check",{errorMsg:function(a,b){return b.useTitle?a.get("title"):Form.Validator.getMsg("requiredChk")},test:function(a){return!!a.checked}}],["validate-reqchk-byname",{errorMsg:function(a,b){return Form.Validator.getMsg("reqChkByName").substitute({label:b.label||a.get("type")})},test:function(a,b){var c=b.groupName||a.get("name"),d=$$(document.getElementsByName(c)).some(function(a){return a.checked}),e=a.getParent("form").retrieve("validator");return d&&e&&e.resetField(a),d}}],["validate-match",{errorMsg:function(a,b){return Form.Validator.getMsg("match").substitute({matchName:b.matchName||document.id(b.matchInput).get("name")})},test:function(a,b){var c=a.get("value"),d=document.id(b.matchInput)&&document.id(b.matchInput).get("value");return c&&d?c==d:!0}}],["validate-after-date",{errorMsg:function(a,b){return Form.Validator.getMsg("afterDate").substitute({label:b.afterLabel||Form.Validator.getMsg(b.afterElement?"startDate":"currentDate")})},test:function(a,b){var c=document.id(b.afterElement)?Date.parse(document.id(b.afterElement).get("value")):new Date,d=Date.parse(a.get("value"));return d&&c?d>=c:!0}}],["validate-before-date",{errorMsg:function(a,b){return Form.Validator.getMsg("beforeDate").substitute({label:b.beforeLabel||Form.Validator.getMsg(b.beforeElement?"endDate":"currentDate")})},test:function(a,b){var c=Date.parse(a.get("value")),d=document.id(b.beforeElement)?Date.parse(document.id(b.beforeElement).get("value")):new Date;return d&&c?d>=c:!0}}],["validate-custom-required",{errorMsg:function(){return Form.Validator.getMsg("required")},test:function(a,b){return a.get("value")!=b.emptyValue}}],["validate-same-month",{errorMsg:function(a,b){var c=document.id(b.sameMonthAs)&&document.id(b.sameMonthAs).get("value"),d=a.get("value");return""!=d?Form.Validator.getMsg(c?"sameMonth":"startMonth"):void 0},test:function(a,b){var c=Date.parse(a.get("value")),d=Date.parse(document.id(b.sameMonthAs)&&document.id(b.sameMonthAs).get("value"));return c&&d?c.format("%B")==d.format("%B"):!0}}],["validate-cc-num",{errorMsg:function(a){var b=a.get("value").replace(/[^0-9]/g,"");return Form.Validator.getMsg("creditcard").substitute({length:b.length})},test:function(a){if(Form.Validator.getValidator("IsEmpty").test(a))return!0;var b=a.get("value");b=b.replace(/[^0-9]/g,"");var c=!1;if(b.test(/^4[0-9]{12}([0-9]{3})?$/)?c="Visa":b.test(/^5[1-5]([0-9]{14})$/)?c="Master Card":b.test(/^3[47][0-9]{13}$/)?c="American Express":b.test(/^6(?:011|5[0-9]{2})[0-9]{12}$/)?c="Discover":b.test(/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/)&&(c="Diners Club"),c){for(var d=0,e=0,f=b.length-1;f>=0;--f)e=b.charAt(f).toInt(),0!=e&&((b.length-f)%2==0&&(e+=e),e>9&&(e=e.toString().charAt(0).toInt()+e.toString().charAt(1).toInt()),d+=e);if(d%10==0)return!0}for(var g="";""!=b;)g+=" "+b.substr(0,4),b=b.substr(4);return a.getParent("form").retrieve("validator").ignoreField(a),a.set("value",g.clean()),a.getParent("form").retrieve("validator").enforceField(a),!1}}]]),Form.Validator.Inline=new Class({Extends:Form.Validator,options:{showError:function(a){a.reveal?a.reveal():a.setStyle("display","block")},hideError:function(a){a.dissolve?a.dissolve():a.setStyle("display","none")},scrollToErrorsOnSubmit:!0,scrollToErrorsOnBlur:!1,scrollToErrorsOnChange:!1,scrollFxOptions:{transition:"quad:out",offset:{y:-20}}},initialize:function(a,b){this.parent(a,b),this.addEvent("onElementValidate",function(a,b,c,d){var e=this.getValidator(c);if(!a&&e.getError(b)){d&&b.addClass("warning");var f=this.makeAdvice(c,b,e.getError(b),d);this.insertAdvice(f,b),this.showAdvice(c,b)}else this.hideAdvice(c,b)})},makeAdvice:function(a,b,c,d){var e=d?this.warningPrefix:this.errorPrefix;e+=this.options.useTitles?b.title||c:c;var f=d?"warning-advice":"validation-advice",g=this.getAdvice(a,b);return g=g?g.set("html",e):new Element("div",{html:e,styles:{display:"none"},id:"advice-"+a.split(":")[0]+"-"+this.getFieldId(b)}).addClass(f),b.store("$moo:advice-"+a,g),g},getFieldId:function(a){return a.id?a.id:a.id="input_"+a.name},showAdvice:function(a,b){var c=this.getAdvice(a,b);!c||b.retrieve("$moo:"+this.getPropName(a))||"none"!=c.getStyle("display")&&"hidden"!=c.getStyle("visibility")&&0!=c.getStyle("opacity")||(b.store("$moo:"+this.getPropName(a),!0),this.options.showError(c),this.fireEvent("showAdvice",[b,c,a]))},hideAdvice:function(a,b){var c=this.getAdvice(a,b);c&&b.retrieve("$moo:"+this.getPropName(a))&&(b.store("$moo:"+this.getPropName(a),!1),this.options.hideError(c),this.fireEvent("hideAdvice",[b,c,a]))},getPropName:function(a){return"advice"+a},resetField:function(a){return(a=document.id(a))?(this.parent(a),a.get("validators").each(function(b){this.hideAdvice(b,a)},this),this):this},getAllAdviceMessages:function(a,b){var c=[];return a.hasClass("ignoreValidation")&&!b?c:(a.get("validators").some(function(b){var d=b.test("^warn-")||a.hasClass("warnOnly");d&&(b=b.replace(/^warn-/,""));var e=this.getValidator(b);e&&c.push({message:e.getError(a),warnOnly:d,passed:e.test(),validator:e})},this),c)},getAdvice:function(a,b){return b.retrieve("$moo:advice-"+a)},insertAdvice:function(a,b){var c=b.get("validatorProps");c.msgPos&&document.id(c.msgPos)?document.id(c.msgPos).grab(a):b.type&&"radio"==b.type.toLowerCase()?b.getParent().adopt(a):a.inject(document.id(b),"after")},validateField:function(a,b,c){var d=this.parent(a,b);if((this.options.scrollToErrorsOnSubmit&&null==c||c)&&!d){for(var e=document.id(this).getElement(".validation-failed"),f=document.id(this).getParent();f!=document.body&&f.getScrollSize().y==f.getSize().y;)f=f.getParent();var g=f.retrieve("$moo:fvScroller");!g&&window.Fx&&Fx.Scroll&&(g=new Fx.Scroll(f,this.options.scrollFxOptions),f.store("$moo:fvScroller",g)),e&&(g?g.toElement(e):f.scrollTo(f.getScroll().x,e.getPosition(f).y-20))}return d},watchFields:function(a){a.each(function(a){this.options.evaluateFieldsOnBlur&&a.addEvent("blur",this.validationMonitor.pass([a,!1,this.options.scrollToErrorsOnBlur],this)),this.options.evaluateFieldsOnChange&&a.addEvent("change",this.validationMonitor.pass([a,!0,this.options.scrollToErrorsOnChange],this))},this)}});var OverText=new Class({Implements:[Options,Events,Class.Occlude],Binds:["reposition","assert","focus","hide"],options:{element:"label",labelClass:"overTxtLabel",positionOptions:{position:"upperLeft",edge:"upperLeft",offset:{x:4,y:2}},poll:!1,pollInterval:250,wrap:!1},property:"OverText",initialize:function(a,b){return a=this.element=document.id(a),this.occlude()?this.occluded:(this.setOptions(b),this.attach(a),OverText.instances.push(this),void(this.options.poll&&this.poll()))},toElement:function(){return this.element},attach:function(){var a=this.element,b=this.options,c=b.textOverride||a.get("alt")||a.get("title");if(!c)return this;var d=this.text=new Element(b.element,{"class":b.labelClass,styles:{lineHeight:"normal",position:"absolute",cursor:"text"},html:c,events:{click:this.hide.pass("label"==b.element,this)}}).inject(a,"after");return"label"==b.element&&(a.get("id")||a.set("id","input_"+String.uniqueID()),d.set("for",a.get("id"))),b.wrap&&(this.textHolder=new Element("div.overTxtWrapper",{styles:{lineHeight:"normal",position:"relative"}}).grab(d).inject(a,"before")),this.enable()},destroy:function(){return this.element.eliminate(this.property),this.disable(),this.text&&this.text.destroy(),this.textHolder&&this.textHolder.destroy(),this},disable:function(){return this.element.removeEvents({focus:this.focus,blur:this.assert,change:this.assert}),window.removeEvent("resize",this.reposition),this.hide(!0,!0),this},enable:function(){return this.element.addEvents({focus:this.focus,blur:this.assert,change:this.assert}),window.addEvent("resize",this.reposition),this.reposition(),this},wrap:function(){"label"==this.options.element&&(this.element.get("id")||this.element.set("id","input_"+String.uniqueID()),this.text.set("for",this.element.get("id")))},startPolling:function(){return this.pollingPaused=!1,this.poll()},poll:function(a){return this.poller&&!a?this:(a?clearInterval(this.poller):this.poller=function(){this.pollingPaused||this.assert(!0)}.periodical(this.options.pollInterval,this),this)},stopPolling:function(){return this.pollingPaused=!0,this.poll(!0)},focus:function(){return!this.text||this.text.isDisplayed()&&!this.element.get("disabled")?this.hide():this},hide:function(a,b){if(this.text&&this.text.isDisplayed()&&(!this.element.get("disabled")||b)&&(this.text.hide(),this.fireEvent("textHide",[this.text,this.element]),this.pollingPaused=!0,!a))try{this.element.fireEvent("focus"),this.element.focus()}catch(c){}return this},show:function(){return document.id(this.text)&&!this.text.isDisplayed()&&(this.text.show(),this.reposition(),this.fireEvent("textShow",[this.text,this.element]),this.pollingPaused=!1),this},test:function(){return!this.element.get("value")},assert:function(a){return this[this.test()?"show":"hide"](a)},reposition:function(){return this.assert(!0),this.element.isVisible()?(this.text&&this.test()&&this.text.position(Object.merge(this.options.positionOptions,{relativeTo:this.element})),this):this.stopPolling().hide()}});OverText.instances=[],Object.append(OverText,{each:function(a){return OverText.instances.each(function(b,c){b.element&&b.text&&a.call(OverText,b,c)})},update:function(){return OverText.each(function(a){return a.reposition()})},hideAll:function(){return OverText.each(function(a){return a.hide(!0,!0)})},showAll:function(){return OverText.each(function(a){return a.show()})}}),Fx.Elements=new Class({Extends:Fx.CSS,initialize:function(a,b){this.elements=this.subject=$$(a),this.parent(b)},compute:function(a,b,c){var d={};for(var e in a){var f=a[e],g=b[e],h=d[e]={};for(var i in f)h[i]=this.parent(f[i],g[i],c)}return d},set:function(a){for(var b in a)if(this.elements[b]){var c=a[b];for(var d in c)this.render(this.elements[b],d,c[d],this.options.unit)}return this},start:function(a){if(!this.check(a))return this;var b={},c={};for(var d in a)if(this.elements[d]){var e=a[d],f=b[d]={},g=c[d]={};for(var h in e){var i=this.prepare(this.elements[d],h,e[h]);f[h]=i.from,g[h]=i.to}}return this.parent(b,c)}}),Fx.Accordion=new Class({Extends:Fx.Elements,options:{fixedHeight:!1,fixedWidth:!1,display:0,show:!1,height:!0,width:!1,opacity:!0,alwaysHide:!1,trigger:"click",initialDisplayFx:!0,resetHeight:!0},initialize:function(){var a=function(a){return null!=a},b=Array.link(arguments,{container:Type.isElement,options:Type.isObject,togglers:a,elements:a});this.parent(b.elements,b.options);var c=this.options,d=this.togglers=$$(b.togglers);this.previous=-1,this.internalChain=new Chain,c.alwaysHide&&(this.options.link="chain"),(c.show||0===this.options.show)&&(c.display=!1,this.previous=c.show),c.start&&(c.display=!1,c.show=!1);var e=this.effects={};c.opacity&&(e.opacity="fullOpacity"),c.width&&(e.width=c.fixedWidth?"fullWidth":"offsetWidth"),c.height&&(e.height=c.fixedHeight?"fullHeight":"scrollHeight");for(var f=0,g=d.length;g>f;f++)this.addSection(d[f],this.elements[f]);this.elements.each(function(a,b){if(c.show===b)this.fireEvent("active",[d[b],a]);else for(var f in e)a.setStyle(f,0)},this),(c.display||0===c.display||c.initialDisplayFx===!1)&&this.display(c.display,c.initialDisplayFx),c.fixedHeight!==!1&&(c.resetHeight=!1),this.addEvent("complete",this.internalChain.callChain.bind(this.internalChain))},addSection:function(a,b){a=document.id(a),b=document.id(b),this.togglers.include(a),this.elements.include(b);var c=this.togglers,d=this.options,e=c.contains(a),f=c.indexOf(a),g=this.display.pass(f,this);if(a.store("accordion:display",g).addEvent(d.trigger,g),d.height&&b.setStyles({"padding-top":0,"border-top":"none","padding-bottom":0,"border-bottom":"none"}),d.width&&b.setStyles({"padding-left":0,"border-left":"none","padding-right":0,"border-right":"none"}),b.fullOpacity=1,d.fixedWidth&&(b.fullWidth=d.fixedWidth),d.fixedHeight&&(b.fullHeight=d.fixedHeight),b.setStyle("overflow","hidden"),!e)for(var h in this.effects)b.setStyle(h,0);return this},removeSection:function(a,b){var c=this.togglers,d=c.indexOf(a),e=this.elements[d],f=function(){c.erase(a),this.elements.erase(e),this.detach(a)}.bind(this);return this.now==d||null!=b?this.display(null!=b?b:d-1>=0?d-1:0).chain(f):f(),this},detach:function(a){var b=function(a){a.removeEvent(this.options.trigger,a.retrieve("accordion:display"))}.bind(this);return a?b(a):this.togglers.each(b),this},display:function(a,b){if(!this.check(a,b))return this;var c={},d=this.elements,e=this.options,f=this.effects;if(null==b&&(b=!0),"element"==typeOf(a)&&(a=d.indexOf(a)),a==this.current&&!e.alwaysHide)return this;if(e.resetHeight){var g=d[this.current];if(g&&!this.selfHidden)for(var h in f)g.setStyle(h,g[f[h]])}return this.timer&&"chain"==e.link||a===this.current&&!e.alwaysHide?this:(null!=this.current&&(this.previous=this.current),this.current=a,this.selfHidden=!1,d.each(function(d,g){c[g]={};var h;g!=a?h=!0:e.alwaysHide&&(d.offsetHeight>0&&e.height||d.offsetWidth>0&&e.width)&&(h=!0,this.selfHidden=!0),this.fireEvent(h?"background":"active",[this.togglers[g],d]);for(var i in f)c[g][i]=h?0:d[f[i]];b||h||!e.resetHeight||(c[g].height="auto")},this),this.internalChain.clearChain(),this.internalChain.chain(function(){if(e.resetHeight&&!this.selfHidden){var b=d[a];b&&b.setStyle("height","auto")}}.bind(this)),b?this.start(c):this.set(c).internalChain.callChain())}}),Fx.Move=new Class({Extends:Fx.Morph,options:{relativeTo:document.body,position:"center",edge:!1,offset:{x:0,y:0}},start:function(a){var b=this.element,c=b.getStyles("top","left");return("auto"==c.top||"auto"==c.left)&&b.setPosition(b.getPosition(b.getOffsetParent())),this.parent(b.position(Object.merge({},this.options,a,{returnPos:!0})))}}),Element.Properties.move={set:function(a){return this.get("move").cancel().setOptions(a),this},get:function(){var a=this.retrieve("move");return a||(a=new Fx.Move(this,{link:"cancel"}),this.store("move",a)),a}},Element.implement({move:function(a){return this.get("move").start(a),this}}),function(){function a(a){return/^(?:body|html)$/i.test(a.tagName)}Fx.Scroll=new Class({Extends:Fx,options:{offset:{x:0,y:0},wheelStops:!0},initialize:function(a,b){if(this.element=this.subject=document.id(a),this.parent(b),"element"!=typeOf(this.element)&&(this.element=document.id(this.element.getDocument().body)),this.options.wheelStops){var c=this.element,d=this.cancel.pass(!1,this);this.addEvent("start",function(){c.addEvent("mousewheel",d)},!0),this.addEvent("complete",function(){c.removeEvent("mousewheel",d)},!0)}},set:function(){var a=Array.flatten(arguments);return this.element.scrollTo(a[0],a[1]),this},compute:function(a,b,c){return[0,1].map(function(d){return Fx.compute(a[d],b[d],c)})},start:function(a,b){if(!this.check(a,b))return this;var c=this.element.getScroll();return this.parent([c.x,c.y],[a,b])},calculateScroll:function(a,b){var c=this.element,d=c.getScrollSize(),e=c.getScroll(),f=c.getSize(),g=this.options.offset,h={x:a,y:b};for(var i in h)h[i]||0===h[i]||(h[i]=e[i]),"number"!=typeOf(h[i])&&(h[i]=d[i]-f[i]),h[i]+=g[i];return[h.x,h.y]},toTop:function(){return this.start.apply(this,this.calculateScroll(!1,0))},toLeft:function(){return this.start.apply(this,this.calculateScroll(0,!1))},toRight:function(){return this.start.apply(this,this.calculateScroll("right",!1))},toBottom:function(){return this.start.apply(this,this.calculateScroll(!1,"bottom"))},toElement:function(b,c){c=c?Array.from(c):["x","y"];var d=a(this.element)?{x:0,y:0}:this.element.getScroll(),e=Object.map(document.id(b).getPosition(this.element),function(a,b){return c.contains(b)?a+d[b]:!1});return this.start.apply(this,this.calculateScroll(e.x,e.y))},toElementEdge:function(a,b,c){b=b?Array.from(b):["x","y"],a=document.id(a);var d={},e=a.getPosition(this.element),f=a.getSize(),g=this.element.getScroll(),h=this.element.getSize(),i={x:e.x+f.x,y:e.y+f.y};return["x","y"].each(function(a){b.contains(a)&&(i[a]>g[a]+h[a]&&(d[a]=i[a]-h[a]),e[a]<g[a]&&(d[a]=e[a])),null==d[a]&&(d[a]=g[a]),c&&c[a]&&(d[a]=d[a]+c[a])},this),(d.x!=g.x||d.y!=g.y)&&this.start(d.x,d.y),this},toElementCenter:function(a,b,c){b=b?Array.from(b):["x","y"],a=document.id(a);var d={},e=a.getPosition(this.element),f=a.getSize(),g=this.element.getScroll(),h=this.element.getSize();return["x","y"].each(function(a){b.contains(a)&&(d[a]=e[a]-(h[a]-f[a])/2),null==d[a]&&(d[a]=g[a]),c&&c[a]&&(d[a]=d[a]+c[a])},this),(d.x!=g.x||d.y!=g.y)&&this.start(d.x,d.y),this}})}(),Fx.Slide=new Class({Extends:Fx,options:{mode:"vertical",wrapper:!1,hideOverflow:!0,resetHeight:!1},initialize:function(a,b){a=this.element=this.subject=document.id(a),this.parent(b),b=this.options;var c=a.retrieve("wrapper"),d=a.getStyles("margin","position","overflow");b.hideOverflow&&(d=Object.append(d,{overflow:"hidden"})),b.wrapper&&(c=document.id(b.wrapper).setStyles(d)),c||(c=new Element("div",{styles:d}).wraps(a)),a.store("wrapper",c).setStyle("margin",0),"visible"==a.getStyle("overflow")&&a.setStyle("overflow","hidden"),this.now=[],this.open=!0,this.wrapper=c,this.addEvent("complete",function(){this.open=0!=c["offset"+this.layout.capitalize()],this.open&&this.options.resetHeight&&c.setStyle("height","")},!0)},vertical:function(){this.margin="margin-top",this.layout="height",this.offset=this.element.offsetHeight},horizontal:function(){this.margin="margin-left",this.layout="width",this.offset=this.element.offsetWidth},set:function(a){return this.element.setStyle(this.margin,a[0]),this.wrapper.setStyle(this.layout,a[1]),this},compute:function(a,b,c){return[0,1].map(function(d){return Fx.compute(a[d],b[d],c)})},start:function(a,b){if(!this.check(a,b))return this;this[b||this.options.mode]();var c,d=this.element.getStyle(this.margin).toInt(),e=this.wrapper.getStyle(this.layout).toInt(),f=[[d,e],[0,this.offset]],g=[[d,e],[-this.offset,0]];switch(a){case"in":c=f;break;case"out":c=g;break;case"toggle":c=0==e?f:g}return this.parent(c[0],c[1])},slideIn:function(a){return this.start("in",a)},slideOut:function(a){return this.start("out",a)},hide:function(a){return this[a||this.options.mode](),this.open=!1,this.set([-this.offset,0])},show:function(a){return this[a||this.options.mode](),this.open=!0,this.set([0,this.offset])},toggle:function(a){return this.start("toggle",a)}}),Element.Properties.slide={set:function(a){return this.get("slide").cancel().setOptions(a),this},get:function(){var a=this.retrieve("slide");return a||(a=new Fx.Slide(this,{link:"cancel"}),this.store("slide",a)),a}},Element.implement({slide:function(a,b){a=a||"toggle";var c,d=this.get("slide");switch(a){case"hide":d.hide(b);break;case"show":d.show(b);break;case"toggle":var e=this.retrieve("slide:flag",d.open);d[e?"slideOut":"slideIn"](b),this.store("slide:flag",!e),c=!0;break;default:d.start(a,b)}return c||this.eliminate("slide:flag"),this}}),Fx.SmoothScroll=new Class({Extends:Fx.Scroll,options:{axes:["x","y"]},initialize:function(a,b){b=b||document,this.doc=b.getDocument(),this.parent(this.doc,a);var c=b.getWindow(),d=c.location.href.match(/^[^#]*/)[0]+"#",e=$$(this.options.links||this.doc.links);e.each(function(a){if(0==a.href.indexOf(d)){var b=a.href.substr(d.length);b&&this.useLink(a,b)}},this),this.addEvent("complete",function(){c.location.hash=this.anchor,this.element.scrollTo(this.to[0],this.to[1])},!0)},useLink:function(a,b){return a.addEvent("click",function(c){var d=document.id(b)||this.doc.getElement("a[name="+b+"]");d&&(c.preventDefault(),this.toElement(d,this.options.axes).chain(function(){this.fireEvent("scrolledTo",[a,d])}.bind(this)),this.anchor=b)}.bind(this)),this}}),Fx.Sort=new Class({Extends:Fx.Elements,options:{mode:"vertical"},initialize:function(a,b){this.parent(a,b),this.elements.each(function(a){"static"==a.getStyle("position")&&a.setStyle("position","relative")}),this.setDefaultOrder()},setDefaultOrder:function(){this.currentOrder=this.elements.map(function(a,b){return b})},sort:function(){if(!this.check(arguments))return this;var a=Array.flatten(arguments),b=0,c=0,d={},e={},f="vertical"==this.options.mode,g=this.elements.map(function(a,d){var g,h=a.getComputedSize({styles:["border","padding","margin"]});f?(g={top:b,margin:h["margin-top"],height:h.totalHeight},b+=g.height-h["margin-top"]):(g={left:c,margin:h["margin-left"],width:h.totalWidth},c+=g.width);var i=f?"top":"left";e[d]={};var j=a.getStyle(i).toInt();return e[d][i]=j||0,g},this);this.set(e),a=a.map(function(a){return a.toInt()}),a.length!=this.elements.length&&(this.currentOrder.each(function(b){a.contains(b)||a.push(b)}),a.length>this.elements.length&&a.splice(this.elements.length-1,a.length-this.elements.length));var h=0;b=c=0,a.each(function(a){var e={};f?(e.top=b-g[a].top-h,b+=g[a].height):(e.left=c-g[a].left,c+=g[a].width),h+=g[a].margin,d[a]=e},this);var i={};return Array.clone(a).sort().each(function(a){i[a]=d[a]}),this.start(i),this.currentOrder=a,this},rearrangeDOM:function(a){a=a||this.currentOrder;var b=this.elements[0].getParent(),c=[];return this.elements.setStyle("opacity",0),a.each(function(a){c.push(this.elements[a].inject(b).setStyles({top:0,left:0}))},this),this.elements.setStyle("opacity",1),this.elements=$$(c),this.setDefaultOrder(),this},getDefaultOrder:function(){return this.elements.map(function(a,b){return b})},getCurrentOrder:function(){return this.currentOrder},forward:function(){return this.sort(this.getDefaultOrder())},backward:function(){return this.sort(this.getDefaultOrder().reverse())},reverse:function(){return this.sort(this.currentOrder.reverse())},sortByElements:function(a){return this.sort(a.map(function(a){return this.elements.indexOf(a)},this))},swap:function(a,b){"element"==typeOf(a)&&(a=this.elements.indexOf(a)),"element"==typeOf(b)&&(b=this.elements.indexOf(b));var c=Array.clone(this.currentOrder);return c[this.currentOrder.indexOf(a)]=b,c[this.currentOrder.indexOf(b)]=a,this.sort(c)}}),function(){var a=this.Keyboard=new Class({Extends:Events,Implements:[Options],options:{defaultEventType:"keydown",active:!1,manager:null,events:{},nonParsedEvents:["activate","deactivate","onactivate","ondeactivate","changed","onchanged"]},initialize:function(a){a&&a.manager&&(this._manager=a.manager,delete a.manager),this.setOptions(a),this._setup()},addEvent:function(b,c,d){return this.parent(a.parse(b,this.options.defaultEventType,this.options.nonParsedEvents),c,d)},removeEvent:function(b,c){return this.parent(a.parse(b,this.options.defaultEventType,this.options.nonParsedEvents),c)},toggleActive:function(){return this[this.isActive()?"deactivate":"activate"]()},activate:function(b){if(b){if(b.isActive())return this;this._activeKB&&b!=this._activeKB&&(this.previous=this._activeKB,this.previous.fireEvent("deactivate")),this._activeKB=b.fireEvent("activate"),a.manager.fireEvent("changed")}else this._manager&&this._manager.activate(this);return this},isActive:function(){return this._manager?this._manager._activeKB==this:a.manager==this},deactivate:function(b){return b?b===this._activeKB&&(this._activeKB=null,b.fireEvent("deactivate"),a.manager.fireEvent("changed")):this._manager&&this._manager.deactivate(this),this},relinquish:function(){return this.isActive()&&this._manager&&this._manager.previous?this._manager.activate(this._manager.previous):this.deactivate(),this},manage:function(a){return a._manager&&a._manager.drop(a),this._instances.push(a),a._manager=this,this._activeKB||this.activate(a),this},drop:function(a){return a.relinquish(),this._instances.erase(a),this._activeKB==a&&(this.previous&&this._instances.contains(this.previous)?this.activate(this.previous):this._activeKB=this._instances[0]),this},trace:function(){a.trace(this)},each:function(b){a.each(this,b)},_instances:[],_disable:function(a){this._activeKB==a&&(this._activeKB=null)},_setup:function(){this.addEvents(this.options.events),a.manager&&!this._manager&&a.manager.manage(this),this.options.active?this.activate():this.relinquish()},_handle:function(a,b){if(!a.preventKeyboardPropagation){var c=!!this._manager;c&&this._activeKB&&(this._activeKB._handle(a,b),a.preventKeyboardPropagation)||(this.fireEvent(b,a),!c&&this._activeKB&&this._activeKB._handle(a,b))}}}),b={},c=["shift","control","alt","meta"],d=/^(?:shift|control|ctrl|alt|meta)$/;a.parse=function(a,e,f){if(f&&f.contains(a.toLowerCase()))return a;if(a=a.toLowerCase().replace(/^(keyup|keydown):/,function(a,b){return e=b,""}),!b[a])if("+"!=a){var g,h={};a.split("+").each(function(a){d.test(a)?h[a]=!0:g=a}),h.control=h.control||h.ctrl;var i=[];c.each(function(a){h[a]&&i.push(a)}),g&&i.push(g),b[a]=i.join("+")}else b[a]=a;return e+":keys("+b[a]+")"},a.each=function(b,c){for(var d=b||a.manager;d;)c(d),d=d._activeKB},a.stop=function(a){a.preventKeyboardPropagation=!0},a.manager=new a({active:!0}),a.trace=function(b){b=b||a.manager;var c=window.console&&console.log;c&&console.log("the following items have focus: "),a.each(b,function(a){c&&console.log(document.id(a.widget)||a.wiget||a)})};var e=function(b){var e=[];c.each(function(a){b[a]&&e.push(a)}),d.test(b.key)||e.push(b.key),a.manager._handle(b,b.type+":keys("+e.join("+")+")")};document.addEvents({keyup:e,keydown:e})}(),Keyboard.prototype.options.nonParsedEvents.combine(["rebound","onrebound"]),Keyboard.implement({addShortcut:function(a,b){return this._shortcuts=this._shortcuts||[],this._shortcutIndex=this._shortcutIndex||{},b.getKeyboard=Function.from(this),b.name=a,this._shortcutIndex[a]=b,this._shortcuts.push(b),b.keys&&this.addEvent(b.keys,b.handler),this},addShortcuts:function(a){for(var b in a)this.addShortcut(b,a[b]);return this},removeShortcut:function(a){var b=this.getShortcut(a);return b&&b.keys&&(this.removeEvent(b.keys,b.handler),delete this._shortcutIndex[a],this._shortcuts.erase(b)),this},removeShortcuts:function(a){return a.each(this.removeShortcut,this),this},getShortcuts:function(){return this._shortcuts||[]},getShortcut:function(a){return(this._shortcutIndex||{})[a]}}),Keyboard.rebind=function(a,b){Array.from(b).each(function(b){b.getKeyboard().removeEvent(b.keys,b.handler),b.getKeyboard().addEvent(a,b.handler),b.keys=a,b.getKeyboard().fireEvent("rebound")})},Keyboard.getActiveShortcuts=function(a){var b=[],c=[];return Keyboard.each(a,[].push.bind(b)),b.each(function(a){c.extend(a.getShortcuts())}),c},Keyboard.getShortcut=function(a,b,c){c=c||{};var d=c.many?[]:null,e=c.many?function(b){var c=b.getShortcut(a);c&&d.push(c)}:function(b){d||(d=b.getShortcut(a))};return Keyboard.each(b,e),d},Keyboard.getShortcuts=function(a,b){return Keyboard.getShortcut(a,b,{many:!0})};var HtmlTable=new Class({Implements:[Options,Events,Class.Occlude],options:{properties:{cellpadding:0,cellspacing:0,border:0},rows:[],headers:[],footers:[]},property:"HtmlTable",initialize:function(){var a=Array.link(arguments,{options:Type.isObject,table:Type.isElement,id:Type.isString});return this.setOptions(a.options),!a.table&&a.id&&(a.table=document.id(a.id)),this.element=a.table||new Element("table",this.options.properties),this.occlude()?this.occluded:void this.build()},build:function(){this.element.store("HtmlTable",this),this.body=document.id(this.element.tBodies[0])||new Element("tbody").inject(this.element),$$(this.body.rows),this.options.headers.length?this.setHeaders(this.options.headers):this.thead=document.id(this.element.tHead),this.thead&&(this.head=this.getHead()),this.options.footers.length&&this.setFooters(this.options.footers),this.tfoot=document.id(this.element.tFoot),this.tfoot&&(this.foot=document.id(this.tfoot.rows[0])),this.options.rows.each(function(a){this.push(a)
},this)},toElement:function(){return this.element},empty:function(){return this.body.empty(),this},set:function(a,b){var c="headers"==a?"tHead":"tFoot",d=c.toLowerCase();this[d]=(document.id(this.element[c])||new Element(d).inject(this.element,"top")).empty();var e=this.push(b,{},this[d],"headers"==a?"th":"td");return"headers"==a?this.head=this.getHead():this.foot=this.getHead(),e},getHead:function(){var a=this.thead.rows;return a.length>1?$$(a):a.length?document.id(a[0]):!1},setHeaders:function(a){return this.set("headers",a),this},setFooters:function(a){return this.set("footers",a),this},update:function(a,b,c){var d=a.getChildren(c||"td"),e=d.length-1;return b.each(function(b,f){var g=d[f]||new Element(c||"td").inject(a),h=(b&&Object.prototype.hasOwnProperty.call(b,"content")?b.content:"")||b,i=typeOf(h);b&&Object.prototype.hasOwnProperty.call(b,"properties")&&g.set(b.properties),/(element(s?)|array|collection)/.test(i)?g.empty().adopt(h):g.set("html",h),f>e?d.push(g):d[f]=g}),{tr:a,tds:d}},push:function(a,b,c,d,e){return"element"==typeOf(a)&&"tr"==a.get("tag")?(a.inject(c||this.body,e),{tr:a,tds:a.getChildren("td")}):this.update(new Element("tr",b).inject(c||this.body,e),a,d)},pushMany:function(a,b,c,d,e){return a.map(function(a){return this.push(a,b,c,d,e)},this)}});["adopt","inject","wraps","grab","replaces","dispose"].each(function(a){HtmlTable.implement(a,function(){return this.element[a].apply(this.element,arguments),this})}),HtmlTable=Class.refactor(HtmlTable,{options:{useKeyboard:!0,classRowSelected:"table-tr-selected",classRowHovered:"table-tr-hovered",classSelectable:"table-selectable",shiftForMultiSelect:!0,allowMultiSelect:!0,selectable:!1,selectHiddenRows:!1},initialize:function(){return this.previous.apply(this,arguments),this.occluded?this.occluded:(this.selectedRows=new Elements,this.bound||(this.bound={}),this.bound.mouseleave=this.mouseleave.bind(this),this.bound.clickRow=this.clickRow.bind(this),this.bound.activateKeyboard=function(){this.keyboard&&this.selectEnabled&&this.keyboard.activate()}.bind(this),void(this.options.selectable&&this.enableSelect()))},empty:function(){return this.body.rows.length&&this.selectNone(),this.previous()},enableSelect:function(){return this.selectEnabled=!0,this.attachSelects(),this.element.addClass(this.options.classSelectable),this},disableSelect:function(){return this.selectEnabled=!1,this.attachSelects(!1),this.element.removeClass(this.options.classSelectable),this},push:function(){var a=this.previous.apply(this,arguments);return this.updateSelects(),a},toggleRow:function(a){return this[(this.isSelected(a)?"de":"")+"selectRow"](a)},selectRow:function(a,b){return this.isSelected(a)||!b&&!this.body.getChildren().contains(a)?void 0:(this.options.allowMultiSelect||this.selectNone(),this.isSelected(a)||(this.selectedRows.push(a),a.addClass(this.options.classRowSelected),this.fireEvent("rowFocus",[a,this.selectedRows]),this.fireEvent("stateChanged")),this.focused=a,document.clearSelection(),this)},isSelected:function(a){return this.selectedRows.contains(a)},getSelected:function(){return this.selectedRows},serialize:function(){var a=this.previous.apply(this,arguments)||{};return this.options.selectable&&(a.selectedRows=this.selectedRows.map(function(a){return Array.indexOf(this.body.rows,a)}.bind(this))),a},restore:function(a){this.options.selectable&&a.selectedRows&&a.selectedRows.each(function(a){this.selectRow(this.body.rows[a])}.bind(this)),this.previous.apply(this,arguments)},deselectRow:function(a,b){return this.isSelected(a)&&(b||this.body.getChildren().contains(a))?(this.selectedRows=new Elements(Array.from(this.selectedRows).erase(a)),a.removeClass(this.options.classRowSelected),this.fireEvent("rowUnfocus",[a,this.selectedRows]),this.fireEvent("stateChanged"),this):void 0},selectAll:function(a){return a||this.options.allowMultiSelect?(this.selectRange(0,this.body.rows.length,a),this):void 0},selectNone:function(){return this.selectAll(!0)},selectRange:function(a,b,c){if(this.options.allowMultiSelect||c){var d=c?"deselectRow":"selectRow",e=Array.clone(this.body.rows);if("element"==typeOf(a)&&(a=e.indexOf(a)),"element"==typeOf(b)&&(b=e.indexOf(b)),b=b<e.length-1?b:e.length-1,a>b){var f=a;a=b,b=f}for(var g=a;b>=g;g++)(this.options.selectHiddenRows||e[g].isDisplayed())&&this[d](e[g],!0);return this}},deselectRange:function(a,b){this.selectRange(a,b,!0)},enterRow:function(a){this.hovered&&(this.hovered=this.leaveRow(this.hovered)),this.hovered=a.addClass(this.options.classRowHovered)},leaveRow:function(a){a.removeClass(this.options.classRowHovered)},updateSelects:function(){Array.each(this.body.rows,function(a){var b=a.retrieve("binders");(b||this.selectEnabled)&&(b||(b={mouseenter:this.enterRow.pass([a],this),mouseleave:this.leaveRow.pass([a],this)},a.store("binders",b)),this.selectEnabled?a.addEvents(b):a.removeEvents(b))},this)},shiftFocus:function(a,b){if(!this.focused)return this.selectRow(this.body.rows[0],b);var c=this.getRowByOffset(a,this.options.selectHiddenRows);return null===c||this.focused==this.body.rows[c]?this:void this.toggleRow(this.body.rows[c],b)},clickRow:function(a,b){var c=(a.shift||a.meta||a.control)&&this.options.shiftForMultiSelect;c||a.rightClick&&this.isSelected(b)&&this.options.allowMultiSelect||this.selectNone(),a.rightClick?this.selectRow(b):this.toggleRow(b),a.shift&&(this.selectRange(this.rangeStart||this.body.rows[0],b,this.rangeStart?!this.isSelected(b):!0),this.focused=b),this.rangeStart=b},getRowByOffset:function(a,b){if(!this.focused)return 0;var c=Array.indexOf(this.body.rows,this.focused);if(0==c&&0>a||c==this.body.rows.length-1&&a>0)return null;if(b)c+=a;else{var d=0;if(a>0)for(;a>d&&c<this.body.rows.length-1;)this.body.rows[++c].isDisplayed()&&d++;else for(;d>a&&c>0;)this.body.rows[--c].isDisplayed()&&d--}return c},attachSelects:function(a){a=null!=a?a:!0;var b=a?"addEvents":"removeEvents";if(this.element[b]({mouseleave:this.bound.mouseleave,click:this.bound.activateKeyboard}),this.body[b]({"click:relay(tr)":this.bound.clickRow,"contextmenu:relay(tr)":this.bound.clickRow}),this.options.useKeyboard||this.keyboard){if(this.keyboard||(this.keyboard=new Keyboard),!this.selectKeysDefined){this.selectKeysDefined=!0;var c,d,e=function(a){var b=function(e){clearTimeout(c),e.preventDefault();var f=this.body.rows[this.getRowByOffset(a,this.options.selectHiddenRows)];e.shift&&f&&this.isSelected(f)?(this.deselectRow(this.focused),this.focused=f):(!f||this.options.allowMultiSelect&&e.shift||this.selectNone(),this.shiftFocus(a,e)),c=d?b.delay(100,this,e):function(){d=!0,b(e)}.delay(400)}.bind(this);return b}.bind(this),f=function(){clearTimeout(c),d=!1};this.keyboard.addEvents({"keydown:shift+up":e(-1),"keydown:shift+down":e(1),"keyup:shift+up":f,"keyup:shift+down":f,"keyup:up":f,"keyup:down":f});var g="";this.options.allowMultiSelect&&this.options.shiftForMultiSelect&&this.options.useKeyboard&&(g=" (Shift multi-selects)."),this.keyboard.addShortcuts({"Select Previous Row":{keys:"up",shortcut:"up arrow",handler:e(-1),description:"Select the previous row in the table."+g},"Select Next Row":{keys:"down",shortcut:"down arrow",handler:e(1),description:"Select the next row in the table."+g}})}this.keyboard[a?"activate":"deactivate"]()}this.updateSelects()},mouseleave:function(){this.hovered&&this.leaveRow(this.hovered)}}),function(){var a=document.createElement("table");try{a.innerHTML="<tr><td></td></tr>",a=0===a.childNodes.length}catch(b){a=!0}HtmlTable=Class.refactor(HtmlTable,{options:{sortIndex:0,sortReverse:!1,parsers:[],defaultParser:"string",classSortable:"table-sortable",classHeadSort:"table-th-sort",classHeadSortRev:"table-th-sort-rev",classNoSort:"table-th-nosort",classGroupHead:"table-tr-group-head",classGroup:"table-tr-group",classCellSort:"table-td-sort",classSortSpan:"table-th-sort-span",sortable:!1,thSelector:"th"},initialize:function(){return this.previous.apply(this,arguments),this.occluded?this.occluded:(this.sorted={index:null,dir:1},this.bound||(this.bound={}),this.bound.headClick=this.headClick.bind(this),this.sortSpans=new Elements,void(this.options.sortable&&(this.enableSort(),null!=this.options.sortIndex&&this.sort(this.options.sortIndex,this.options.sortReverse))))},attachSorts:function(a){this.detachSorts(),a!==!1&&this.element.addEvent("click:relay("+this.options.thSelector+")",this.bound.headClick)},detachSorts:function(){this.element.removeEvents("click:relay("+this.options.thSelector+")")},setHeaders:function(){this.previous.apply(this,arguments),this.sortable&&this.setParsers()},setParsers:function(){this.parsers=this.detectParsers()},detectParsers:function(){return this.head&&this.head.getElements(this.options.thSelector).flatten().map(this.detectParser,this)},detectParser:function(a,b){if(a.hasClass(this.options.classNoSort)||a.retrieve("htmltable-parser"))return a.retrieve("htmltable-parser");var c=new Element("div");c.adopt(a.childNodes).inject(a);var d=new Element("span",{"class":this.options.classSortSpan}).inject(c,"top");this.sortSpans.push(d);var e,f=this.options.parsers[b],g=this.body.rows;switch(typeOf(f)){case"function":f={convert:f},e=!0;break;case"string":f=f,e=!0}return e||HtmlTable.ParserPriority.some(function(a){var c=HtmlTable.Parsers[a],d=c.match;if(!d)return!1;for(var e=0,h=g.length;h>e;e++){var i=document.id(g[e].cells[b]),j=i?i.get("html").clean():"";if(j&&d.test(j))return f=c,!0}}),f||(f=this.options.defaultParser),a.store("htmltable-parser",f),f},headClick:function(a,b){return this.head&&!b.hasClass(this.options.classNoSort)?this.sort(Array.indexOf(this.head.getElements(this.options.thSelector).flatten(),b)%this.body.rows[0].cells.length):void 0},serialize:function(){var a=this.previous.apply(this,arguments)||{};return this.options.sortable&&(a.sortIndex=this.sorted.index,a.sortReverse=this.sorted.reverse),a},restore:function(a){this.options.sortable&&a.sortIndex&&this.sort(a.sortIndex,a.sortReverse),this.previous.apply(this,arguments)},setSortedState:function(a,b){this.sorted.reverse=null!=b?b:this.sorted.index==a?!this.sorted.reverse:null==this.sorted.index,null!=a&&(this.sorted.index=a)},setHeadSort:function(a){var b=$$(this.head.length?this.head.map(function(a){return a.getElements(this.options.thSelector)[this.sorted.index]},this).clean():this.head.cells[this.sorted.index]);b.length&&(a?(b.addClass(this.options.classHeadSort),this.sorted.reverse?b.addClass(this.options.classHeadSortRev):b.removeClass(this.options.classHeadSortRev)):b.removeClass(this.options.classHeadSort).removeClass(this.options.classHeadSortRev))},setRowSort:function(a,b){for(var c,d,e=a.length,f=this.body;e;){var g=a[--e],h=g.position,i=f.rows[h];if(!i.disabled)for(b||(c=this.setGroupSort(c,i,g),this.setRowStyle(i,e)),f.appendChild(i),d=0;e>d;d++)a[d].position>h&&a[d].position--}},setRowStyle:function(a,b){this.previous(a,b),a.cells[this.sorted.index].addClass(this.options.classCellSort)},setGroupSort:function(a,b,c){return a==c.value?b.removeClass(this.options.classGroupHead).addClass(this.options.classGroup):b.removeClass(this.options.classGroup).addClass(this.options.classGroupHead),c.value},getParser:function(){var a=this.parsers[this.sorted.index];return"string"==typeOf(a)?HtmlTable.Parsers[a]:a},sort:function(b,c,d,e){if(this.head){d||(this.clearSort(),this.setSortedState(b,c),this.setHeadSort(!0));var f=this.getParser();if(f){var g;a||(g=this.body.getParent(),this.body.dispose());var h=this.parseData(f).sort(e?e:function(a,b){return a.value===b.value?0:a.value>b.value?1:-1});return this.sorted.reverse==(f==HtmlTable.Parsers["input-checked"])&&h.reverse(!0),this.setRowSort(h,d),g&&g.grab(this.body),this.fireEvent("stateChanged"),this.fireEvent("sort",[this.body,this.sorted.index])}}},parseData:function(a){return Array.map(this.body.rows,function(b,c){var d=a.convert.call(document.id(b.cells[this.sorted.index]));return{position:c,value:d}},this)},clearSort:function(){this.setHeadSort(!1),this.body.getElements("td").removeClass(this.options.classCellSort)},reSort:function(){return this.sortable&&this.sort.call(this,this.sorted.index,this.sorted.reverse),this},enableSort:function(){return this.element.addClass(this.options.classSortable),this.attachSorts(!0),this.setParsers(),this.sortable=!0,this},disableSort:function(){return this.element.removeClass(this.options.classSortable),this.attachSorts(!1),this.sortSpans.each(function(a){a.destroy()}),this.sortSpans.empty(),this.sortable=!1,this}}),HtmlTable.ParserPriority=["date","input-checked","input-value","float","number"],HtmlTable.Parsers={date:{match:/^\d{2}[-\/ ]\d{2}[-\/ ]\d{2,4}$/,convert:function(){var a=Date.parse(this.get("text").stripTags());return"date"==typeOf(a)?a.format("db"):""},type:"date"},"input-checked":{match:/ type="(radio|checkbox)"/,convert:function(){return this.getElement("input").checked}},"input-value":{match:/<input/,convert:function(){return this.getElement("input").value}},number:{match:/^\d+[^\d.,]*$/,convert:function(){return this.get("text").stripTags().toInt()},number:!0},numberLax:{match:/^[^\d]+\d+$/,convert:function(){return this.get("text").replace(/[^-?^0-9]/,"").stripTags().toInt()},number:!0},"float":{match:/^[\d]+\.[\d]+/,convert:function(){return this.get("text").replace(/[^-?^\d.e]/,"").stripTags().toFloat()},number:!0},floatLax:{match:/^[^\d]+[\d]+\.[\d]+$/,convert:function(){return this.get("text").replace(/[^-?^\d.]/,"").stripTags().toFloat()},number:!0},string:{match:null,convert:function(){return this.get("text").stripTags().toLowerCase()}},title:{match:null,convert:function(){return this.title}}},HtmlTable.defineParsers=function(a){HtmlTable.Parsers=Object.append(HtmlTable.Parsers,a);for(var b in a)HtmlTable.ParserPriority.unshift(b)}}(),HtmlTable=Class.refactor(HtmlTable,{options:{classZebra:"table-tr-odd",zebra:!0,zebraOnlyVisibleRows:!0},initialize:function(){return this.previous.apply(this,arguments),this.occluded?this.occluded:void(this.options.zebra&&this.updateZebras())},updateZebras:function(){var a=0;Array.each(this.body.rows,function(b){(!this.options.zebraOnlyVisibleRows||b.isDisplayed())&&this.zebra(b,a++)},this)},setRowStyle:function(a,b){this.previous&&this.previous(a,b),this.zebra(a,b)},zebra:function(a,b){return a[(b%2?"remove":"add")+"Class"](this.options.classZebra)},push:function(){var a=this.previous.apply(this,arguments);return this.options.zebra&&this.updateZebras(),a}});var Scroller=new Class({Implements:[Events,Options],options:{area:20,velocity:1,onChange:function(a,b){this.element.scrollTo(a,b)},fps:50},initialize:function(a,b){this.setOptions(b),this.element=document.id(a),this.docBody=document.id(this.element.getDocument().body),this.listener="element"!=typeOf(this.element)?this.docBody:this.element,this.timer=null,this.bound={attach:this.attach.bind(this),detach:this.detach.bind(this),getCoords:this.getCoords.bind(this)}},start:function(){return this.listener.addEvents({mouseover:this.bound.attach,mouseleave:this.bound.detach}),this},stop:function(){return this.listener.removeEvents({mouseover:this.bound.attach,mouseleave:this.bound.detach}),this.detach(),this.timer=clearInterval(this.timer),this},attach:function(){this.listener.addEvent("mousemove",this.bound.getCoords)},detach:function(){this.listener.removeEvent("mousemove",this.bound.getCoords),this.timer=clearInterval(this.timer)},getCoords:function(a){this.page="body"==this.listener.get("tag")?a.client:a.page,this.timer||(this.timer=this.scroll.periodical(Math.round(1e3/this.options.fps),this))},scroll:function(){var a=this.element.getSize(),b=this.element.getScroll(),c=this.element!=this.docBody&&this.element!=window?element.getOffsets():{x:0,y:0},d=this.element.getScrollSize(),e={x:0,y:0},f=this.options.area.top||this.options.area,g=this.options.area.bottom||this.options.area;for(var h in this.page)this.page[h]<f+c[h]&&0!=b[h]?e[h]=(this.page[h]-f-c[h])*this.options.velocity:this.page[h]+g>a[h]+c[h]&&b[h]+a[h]!=d[h]&&(e[h]=(this.page[h]-a[h]+g-c[h])*this.options.velocity),e[h]=e[h].round();(e.y||e.x)&&this.fireEvent("change",[b.x+e.x,b.y+e.y])}});!function(){var a=function(a,b){return a?"function"==typeOf(a)?a(b):b.get(a):""};this.Tips=new Class({Implements:[Events,Options],options:{onShow:function(){this.tip.setStyle("display","block")},onHide:function(){this.tip.setStyle("display","none")},title:"title",text:function(a){return a.get("rel")||a.get("href")},showDelay:100,hideDelay:100,className:"tip-wrap",offset:{x:16,y:16},windowPadding:{x:0,y:0},fixed:!1,waiAria:!0},initialize:function(){var a=Array.link(arguments,{options:Type.isObject,elements:function(a){return null!=a}});this.setOptions(a.options),a.elements&&this.attach(a.elements),this.container=new Element("div",{"class":"tip"}),this.options.id&&(this.container.set("id",this.options.id),this.options.waiAria&&this.attachWaiAria())},toElement:function(){return this.tip?this.tip:(this.tip=new Element("div",{"class":this.options.className,styles:{position:"absolute",top:0,left:0}}).adopt(new Element("div",{"class":"tip-top"}),this.container,new Element("div",{"class":"tip-bottom"})),this.tip)},attachWaiAria:function(){var a=this.options.id;this.container.set("role","tooltip"),this.waiAria||(this.waiAria={show:function(b){a&&b.set("aria-describedby",a),this.container.set("aria-hidden","false")},hide:function(b){a&&b.erase("aria-describedby"),this.container.set("aria-hidden","true")}}),this.addEvents(this.waiAria)},detachWaiAria:function(){this.waiAria&&(this.container.erase("role"),this.container.erase("aria-hidden"),this.removeEvents(this.waiAria))},attach:function(b){return $$(b).each(function(b){var c=a(this.options.title,b),d=a(this.options.text,b);b.set("title","").store("tip:native",c).retrieve("tip:title",c),b.retrieve("tip:text",d),this.fireEvent("attach",[b]);var e=["enter","leave"];this.options.fixed||e.push("move"),e.each(function(a){var c=b.retrieve("tip:"+a);c||(c=function(c){this["element"+a.capitalize()].apply(this,[c,b])}.bind(this)),b.store("tip:"+a,c).addEvent("mouse"+a,c)},this)},this),this},detach:function(a){return $$(a).each(function(a){if(["enter","leave","move"].each(function(b){a.removeEvent("mouse"+b,a.retrieve("tip:"+b)).eliminate("tip:"+b)}),this.fireEvent("detach",[a]),"title"==this.options.title){var b=a.retrieve("tip:native");b&&a.set("title",b)}},this),this},elementEnter:function(a,b){clearTimeout(this.timer),this.timer=function(){this.container.empty(),["title","text"].each(function(a){var c=b.retrieve("tip:"+a),d=this["_"+a+"Element"]=new Element("div",{"class":"tip-"+a}).inject(this.container);c&&this.fill(d,c)},this),this.show(b),this.position(this.options.fixed?{page:b.getPosition()}:a)}.delay(this.options.showDelay,this)},elementLeave:function(a,b){clearTimeout(this.timer),this.timer=this.hide.delay(this.options.hideDelay,this,b),this.fireForParent(a,b)},setTitle:function(a){return this._titleElement&&(this._titleElement.empty(),this.fill(this._titleElement,a)),this},setText:function(a){return this._textElement&&(this._textElement.empty(),this.fill(this._textElement,a)),this},fireForParent:function(a,b){b=b.getParent(),b&&b!=document.body&&(b.retrieve("tip:enter")?b.fireEvent("mouseenter",a):this.fireForParent(a,b))},elementMove:function(a){this.position(a)},position:function(a){this.tip||document.id(this);var b=window.getSize(),c=window.getScroll(),d={x:this.tip.offsetWidth,y:this.tip.offsetHeight},e={x:"left",y:"top"},f={y:!1,x2:!1,y2:!1,x:!1},g={};for(var h in e)g[e[h]]=a.page[h]+this.options.offset[h],g[e[h]]<0&&(f[h]=!0),g[e[h]]+d[h]-c[h]>b[h]-this.options.windowPadding[h]&&(g[e[h]]=a.page[h]-this.options.offset[h]-d[h],f[h+"2"]=!0);this.fireEvent("bound",f),this.tip.setStyles(g)},fill:function(a,b){"string"==typeof b?a.set("html",b):a.adopt(b)},show:function(a){this.tip||document.id(this),this.tip.getParent()||this.tip.inject(document.body),this.fireEvent("show",[this.tip,a])},hide:function(a){this.tip||document.id(this),this.fireEvent("hide",[this.tip,a])}})}(),Locale.define("EU","Number",{decimal:",",group:".",currency:{prefix:" "}}),function(){var a={json:JSON.decode};Locale.Set.defineParser=function(b,c){a[b]=c},Locale.Set.from=function(b,c){if(instanceOf(b,Locale.Set))return b;c||"string"!=typeOf(b)||(c="json"),a[c]&&(b=a[c](b));var d=new Locale.Set;return d.sets=b.sets||{},b.inherits&&(d.inherits.locales=Array.from(b.inherits.locales),d.inherits.sets=b.inherits.sets||{}),d}}(),Locale.define("ZA","Number",{decimal:".",group:",",currency:{prefix:"R "}}),Locale.define("af-ZA","Date",{months:["Januarie","Februarie","Maart","April","Mei","Junie","Julie","Augustus","September","Oktober","November","Desember"],months_abbr:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Des"],days:["Sondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrydag","Saterdag"],days_abbr:["Son","Maa","Din","Woe","Don","Vry","Sat"],dateOrder:["date","month","year"],shortDate:"%d-%m-%Y",shortTime:"%H:%M",AM:"VM",PM:"NM",firstDayOfWeek:1,ordinal:function(a){return a>1&&20>a&&8!=a||a>100&&"1"==a.toString().substr(-2,1)?"de":"ste"},lessThanMinuteAgo:"minder as 'n minuut gelede",minuteAgo:"ongeveer 'n minuut gelede",minutesAgo:"{delta} minute gelede",hourAgo:"omtret 'n uur gelede",hoursAgo:"ongeveer {delta} ure gelede",dayAgo:"1 dag gelede",daysAgo:"{delta} dae gelede",weekAgo:"1 week gelede",weeksAgo:"{delta} weke gelede",monthAgo:"1 maand gelede",monthsAgo:"{delta} maande gelede",yearAgo:"1 jaar gelede",yearsAgo:"{delta} jare gelede",lessThanMinuteUntil:"oor minder as 'n minuut",minuteUntil:"oor ongeveer 'n minuut",minutesUntil:"oor {delta} minute",hourUntil:"oor ongeveer 'n uur",hoursUntil:"oor {delta} uur",dayUntil:"oor ongeveer 'n dag",daysUntil:"oor {delta} dae",weekUntil:"oor 'n week",weeksUntil:"oor {delta} weke",monthUntil:"oor 'n maand",monthsUntil:"oor {delta} maande",yearUntil:"oor 'n jaar",yearsUntil:"oor {delta} jaar"}),Locale.define("af-ZA","FormValidator",{required:"Hierdie veld word vereis.",length:"Voer asseblief {length} karakters in (u het {elLength} karakters ingevoer)",minLength:"Voer asseblief ten minste {minLength} karakters in (u het {length} karakters ingevoer).",maxLength:"Moet asseblief nie meer as {maxLength} karakters invoer nie (u het {length} karakters ingevoer).",integer:"Voer asseblief 'n heelgetal in hierdie veld in. Getalle met desimale (bv. 1.25) word nie toegelaat nie.",numeric:'Voer asseblief slegs numeriese waardes in hierdie veld in (bv. "1" of "1.1" of "-1" of "-1.1").',digits:"Gebruik asseblief slegs nommers en punktuasie in hierdie veld. (by voorbeeld, 'n telefoon nommer wat koppeltekens en punte bevat is toelaatbaar).",alpha:"Gebruik asseblief slegs letters (a-z) binne-in hierdie veld. Geen spasies of ander karakters word toegelaat nie.",alphanum:"Gebruik asseblief slegs letters (a-z) en nommers (0-9) binne-in hierdie veld. Geen spasies of ander karakters word toegelaat nie.",dateSuchAs:"Voer asseblief 'n geldige datum soos {date} in",dateInFormatMDY:'Voer asseblief \'n geldige datum soos MM/DD/YYYY in (bv. "12/31/1999")',email:'Voer asseblief \'n geldige e-pos adres in. Byvoorbeeld "fred@domain.com".',url:"Voer asseblief 'n geldige bronadres (URL) soos http://www.example.com in.",currencyDollar:"Voer asseblief 'n geldige $ bedrag in. Byvoorbeeld $100.00 .",oneRequired:"Voer asseblief iets in vir ten minste een van hierdie velde.",errorPrefix:"Fout: ",warningPrefix:"Waarskuwing: ",noSpace:"Daar mag geen spasies in hierdie toevoer wees nie.",reqChkByNode:"Geen items is gekies nie.",requiredChk:"Hierdie veld word vereis.",reqChkByName:"Kies asseblief 'n {label}.",match:"Hierdie veld moet by die {matchName} veld pas",startDate:"die begin datum",endDate:"die eind datum",currentDate:"die huidige datum",afterDate:"Die datum moet dieselfde of na {label} wees.",beforeDate:"Die datum moet dieselfde of voor {label} wees.",startMonth:"Kies asseblief 'n begin maand",sameMonth:"Hierdie twee datums moet in dieselfde maand wees - u moet een of beide verander.",creditcard:"Die ingevoerde kredietkaart nommer is ongeldig. Bevestig asseblief die nommer en probeer weer. {length} syfers is ingevoer."}),Locale.define("af-ZA").inherit("ZA","Number"),Locale.define("ar","Date",{dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M"}),Locale.define("ar","FormValidator",{required:"  .",minLength:"  {minLength}    (  {length} ).",maxLength:"     {maxLength}  (  {length} ).",integer:"      .        ( 1.25 )  .",numeric:'       ( "1"  "1.1"  "-1"  "-1.1").',digits:"          (,      )",alpha:"    (-)   .      .",alphanum:"    (-)   (0-9)    .      .",dateSuchAs:"     {date}",dateInFormatMDY:"    (, 31-12-1999)",email:"    .",url:"      http://www.example.com",currencyDollar:"   $ . , 100.00$",oneRequired:"        .",errorPrefix:": ",warningPrefix:": "}),Locale.define("ca-CA","Date",{months:["Gener","Febrer","Mar","Abril","Maig","Juny","Juli","Agost","Setembre","Octubre","Novembre","Desembre"],months_abbr:["gen.","febr.","mar","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."],days:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],days_abbr:["dg","dl","dt","dc","dj","dv","ds"],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:0,ordinal:"",lessThanMinuteAgo:"fa menys d`un minut",minuteAgo:"fa un minut",minutesAgo:"fa {delta} minuts",hourAgo:"fa un hora",hoursAgo:"fa unes {delta} hores",dayAgo:"fa un dia",daysAgo:"fa {delta} dies",lessThanMinuteUntil:"menys d`un minut des d`ara",minuteUntil:"un minut des d`ara",minutesUntil:"{delta} minuts des d`ara",hourUntil:"un hora des d`ara",hoursUntil:"unes {delta} hores des d`ara",dayUntil:"1 dia des d`ara",daysUntil:"{delta} dies des d`ara"}),Locale.define("ca-CA","FormValidator",{required:"Aquest camp es obligatori.",minLength:"Per favor introdueix al menys {minLength} caracters (has introduit {length} caracters).",maxLength:"Per favor introdueix no mes de {maxLength} caracters (has introduit {length} caracters).",integer:"Per favor introdueix un nombre enter en aquest camp. Nombres amb decimals (p.e. 1,25) no estan permesos.",numeric:'Per favor introdueix sols valors numerics en aquest camp (p.e. "1" o "1,1" o "-1" o "-1,1").',digits:"Per favor usa sols numeros i puntuacio en aquest camp (per exemple, un nombre de telefon amb guions i punts no esta permes).",alpha:"Per favor utilitza lletres nomes (a-z) en aquest camp. No sadmiteixen espais ni altres caracters.",alphanum:"Per favor, utilitza nomes lletres (a-z) o numeros (0-9) en aquest camp. No sadmiteixen espais ni altres caracters.",dateSuchAs:"Per favor introdueix una data valida com {date}",dateInFormatMDY:'Per favor introdueix una data valida com DD/MM/YYYY (p.e. "31/12/1999")',email:'Per favor, introdueix una adrea de correu electronic valida. Per exemple, "fred@domain.com".',url:"Per favor introdueix una URL valida com http://www.example.com.",currencyDollar:"Per favor introdueix una quantitat valida de . Per exemple 100,00 .",oneRequired:"Per favor introdueix alguna cosa per al menys una daquestes entrades.",errorPrefix:"Error: ",warningPrefix:"Avis: ",noSpace:"No poden haver espais en aquesta entrada.",reqChkByNode:"No hi han elements seleccionats.",requiredChk:"Aquest camp es obligatori.",reqChkByName:"Per favor selecciona una {label}.",match:"Aquest camp necessita coincidir amb el camp {matchName}",startDate:"la data de inici",endDate:"la data de fi",currentDate:"la data actual",afterDate:"La data deu ser igual o posterior a {label}.",beforeDate:"La data deu ser igual o anterior a {label}.",startMonth:"Per favor selecciona un mes dorige",sameMonth:"Aquestes dos dates deuen estar dins del mateix mes - deus canviar una o altra."}),function(){var a=function(a,b,c,d){return 1==a?b:2==a||3==a||4==a?c:d};Locale.define("cs-CZ","Date",{months:["Leden","nor","Bezen","Duben","Kvten","erven","ervenec","Srpen","Z","jen","Listopad","Prosinec"],months_abbr:["ledna","nora","bezna","dubna","kvtna","ervna","ervence","srpna","z","jna","listopadu","prosince"],days:["Nedle","Pondl","ter","Steda","tvrtek","Ptek","Sobota"],days_abbr:["ne","po","t","st","t","p","so"],dateOrder:["date","month","year"],shortDate:"%d.%m.%Y",shortTime:"%H:%M",AM:"dop.",PM:"odp.",firstDayOfWeek:1,ordinal:".",lessThanMinuteAgo:"ped chvl",minuteAgo:"piblin ped minutou",minutesAgo:function(b){return"ped {delta} "+a(b,"minutou","minutami","minutami")},hourAgo:"piblin ped hodinou",hoursAgo:function(b){return"ped {delta} "+a(b,"hodinou","hodinami","hodinami")},dayAgo:"ped dnem",daysAgo:function(b){return"ped {delta} "+a(b,"dnem","dny","dny")},weekAgo:"ped tdnem",weeksAgo:function(b){return"ped {delta} "+a(b,"tdnem","tdny","tdny")},monthAgo:"ped mscem",monthsAgo:function(b){return"ped {delta} "+a(b,"mscem","msci","msci")},yearAgo:"ped rokem",yearsAgo:function(b){return"ped {delta} "+a(b,"rokem","lety","lety")},lessThanMinuteUntil:"za chvli",minuteUntil:"piblin za minutu",minutesUntil:function(b){return"za {delta} "+a(b,"minutu","minuty","minut")},hourUntil:"piblin za hodinu",hoursUntil:function(b){return"za {delta} "+a(b,"hodinu","hodiny","hodin")},dayUntil:"za den",daysUntil:function(b){return"za {delta} "+a(b,"den","dny","dn")},weekUntil:"za tden",weeksUntil:function(b){return"za {delta} "+a(b,"tden","tdny","tdn")},monthUntil:"za msc",monthsUntil:function(b){return"za {delta} "+a(b,"msc","msce","msc")},yearUntil:"za rok",yearsUntil:function(b){return"za {delta} "+a(b,"rok","roky","let")}})}(),Locale.define("cs-CZ","FormValidator",{required:"Tato poloka je povinn.",minLength:"Zadejte prosm alespo {minLength} znak (napsno {length} znak).",maxLength:"Zadejte prosm mn ne {maxLength} znak (npsno {length} znak).",integer:"Zadejte prosm cel slo. Desetinn sla (nap. 1.25) nejsou povolena.",numeric:'Zadejte jen seln hodnoty (tj. "1" nebo "1.1" nebo "-1" nebo "-1.1").',digits:"Zadejte prosm pouze sla a interpunkn znamnka(napklad telefonn slo s pomlkami nebo tekami je povoleno).",alpha:"Zadejte prosm pouze psmena (a-z). Mezery nebo jin znaky nejsou povoleny.",alphanum:"Zadejte prosm pouze psmena (a-z) nebo slice (0-9). Mezery nebo jin znaky nejsou povoleny.",dateSuchAs:"Zadejte prosm platn datum jako {date}",dateInFormatMDY:'Zadejte prosm platn datum jako MM / DD / RRRR (tj. "12/31/1999")',email:'Zadejte prosm platnou e-mailovou adresu. Napklad "fred@domain.com".',url:"Zadejte prosm platnou URL adresu jako http://www.example.com.",currencyDollar:"Zadejte prosm platnou stku. Napklad $100.00.",oneRequired:"Zadejte prosm alespo jednu hodnotu pro tyto poloky.",errorPrefix:"Chyba: ",warningPrefix:"Upozornn: ",noSpace:"V tto poloce nejsou povoleny mezery",reqChkByNode:"Nejsou vybrny dn poloky.",requiredChk:"Tato poloka je vyadovna.",reqChkByName:"Prosm vyberte {label}.",match:"Tato poloka se mus shodovat s polokou {matchName}",startDate:"datum zahjen",endDate:"datum ukonen",currentDate:"aktuln datum",afterDate:"Datum by mlo bt stejn nebo vt ne {label}.",beforeDate:"Datum by mlo bt stejn nebo men ne {label}.",startMonth:"Vyberte poten msc.",sameMonth:"Tyto dva datumy mus bt ve stejnm msci - zmte jeden z nich.",creditcard:"Zadan slo kreditn karty je neplatn. Prosm opravte ho. Bylo zadno {length} sel."}),Locale.define("da-DK","Date",{months:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],months_abbr:["jan.","feb.","mar.","apr.","maj.","jun.","jul.","aug.","sep.","okt.","nov.","dec."],days:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],days_abbr:["sn","man","tir","ons","tor","fre","lr"],dateOrder:["date","month","year"],shortDate:"%d-%m-%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:".",lessThanMinuteAgo:"mindre end et minut siden",minuteAgo:"omkring et minut siden",minutesAgo:"{delta} minutter siden",hourAgo:"omkring en time siden",hoursAgo:"omkring {delta} timer siden",dayAgo:"1 dag siden",daysAgo:"{delta} dage siden",weekAgo:"1 uge siden",weeksAgo:"{delta} uger siden",monthAgo:"1 mned siden",monthsAgo:"{delta} mneder siden",yearAgo:"1 r siden",yearsAgo:"{delta} r siden",lessThanMinuteUntil:"mindre end et minut fra nu",minuteUntil:"omkring et minut fra nu",minutesUntil:"{delta} minutter fra nu",hourUntil:"omkring en time fra nu",hoursUntil:"omkring {delta} timer fra nu",dayUntil:"1 dag fra nu",daysUntil:"{delta} dage fra nu",weekUntil:"1 uge fra nu",weeksUntil:"{delta} uger fra nu",monthUntil:"1 mned fra nu",monthsUntil:"{delta} mneder fra nu",yearUntil:"1 r fra nu",yearsUntil:"{delta} r fra nu"}),Locale.define("da-DK","FormValidator",{required:"Feltet skal udfyldes.",minLength:"Skriv mindst {minLength} tegn (du skrev {length} tegn).",maxLength:"Skriv maksimalt {maxLength} tegn (du skrev {length} tegn).",integer:"Skriv et tal i dette felt. Decimal tal (f.eks. 1.25) er ikke tilladt.",numeric:'Skriv kun tal i dette felt (i.e. "1" eller "1.1" eller "-1" eller "-1.1").',digits:"Skriv kun tal og tegnstning i dette felt (eksempel, et telefon nummer med bindestreg eller punktum er tilladt).",alpha:"Skriv kun bogstaver (a-z) i dette felt. Mellemrum og andre tegn er ikke tilladt.",alphanum:"Skriv kun bogstaver (a-z) eller tal (0-9) i dette felt. Mellemrum og andre tegn er ikke tilladt.",dateSuchAs:"Skriv en gyldig dato som {date}",dateInFormatMDY:'Skriv dato i formatet DD-MM-YYYY (f.eks. "31-12-1999")',email:'Skriv en gyldig e-mail adresse. F.eks "fred@domain.com".',url:'Skriv en gyldig URL adresse. F.eks "http://www.example.com".',currencyDollar:"Skriv et gldigt belb. F.eks Kr.100.00 .",oneRequired:"Et eller flere af felterne i denne formular skal udfyldes.",errorPrefix:"Fejl: ",warningPrefix:"Advarsel: ",noSpace:"Der m ikke benyttes mellemrum i dette felt.",reqChkByNode:"Foretag et valg.",requiredChk:"Dette felt skal udfyldes.",reqChkByName:"Vlg en {label}.",match:"Dette felt skal matche {matchName} feltet",startDate:"start dato",endDate:"slut dato",currentDate:"dags dato",afterDate:"Datoen skal vre strre end eller lig med {label}.",beforeDate:"Datoen skal vre mindre end eller lig med {label}.",startMonth:"Vlg en start mned",sameMonth:"De valgte datoer skal vre i samme mned - skift en af dem."}),Locale.define("de-DE","Date",{months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],months_abbr:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],days_abbr:["So","Mo","Di","Mi","Do","Fr","Sa"],dateOrder:["date","month","year"],shortDate:"%d.%m.%Y",shortTime:"%H:%M",AM:"vormittags",PM:"nachmittags",firstDayOfWeek:1,ordinal:".",lessThanMinuteAgo:"vor weniger als einer Minute",minuteAgo:"vor einer Minute",minutesAgo:"vor {delta} Minuten",hourAgo:"vor einer Stunde",hoursAgo:"vor {delta} Stunden",dayAgo:"vor einem Tag",daysAgo:"vor {delta} Tagen",weekAgo:"vor einer Woche",weeksAgo:"vor {delta} Wochen",monthAgo:"vor einem Monat",monthsAgo:"vor {delta} Monaten",yearAgo:"vor einem Jahr",yearsAgo:"vor {delta} Jahren",lessThanMinuteUntil:"in weniger als einer Minute",minuteUntil:"in einer Minute",minutesUntil:"in {delta} Minuten",hourUntil:"in ca. einer Stunde",hoursUntil:"in ca. {delta} Stunden",dayUntil:"in einem Tag",daysUntil:"in {delta} Tagen",weekUntil:"in einer Woche",weeksUntil:"in {delta} Wochen",monthUntil:"in einem Monat",monthsUntil:"in {delta} Monaten",yearUntil:"in einem Jahr",yearsUntil:"in {delta} Jahren"}),Locale.define("de-CH").inherit("de-DE","Date"),Locale.define("de-CH","FormValidator",{required:"Dieses Feld ist obligatorisch.",minLength:"Geben Sie bitte mindestens {minLength} Zeichen ein (Sie haben {length} Zeichen eingegeben).",maxLength:"Bitte geben Sie nicht mehr als {maxLength} Zeichen ein (Sie haben {length} Zeichen eingegeben).",integer:"Geben Sie bitte eine ganze Zahl ein. Dezimalzahlen (z.B. 1.25) sind nicht erlaubt.",numeric:"Geben Sie bitte nur Zahlenwerte in dieses Eingabefeld ein (z.B. &quot;1&quot;, &quot;1.1&quot;, &quot;-1&quot; oder &quot;-1.1&quot;).",digits:"Benutzen Sie bitte nur Zahlen und Satzzeichen in diesem Eingabefeld (erlaubt ist z.B. eine Telefonnummer mit Bindestrichen und Punkten).",alpha:"Benutzen Sie bitte nur Buchstaben (a-z) in diesem Feld. Leerzeichen und andere Zeichen sind nicht erlaubt.",alphanum:"Benutzen Sie bitte nur Buchstaben (a-z) und Zahlen (0-9) in diesem Eingabefeld. Leerzeichen und andere Zeichen sind nicht erlaubt.",dateSuchAs:"Geben Sie bitte ein g&uuml;ltiges Datum ein. Wie zum Beispiel {date}",dateInFormatMDY:"Geben Sie bitte ein g&uuml;ltiges Datum ein. Wie zum Beispiel TT.MM.JJJJ (z.B. &quot;31.12.1999&quot;)",email:"Geben Sie bitte eine g&uuml;ltige E-Mail Adresse ein. Wie zum Beispiel &quot;maria@bernasconi.ch&quot;.",url:"Geben Sie bitte eine g&uuml;ltige URL ein. Wie zum Beispiel http://www.example.com.",currencyDollar:"Geben Sie bitte einen g&uuml;ltigen Betrag in Schweizer Franken ein. Wie zum Beispiel 100.00 CHF .",oneRequired:"Machen Sie f&uuml;r mindestens eines der Eingabefelder einen Eintrag.",errorPrefix:"Fehler: ",warningPrefix:"Warnung: ",noSpace:"In diesem Eingabefeld darf kein Leerzeichen sein.",reqChkByNode:"Es wurden keine Elemente gew&auml;hlt.",requiredChk:"Dieses Feld ist obligatorisch.",reqChkByName:"Bitte w&auml;hlen Sie ein {label}.",match:"Dieses Eingabefeld muss mit dem Feld {matchName} &uuml;bereinstimmen.",startDate:"Das Anfangsdatum",endDate:"Das Enddatum",currentDate:"Das aktuelle Datum",afterDate:"Das Datum sollte zur gleichen Zeit oder sp&auml;ter sein {label}.",beforeDate:"Das Datum sollte zur gleichen Zeit oder fr&uuml;her sein {label}.",startMonth:"W&auml;hlen Sie bitte einen Anfangsmonat",sameMonth:"Diese zwei Datumsangaben m&uuml;ssen im selben Monat sein - Sie m&uuml;ssen eine von beiden ver&auml;ndern.",creditcard:"Die eingegebene Kreditkartennummer ist ung&uuml;ltig. Bitte &uuml;berpr&uuml;fen Sie diese und versuchen Sie es erneut. {length} Zahlen eingegeben."}),Locale.define("de-DE","FormValidator",{required:"Dieses Eingabefeld muss ausgefllt werden.",minLength:"Geben Sie bitte mindestens {minLength} Zeichen ein (Sie haben nur {length} Zeichen eingegeben).",maxLength:"Geben Sie bitte nicht mehr als {maxLength} Zeichen ein (Sie haben {length} Zeichen eingegeben).",integer:'Geben Sie in diesem Eingabefeld bitte eine ganze Zahl ein. Dezimalzahlen (z.B. "1.25") sind nicht erlaubt.',numeric:'Geben Sie in diesem Eingabefeld bitte nur Zahlenwerte (z.B. "1", "1.1", "-1" oder "-1.1") ein.',digits:"Geben Sie in diesem Eingabefeld bitte nur Zahlen und Satzzeichen ein (z.B. eine Telefonnummer mit Bindestrichen und Punkten ist erlaubt).",alpha:"Geben Sie in diesem Eingabefeld bitte nur Buchstaben (a-z) ein. Leerzeichen und andere Zeichen sind nicht erlaubt.",alphanum:"Geben Sie in diesem Eingabefeld bitte nur Buchstaben (a-z) und Zahlen (0-9) ein. Leerzeichen oder andere Zeichen sind nicht erlaubt.",dateSuchAs:'Geben Sie bitte ein gltiges Datum ein (z.B. "{date}").',dateInFormatMDY:'Geben Sie bitte ein gltiges Datum im Format TT.MM.JJJJ ein (z.B. "31.12.1999").',email:'Geben Sie bitte eine gltige E-Mail-Adresse ein (z.B. "max@mustermann.de").',url:'Geben Sie bitte eine gltige URL ein (z.B. "http://www.example.com").',currencyDollar:"Geben Sie bitte einen gltigen Betrag in EURO ein (z.B. 100.00).",oneRequired:"Bitte fllen Sie mindestens ein Eingabefeld aus.",errorPrefix:"Fehler: ",warningPrefix:"Warnung: ",noSpace:"Es darf kein Leerzeichen in diesem Eingabefeld sein.",reqChkByNode:"Es wurden keine Elemente gewhlt.",requiredChk:"Dieses Feld muss ausgefllt werden.",reqChkByName:"Bitte whlen Sie ein {label}.",match:"Dieses Eingabefeld muss mit dem {matchName} Eingabefeld bereinstimmen.",startDate:"Das Anfangsdatum",endDate:"Das Enddatum",currentDate:"Das aktuelle Datum",afterDate:"Das Datum sollte zur gleichen Zeit oder spter sein als {label}.",beforeDate:"Das Datum sollte zur gleichen Zeit oder frher sein als {label}.",startMonth:"Whlen Sie bitte einen Anfangsmonat",sameMonth:"Diese zwei Datumsangaben mssen im selben Monat sein - Sie mssen eines von beiden verndern.",creditcard:"Die eingegebene Kreditkartennummer ist ungltig. Bitte berprfen Sie diese und versuchen Sie es erneut. {length} Zahlen eingegeben."}),Locale.define("de-DE").inherit("EU","Number"),Locale.define("el-GR","Date",{months:["","","","","","","","","","","",""],months_abbr:["","","","","","","","","","","",""],days:["","","","","","",""],days_abbr:["","","","","","",""],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%I:%M%p",AM:"",PM:"",firstDayOfWeek:1,ordinal:function(a){return a>3&&21>a?"":[""][Math.min(a%10,4)]
},lessThanMinuteAgo:"    ",minuteAgo:"   ",minutesAgo:"{delta}  ",hourAgo:"   ",hoursAgo:" {delta}  ",dayAgo:"1  ",daysAgo:"{delta}  ",weekAgo:"1  ",weeksAgo:"{delta}  ",monthAgo:"1  ",monthsAgo:"{delta}  ",yearAgo:"1  ",yearsAgo:"{delta}  ",lessThanMinuteUntil:"    ",minuteUntil:"    ",minutesUntil:"{delta}   ",hourUntil:"    ",hoursUntil:" {delta}   ",dayUntil:"1   ",daysUntil:"{delta}   ",weekUntil:"1   ",weeksUntil:"{delta}   ",monthUntil:"1   ",monthsUntil:"{delta}   ",yearUntil:"1   ",yearsUntil:"{delta}   "}),Locale.define("el-GR","FormValidator",{required:"    .",length:",  {length}  (   {elLength} ).",minLength:",   {minLength}  (   {length} ).",maxlength:",   {maxlength}  (   {length} ).",integer:",        .      (.. 1.25)  .",numeric:',         (.." 1 "  " 1.1 "  " -1 "  " -1.1 " ).',digits:",           (..       ).",alpha:",    (a-z)    .      .",alphanum:",    (a-z)   (0-9)    .      .",dateSuchAs:",    ,  {date}",dateInFormatMDY:'    ,  // (.. "12/31/1999").',email:',       (.. "fred@domain.com").',url:",    URL ,  http://www.example.com",currencyDollar:",       (.. $100.00).",oneRequired:",         .",errorPrefix:": ",warningPrefix:": ",noSpace:"       .",reqChkByNode:"    ",requiredChk:"    .",reqChkByName:",    {label}.",match:"         {matchName}.",startDate:"  ",endDate:"  ",currentDate:"  ",afterDate:"           {label}.",beforeDate:"           {label}.",startMonth:"    .",sameMonth:"          -          ",creditcard:"       .       . {length}  ."}),Locale.define("en-GB","Date",{dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M"}).inherit("en-US","Date"),Locale.define("en-US","Number",{decimal:".",group:",",currency:{prefix:"$ "}}),Locale.define("es-ES","Date",{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],months_abbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],days:["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"],days_abbr:["dom","lun","mar","mi","juv","vie","sb"],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"hace menos de un minuto",minuteAgo:"hace un minuto",minutesAgo:"hace {delta} minutos",hourAgo:"hace una hora",hoursAgo:"hace unas {delta} horas",dayAgo:"hace un da",daysAgo:"hace {delta} das",weekAgo:"hace una semana",weeksAgo:"hace unas {delta} semanas",monthAgo:"hace un mes",monthsAgo:"hace {delta} meses",yearAgo:"hace un ao",yearsAgo:"hace {delta} aos",lessThanMinuteUntil:"menos de un minuto desde ahora",minuteUntil:"un minuto desde ahora",minutesUntil:"{delta} minutos desde ahora",hourUntil:"una hora desde ahora",hoursUntil:"unas {delta} horas desde ahora",dayUntil:"un da desde ahora",daysUntil:"{delta} das desde ahora",weekUntil:"una semana desde ahora",weeksUntil:"unas {delta} semanas desde ahora",monthUntil:"un mes desde ahora",monthsUntil:"{delta} meses desde ahora",yearUntil:"un ao desde ahora",yearsUntil:"{delta} aos desde ahora"}),Locale.define("es-AR").inherit("es-ES","Date"),Locale.define("es-AR","FormValidator",{required:"Este campo es obligatorio.",minLength:"Por favor ingrese al menos {minLength} caracteres (ha ingresado {length} caracteres).",maxLength:"Por favor no ingrese ms de {maxLength} caracteres (ha ingresado {length} caracteres).",integer:"Por favor ingrese un nmero entero en este campo. Nmeros con decimales (p.e. 1,25) no se permiten.",numeric:'Por favor ingrese solo valores numricos en este campo (p.e. "1" o "1,1" o "-1" o "-1,1").',digits:"Por favor use slo nmeros y puntuacin en este campo (por ejemplo, un nmero de telfono con guiones y/o puntos no est permitido).",alpha:"Por favor use slo letras (a-z) en este campo. No se permiten espacios ni otros caracteres.",alphanum:"Por favor, usa slo letras (a-z) o nmeros (0-9) en este campo. No se permiten espacios u otros caracteres.",dateSuchAs:"Por favor ingrese una fecha vlida como {date}",dateInFormatMDY:'Por favor ingrese una fecha vlida, utulizando el formato DD/MM/YYYY (p.e. "31/12/1999")',email:'Por favor, ingrese una direccin de e-mail vlida. Por ejemplo, "fred@dominio.com".',url:"Por favor ingrese una URL vlida como http://www.example.com.",currencyDollar:"Por favor ingrese una cantidad vlida de pesos. Por ejemplo $100,00 .",oneRequired:"Por favor ingrese algo para por lo menos una de estas entradas.",errorPrefix:"Error: ",warningPrefix:"Advertencia: ",noSpace:"No se permiten espacios en este campo.",reqChkByNode:"No hay elementos seleccionados.",requiredChk:"Este campo es obligatorio.",reqChkByName:"Por favor selecciona una {label}.",match:"Este campo necesita coincidir con el campo {matchName}",startDate:"la fecha de inicio",endDate:"la fecha de fin",currentDate:"la fecha actual",afterDate:"La fecha debe ser igual o posterior a {label}.",beforeDate:"La fecha debe ser igual o anterior a {label}.",startMonth:"Por favor selecciona un mes de origen",sameMonth:"Estas dos fechas deben estar en el mismo mes - debes cambiar una u otra."}),Locale.define("es-ES","FormValidator",{required:"Este campo es obligatorio.",minLength:"Por favor introduce al menos {minLength} caracteres (has introducido {length} caracteres).",maxLength:"Por favor introduce no m&aacute;s de {maxLength} caracteres (has introducido {length} caracteres).",integer:"Por favor introduce un n&uacute;mero entero en este campo. N&uacute;meros con decimales (p.e. 1,25) no se permiten.",numeric:'Por favor introduce solo valores num&eacute;ricos en este campo (p.e. "1" o "1,1" o "-1" o "-1,1").',digits:"Por favor usa solo n&uacute;meros y puntuaci&oacute;n en este campo (por ejemplo, un n&uacute;mero de tel&eacute;fono con guiones y puntos no esta permitido).",alpha:"Por favor usa letras solo (a-z) en este campo. No se admiten espacios ni otros caracteres.",alphanum:"Por favor, usa solo letras (a-z) o n&uacute;meros (0-9) en este campo. No se admiten espacios ni otros caracteres.",dateSuchAs:"Por favor introduce una fecha v&aacute;lida como {date}",dateInFormatMDY:'Por favor introduce una fecha v&aacute;lida como DD/MM/YYYY (p.e. "31/12/1999")',email:'Por favor, introduce una direcci&oacute;n de email v&aacute;lida. Por ejemplo, "fred@domain.com".',url:"Por favor introduce una URL v&aacute;lida como http://www.example.com.",currencyDollar:"Por favor introduce una cantidad v&aacute;lida de . Por ejemplo 100,00 .",oneRequired:"Por favor introduce algo para por lo menos una de estas entradas.",errorPrefix:"Error: ",warningPrefix:"Aviso: ",noSpace:"No pueden haber espacios en esta entrada.",reqChkByNode:"No hay elementos seleccionados.",requiredChk:"Este campo es obligatorio.",reqChkByName:"Por favor selecciona una {label}.",match:"Este campo necesita coincidir con el campo {matchName}",startDate:"la fecha de inicio",endDate:"la fecha de fin",currentDate:"la fecha actual",afterDate:"La fecha debe ser igual o posterior a {label}.",beforeDate:"La fecha debe ser igual o anterior a {label}.",startMonth:"Por favor selecciona un mes de origen",sameMonth:"Estas dos fechas deben estar en el mismo mes - debes cambiar una u otra."}),Locale.define("es-VE").inherit("es-ES","Date"),Locale.define("es-VE","FormValidator",{digits:"Por favor usa solo n&uacute;meros y puntuaci&oacute;n en este campo. Por ejemplo, un n&uacute;mero de tel&eacute;fono con guiones y puntos no esta permitido.",alpha:"Por favor usa solo letras (a-z) en este campo. No se admiten espacios ni otros caracteres.",currencyDollar:"Por favor introduce una cantidad v&aacute;lida de Bs. Por ejemplo Bs. 100,00 .",oneRequired:"Por favor introduce un valor para por lo menos una de estas entradas.",startDate:"La fecha de inicio",endDate:"La fecha de fin",currentDate:"La fecha actual"}).inherit("es-ES","FormValidator"),Locale.define("es-VE","Number",{decimal:",",group:".",negative:{prefix:"-"},currency:{decimals:2,prefix:"Bs. "},percentage:{decimals:2,suffix:"%"}}),Locale.define("et-EE","Date",{months:["jaanuar","veebruar","mrts","aprill","mai","juuni","juuli","august","september","oktoober","november","detsember"],months_abbr:["jaan","veebr","mrts","apr","mai","juuni","juuli","aug","sept","okt","nov","dets"],days:["phapev","esmaspev","teisipev","kolmapev","neljapev","reede","laupev"],days_abbr:["phap","esmasp","teisip","kolmap","neljap","reede","laup"],dateOrder:["month","date","year"],shortDate:"%m.%d.%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"vhem kui minut aega tagasi",minuteAgo:"umbes minut aega tagasi",minutesAgo:"{delta} minutit tagasi",hourAgo:"umbes tund aega tagasi",hoursAgo:"umbes {delta} tundi tagasi",dayAgo:"1 pev tagasi",daysAgo:"{delta} peva tagasi",weekAgo:"1 ndal tagasi",weeksAgo:"{delta} ndalat tagasi",monthAgo:"1 kuu tagasi",monthsAgo:"{delta} kuud tagasi",yearAgo:"1 aasta tagasi",yearsAgo:"{delta} aastat tagasi",lessThanMinuteUntil:"vhem kui minuti aja prast",minuteUntil:"umbes minuti aja prast",minutesUntil:"{delta} minuti prast",hourUntil:"umbes tunni aja prast",hoursUntil:"umbes {delta} tunni prast",dayUntil:"1 peva prast",daysUntil:"{delta} peva prast",weekUntil:"1 ndala prast",weeksUntil:"{delta} ndala prast",monthUntil:"1 kuu prast",monthsUntil:"{delta} kuu prast",yearUntil:"1 aasta prast",yearsUntil:"{delta} aasta prast"}),Locale.define("et-EE","FormValidator",{required:"Vli peab olema tidetud.",minLength:"Palun sisestage vhemalt {minLength} thte (te sisestasite {length} thte).",maxLength:"Palun rge sisestage rohkem kui {maxLength} thte (te sisestasite {length} thte).",integer:"Palun sisestage vljale tisarv. Kmnendarvud (niteks 1.25) ei ole lubatud.",numeric:'Palun sisestage ainult numbreid vljale (niteks "1", "1.1", "-1" vi "-1.1").',digits:"Palun kasutage ainult numbreid ja kirjavahemrke (telefoninumbri sisestamisel on lubatud kasutada kriipse ja punkte).",alpha:"Palun kasutage ainult thti (a-z). Thikud ja teised smbolid on keelatud.",alphanum:"Palun kasutage ainult thti (a-z) vi numbreid (0-9). Thikud ja teised smbolid on keelatud.",dateSuchAs:"Palun sisestage kehtiv kuupev kujul {date}",dateInFormatMDY:'Palun sisestage kehtiv kuupev kujul MM.DD.YYYY (niteks: "12.31.1999").',email:'Palun sisestage kehtiv e-maili aadress (niteks: "fred@domain.com").',url:"Palun sisestage kehtiv URL (niteks: http://www.example.com).",currencyDollar:"Palun sisestage kehtiv $ summa (niteks: $100.00).",oneRequired:"Palun sisestage midagi vhemalt hele antud vljadest.",errorPrefix:"Viga: ",warningPrefix:"Hoiatus: ",noSpace:"Vli ei tohi sisaldada thikuid.",reqChkByNode:"kski vljadest pole valitud.",requiredChk:"Vlja titmine on vajalik.",reqChkByName:"Palun valige ks {label}.",match:"Vli peab sobima {matchName} vljaga",startDate:"algkuupev",endDate:"lppkuupev",currentDate:"praegune kuupev",afterDate:"Kuupev peab olema vrdne vi prast {label}.",beforeDate:"Kuupev peab olema vrdne vi enne {label}.",startMonth:"Palun valige algkuupev.",sameMonth:"Antud kaks kuupeva peavad olema samas kuus - peate muutma hte kuupeva."}),Locale.define("fa","Date",{months:["","","","","","","","","","","",""],months_abbr:["1","2","3","4","5","6","7","8","9","10","11","12"],days:["",""," ","","","",""],days_abbr:["","","","","","",""],dateOrder:["month","date","year"],shortDate:"%m/%d/%Y",shortTime:"%I:%M%p",AM:".",PM:".",ordinal:"",lessThanMinuteAgo:"    ",minuteAgo:"   ",minutesAgo:"{delta}  ",hourAgo:"   ",hoursAgo:" {delta}  ",dayAgo:"1  ",daysAgo:"{delta}  ",weekAgo:"1  ",weeksAgo:"{delta}  ",monthAgo:"1  ",monthsAgo:"{delta}  ",yearAgo:"1  ",yearsAgo:"{delta}  ",lessThanMinuteUntil:"     ",minuteUntil:"    ",minutesUntil:"{delta}   ",hourUntil:"    ",hoursUntil:" {delta}   ",dayUntil:"1   ",daysUntil:"{delta}   ",weekUntil:"1   ",weeksUntil:"{delta}   ",monthUntil:"1   ",monthsUntil:"{delta}   ",yearUntil:"1   ",yearsUntil:"{delta}   "}),Locale.define("fa","FormValidator",{required:"   .",minLength:"   {minLength}    ({length}    ).",maxLength:"  {maxLength}    ( {length}    ).",integer:"     .   ( 1.25)  .",numeric:'      ( "1"  "1.1"  "1-"  "1.1-").',digits:"           (           ).",alpha:"         .      .",alphanum:"           .      .",dateSuchAs:"     {date}  .",dateInFormatMDY:'      MM/DD/YYYY   ( "12/31/1999").',email:'      .   "fred@domain.com".',url:"  URL   http://www.example.com  .",currencyDollar:"          100.00$ .",oneRequired:"       .",errorPrefix:": ",warningPrefix:": ",noSpace:"       .",reqChkByNode:"   .",requiredChk:"   .",reqChkByName:"  {label}   .",match:"     {matchName}   .",startDate:" ",endDate:" ",currentDate:" ",afterDate:"      {label} ",beforeDate:"      {label} ",startMonth:"     ",sameMonth:"        -         .",creditcard:"        .         . {length}    ."}),Locale.define("fi-FI","Date",{months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","keskuu","heinkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],months_abbr:["tammik.","helmik.","maalisk.","huhtik.","toukok.","kesk.","heink.","elok.","syysk.","lokak.","marrask.","jouluk."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],days_abbr:["su","ma","ti","ke","to","pe","la"],dateOrder:["date","month","year"],shortDate:"%d.%m.%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:".",lessThanMinuteAgo:"vajaa minuutti sitten",minuteAgo:"noin minuutti sitten",minutesAgo:"{delta} minuuttia sitten",hourAgo:"noin tunti sitten",hoursAgo:"noin {delta} tuntia sitten",dayAgo:"piv sitten",daysAgo:"{delta} piv sitten",weekAgo:"viikko sitten",weeksAgo:"{delta} viikkoa sitten",monthAgo:"kuukausi sitten",monthsAgo:"{delta} kuukautta sitten",yearAgo:"vuosi sitten",yearsAgo:"{delta} vuotta sitten",lessThanMinuteUntil:"vajaan minuutin kuluttua",minuteUntil:"noin minuutin kuluttua",minutesUntil:"{delta} minuutin kuluttua",hourUntil:"noin tunnin kuluttua",hoursUntil:"noin {delta} tunnin kuluttua",dayUntil:"pivn kuluttua",daysUntil:"{delta} pivn kuluttua",weekUntil:"viikon kuluttua",weeksUntil:"{delta} viikon kuluttua",monthUntil:"kuukauden kuluttua",monthsUntil:"{delta} kuukauden kuluttua",yearUntil:"vuoden kuluttua",yearsUntil:"{delta} vuoden kuluttua"}),Locale.define("fi-FI","FormValidator",{required:"Tm kentt on pakollinen.",minLength:"Ole hyv ja anna vhintn {minLength} merkki (annoit {length} merkki).",maxLength:"l anna enemp kuin {maxLength} merkki (annoit {length} merkki).",integer:"Ole hyv ja anna kokonaisluku. Luvut, joissa on desimaaleja (esim. 1.25) eivt ole sallittuja.",numeric:'Anna thn kenttn lukuarvo (kuten "1" tai "1.1" tai "-1" tai "-1.1").',digits:"Kyt pelkstn numeroita ja vlimerkkej tss kentss (sytteet, kuten esim. puhelinnumero, jossa on vliviivoja, pilkkuja tai pisteit, kelpaa).",alpha:"Anna thn kenttn vain kirjaimia (a-z). Vlilynnit tai muut merkit eivt ole sallittuja.",alphanum:"Anna thn kenttn vain kirjaimia (a-z) tai numeroita (0-9). Vlilynnit tai muut merkit eivt ole sallittuja.",dateSuchAs:"Ole hyv ja anna kelvollinen pivmr, kuten esimerkiksi {date}",dateInFormatMDY:'Ole hyv ja anna kelvollinen pivmr muodossa pp/kk/vvvv (kuten "12/31/1999")',email:'Ole hyv ja anna kelvollinen shkpostiosoite (kuten esimerkiksi "matti@meikalainen.com").',url:"Ole hyv ja anna kelvollinen URL, kuten esimerkiksi http://www.example.com.",currencyDollar:"Ole hyv ja anna kelvollinen eurosumma (kuten esimerkiksi 100,00 EUR) .",oneRequired:"Ole hyv ja syt jotakin ainakin johonkin nist kentist.",errorPrefix:"Virhe: ",warningPrefix:"Varoitus: ",noSpace:"Tss sytteess ei voi olla vlilyntej",reqChkByNode:"Ei valintoja.",requiredChk:"Tm kentt on pakollinen.",reqChkByName:"Ole hyv ja valitse {label}.",match:"Tmn kentn tulee vastata kentt {matchName}",startDate:"alkupivmr",endDate:"loppupivmr",currentDate:"nykyinen pivmr",afterDate:"Pivmrn tulisi olla sama tai myhisempi ajankohta kuin {label}.",beforeDate:"Pivmrn tulisi olla sama tai aikaisempi ajankohta kuin {label}.",startMonth:"Ole hyv ja valitse aloituskuukausi",sameMonth:"Niden kahden pivmrn tulee olla saman kuun sisll -- sinun pit muuttaa jompaa kumpaa.",creditcard:"Annettu luottokortin numero ei kelpaa. Ole hyv ja tarkista numero sek yrit uudelleen. {length} numeroa sytetty."}),Locale.define("fi-FI","Number",{group:" "}).inherit("EU","Number"),Locale.define("fr-FR","Date",{months:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],months_abbr:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],days_abbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:function(a){return a>1?"":"er"},lessThanMinuteAgo:"il y a moins d'une minute",minuteAgo:"il y a une minute",minutesAgo:"il y a {delta} minutes",hourAgo:"il y a une heure",hoursAgo:"il y a {delta} heures",dayAgo:"il y a un jour",daysAgo:"il y a {delta} jours",weekAgo:"il y a une semaine",weeksAgo:"il y a {delta} semaines",monthAgo:"il y a 1 mois",monthsAgo:"il y a {delta} mois",yearthAgo:"il y a 1 an",yearsAgo:"il y a {delta} ans",lessThanMinuteUntil:"dans moins d'une minute",minuteUntil:"dans une minute",minutesUntil:"dans {delta} minutes",hourUntil:"dans une heure",hoursUntil:"dans {delta} heures",dayUntil:"dans un jour",daysUntil:"dans {delta} jours",weekUntil:"dans 1 semaine",weeksUntil:"dans {delta} semaines",monthUntil:"dans 1 mois",monthsUntil:"dans {delta} mois",yearUntil:"dans 1 an",yearsUntil:"dans {delta} ans"}),Locale.define("fr-FR","FormValidator",{required:"Ce champ est obligatoire.",length:"Veuillez saisir {length} caract&egrave;re(s) (vous avez saisi {elLength} caract&egrave;re(s)",minLength:"Veuillez saisir un minimum de {minLength} caract&egrave;re(s) (vous avez saisi {length} caract&egrave;re(s)).",maxLength:"Veuillez saisir un maximum de {maxLength} caract&egrave;re(s) (vous avez saisi {length} caract&egrave;re(s)).",integer:'Veuillez saisir un nombre entier dans ce champ. Les nombres d&eacute;cimaux (ex : "1,25") ne sont pas autoris&eacute;s.',numeric:'Veuillez saisir uniquement des chiffres dans ce champ (ex : "1" ou "1,1" ou "-1" ou "-1,1").',digits:"Veuillez saisir uniquement des chiffres et des signes de ponctuation dans ce champ (ex : un num&eacute;ro de t&eacute;l&eacute;phone avec des traits d'union est autoris&eacute;).",alpha:"Veuillez saisir uniquement des lettres (a-z) dans ce champ. Les espaces ou autres caract&egrave;res ne sont pas autoris&eacute;s.",alphanum:"Veuillez saisir uniquement des lettres (a-z) ou des chiffres (0-9) dans ce champ. Les espaces ou autres caract&egrave;res ne sont pas autoris&eacute;s.",dateSuchAs:"Veuillez saisir une date correcte comme {date}",dateInFormatMDY:'Veuillez saisir une date correcte, au format JJ/MM/AAAA (ex : "31/11/1999").',email:'Veuillez saisir une adresse de courrier &eacute;lectronique. Par exemple "fred@domaine.com".',url:"Veuillez saisir une URL, comme http://www.exemple.com.",currencyDollar:"Veuillez saisir une quantit&eacute; correcte. Par exemple 100,00&euro;.",oneRequired:"Veuillez s&eacute;lectionner au moins une de ces options.",errorPrefix:"Erreur : ",warningPrefix:"Attention : ",noSpace:"Ce champ n'accepte pas les espaces.",reqChkByNode:"Aucun &eacute;l&eacute;ment n'est s&eacute;lectionn&eacute;.",requiredChk:"Ce champ est obligatoire.",reqChkByName:"Veuillez s&eacute;lectionner un(e) {label}.",match:"Ce champ doit correspondre avec le champ {matchName}.",startDate:"date de d&eacute;but",endDate:"date de fin",currentDate:"date actuelle",afterDate:"La date doit &ecirc;tre identique ou post&eacute;rieure &agrave; {label}.",beforeDate:"La date doit &ecirc;tre identique ou ant&eacute;rieure &agrave; {label}.",startMonth:"Veuillez s&eacute;lectionner un mois de d&eacute;but.",sameMonth:"Ces deux dates doivent &ecirc;tre dans le m&ecirc;me mois - vous devez en modifier une.",creditcard:"Le num&eacute;ro de carte de cr&eacute;dit est invalide. Merci de v&eacute;rifier le num&eacute;ro et de r&eacute;essayer. Vous avez entr&eacute; {length} chiffre(s)."}),Locale.define("fr-FR","Number",{group:" "}).inherit("EU","Number"),Locale.define("he-IL","Date",{months:["","","","","","","","","","","",""],months_abbr:["","","","","","","","","","","",""],days:["","","","","","",""],days_abbr:["","","","","","",""],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:0,ordinal:"",lessThanMinuteAgo:"  ",minuteAgo:" ",minutesAgo:" {delta} ",hourAgo:" ",hoursAgo:" {delta} ",dayAgo:" ",daysAgo:" {delta} ",weekAgo:" ",weeksAgo:" {delta} ",monthAgo:" ",monthsAgo:" {delta} ",yearAgo:" ",yearsAgo:" {delta} ",lessThanMinuteUntil:"  ",minuteUntil:" ",minutesUntil:" {delta} ",hourUntil:" ",hoursUntil:" {delta} ",dayUntil:" ",daysUntil:" {delta} ",weekUntil:" ",weeksUntil:" {delta} ",monthUntil:" ",monthsUntil:" {delta} ",yearUntil:" ",yearsUntil:" {delta} "}),Locale.define("he-IL","FormValidator",{required:"   .",minLength:"   {minLength}  ( {length} ).",maxLength:"   {maxLength}  ( {length} ).",integer:"     .   ( 1.25)  .",numeric:'       ( "1", "1.1", "-1"  "-1.1").',digits:"        (,        ).",alpha:"     (a-z)  .      .",alphanum:"     (a-z)   (0-9)  .      .",dateSuchAs:"   ,  {date}",dateInFormatMDY:'     MM/DD/YYYY ( "12/31/1999")',email:'    . : "fred@domain.com".',url:"    ,  http://www.example.com.",currencyDollar:"    .  $100.00.",oneRequired:"    .",errorPrefix:": ",warningPrefix:": ",noSpace:"    .",reqChkByNode:"   .",requiredChk:"  .",reqChkByName:"  {label}.",match:"     {matchName}",startDate:" ",endDate:" ",currentDate:" ",afterDate:"      {label}.",beforeDate:"      {label}.",startMonth:"   ",sameMonth:"       -    .",creditcard:"     .   .  {length} ."}),Locale.define("he-IL","Number",{decimal:".",group:",",currency:{suffix:" "}}),Locale.define("hu-HU","Date",{months:["Janur","Februr","Mrcius","prilis","Mjus","Jnius","Jlius","Augusztus","Szeptember","Oktber","November","December"],months_abbr:["jan.","febr.","mrc.","pr.","mj.","jn.","jl.","aug.","szept.","okt.","nov.","dec."],days:["Vasrnap","Htf","Kedd","Szerda","Cstrtk","Pntek","Szombat"],days_abbr:["V","H","K","Sze","Cs","P","Szo"],dateOrder:["year","month","date"],shortDate:"%Y.%m.%d.",shortTime:"%I:%M",AM:"de.",PM:"du.",firstDayOfWeek:1,ordinal:".",lessThanMinuteAgo:"alig egy perce",minuteAgo:"egy perce",minutesAgo:"{delta} perce",hourAgo:"egy rja",hoursAgo:"{delta} rja",dayAgo:"1 napja",daysAgo:"{delta} napja",weekAgo:"1 hete",weeksAgo:"{delta} hete",monthAgo:"1 hnapja",monthsAgo:"{delta} hnapja",yearAgo:"1 ve",yearsAgo:"{delta} ve",lessThanMinuteUntil:"alig egy perc mlva",minuteUntil:"egy perc mlva",minutesUntil:"{delta} perc mlva",hourUntil:"egy ra mlva",hoursUntil:"{delta} ra mlva",dayUntil:"1 nap mlva",daysUntil:"{delta} nap mlva",weekUntil:"1 ht mlva",weeksUntil:"{delta} ht mlva",monthUntil:"1 hnap mlva",monthsUntil:"{delta} hnap mlva",yearUntil:"1 v mlva",yearsUntil:"{delta} v mlva"}),Locale.define("hu-HU","FormValidator",{required:"A mez kitltse ktelez.",minLength:"Legalbb {minLength} karakter megadsa szksges (megadva {length} karakter).",maxLength:"Legfeljebb {maxLength} karakter megadsa lehetsges (megadva {length} karakter).",integer:"Egsz szm megadsa szksges. A tizedesjegyek (pl. 1.25) nem engedlyezettek.",numeric:'Szm megadsa szksges (pl. "1" vagy "1.1" vagy "-1" vagy "-1.1").',digits:"Csak szmok s rsjelek megadsa lehetsges (pl. telefonszm ktjelek s/vagy perjelekkel).",alpha:"Csak betk (a-z) megadsa lehetsges. Szkz s egyb karakterek nem engedlyezettek.",alphanum:"Csak betk (a-z) vagy szmok (0-9) megadsa lehetsges. Szkz s egyb karakterek nem engedlyezettek.",dateSuchAs:"Vals dtum megadsa szksges (pl. {date}).",dateInFormatMDY:'Vals dtum megadsa szksges .HH.NN. formban. (pl. "1999.12.31.")',email:'Vals e-mail cm megadsa szksges (pl. "fred@domain.hu").',url:"Vals URL megadsa szksges (pl. http://www.example.com).",currencyDollar:"Vals pnzsszeg megadsa szksges (pl. 100.00 Ft.).",oneRequired:"Az albbi mezk legalbb egyiknek kitltse ktelez.",errorPrefix:"Hiba: ",warningPrefix:"Figyelem: ",noSpace:"A mez nem tartalmazhat szkzket.",reqChkByNode:"Nincs egyetlen kijellt elem sem.",requiredChk:"A mez kitltse ktelez.",reqChkByName:"Egy {label} kivlasztsa szksges.",match:"A meznek egyeznie kell a(z) {matchName} mezvel.",startDate:"a kezdet dtuma",endDate:"a vg dtuma",currentDate:"jelenlegi dtum",afterDate:"A dtum nem lehet kisebb, mint {label}.",beforeDate:"A dtum nem lehet nagyobb, mint {label}.",startMonth:"Kezdeti hnap megadsa szksges.",sameMonth:"A kt dtumnak ugyanazon hnapban kell lennie.",creditcard:"A megadott bankkrtyaszm nem valdi (megadva {length} szmjegy)."}),Locale.define("it-IT","Date",{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],months_abbr:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],days:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],days_abbr:["dom","lun","mar","mer","gio","ven","sab"],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H.%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"meno di un minuto fa",minuteAgo:"circa un minuto fa",minutesAgo:"circa {delta} minuti fa",hourAgo:"circa un'ora fa",hoursAgo:"circa {delta} ore fa",dayAgo:"circa 1 giorno fa",daysAgo:"circa {delta} giorni fa",weekAgo:"una settimana fa",weeksAgo:"{delta} settimane fa",monthAgo:"un mese fa",monthsAgo:"{delta} mesi fa",yearAgo:"un anno fa",yearsAgo:"{delta} anni fa",lessThanMinuteUntil:"tra meno di un minuto",minuteUntil:"tra circa un minuto",minutesUntil:"tra circa {delta} minuti",hourUntil:"tra circa un'ora",hoursUntil:"tra circa {delta} ore",dayUntil:"tra circa un giorno",daysUntil:"tra circa {delta} giorni",weekUntil:"tra una settimana",weeksUntil:"tra {delta} settimane",monthUntil:"tra un mese",monthsUntil:"tra {delta} mesi",yearUntil:"tra un anno",yearsUntil:"tra {delta} anni"}),Locale.define("it-IT","FormValidator",{required:"Il campo &egrave; obbligatorio.",minLength:"Inserire almeno {minLength} caratteri (ne sono stati inseriti {length}).",maxLength:"Inserire al massimo {maxLength} caratteri (ne sono stati inseriti {length}).",integer:"Inserire un numero intero. Non sono consentiti decimali (es.: 1.25).",numeric:'Inserire solo valori numerici (es.: "1" oppure "1.1" oppure "-1" oppure "-1.1").',digits:"Inserire solo numeri e caratteri di punteggiatura. Per esempio &egrave; consentito un numero telefonico con trattini o punti.",alpha:"Inserire solo lettere (a-z). Non sono consentiti spazi o altri caratteri.",alphanum:"Inserire solo lettere (a-z) o numeri (0-9). Non sono consentiti spazi o altri caratteri.",dateSuchAs:"Inserire una data valida del tipo {date}",dateInFormatMDY:'Inserire una data valida nel formato MM/GG/AAAA (es.: "12/31/1999")',email:'Inserire un indirizzo email valido. Per esempio "nome@dominio.com".',url:'Inserire un indirizzo valido. Per esempio "http://www.example.com".',currencyDollar:'Inserire un importo valido. Per esempio "$100.00".',oneRequired:"Completare almeno uno dei campi richiesti.",errorPrefix:"Errore: ",warningPrefix:"Attenzione: ",noSpace:"Non sono consentiti spazi.",reqChkByNode:"Nessuna voce selezionata.",requiredChk:"Il campo &egrave; obbligatorio.",reqChkByName:"Selezionare un(a) {label}.",match:"Il valore deve corrispondere al campo {matchName}",startDate:"data d'inizio",endDate:"data di fine",currentDate:"data attuale",afterDate:"La data deve corrispondere o essere successiva al {label}.",beforeDate:"La data deve corrispondere o essere precedente al {label}.",startMonth:"Selezionare un mese d'inizio",sameMonth:"Le due date devono essere dello stesso mese - occorre modificarne una."}),Locale.define("ja-JP","Date",{months:["1","2","3","4","5","6","7","8","9","10","11","12"],months_abbr:["1","2","3","4","5","6","7","8","9","10","11","12"],days:["","","","","","",""],days_abbr:["","","","","","",""],dateOrder:["year","month","date"],shortDate:"%Y/%m/%d",shortTime:"%H:%M",AM:"",PM:"",firstDayOfWeek:0,ordinal:"",lessThanMinuteAgo:"1",minuteAgo:"1",minutesAgo:"{delta}",hourAgo:"1",hoursAgo:"{delta}",dayAgo:"1",daysAgo:"{delta}",weekAgo:"1",weeksAgo:"{delta}",monthAgo:"1",monthsAgo:"{delta}",yearAgo:"1",yearsAgo:"{delta}",lessThanMinuteUntil:"1",minuteUntil:"1",minutesUntil:"{delta}",hourUntil:"1",hoursUntil:"{delta}",dayUntil:"1",daysUntil:"{delta}",weekUntil:"1",weeksUntil:"{delta}",monthUntil:"1",monthsUntil:"{delta}",yearUntil:"1",yearsUntil:"{delta}"}),Locale.define("ja-JP","FormValidator",{required:"",minLength:"{minLength}({length})",maxLength:"{maxLength}({length})",integer:"",numeric:'(: "1", "1.1", "-1", "-1.1"....)',digits:" (: -+).",alpha:"",alphanum:"",dateSuchAs:"{date}",dateInFormatMDY:'YYYY/MM/DD (i.e. "1999/12/31")',email:"",url:"URL",currencyDollar:"",oneRequired:"",errorPrefix:": ",warningPrefix:": ",noSpace:"",reqChkByNode:"",requiredChk:"",reqChkByName:"{label}",match:"{matchName}",startDate:"",endDate:"",currentDate:"",afterDate:"{label}",beforeDate:"{label}",startMonth:"",sameMonth:""}),Locale.define("ja-JP","Number",{decimal:".",group:",",currency:{decimals:0,prefix:"\\"}}),Locale.define("nl-NL","Date",{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],months_abbr:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],days_abbr:["zo","ma","di","wo","do","vr","za"],dateOrder:["date","month","year"],shortDate:"%d-%m-%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"e",lessThanMinuteAgo:"minder dan een minuut geleden",minuteAgo:"ongeveer een minuut geleden",minutesAgo:"{delta} minuten geleden",hourAgo:"ongeveer een uur geleden",hoursAgo:"ongeveer {delta} uur geleden",dayAgo:"een dag geleden",daysAgo:"{delta} dagen geleden",weekAgo:"een week geleden",weeksAgo:"{delta} weken geleden",monthAgo:"een maand geleden",monthsAgo:"{delta} maanden geleden",yearAgo:"een jaar geleden",yearsAgo:"{delta} jaar geleden",lessThanMinuteUntil:"over minder dan een minuut",minuteUntil:"over ongeveer een minuut",minutesUntil:"over {delta} minuten",hourUntil:"over ongeveer een uur",hoursUntil:"over {delta} uur",dayUntil:"over ongeveer een dag",daysUntil:"over {delta} dagen",weekUntil:"over een week",weeksUntil:"over {delta} weken",monthUntil:"over een maand",monthsUntil:"over {delta} maanden",yearUntil:"over een jaar",yearsUntil:"over {delta} jaar"}),Locale.define("nl-NL","FormValidator",{required:"Dit veld is verplicht.",length:"Vul precies {length} karakters in (je hebt {elLength} karakters ingevoerd).",minLength:"Vul minimaal {minLength} karakters in (je hebt {length} karakters ingevoerd).",maxLength:"Vul niet meer dan {maxLength} karakters in (je hebt {length} karakters ingevoerd).",integer:"Vul een getal in. Getallen met decimalen (bijvoorbeeld 1.25) zijn niet toegestaan.",numeric:'Vul alleen numerieke waarden in (bijvoorbeeld "1" of "1.1" of "-1" of "-1.1").',digits:"Vul alleen nummers en leestekens in (bijvoorbeeld een telefoonnummer met streepjes is toegestaan).",alpha:"Vul alleen letters in (a-z). Spaties en andere karakters zijn niet toegestaan.",alphanum:"Vul alleen letters (a-z) of nummers (0-9) in. Spaties en andere karakters zijn niet toegestaan.",dateSuchAs:"Vul een geldige datum in, zoals {date}",dateInFormatMDY:'Vul een geldige datum, in het formaat MM/DD/YYYY (bijvoorbeeld "12/31/1999")',email:'Vul een geldig e-mailadres in. Bijvoorbeeld "fred@domein.nl".',url:"Vul een geldige URL in, zoals http://www.example.com.",currencyDollar:"Vul een geldig $ bedrag in. Bijvoorbeeld $100.00 .",oneRequired:"Vul iets in bij in ieder geval een van deze velden.",warningPrefix:"Waarschuwing: ",errorPrefix:"Fout: ",noSpace:"Spaties zijn niet toegestaan in dit veld.",reqChkByNode:"Er zijn geen items geselecteerd.",requiredChk:"Dit veld is verplicht.",reqChkByName:"Selecteer een {label}.",match:"Dit veld moet overeen komen met het {matchName} veld",startDate:"de begin datum",endDate:"de eind datum",currentDate:"de huidige datum",afterDate:"De datum moet hetzelfde of na {label} zijn.",beforeDate:"De datum moet hetzelfde of voor {label} zijn.",startMonth:"Selecteer een begin maand",sameMonth:"Deze twee data moeten in dezelfde maand zijn - u moet een van beide aanpassen.",creditcard:"Het ingevulde creditcardnummer is niet geldig. Controleer het nummer en probeer opnieuw. {length} getallen ingevuld."}),Locale.define("nl-NL").inherit("EU","Number"),Locale.define("no-NO","Date",{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],months_abbr:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],days:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],days_abbr:["Sn","Man","Tir","Ons","Tor","Fre","Lr"],dateOrder:["date","month","year"],shortDate:"%d.%m.%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,lessThanMinuteAgo:"mindre enn et minutt siden",minuteAgo:"omtrent et minutt siden",minutesAgo:"{delta} minutter siden",hourAgo:"omtrent en time siden",hoursAgo:"omtrent {delta} timer siden",dayAgo:"{delta} dag siden",daysAgo:"{delta} dager siden",weekAgo:"en uke siden",weeksAgo:"{delta} uker siden",monthAgo:"en mned siden",monthsAgo:"{delta} mneder siden",yearAgo:"ett r siden",yearsAgo:"{delta} r siden",lessThanMinuteUntil:"mindre enn et minutt til",minuteUntil:"omtrent et minutt til",minutesUntil:"{delta} minutter til",hourUntil:"omtrent en time til",hoursUntil:"omtrent {delta} timer til",dayUntil:"en dag til",daysUntil:"{delta} dager til",weekUntil:"en uke til",weeksUntil:"{delta} uker til",monthUntil:"en mned til",monthsUntil:"{delta} mneder til",yearUntil:"et r til",yearsUntil:"{delta} r til"}),Locale.define("no-NO","FormValidator",{required:"Dette feltet er pkrevd.",minLength:"Vennligst skriv inn minst {minLength} tegn (du skrev {length} tegn).",maxLength:"Vennligst skriv inn maksimalt {maxLength} tegn (du skrev {length} tegn).",integer:"Vennligst skriv inn et tall i dette feltet. Tall med desimaler (for eksempel 1,25) er ikke tillat.",numeric:'Vennligst skriv inn kun numeriske verdier i dette feltet (for eksempel "1", "1.1", "-1" eller "-1.1").',digits:"Vennligst bruk kun nummer og skilletegn i dette feltet.",alpha:"Vennligst bruk kun bokstaver (a-z) i dette feltet. Ingen mellomrom eller andre tegn er tillat.",alphanum:"Vennligst bruk kun bokstaver (a-z) eller nummer (0-9) i dette feltet. Ingen mellomrom eller andre tegn er tillat.",dateSuchAs:"Vennligst skriv inn en gyldig dato, som {date}",dateInFormatMDY:'Vennligst skriv inn en gyldig dato, i formatet MM/DD/YYYY (for eksempel "12/31/1999")',email:'Vennligst skriv inn en gyldig epost-adresse. For eksempel "espen@domene.no".',url:"Vennligst skriv inn en gyldig URL, for eksempel http://www.example.com.",currencyDollar:"Vennligst fyll ut et gyldig $ belp. For eksempel $100.00 .",oneRequired:"Vennligst fyll ut noe i minst ett av disse feltene.",errorPrefix:"Feil: ",warningPrefix:"Advarsel: "}),Locale.define("pl-PL","Date",{months:["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],months_abbr:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa","lis","gru"],days:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"],days_abbr:["niedz.","pon.","wt.","r.","czw.","pt.","sob."],dateOrder:["year","month","date"],shortDate:"%Y-%m-%d",shortTime:"%H:%M",AM:"nad ranem",PM:"po poudniu",firstDayOfWeek:1,ordinal:function(a){return a>3&&21>a?"ty":["ty","szy","gi","ci","ty"][Math.min(a%10,4)]
},lessThanMinuteAgo:"mniej ni minute temu",minuteAgo:"okoo minut temu",minutesAgo:"{delta} minut temu",hourAgo:"okoo godzin temu",hoursAgo:"okoo {delta} godzin temu",dayAgo:"Wczoraj",daysAgo:"{delta} dni temu",lessThanMinuteUntil:"za nieca minut",minuteUntil:"za okoo minut",minutesUntil:"za {delta} minut",hourUntil:"za okoo godzin",hoursUntil:"za okoo {delta} godzin",dayUntil:"za 1 dzie",daysUntil:"za {delta} dni"}),Locale.define("pl-PL","FormValidator",{required:"To pole jest wymagane.",minLength:"Wymagane jest przynajmniej {minLength} znakw (wpisanych zostao tylko {length}).",maxLength:"Dozwolone jest nie wicej ni {maxLength} znakw (wpisanych zostao {length})",integer:"To pole wymaga liczb caych. Liczby dziesitne (np. 1.25) s niedozwolone.",numeric:'Prosimy uywa tylko numerycznych wartoci w tym polu (np. "1", "1.1", "-1" lub "-1.1").',digits:"Prosimy uywa liczb oraz zankow punktuacyjnych w typ polu (dla przykadu, przy numerze telefonu mylniki i kropki s dozwolone).",alpha:"Prosimy uywa tylko liter (a-z) w tym polu. Spacje oraz inne znaki s niedozwolone.",alphanum:"Prosimy uywa tylko liter (a-z) lub liczb (0-9) w tym polu. Spacje oraz inne znaki s niedozwolone.",dateSuchAs:"Prosimy poda prawidow dat w formacie: {date}",dateInFormatMDY:'Prosimy poda poprawn date w formacie DD.MM.RRRR (i.e. "12.01.2009")',email:'Prosimy poda prawidowy adres e-mail, np. "jan@domena.pl".',url:"Prosimy poda prawidowy adres URL, np. http://www.example.com.",currencyDollar:"Prosimy poda prawidow sum w PLN. Dla przykadu: 100.00 PLN.",oneRequired:"Prosimy wypeni chocia jedno z pl.",errorPrefix:"Bd: ",warningPrefix:"Uwaga: ",noSpace:"W tym polu nie mog znajdowa si spacje.",reqChkByNode:"Brak zaznaczonych elementw.",requiredChk:"To pole jest wymagane.",reqChkByName:"Prosimy wybra z {label}.",match:"To pole musi by takie samo jak {matchName}",startDate:"data pocztkowa",endDate:"data kocowa",currentDate:"aktualna data",afterDate:"Podana data poinna by taka sama lub po {label}.",beforeDate:"Podana data poinna by taka sama lub przed {label}.",startMonth:"Prosimy wybra pocztkowy miesic.",sameMonth:"Te dwie daty musz by w zakresie tego samego miesica - wymagana jest zmiana ktrego z pl."}),Locale.define("pt-PT","Date",{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],months_abbr:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],days:["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"],days_abbr:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],dateOrder:["date","month","year"],shortDate:"%d-%m-%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"h menos de um minuto",minuteAgo:"h cerca de um minuto",minutesAgo:"h {delta} minutos",hourAgo:"h cerca de uma hora",hoursAgo:"h cerca de {delta} horas",dayAgo:"h um dia",daysAgo:"h {delta} dias",weekAgo:"h uma semana",weeksAgo:"h {delta} semanas",monthAgo:"h um ms",monthsAgo:"h {delta} meses",yearAgo:"h um ano",yearsAgo:"h {delta} anos",lessThanMinuteUntil:"em menos de um minuto",minuteUntil:"em um minuto",minutesUntil:"em {delta} minutos",hourUntil:"em uma hora",hoursUntil:"em {delta} horas",dayUntil:"em um dia",daysUntil:"em {delta} dias",weekUntil:"em uma semana",weeksUntil:"em {delta} semanas",monthUntil:"em um ms",monthsUntil:"em {delta} meses",yearUntil:"em um ano",yearsUntil:"em {delta} anos"}),Locale.define("pt-BR","Date",{shortDate:"%d/%m/%Y"}).inherit("pt-PT","Date"),Locale.define("pt-BR","FormValidator",{required:"Este campo  obrigatrio.",minLength:"Digite pelo menos {minLength} caracteres (tamanho atual: {length}).",maxLength:"No digite mais de {maxLength} caracteres (tamanho atual: {length}).",integer:"Por favor digite apenas um nmero inteiro neste campo. No so permitidos nmeros decimais (por exemplo, 1,25).",numeric:'Por favor digite apenas valores numricos neste campo (por exemplo, "1" ou "1.1" ou "-1" ou "-1,1").',digits:"Por favor use apenas nmeros e pontuao neste campo (por exemplo, um nmero de telefone com traos ou pontos  permitido).",alpha:"Por favor use somente letras (a-z). Espao e outros caracteres no so permitidos.",alphanum:"Use somente letras (a-z) ou nmeros (0-9) neste campo. Espao e outros caracteres no so permitidos.",dateSuchAs:"Digite uma data vlida, como {date}",dateInFormatMDY:'Digite uma data vlida, como DD/MM/YYYY (por exemplo, "31/12/1999")',email:'Digite um endereo de email vlido. Por exemplo "nome@dominio.com".',url:"Digite uma URL vlida. Exemplo: http://www.example.com.",currencyDollar:"Digite um valor em dinheiro vlido. Exemplo: R$100,00 .",oneRequired:"Digite algo para pelo menos um desses campos.",errorPrefix:"Erro: ",warningPrefix:"Aviso: ",noSpace:"No  possvel digitar espaos neste campo.",reqChkByNode:"No foi selecionado nenhum item.",requiredChk:"Este campo  obrigatrio.",reqChkByName:"Por favor digite um {label}.",match:"Este campo deve ser igual ao campo {matchName}.",startDate:"a data inicial",endDate:"a data final",currentDate:"a data atual",afterDate:"A data deve ser igual ou posterior a {label}.",beforeDate:"A data deve ser igual ou anterior a {label}.",startMonth:"Por favor selecione uma data inicial.",sameMonth:"Estas duas datas devem ter o mesmo ms - voc deve modificar uma das duas.",creditcard:"O nmero do carto de crdito informado  invlido. Por favor verifique o valor e tente novamente. {length} nmeros informados."}),Locale.define("pt-BR","Number",{decimal:",",group:".",currency:{prefix:"R$ "}}),Locale.define("pt-PT","FormValidator",{required:"Este campo  necessrio.",minLength:"Digite pelo menos{minLength} caracteres (comprimento {length} caracteres).",maxLength:"No insira mais de {maxLength} caracteres (comprimento {length} caracteres).",integer:"Digite um nmero inteiro neste domnio. Com nmeros decimais (por exemplo, 1,25), no so permitidas.",numeric:'Digite apenas valores numricos neste domnio (p.ex., "1" ou "1.1" ou "-1" ou "-1,1").',digits:"Por favor, use nmeros e pontuao apenas neste campo (p.ex., um nmero de telefone com traos ou pontos  permitida).",alpha:"Por favor use somente letras (a-z), com nesta rea. No utilize espaos nem outros caracteres so permitidos.",alphanum:"Use somente letras (a-z) ou nmeros (0-9) neste campo. No utilize espaos nem outros caracteres so permitidos.",dateSuchAs:"Digite uma data vlida, como {date}",dateInFormatMDY:'Digite uma data vlida, como DD/MM/YYYY (p.ex. "31/12/1999")',email:'Digite um endereo de email vlido. Por exemplo "fred@domain.com".',url:"Digite uma URL vlida, como http://www.example.com.",currencyDollar:"Digite um valor vlido $. Por exemplo $ 100,00. ",oneRequired:"Digite algo para pelo menos um desses insumos.",errorPrefix:"Erro: ",warningPrefix:"Aviso: "}),function(){var a=function(a,b,c,d,e){var f=a%10,g=a%100;return 1==f&&11!=g?b:2!=f&&3!=f&&4!=f||12==g||13==g||14==g?0==f||5==f||6==f||7==f||8==f||9==f||11==g||12==g||13==g||14==g?d:e:c};Locale.define("ru-RU","Date",{months:["","","","","","","","","","","",""],months_abbr:["","","","","","","","","","","",""],days:["","","","","","",""],days_abbr:["","","","","","",""],dateOrder:["date","month","year"],shortDate:"%d.%m.%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"  ",minuteAgo:" ",minutesAgo:function(b){return"{delta} "+a(b,"","","")+" "},hourAgo:" ",hoursAgo:function(b){return"{delta} "+a(b,"","","")+" "},dayAgo:"",daysAgo:function(b){return"{delta} "+a(b,"","","")+" "},weekAgo:" ",weeksAgo:function(b){return"{delta} "+a(b,"","","")+" "},monthAgo:" ",monthsAgo:function(b){return"{delta} "+a(b,"","","")+" "},yearAgo:" ",yearsAgo:function(b){return"{delta} "+a(b,"","","")+" "},lessThanMinuteUntil:"   ",minuteUntil:" ",minutesUntil:function(b){return" {delta} "+a(b,"","","")},hourUntil:" ",hoursUntil:function(b){return" {delta} "+a(b,"","","")},dayUntil:"",daysUntil:function(b){return" {delta} "+a(b,"","","")},weekUntil:" ",weeksUntil:function(b){return" {delta} "+a(b,"","","")},monthUntil:" ",monthsUntil:function(b){return" {delta} "+a(b,"","","")},yearUntil:"",yearsUntil:function(b){return" {delta} "+a(b,"","","")}})}(),Locale.define("ru-RU","FormValidator",{required:"    .",minLength:",    {minLength}  (  {length}).",maxLength:",    {maxLength}  (  {length}).",integer:",     .   ( 1.25)   .",numeric:',      ( "1"  "1.1",  "-1",  "-1.1").',digits:"           (,        ).",alpha:"        (a-z).     .",alphanum:"        (a-z)   (0-9).     .",dateSuchAs:",    {date}",dateInFormatMDY:',     // ( "12/31/1999")',email:',   -.   "fred@domain.com".',url:",     http://www.example.com.",currencyDollar:",    . : $100.00 .",oneRequired:",   -     .",errorPrefix:": ",warningPrefix:": "}),function(){var a=function(a,b,c,d){return 1==a?b:2==a||3==a||4==a?c:d};Locale.define("sk-SK","Date",{months:["Janur","Februr","Marec","Aprl","Mj","Jn","Jl","August","September","Oktber","November","December"],months_abbr:["janura","februra","marca","aprla","mja","jna","jla","augusta","septembra","oktbra","novembra","decembra"],days:["Nedele","Pondel","ter","Streda","tvrtek","Ptek","Sobota"],days_abbr:["ne","po","ut","st","t","pi","so"],dateOrder:["date","month","year"],shortDate:"%d.%m.%Y",shortTime:"%H:%M",AM:"dop.",PM:"pop.",firstDayOfWeek:1,ordinal:".",lessThanMinuteAgo:"pred chvou",minuteAgo:"pribline pred mintou",minutesAgo:function(b){return"pred {delta} "+a(b,"mintou","mintami","mintami")},hourAgo:"pribline pred hodinou",hoursAgo:function(b){return"pred {delta} "+a(b,"hodinou","hodinami","hodinami")},dayAgo:"pred dom",daysAgo:function(b){return"pred {delta} "+a(b,"dom","dami","dami")},weekAgo:"pred tdom",weeksAgo:function(b){return"pred {delta} "+a(b,"tdom","tdami","tdami")},monthAgo:"pred mesiacom",monthsAgo:function(b){return"pred {delta} "+a(b,"mesiacom","mesiacmi","mesiacmi")},yearAgo:"pred rokom",yearsAgo:function(b){return"pred {delta} "+a(b,"rokom","rokmi","rokmi")},lessThanMinuteUntil:"o chvu",minuteUntil:"pribline o mintu",minutesUntil:function(b){return"o {delta} "+a(b,"mintu","minty","minty")},hourUntil:"pribline o hodinu",hoursUntil:function(b){return"o {delta} "+a(b,"hodinu","hodiny","hodn")},dayUntil:"o de",daysUntil:function(b){return"o {delta} "+a(b,"de","dni","dn")},weekUntil:"o tde",weeksUntil:function(b){return"o {delta} "+a(b,"tde","tdne","tdov")},monthUntil:"o mesiac",monthsUntil:function(b){return"o {delta} "+a(b,"mesiac","mesiace","mesiacov")},yearUntil:"o rok",yearsUntil:function(b){return"o {delta} "+a(b,"rok","roky","rokov")}})}(),Locale.define("sk-SK","FormValidator",{required:"Tto poloka je povinn.",minLength:"Zadajte prosm aspo {minLength} znakov (momentlne {length} znakov).",maxLength:"Zadajte prosm menej ako {maxLength} znakov (momentlne {length} znakov).",integer:"Zadajte prosm cel slo. Desetinn sla (napr. 1.25) nie s povolen.",numeric:"Zadajte len seln hodnoty (t.j. 1 alebo 1.1 alebo -1 alebo -1.1).",digits:"Zadajte prosm len sla a interpunkn znamienka (naprklad telefnne slo s pomlkami albo bodkami je povolen).",alpha:"Zadajte prosm len psmen (a-z). Medzery alebo in znaky nie s povolen.",alphanum:"Zadajte prosm len psmen (a-z) alebo slice (0-9). Medzery alebo in znaky nie s povolen.",dateSuchAs:"Zadajte prosm platn dtum v tvare {date}",dateInFormatMDY:"Zadajte prosm platn datum v tvare MM / DD / RRRR (t.j. 12/31/1999)",email:"Zadajte prosm platn emailov adresu. Naprklad fred@domain.com.",url:"Zadajte prosm platno adresu URL v tvare http://www.example.com.",currencyDollar:"Zadajte prosm platn iastku. Naprklad $100.00.",oneRequired:"Zadajte prosm aspo jednu hodnotu z tchto poloiek.",errorPrefix:"Chyba: ",warningPrefix:"Upozornenie: ",noSpace:"V tejto polole nie s povolen medzery",reqChkByNode:"Nie s vybran iadne poloky.",requiredChk:"Tto poloka je povinn.",reqChkByName:"Prosm vyberte {label}.",match:"Tto poloka sa mus zhodova s polokou {matchName}",startDate:"dtum zaiatku",endDate:"dtum ukonenia",currendDate:"aktulny dtum",afterDate:"Dtum by mal b rovnak alebo v ako {label}.",beforeDate:"Dtum by mal by rovnak alebo men ako {label}.",startMonth:"Vyberte poiaton mesiac.",sameMonth:"Tieto dva dtumy musia b v rovnakom mesiaci - zmete jeden z nich.",creditcard:"Zadan slo kreditnej karty je neplatn. Prosm, opravte ho. Bolo zadanch {length} slic."}),function(){var a=function(a,b,c,d,e){return a>=1&&3>=a?arguments[a]:e};Locale.define("sl-SI","Date",{months:["januar","februar","marec","april","maj","junij","julij","avgust","september","oktober","november","december"],months_abbr:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec"],days:["nedelja","ponedeljek","torek","sreda","etrtek","petek","sobota"],days_abbr:["ned","pon","tor","sre","et","pet","sob"],dateOrder:["date","month","year"],shortDate:"%d.%m.%Y",shortTime:"%H.%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:".",lessThanMinuteAgo:"manj kot minuto nazaj",minuteAgo:"minuto nazaj",minutesAgo:function(b){return"{delta} "+a(b,"minuto","minuti","minute","minut")+" nazaj"},hourAgo:"uro nazaj",hoursAgo:function(b){return"{delta} "+a(b,"uro","uri","ure","ur")+" nazaj"},dayAgo:"dan nazaj",daysAgo:function(b){return"{delta} "+a(b,"dan","dneva","dni","dni")+" nazaj"},weekAgo:"teden nazaj",weeksAgo:function(b){return"{delta} "+a(b,"teden","tedna","tedne","tednov")+" nazaj"},monthAgo:"mesec nazaj",monthsAgo:function(b){return"{delta} "+a(b,"mesec","meseca","mesece","mesecov")+" nazaj"},yearthAgo:"leto nazaj",yearsAgo:function(b){return"{delta} "+a(b,"leto","leti","leta","let")+" nazaj"},lessThanMinuteUntil:"e manj kot minuto",minuteUntil:"e minuta",minutesUntil:function(b){return"e {delta} "+a(b,"minuta","minuti","minute","minut")},hourUntil:"e ura",hoursUntil:function(b){return"e {delta} "+a(b,"ura","uri","ure","ur")},dayUntil:"e dan",daysUntil:function(b){return"e {delta} "+a(b,"dan","dneva","dnevi","dni")},weekUntil:"e tedn",weeksUntil:function(b){return"e {delta} "+a(b,"teden","tedna","tedni","tednov")},monthUntil:"e mesec",monthsUntil:function(b){return"e {delta} "+a(b,"mesec","meseca","meseci","mesecov")},yearUntil:"e leto",yearsUntil:function(b){return"e {delta} "+a(b,"leto","leti","leta","let")}})}(),Locale.define("sl-SI","FormValidator",{required:"To polje je obvezno",minLength:"Prosim, vnesite vsaj {minLength} znakov (vnesli ste {length} znakov).",maxLength:"Prosim, ne vnesite ve kot {maxLength} znakov (vnesli ste {length} znakov).",integer:"Prosim, vnesite celo tevilo. Decimalna tevila (kot 1,25) niso dovoljena.",numeric:'Prosim, vnesite samo numerine vrednosti (kot "1" ali "1.1" ali "-1" ali "-1.1").',digits:"Prosim, uporabite tevilke in loila le na tem polju (na primer, dovoljena je telefonska tevilka z pomilaji ali pikami).",alpha:"Prosim, uporabite le rke v tem plju. Presledki in drugi znaki niso dovoljeni.",alphanum:"Prosim, uporabite samo rke ali tevilke v tem polju. Presledki in drugi znaki niso dovoljeni.",dateSuchAs:"Prosim, vnesite pravilen datum kot {date}",dateInFormatMDY:'Prosim, vnesite pravilen datum kot MM.DD.YYYY (primer "12.31.1999")',email:'Prosim, vnesite pravilen email naslov. Na primer "fred@domain.com".',url:"Prosim, vnesite pravilen URL kot http://www.example.com.",currencyDollar:"Prosim, vnesit epravilno vrednost . Primer 100,00 .",oneRequired:"Prosimo, vnesite nekaj za vsaj eno izmed teh polj.",errorPrefix:"Napaka: ",warningPrefix:"Opozorilo: ",noSpace:"To vnosno polje ne dopua presledkov.",reqChkByNode:"Ni niste izbrali.",requiredChk:"To polje je obvezno",reqChkByName:"Prosim, izberite {label}.",match:"To polje se mora ujemati z poljem {matchName}",startDate:"datum zaetka",endDate:"datum konca",currentDate:"trenuten datum",afterDate:"Datum bi moral biti isti ali po {label}.",beforeDate:"Datum bi moral biti isti ali pred {label}.",startMonth:"Prosim, vnesite zaetni datum",sameMonth:"Ta dva datuma morata biti v istem mesecu - premeniti morate eno ali drugo.",creditcard:"tevilka kreditne kartice ni pravilna. Preverite tevilko ali poskusite e enkrat. Vneenih {length} znakov."}),Locale.define("sv-SE","Date",{months:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],months_abbr:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],days:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"],days_abbr:["sn","mn","tis","ons","tor","fre","lr"],dateOrder:["year","month","date"],shortDate:"%Y-%m-%d",shortTime:"%H:%M",AM:"",PM:"",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"mindre n en minut sedan",minuteAgo:"ungefr en minut sedan",minutesAgo:"{delta} minuter sedan",hourAgo:"ungefr en timme sedan",hoursAgo:"ungefr {delta} timmar sedan",dayAgo:"1 dag sedan",daysAgo:"{delta} dagar sedan",lessThanMinuteUntil:"mindre n en minut sedan",minuteUntil:"ungefr en minut sedan",minutesUntil:"{delta} minuter sedan",hourUntil:"ungefr en timme sedan",hoursUntil:"ungefr {delta} timmar sedan",dayUntil:"1 dag sedan",daysUntil:"{delta} dagar sedan"}),Locale.define("sv-SE","FormValidator",{required:"Fltet r obligatoriskt.",minLength:"Ange minst {minLength} tecken (du angav {length} tecken).",maxLength:"Ange hgst {maxLength} tecken (du angav {length} tecken). ",integer:"Ange ett heltal i fltet. Tal med decimaler (t.ex. 1,25) r inte tilltna.",numeric:'Ange endast numeriska vrden i detta flt (t.ex. "1" eller "1.1" eller "-1" eller "-1,1").',digits:"Anvnd endast siffror och skiljetecken i detta flt (till exempel ett telefonnummer med bindestreck tilltet).",alpha:"Anvnd endast bokstver (a-) i detta flt. Inga mellanslag eller andra tecken r tilltna.",alphanum:"Anvnd endast bokstver (a-) och siffror (0-9) i detta flt. Inga mellanslag eller andra tecken r tilltna.",dateSuchAs:"Ange ett giltigt datum som t.ex. {date}",dateInFormatMDY:'Ange ett giltigt datum som t.ex. YYYY-MM-DD (i.e. "1999-12-31")',email:'Ange en giltig e-postadress. Till exempel "erik@domain.com".',url:"Ange en giltig webbadress som http://www.example.com.",currencyDollar:"Ange en giltig belopp. Exempelvis 100,00.",oneRequired:"Vnligen ange minst ett av dessa alternativ.",errorPrefix:"Fel: ",warningPrefix:"Varning: ",noSpace:"Det fr inte finnas ngra mellanslag i detta flt.",reqChkByNode:"Inga objekt r valda.",requiredChk:"Detta r ett obligatoriskt flt.",reqChkByName:"Vlj en {label}.",match:"Detta flt mste matcha {matchName}",startDate:"startdatumet",endDate:"slutdatum",currentDate:"dagens datum",afterDate:"Datumet br vara samma eller senare n {label}.",beforeDate:"Datumet br vara samma eller tidigare n {label}.",startMonth:"Vlj en start mnad",sameMonth:"Dessa tv datum mste vara i samma mnad - du mste ndra det ena eller det andra."}),Locale.define("sv-SE","Number",{currency:{prefix:"SEK "}}).inherit("EU","Number"),Locale.define("tr-TR","Date",{months:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],months_abbr:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],days:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],days_abbr:["Pa","Pzt","Sa","a","Pe","Cu","Cmt"],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H.%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"bir dakikadan nce",minuteAgo:"yaklak bir dakika nce",minutesAgo:"{delta} dakika nce",hourAgo:"bir saat kadar nce",hoursAgo:"{delta} saat kadar nce",dayAgo:"bir gn nce",daysAgo:"{delta} gn nce",weekAgo:"bir hafta nce",weeksAgo:"{delta} hafta nce",monthAgo:"bir ay nce",monthsAgo:"{delta} ay nce",yearAgo:"bir yl nce",yearsAgo:"{delta} yl nce",lessThanMinuteUntil:"bir dakikadan az sonra",minuteUntil:"bir dakika kadar sonra",minutesUntil:"{delta} dakika sonra",hourUntil:"bir saat kadar sonra",hoursUntil:"{delta} saat kadar sonra",dayUntil:"bir gn sonra",daysUntil:"{delta} gn sonra",weekUntil:"bir hafta sonra",weeksUntil:"{delta} hafta sonra",monthUntil:"bir ay sonra",monthsUntil:"{delta} ay sonra",yearUntil:"bir yl sonra",yearsUntil:"{delta} yl sonra"}),Locale.define("tr-TR","FormValidator",{required:"Bu alan zorunlu.",minLength:"Ltfen en az {minLength} karakter girin (siz {length} karakter girdiniz).",maxLength:"Ltfen en fazla {maxLength} karakter girin (siz {length} karakter girdiniz).",integer:"Ltfen bu alana sadece tamsay girin. Ondalkl saylar (r: 1.25) kullanlamaz.",numeric:'Ltfen bu alana sadece saysal deer girin (r: "1", "1.1", "-1" ya da "-1.1").',digits:"Ltfen bu alana sadece saysal deer ve noktalama iareti girin (rnein, nokta ve tire ieren bir telefon numaras kullanlabilir).",alpha:"Ltfen bu alanda yalnzca harf kullann. Boluk ve dier karakterler kullanlamaz.",alphanum:"Ltfen bu alanda sadece harf ve rakam kullann. Boluk ve dier karakterler kullanlamaz.",dateSuchAs:"Ltfen geerli bir tarih girin (r: {date})",dateInFormatMDY:'Ltfen geerli bir tarih girin (GG/AA/YYYY, r: "31/12/1999")',email:'Ltfen geerli bir email adresi girin. r: "kemal@etikan.com".',url:"Ltfen geerli bir URL girin. r: http://www.example.com.",currencyDollar:"Ltfen geerli bir TL miktar girin. r: 100,00 TL .",oneRequired:"Ltfen en az bir tanesini doldurun.",errorPrefix:"Hata: ",warningPrefix:"Uyar: ",noSpace:"Bu alanda boluk kullanlamaz.",reqChkByNode:"Hibir e seilmemi.",requiredChk:"Bu alan zorunlu.",reqChkByName:"Ltfen bir {label} girin.",match:"Bu alan, {matchName} alanyla uyumal",startDate:"balang tarihi",endDate:"biti tarihi",currentDate:"bugnn tarihi",afterDate:"Tarih, {label} tarihiyle ayn gn ya da ondan sonra olmaldr.",beforeDate:"Tarih, {label} tarihiyle ayn gn ya da ondan nce olmaldr.",startMonth:"Ltfen bir balang ay sein",sameMonth:"Bu iki tarih ayn ayda olmal - bir tanesini deitirmeniz gerekiyor.",creditcard:"Girdiiniz kredi kart numaras geersiz. Ltfen kontrol edip tekrar deneyin. {length} hane girildi."}),Locale.define("tr-TR","Number",{currency:{decimals:0,suffix:" TL"}}).inherit("EU","Number"),function(){var a=function(a,b,c,d){var e=(a/10).toInt(),f=a%10;return(a/100).toInt(),1==e&&a>10?d:1==f?b:f>0&&5>f?c:d};Locale.define("uk-UA","Date",{months:["","","","","","","","","","","",""],months_abbr:["","","","","","","","","","","",""],days:["","","","","","'",""],days_abbr:["","","","","","",""],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M",AM:" ",PM:" ",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"  ",minuteAgo:" ",minutesAgo:function(b){return"{delta} "+a(b,"","","")+" "},hourAgo:" ",hoursAgo:function(b){return"{delta} "+a(b,"","","")+" "},dayAgo:"",daysAgo:function(b){return"{delta} "+a(b,"","","")+" "},weekAgo:" ",weeksAgo:function(b){return"{delta} "+a(b,"","","")+" "},monthAgo:" ",monthsAgo:function(b){return"{delta} "+a(b,"","","")+" "},yearAgo:" ",yearsAgo:function(b){return"{delta} "+a(b,"","","")+" "},lessThanMinuteUntil:" ",minuteUntil:" ",minutesUntil:function(b){return" {delta} "+a(b,"","","")},hourUntil:" ",hoursUntil:function(b){return" {delta} "+a(b,"","","")},dayUntil:"",daysUntil:function(b){return" {delta} "+a(b,"","","")},weekUntil:" ",weeksUntil:function(b){return" {delta} "+a(b,"","","")},monthUntil:" ",monthesUntil:function(b){return" {delta} "+a(b,"","","")},yearUntil:" ",yearsUntil:function(b){return" {delta} "+a(b,"","","")}})}(),Locale.define("uk-UA","FormValidator",{required:"    .",minLength:"   {minLength}  (  {length}).",maxLength:"      {maxLength} (  {length}).",integer:"    .   ( 1.25)  .",numeric:'     ( "1"  "1.1",  "-1",  "-1.1").',digits:"           (,        ).",alpha:"        (a-z).     .",alphanum:"        (a-z)   (0-9).     .",dateSuchAs:"   {date}.",dateInFormatMDY:'    // ( "12/31/2009").',email:'     ( "name@domain.com").',url:"  - ( http://www.example.com).",currencyDollar:'    ( "$100.00").',oneRequired:"   .",errorPrefix:": ",warningPrefix:": ",noSpace:" .",reqChkByNode:"   .",requiredChk:"    .",reqChkByName:" ,  {label}.",match:"    {matchName}",startDate:" ",endDate:" ",currentDate:" ",afterDate:"     ,    {label}.",beforeDate:"     ,    {label}.",startMonth:" ,   ",sameMonth:"        .  ,    .",creditcard:"    .  ,  .  {length} ."}),Locale.define("zh-CHS","Date",{months:["","","","","","","","","","","",""],months_abbr:["","","","","","","","","","","",""],days:["","","","","","",""],days_abbr:["","","","","","",""],dateOrder:["year","month","date"],shortDate:"%Y-%m-%d",shortTime:"%I:%M%p",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"1",minuteAgo:"1",minutesAgo:"{delta}",hourAgo:"1",hoursAgo:"{delta}",dayAgo:"1",daysAgo:"{delta}",weekAgo:"1",weeksAgo:"{delta}",monthAgo:"1",monthsAgo:"{delta}",yearAgo:"1",yearsAgo:"{delta}",lessThanMinuteUntil:"1",minuteUntil:"1",minutesUntil:"{delta}",hourUntil:"1",hoursUntil:"{delta}",dayUntil:"1",daysUntil:"{delta}",weekUntil:"1",weeksUntil:"{delta}",monthUntil:"",monthsUntil:"{delta}",yearUntil:"1",yearsUntil:"{delta}"}),Locale.define("zh-CHT","Date",{months:["","","","","","","","","","","",""],months_abbr:["","","","","","","","","","","",""],days:["","","","","","",""],days_abbr:["","","","","","",""],dateOrder:["year","month","date"],shortDate:"%Y-%m-%d",shortTime:"%I:%M%p",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"1",minuteAgo:"1",minutesAgo:"{delta}",hourAgo:"1",hoursAgo:"{delta}",dayAgo:"1",daysAgo:"{delta}",weekAgo:"1",weeksAgo:"{delta}",monthAgo:"1",monthsAgo:"{delta}",yearAgo:"1",yearsAgo:"{delta}",lessThanMinuteUntil:"1",minuteUntil:"1",minutesUntil:"{delta}",hourUntil:"1",hoursUntil:"{delta}",dayUntil:"1",daysUntil:"{delta}",weekUntil:"1",weeksUntil:"{delta}",monthUntil:"",monthsUntil:"{delta}",yearUntil:"1",yearsUntil:"{delta}"}),Locale.define("zh-CHS","FormValidator",{required:"",minLength:" {minLength}  ( {length} )",maxLength:" {maxLength}  ( {length} )",integer:'"1", "200"',numeric:'"1", "1.1", "-1", "-1.1"',digits:"",alpha:" A-Z  26 ",alphanum:" A-Z  26  0-9  10 ",dateSuchAs:"{date}",dateInFormatMDY:'YYYY-MM-DD ("2010-12-31")',email:'"fred@domain.com"',url:" Url http://www.example.com",currencyDollar:"100.0",oneRequired:"",errorPrefix:"",warningPrefix:"",noSpace:"",reqChkByNode:"",requiredChk:"",reqChkByName:" {label}.",match:"{matchName}",startDate:"",endDate:"",currentDate:"",afterDate:" {label}.",beforeDate:" {label}.",startMonth:"",sameMonth:"",creditcard:"{length}"}),Locale.define("zh-CHT","FormValidator",{required:" ",minLength:"{minLength} ({length} ) ",maxLength:"{maxLength} ({length} ) ",integer:'"1", "200" ',numeric:'"1", "1.1", "-1", "-1.1" ',digits:" ",alpha:"AZ 26  ",alphanum:"AZ 26 0-9 10  ",dateSuchAs:"{date} ",dateInFormatMDY:'YYYY-MM-DD ("2010-12-31") ',email:'"fred@domain.com" ',url:"Url http://www.example.com ",currencyDollar:"100.0",oneRequired:" ",errorPrefix:"",warningPrefix:"",noSpace:" ",reqChkByNode:" ",requiredChk:" ",reqChkByName:" {label}.",match:"{matchName}",startDate:"",endDate:"",currentDate:"",afterDate:"{label}.",beforeDate:"{label}.",startMonth:"",sameMonth:" ",creditcard:"{length} "}),Form.Validator.add("validate-currency-yuan",{errorMsg:function(){return Form.Validator.getMsg("currencyYuan")},test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||/^?\-?([1-9]{1}[0-9]{0,2}(\,[0-9]{3})*(\.[0-9]{0,2})?|[1-9]{1}\d*(\.[0-9]{0,2})?|0(\.[0-9]{0,2})?|(\.[0-9]{1,2})?)$/.test(a.get("value"))}}),Locale.define("zh-CHS","Number",{currency:{prefix:" "}}).inherit("en-US","Number"),Locale.define("zh-CHT").inherit("zh-CHS","Number"),Request.JSONP=new Class({Implements:[Chain,Events,Options],options:{onRequest:function(a){this.options.log&&window.console&&console.log&&console.log("JSONP retrieving script with url:"+a)},onError:function(a){this.options.log&&window.console&&console.warn&&console.warn("JSONP "+a+" will fail in Internet Explorer, which enforces a 2083 bytes length limit on URIs")
},url:"",callbackKey:"callback",injectScript:document.head,data:"",link:"ignore",timeout:0,log:!1},initialize:function(a){this.setOptions(a)},send:function(a){if(!Request.prototype.check.call(this,a))return this;this.running=!0;var b=typeOf(a);("string"==b||"element"==b)&&(a={data:a}),a=Object.merge(this.options,a||{});var c=a.data;switch(typeOf(c)){case"element":c=document.id(c).toQueryString();break;case"object":case"hash":c=Object.toQueryString(c)}var d=this.index=Request.JSONP.counter++,e=a.url+(a.url.test("\\?")?"&":"?")+a.callbackKey+"=Request.JSONP.request_map.request_"+d+(c?"&"+c:"");e.length>2083&&this.fireEvent("error",e),Request.JSONP.request_map["request_"+d]=function(){this.success(arguments,d)}.bind(this);var f=this.getScript(e).inject(a.injectScript);return this.fireEvent("request",[e,f]),a.timeout&&this.timeout.delay(a.timeout,this),this},getScript:function(a){return this.script||(this.script=new Element("script",{type:"text/javascript",async:!0,src:a})),this.script},success:function(a){this.running&&this.clear().fireEvent("complete",a).fireEvent("success",a).callChain()},cancel:function(){return this.running&&this.clear().fireEvent("cancel"),this},isRunning:function(){return!!this.running},clear:function(){return this.running=!1,this.script&&(this.script.destroy(),this.script=null),this},timeout:function(){return this.running&&(this.running=!1,this.fireEvent("timeout",[this.script.get("src"),this.script]).fireEvent("failure").cancel()),this}}),Request.JSONP.counter=0,Request.JSONP.request_map={},Request.implement({options:{initialDelay:5e3,delay:5e3,limit:6e4},startTimer:function(a){var b=function(){this.running||this.send({data:a})};return this.lastDelay=this.options.initialDelay,this.timer=b.delay(this.lastDelay,this),this.completeCheck=function(a){clearTimeout(this.timer),this.lastDelay=a?this.options.delay:(this.lastDelay+this.options.delay).min(this.options.limit),this.timer=b.delay(this.lastDelay,this)},this.addEvent("complete",this.completeCheck)},stopTimer:function(){return clearTimeout(this.timer),this.removeEvent("complete",this.completeCheck)}}),Request.Queue=new Class({Implements:[Options,Events],Binds:["attach","request","complete","cancel","success","failure","exception"],options:{stopOnFailure:!0,autoAdvance:!0,concurrent:1,requests:{}},initialize:function(a){var b;a&&(b=a.requests,delete a.requests),this.setOptions(a),this.requests={},this.queue=[],this.reqBinders={},b&&this.addRequests(b)},addRequest:function(a,b){return this.requests[a]=b,this.attach(a,b),this},addRequests:function(a){return Object.each(a,function(a,b){this.addRequest(b,a)},this),this},getName:function(a){return Object.keyOf(this.requests,a)},attach:function(a,b){return b._groupSend?this:(["request","complete","cancel","success","failure","exception"].each(function(c){this.reqBinders[a]||(this.reqBinders[a]={}),this.reqBinders[a][c]=function(){this["on"+c.capitalize()].apply(this,[a,b].append(arguments))}.bind(this),b.addEvent(c,this.reqBinders[a][c])},this),b._groupSend=b.send,b.send=function(c){return this.send(a,c),b}.bind(this),this)},removeRequest:function(a){var b="object"==typeOf(a)?this.getName(a):a;return(b||"string"==typeOf(b))&&(a=this.requests[b])?(["request","complete","cancel","success","failure","exception"].each(function(c){a.removeEvent(c,this.reqBinders[b][c])},this),a.send=a._groupSend,delete a._groupSend,this):this},getRunning:function(){return Object.filter(this.requests,function(a){return a.running})},isRunning:function(){return!!Object.keys(this.getRunning()).length},send:function(a,b){var c=function(){this.requests[a]._groupSend(b),this.queue.erase(c)}.bind(this);return c.name=a,Object.keys(this.getRunning()).length>=this.options.concurrent||this.error&&this.options.stopOnFailure?this.queue.push(c):c(),this},hasNext:function(a){return a?!!this.queue.filter(function(b){return b.name==a}).length:!!this.queue.length},resume:function(){return this.error=!1,(this.options.concurrent-Object.keys(this.getRunning()).length).times(this.runNext,this),this},runNext:function(a){if(!this.queue.length)return this;if(a){var b;this.queue.each(function(c){b||c.name!=a||(b=!0,c())})}else this.queue[0]();return this},runAll:function(){return this.queue.each(function(a){a()}),this},clear:function(a){return a?this.queue=this.queue.map(function(b){return b.name!=a?b:!1}).filter(function(a){return a}):this.queue.empty(),this},cancel:function(a){return this.requests[a].cancel(),this},onRequest:function(){this.fireEvent("request",arguments)},onComplete:function(){this.fireEvent("complete",arguments),this.queue.length||this.fireEvent("end")},onCancel:function(){this.options.autoAdvance&&!this.error&&this.runNext(),this.fireEvent("cancel",arguments)},onSuccess:function(){this.options.autoAdvance&&!this.error&&this.runNext(),this.fireEvent("success",arguments)},onFailure:function(){this.error=!0,!this.options.stopOnFailure&&this.options.autoAdvance&&this.runNext(),this.fireEvent("failure",arguments)},onException:function(){this.error=!0,!this.options.stopOnFailure&&this.options.autoAdvance&&this.runNext(),this.fireEvent("exception",arguments)}}),function(a){Array.implement({min:function(){return Math.min.apply(null,this)},max:function(){return Math.max.apply(null,this)},average:function(){return this.length?this.sum()/this.length:0},sum:function(){var a=0,b=this.length;if(b)for(;b--;)null!=this[b]&&(a+=parseFloat(this[b]));return a},unique:function(){return[].combine(this)},shuffle:function(){for(var a=this.length;a&&--a;){var b=this[a],c=Math.floor(Math.random()*(a+1));this[a]=this[c],this[c]=b}return this},reduce:function(b,c){for(var d=0,e=this.length;e>d;d++)d in this&&(c=c===a?this[d]:b.call(null,c,this[d],d,this));return c},reduceRight:function(b,c){for(var d=this.length;d--;)d in this&&(c=c===a?this[d]:b.call(null,c,this[d],d,this));return c},pluck:function(a){return this.map(function(b){return b[a]})}})}(),Date.implement({timeDiffInWords:function(a){return Date.distanceOfTimeInWords(this,a||new Date)},timeDiff:function(a,b){null==a&&(a=new Date);for(var c,d,e=((a-this)/1e3).floor().abs(),f=[],g=[60,60,24,365,0],h=["s","m","h","d","y"],i=0;i<g.length&&(!i||e);i++)c=e,(d=g[i])&&(c=e%d,e=(e/d).floor()),f.unshift(c+(h[i]||""));return f.join(b||":")}}).extend({distanceOfTimeInWords:function(a,b){return Date.getTimePhrase(((b-a)/1e3).toInt())},getTimePhrase:function(a){var b=0>a?"Until":"Ago";0>a&&(a*=-1);var c={minute:60,hour:60,day:24,week:7,month:52/12,year:12,eon:1/0},d="lessThanMinute";for(var e in c){var f=c[e];if(1.5*f>a){a>.75*f&&(d=e);break}a/=f,d=e+"s"}return a=a.round(),Date.getMsg(d+b,a).substitute({delta:a})}}).defineParsers({re:/^(?:tod|tom|yes)/i,handler:function(a){var b=(new Date).clearTime();switch(a[0]){case"tom":return b.increment();case"yes":return b.decrement();default:return b}}},{re:/^(next|last) ([a-z]+)$/i,handler:function(a){var b=(new Date).clearTime(),c=b.getDay(),d=Date.parseDay(a[2],!0),e=d-c;return c>=d&&(e+=7),"last"==a[1]&&(e-=7),b.set("date",b.getDate()+e)}}).alias("timeAgoInWords","timeDiffInWords"),function(){if(!this.Hash){var a=this.Hash=new Type("Hash",function(a){"hash"==typeOf(a)&&(a=Object.clone(a.getClean()));for(var b in a)this[b]=a[b];return this});this.$H=function(b){return new a(b)},a.implement({forEach:function(a,b){Object.forEach(this,a,b)},getClean:function(){var a={};for(var b in this)this.hasOwnProperty(b)&&(a[b]=this[b]);return a},getLength:function(){var a=0;for(var b in this)this.hasOwnProperty(b)&&a++;return a}}),a.alias("each","forEach"),a.implement({has:Object.prototype.hasOwnProperty,keyOf:function(a){return Object.keyOf(this,a)},hasValue:function(a){return Object.contains(this,a)},extend:function(b){return a.each(b||{},function(b,c){a.set(this,c,b)},this),this},combine:function(b){return a.each(b||{},function(b,c){a.include(this,c,b)},this),this},erase:function(a){return this.hasOwnProperty(a)&&delete this[a],this},get:function(a){return this.hasOwnProperty(a)?this[a]:null},set:function(a,b){return(!this[a]||this.hasOwnProperty(a))&&(this[a]=b),this},empty:function(){return a.each(this,function(a,b){delete this[b]},this),this},include:function(a,b){return void 0==this[a]&&(this[a]=b),this},map:function(b,c){return new a(Object.map(this,b,c))},filter:function(b,c){return new a(Object.filter(this,b,c))},every:function(a,b){return Object.every(this,a,b)},some:function(a,b){return Object.some(this,a,b)},getKeys:function(){return Object.keys(this)},getValues:function(){return Object.values(this)},toQueryString:function(a){return Object.toQueryString(this,a)}}),a.alias({indexOf:"keyOf",contains:"hasValue"})}}(),Hash.implement({getFromPath:function(a){return Object.getFromPath(this,a)},cleanValues:function(a){return new Hash(Object.cleanValues(this,a))},run:function(){Object.run(arguments)}}),Number.implement({format:function(a){var b=this;a=a?Object.clone(a):{};var c=function(b){return null!=a[b]?a[b]:Locale.get("Number."+b)},d=0>b,e=c("decimal"),f=c("precision"),g=c("group"),h=c("decimals");if(d){var i=c("negative")||{};null==i.prefix&&null==i.suffix&&(i.prefix="-"),["prefix","suffix"].each(function(b){i[b]&&(a[b]=c(b)+i[b])}),b=-b}var j=c("prefix"),k=c("suffix");""!==h&&h>=0&&20>=h&&(b=b.toFixed(h)),f>=1&&21>=f&&(b=(+b).toPrecision(f)),b+="";var l;if(c("scientific")===!1&&b.indexOf("e")>-1){var m=b.split("e"),n=+m[1];if(b=m[0].replace(".",""),0>n){for(n=-n-1,l=m[0].indexOf("."),l>-1&&(n-=l-1);n--;)b="0"+b;b="0."+b}else for(l=m[0].lastIndexOf("."),l>-1&&(n-=m[0].length-l-1);n--;)b+="0"}if("."!=e&&(b=b.replace(".",e)),g){l=b.lastIndexOf(e),l=l>-1?l:b.length;for(var o=b.substring(l),p=l;p--;)(l-p-1)%3==0&&p!=l-1&&(o=g+o),o=b.charAt(p)+o;b=o}return j&&(b=j+b),k&&(b+=k),b},formatCurrency:function(a){var b=Locale.get("Number.currency")||{};return null==b.scientific&&(b.scientific=!1),b.decimals=null!=a?a:null==b.decimals?2:b.decimals,this.format(b)},formatPercentage:function(a){var b=Locale.get("Number.percentage")||{};return null==b.suffix&&(b.suffix="%"),b.decimals=null!=a?a:null==b.decimals?2:b.decimals,this.format(b)}}),function(){var a=function(){return this.get("value")},b=this.URI=new Class({Implements:Options,options:{},regex:/^(?:(\w+):)?(?:\/\/(?:(?:([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)?(\.\.?$|(?:[^?#\/]*\/)*)([^?#]*)(?:\?([^#]*))?(?:#(.*))?/,parts:["scheme","user","password","host","port","directory","file","query","fragment"],schemes:{http:80,https:443,ftp:21,rtsp:554,mms:1755,file:0},initialize:function(a,c){this.setOptions(c);var d=this.options.base||b.base;a||(a=d),a&&a.parsed?this.parsed=Object.clone(a.parsed):this.set("value",a.href||a.toString(),d?new b(d):!1)},parse:function(a,b){var c=a.match(this.regex);return c?(c.shift(),this.merge(c.associate(this.parts),b)):!1},merge:function(a,b){return a&&a.scheme||b&&b.scheme?(b&&this.parts.every(function(c){return a[c]?!1:(a[c]=b[c]||"",!0)}),a.port=a.port||this.schemes[a.scheme.toLowerCase()],a.directory=a.directory?this.parseDirectory(a.directory,b?b.directory:""):"/",a):!1},parseDirectory:function(a,c){if(a=("/"==a.substr(0,1)?"":c||"/")+a,!a.test(b.regs.directoryDot))return a;var d=[];return a.replace(b.regs.endSlash,"").split("/").each(function(a){".."==a&&d.length>0?d.pop():"."!=a&&d.push(a)}),d.join("/")+"/"},combine:function(a){return a.value||a.scheme+"://"+(a.user?a.user+(a.password?":"+a.password:"")+"@":"")+(a.host||"")+(a.port&&a.port!=this.schemes[a.scheme]?":"+a.port:"")+(a.directory||"/")+(a.file||"")+(a.query?"?"+a.query:"")+(a.fragment?"#"+a.fragment:"")},set:function(a,c,d){if("value"==a){var e=c.match(b.regs.scheme);e&&(e=e[1]),this.parsed=e&&null==this.schemes[e.toLowerCase()]?{scheme:e,value:c}:this.parse(c,(d||this).parsed)||(e?{scheme:e,value:c}:{value:c})}else"data"==a?this.setData(c):this.parsed[a]=c;return this},get:function(a,b){switch(a){case"value":return this.combine(this.parsed,b?b.parsed:!1);case"data":return this.getData()}return this.parsed[a]||""},go:function(){document.location.href=this.toString()},toURI:function(){return this},getData:function(a,b){var c=this.get(b||"query");if(!c&&0!==c)return a?null:{};var d=c.parseQueryString();return a?d[a]:d},setData:function(a,b,c){if("string"==typeof a){var d=this.getData();d[arguments[0]]=arguments[1],a=d}else b&&(a=Object.merge(this.getData(null,c),a));return this.set(c||"query",Object.toQueryString(a))},clearData:function(a){return this.set(a||"query","")},toString:a,valueOf:a});b.regs={endSlash:/\/$/,scheme:/^(\w+):/,directoryDot:/\.\/|\.$/},b.base=new b(Array.from(document.getElements("base[href]",!0)).getLast(),{base:document.location}),String.implement({toURI:function(a){return new b(this,a)}})}(),URI=Class.refactor(URI,{combine:function(a,b){if(!b||a.scheme!=b.scheme||a.host!=b.host||a.port!=b.port)return this.previous.apply(this,arguments);var c=a.file+(a.query?"?"+a.query:"")+(a.fragment?"#"+a.fragment:"");if(!b.directory)return(a.directory||(a.file?"":"./"))+c;var d,e=b.directory.split("/"),f=a.directory.split("/"),g="",h=0;for(d=0;d<e.length&&d<f.length&&e[d]==f[d];d++);for(h=0;h<e.length-d-1;h++)g+="../";for(h=d;h<f.length-1;h++)g+=f[h]+"/";return(g||(a.file?"":"./"))+c},toAbsolute:function(a){return a=new URI(a),a&&a.set("directory","").set("file",""),this.toRelative(a)},toRelative:function(a){return this.get("value",new URI(a))}});var Asset={javascript:function(a,b){b||(b={});var c=new Element("script",{src:a,type:"text/javascript"}),d=b.document||document,e=b.onload||b.onLoad;return delete b.onload,delete b.onLoad,delete b.document,e&&(c.addEventListener?c.addEvent("load",e):c.addEvent("readystatechange",function(){["loaded","complete"].contains(this.readyState)&&e.call(this)})),c.set(b).inject(d.head)},css:function(a,b){b||(b={});var c=b.onload||b.onLoad,d=b.document||document,e=b.timeout||3e3;["onload","onLoad","document"].each(function(a){delete b[a]});var f=new Element("link",{type:"text/css",rel:"stylesheet",media:"screen",href:a}).setProperties(b).inject(d.head);if(c){var g=!1,h=0,i=function(){for(var a=document.styleSheets,b=0;b<a.length;b++){var d=a[b],j=d.ownerNode?d.ownerNode:d.owningElement;if(j&&j==f)return g=!0,c.call(f)}return h++,!g&&e/50>h?setTimeout(i,50):void 0};setTimeout(i,0)}return f},image:function(a,b){b||(b={});var c=new Image,d=document.id(c)||new Element("img");return["load","abort","error"].each(function(a){var e="on"+a,f="on"+a.capitalize(),g=b[e]||b[f]||function(){};delete b[f],delete b[e],c[e]=function(){c&&(d.parentNode||(d.width=c.width,d.height=c.height),c=c.onload=c.onabort=c.onerror=null,g.delay(1,d,d),d.fireEvent(a,d,1))}}),c.src=d.src=a,c&&c.complete&&c.onload.delay(1),d.set(b)},images:function(a,b){a=Array.from(a);var c=function(){},d=0;return b=Object.merge({onComplete:c,onProgress:c,onError:c,properties:{}},b),new Elements(a.map(function(c,e){return Asset.image(c,Object.append(b.properties,{onload:function(){d++,b.onProgress.call(this,d,e,c),d==a.length&&b.onComplete()},onerror:function(){d++,b.onError.call(this,d,e,c),d==a.length&&b.onComplete()}}))}))}};!function(){var a=this.Color=new Type("Color",function(a,b){switch(arguments.length>=3?(b="rgb",a=Array.slice(arguments,0,3)):"string"==typeof a&&(a=a.match(/rgb/)?a.rgbToHex().hexToRgb(!0):a.match(/hsb/)?a.hsbToRgb():a.hexToRgb(!0)),b=b||"rgb"){case"hsb":var c=a;a=a.hsbToRgb(),a.hsb=c;break;case"hex":a=a.hexToRgb(!0)}return a.rgb=a.slice(0,3),a.hsb=a.hsb||a.rgbToHsb(),a.hex=a.rgbToHex(),Object.append(a,this)});a.implement({mix:function(){var b=Array.slice(arguments),c="number"==typeOf(b.getLast())?b.pop():50,d=this.slice();return b.each(function(b){b=new a(b);for(var e=0;3>e;e++)d[e]=Math.round(d[e]/100*(100-c)+b[e]/100*c)}),new a(d,"rgb")},invert:function(){return new a(this.map(function(a){return 255-a}))},setHue:function(b){return new a([b,this.hsb[1],this.hsb[2]],"hsb")},setSaturation:function(b){return new a([this.hsb[0],b,this.hsb[2]],"hsb")},setBrightness:function(b){return new a([this.hsb[0],this.hsb[1],b],"hsb")}}),this.$RGB=function(b,c,d){return new a([b,c,d],"rgb")},this.$HSB=function(b,c,d){return new a([b,c,d],"hsb")},this.$HEX=function(b){return new a(b,"hex")},Array.implement({rgbToHsb:function(){var a=this[0],b=this[1],c=this[2],d=0,e=Math.max(a,b,c),f=Math.min(a,b,c),g=e-f,h=e/255,i=0!=e?g/e:0;if(0!=i){var j=(e-a)/g,k=(e-b)/g,l=(e-c)/g;d=a==e?l-k:b==e?2+j-l:4+k-j,d/=6,0>d&&d++}return[Math.round(360*d),Math.round(100*i),Math.round(100*h)]},hsbToRgb:function(){var a=Math.round(this[2]/100*255);if(0==this[1])return[a,a,a];var b=this[0]%360,c=b%60,d=Math.round(this[2]*(100-this[1])/1e4*255),e=Math.round(this[2]*(6e3-this[1]*c)/6e5*255),f=Math.round(this[2]*(6e3-this[1]*(60-c))/6e5*255);switch(Math.floor(b/60)){case 0:return[a,f,d];case 1:return[e,a,d];case 2:return[d,a,f];case 3:return[d,e,a];case 4:return[f,d,a];case 5:return[a,d,e]}return!1}}),String.implement({rgbToHsb:function(){var a=this.match(/\d{1,3}/g);return a?a.rgbToHsb():null},hsbToRgb:function(){var a=this.match(/\d{1,3}/g);return a?a.hsbToRgb():null}})}(),function(){this.Group=new Class({initialize:function(){this.instances=Array.flatten(arguments)},addEvent:function(a,b){var c=this.instances,d=c.length,e=d,f=new Array(d),g=this;c.each(function(h,i){h.addEvent(a,function(){f[i]||e--,f[i]=arguments,e||(b.call(g,c,h,f),e=d,f=new Array(d))})})}})}();var Cookie=new Class({Implements:Options,options:{path:"/",domain:!1,duration:!1,secure:!1,document:document,encode:!0},initialize:function(a,b){this.key=a,this.setOptions(b)},write:function(a){if(this.options.encode&&(a=encodeURIComponent(a)),this.options.domain&&(a+="; domain="+this.options.domain),this.options.path&&(a+="; path="+this.options.path),this.options.duration){var b=new Date;b.setTime(b.getTime()+24*this.options.duration*60*60*1e3),a+="; expires="+b.toGMTString()}return this.options.secure&&(a+="; secure"),this.options.document.cookie=this.key+"="+a,this},read:function(){var a=this.options.document.cookie.match("(?:^|;)\\s*"+this.key.escapeRegExp()+"=([^;]*)");return a?decodeURIComponent(a[1]):null},dispose:function(){return new Cookie(this.key,Object.merge({},this.options,{duration:-1})).write(""),this}});Cookie.write=function(a,b,c){return new Cookie(a,c).write(b)},Cookie.read=function(a){return new Cookie(a).read()},Cookie.dispose=function(a,b){return new Cookie(a,b).dispose()},Hash.Cookie=new Class({Extends:Cookie,options:{autoSave:!0},initialize:function(a,b){this.parent(a,b),this.load()},save:function(){var a=JSON.encode(this.hash);return!a||a.length>4096?!1:("{}"==a?this.dispose():this.write(a),!0)},load:function(){return this.hash=new Hash(JSON.decode(this.read(),!0)),this}}),Hash.each(Hash.prototype,function(a,b){"function"==typeof a&&Hash.Cookie.implement(b,function(){var b=a.apply(this.hash,arguments);return this.options.autoSave&&this.save(),b})}),function(){var Swiff=this.Swiff=new Class({Implements:Options,options:{id:null,height:1,width:1,container:null,properties:{},params:{quality:"high",allowScriptAccess:"always",wMode:"window",swLiveConnect:!0},callBacks:{},vars:{}},toElement:function(){return this.object},initialize:function(a,b){this.instance="Swiff_"+String.uniqueID(),this.setOptions(b),b=this.options;var c=this.id=b.id||this.instance,d=document.id(b.container);Swiff.CallBacks[this.instance]={};var e=b.params,f=b.vars,g=b.callBacks,h=Object.append({height:b.height,width:b.width},b.properties),i=this;for(var j in g)Swiff.CallBacks[this.instance][j]=function(a){return function(){return a.apply(i.object,arguments)}}(g[j]),f[j]="Swiff.CallBacks."+this.instance+"."+j;e.flashVars=Object.toQueryString(f),"ActiveXObject"in window?(h.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",e.movie=a):h.type="application/x-shockwave-flash",h.data=a;var k='<object id="'+c+'"';for(var l in h)k+=" "+l+'="'+h[l]+'"';k+=">";for(var m in e)e[m]&&(k+='<param name="'+m+'" value="'+e[m]+'" />');k+="</object>",this.object=(d?d.empty():new Element("div")).set("html",k).firstChild},replaces:function(a){return a=document.id(a,!0),a.parentNode.replaceChild(this.toElement(),a),this},inject:function(a){return document.id(a,!0).appendChild(this.toElement()),this},remote:function(){return Swiff.remote.apply(Swiff,[this.toElement()].append(arguments))}});Swiff.CallBacks={},Swiff.remote=function(obj,fn){var rs=obj.CallFunction('<invoke name="'+fn+'" returntype="javascript">'+__flash__argumentsToXML(arguments,2)+"</invoke>");return eval(rs)}}(),function(){var a=this.Table=function(){this.length=0;var a=[],b=[];this.set=function(c,d){var e=a.indexOf(c);if(-1==e){var f=a.length;a[f]=c,b[f]=d,this.length++}else b[e]=d;return this},this.get=function(c){var d=a.indexOf(c);return-1==d?null:b[d]},this.erase=function(c){var d=a.indexOf(c);return-1!=d?(this.length--,a.splice(d,1),b.splice(d,1)[0]):null},this.each=this.forEach=function(c,d){for(var e=0,f=this.length;f>e;e++)c.call(d,a[e],b[e],this)}};this.Type&&new Type("Table",a)}(),function(){var a=new Class({Implements:[Events,Options],options:{legendleft:"Differenz: Gleichfrmig / Kontinuierlich",legendright:"Differenz: Kontrastreich / Unterschiedlich",legendtop:"Absolutes Mass: Selten / Wenig",legendbottom:"Absolutes Mass: Oft / Viel",verboseid:!1,data:!1},initialize:function(a,b){this.setOptions(b),this._drawstate=!1,this._cursorpos=Array(),this._currentcanvas=!1,this._nodestack=Array(),this._objectstack={},this._datapool=Array(),this._dataarray=Array(),this.actualChannel=!1,this._channels=Array(),this.container=$(a),this.verb=this.options.verboseid?$(this.options.verboseid):new Element("p");var c=new Element("div",{id:"move_legend_bg",style:"display:none"});this.container.grab(c);var c=new Element("div",{id:"move_legend",html:"vertical<br>horizontal",style:"display:none"});this.container.grab(c),this._legend=$("move_legend"),this._legend_bg=$("move_legend_bg"),this.loadJSON(this.options.data),this.setupCanvas(),this.container.addEvents({contextmenu:function(a){a.preventDefault(),a.stopPropagation()}.bind(this),mousemove:function(a){this._cursorpos=Array(a.page.x-this.container.getPosition().x,a.page.y-this.container.getPosition().y),"new"==this._drawstate&&this.paintLine()}.bind(this)}),this.resizeTimer=!1,window.removeEvents("resize"),window.addEvent("resize",function(){this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=this.redraw.delay(250,this)}.bind(this))},redraw:function(){$$(".object1, .object2, .object3, .object4, .object_to, .daggerline").destroy(),this.drawObjects()},exportChannels:function(){return this._channels},switchChannel:function(a){$$(".object1, .object2, .object3, .object4, .object_to, .daggerline").destroy(),this.actualChannel=this._channels[a],this.drawObjects()},setupCanvas:function(){if(this._channels.length>1){var a=new Element("div",{id:"cloud_menu_bg",html:'<p id="link_cont"></p><p>Channels: </p>'});this.container.grab(a);for(var b in this._channels)b<=this._channels.length&&new Element("a",{"class":"changedim"+(this._channels[b]==this.actualChannel?" active":""),href:b,text:this._channels[b]}).inject($("link_cont"));$$(".changedim").each(function(a){a.addEvent("click",function(b){b.preventDefault(),$$(".changedim").removeClass("active"),a.addClass("active"),$$(".object1, .object2, .object3, .object4, .object_to, .daggerline").destroy(),this.actualChannel=this._channels[a.get("href")],this.drawObjects()}.bind(this))}.bind(this))}var c=new Element("div",{id:"tp_lg",html:'<p class="top">'+this.options.legendtop+'</p><p class="bottom">'+this.options.legendbottom+"</p>"});this.container.grab(c);var c=new Element("div",{id:"tp_lg2",html:'<span style="float:right">'+this.options.legendright+"</span>"+this.options.legendleft});this.container.grab(c),this.drawObjects(),this.fireEvent("render",this)},drawObjects:function(){for(var a in this._objectstack[this.actualChannel])if(a<=this._objectstack[this.actualChannel].length&&(this._objectstack[this.actualChannel][a].fromid=this.addObject(this._objectstack[this.actualChannel][a].from[0],this._objectstack[this.actualChannel][a].from[1],this._objectstack[this.actualChannel][a].key,this._objectstack[this.actualChannel][a].legends,this._objectstack[this.actualChannel][a].type),$(this._objectstack[this.actualChannel][a].fromid).k=a,"object"==typeof this._objectstack[this.actualChannel][a].to)){this._objectstack[this.actualChannel][a].toid=this.addObject(this._objectstack[this.actualChannel][a].to[0],this._objectstack[this.actualChannel][a].to[1],this._objectstack[this.actualChannel][a].key,this._objectstack[this.actualChannel][a].legends),$(this._objectstack[this.actualChannel][a].fromid).hasSlave=!0;var b=this.drawNode($(this._objectstack[this.actualChannel][a].fromid),$(this._objectstack[this.actualChannel][a].toid),1);$(this._objectstack[this.actualChannel][a].fromid).outNodes=$(this._objectstack[this.actualChannel][a].toid).inNodes=$(b)}},addObject:function(a,b,c,d,e){null==e&&(e=!1),this.verb.set("text","Add an object");var f=new Date,g=Math.floor(1e3*Math.random()),h="obj"+f.getTime()+g,i=new Element("div",{"class":"object"+(e?e:"_to"),id:h,html:c,styles:{left:a,top:b}});return i.legendhorizontal=d[0],i.legendvertical=d[1],i.inject(this.container),this.initobject(i,!e),i.setPosition({x:(this.container.getSize().x-i.getSize().x)/100*a,y:(this.container.getSize().y-i.getSize().y)/100*b}),h},initobject:function(a,b){a.addEvent("contextmenu",function(a){a.preventDefault()}.bind(this)),a.makeDraggable({container:this.container,snap:3,onComplete:function(){this.updateJSON(),this._legend.set("style","visibility:hidden"),this._legend_bg.set("style","visibility:hidden")}.bind(this),onCancel:function(a){b||a.hasSlave||this.addSlave(a),b&&!this._drawstate&&this.deleteKeyword(a),this.updateJSON()}.bind(this),onDrag:function(a){if(this.updateNodes(a),a.legendvertical&&a.legendhorizontal){var b=Math.round(100/(this.container.getSize().x-a.getSize().x)*a.getPosition(this.container).x),c=Math.round(100/(this.container.getSize().y-a.getSize().y)*a.getPosition(this.container).y);this._legend.set("html",'<span style="width:15px; float:left;"></span><span style="float:right;">'+c+"%</span>"+a.legendvertical+'<br><span style="width:15px; float:left;"></span><span style="float:right;">'+b+"%</span>"+a.legendhorizontal),this._legend.set("style","visibility:visible"),this._legend_bg.set("style","visibility:visible")}}.bind(this)})},loadJSON:function(a){null!=a&&(this._datapool=a);var b;for(var c in this._datapool){console.log("add channel "+c),this._channels.push(c),this._objectstack[c]=[],this.actualChannel||(this.actualChannel=c);for(var d in this._datapool[c])this._datapool[c].hasOwnProperty(d)&&(null==this._datapool[c][d].from&&(this._datapool[c][d].from=[10,10]),b=this._objectstack[c].push(this._datapool[c][d]))}},updateJSON:function(){this.savetimeout&&clearTimeout(this.savetimeout),this.savetimeout=this._updateJSON.delay(500,this)},_updateJSON:function(){for(var a in this._objectstack[this.actualChannel])a<=this._objectstack[this.actualChannel].length&&(this._objectstack[this.actualChannel][a].to&&(this._objectstack[this.actualChannel][a].to[0]=Math.round(this._objectstack[this.actualChannel][a].to[0]),this._objectstack[this.actualChannel][a].to[1]=Math.round(this._objectstack[this.actualChannel][a].to[1])),this._objectstack[this.actualChannel][a].from[0]=Math.round(this._objectstack[this.actualChannel][a].from[0]),this._objectstack[this.actualChannel][a].from[1]=Math.round(this._objectstack[this.actualChannel][a].from[1]));this._datapool=this._objectstack,this.fireEvent("save",this)},addSlave:function(a){this._objectstack[this.actualChannel][a.k].toid=this.addObject(50,50,this._objectstack[this.actualChannel][a.k].key,this._objectstack[this.actualChannel][a.k].legends),this._objectstack[this.actualChannel][a.k].to=Array(),this._objectstack[this.actualChannel][a.k].to[0]=100/(this.container.getSize().x-a.getSize().x)*a.getPosition(this.container).x,this._objectstack[this.actualChannel][a.k].to[1]=100/(this.container.getSize().y-a.getSize().y)*a.getPosition(this.container).y;var b=this.drawNode($(this._objectstack[this.actualChannel][a.k].fromid),$(this._objectstack[this.actualChannel][a.k].toid),1);$(this._objectstack[this.actualChannel][a.k].fromid).outNodes=$(this._objectstack[this.actualChannel][a.k].toid).inNodes=$(b),a.hasSlave=!0},deleteKeyword:function(a){$($(a.inNodes).from.id).hasSlave=!1,delete this._objectstack[this.actualChannel][$($(a.inNodes).from.id).k].to,$(this._objectstack[this.actualChannel][$($(a.inNodes).from.id).k].fromid).outNodes=null,a.outNodes&&this.deleteNode(a.outNodes),a.inNodes&&this.deleteNode(a.inNodes),a.destroy(),this.updateJSON()},deleteNode:function(a){a.destroy()},drawNode:function(a,b){this.startDraw(a),this.paintLine(a,b);var c=this.finishDraw(b);return c},updateNodes:function(a){this._drawstate="update";var b=a,c=!1;a.outNodes&&(this._currentcanvas=a.outNodes,this.paintLine(a,this._currentcanvas.to),c=this._currentcanvas.to),a.inNodes&&(this._currentcanvas=a.inNodes,b=this._currentcanvas.from,c=a),b&&c&&this.paintLine(b,c),c&&(this._objectstack[this.actualChannel][b.k].to[0]=100/(this.container.getSize().x-c.getSize().x)*c.getPosition(this.container).x,this._objectstack[this.actualChannel][b.k].to[1]=100/(this.container.getSize().y-c.getSize().y)*c.getPosition(this.container).y),this._objectstack[this.actualChannel][b.k].from[0]=100/(this.container.getSize().x-b.getSize().x)*b.getPosition(this.container).x,this._objectstack[this.actualChannel][b.k].from[1]=100/(this.container.getSize().y-b.getSize().y)*b.getPosition(this.container).y,this._drawstate=!1},paintLine:function(a,b){if(this._drawstate){var c=a.getSize(),d=a.getPosition(this.container),e=b.getSize(),f=b.getPosition(this.container),g=f.x>d.x?f.x+e.x:d.x+c.x,h=f.y>d.y?f.y+e.y:d.y+c.y,i=d.x<f.x?d.x:f.x,j=d.y<f.y?d.y:f.y;this._currentcanvas.setStyles({left:i,top:j,display:"block"}),this._currentcanvas.width=g-i,this._currentcanvas.height=h-j,this._currentcanvas.context.strokeStyle="#CCC";for(var k=d.x<f.x?c.x/2:this._currentcanvas.width-c.x/2,l=d.y<f.y?c.y/2:this._currentcanvas.height-c.y/2,m=d.x>f.x?e.x/2:this._currentcanvas.width-e.x/2,n=d.y>f.y?e.y/2:this._currentcanvas.height-e.y/2,o=m-k,p=n-l,q=Math.sqrt(o*o+p*p),r=o/q,s=p/q,t=1;o/r>t;t+=5){var u=k+t*r,v=l+t*s;this._currentcanvas.context.lineWidth=20-18/(o/r)*(t-1),this._currentcanvas.context.beginPath(),this._currentcanvas.context.moveTo(u,v),this._currentcanvas.context.lineTo(k+(t+1)*r,l+(t+1)*s),this._currentcanvas.context.stroke()}this.verb.set("text","Currently Drawing: "+(g-i)+"/"+(h-j))}},finishDraw:function(a){return"new"!=this._drawstate?!1:(this._drawstate=!1,this.verb.set("text","Finish Line"),this._currentcanvas.to=a,this._currentcanvas.id)},startDraw:function(a){if(0==this._drawstate){this.verb.set("text","Start Line"),this._drawstate="new";var b=new Date,c=Math.floor(1e3*Math.random()),d="canv_"+b.getTime()+c,e=new Element("canvas",{id:d,"class":"daggerline",styles:{position:"absolute",display:"none"}});this._currentcanvas=$(e),this._currentcanvas.from=a,this._currentcanvas.context=this._currentcanvas.getContext("2d"),this._currentcanvas.inject(this.container)}}});Element.implement({makeCloud:function(b){var c=new a(this,b);return c}})}(),("ios"==Browser.platform||"android"==Browser.platform||"webos"==Browser.platform)&&Class.refactor(Drag,{attach:function(){return this.handles.addEvent("touchstart",this.bound.start),this.previous.apply(this,arguments)},detach:function(){return this.handles.removeEvent("touchstart",this.bound.start),this.previous.apply(this,arguments)},start:function(){document.body.addEvents({touchmove:this.bound.check,touchend:this.bound.cancel}),this.previous.apply(this,arguments)},check:function(a){a.preventDefault();var b=Math.round(Math.sqrt(Math.pow(a.page.x-this.mouse.start.x,2)+Math.pow(a.page.y-this.mouse.start.y,2)));b>this.options.snap&&(this.cancel(),this.document.addEvents({mousemove:this.bound.drag,mouseup:this.bound.stop}),document.body.addEvents({touchmove:this.bound.drag,touchend:this.bound.stop}),this.fireEvent("start",[this.element,a]).fireEvent("snap",this.element))
},cancel:function(){return document.body.removeEvents({touchmove:this.bound.check,touchend:this.bound.cancel}),this.previous.apply(this,arguments)},stop:function(){return document.body.removeEvents({touchmove:this.bound.drag,touchend:this.bound.stop}),this.previous.apply(this,arguments)}}),window.performance=window.performance||{},performance.now=function(){return performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()}}(),function(){var a=new Class({Implements:[Events,Options],options:{verboseid:!1,data:!1,previewPrefix:"/rf/Ajax/Animatedpreview"},initialize:function(a,b){this.setOptions(b),this._drawstate=!1,this._cursorpos=[0,0],this._currentcanvas=!1,this._actualdimension=0,this._nodestack=Array(),this._objectstack=Array(),this._keywordstack=Array(),this._dimensionstack=Array(),this._keyword_id_mapping=Array(),this._nodestyle=1,this._datapool=Array(),this._zoomfactor=1,this._zoomoffset=[0,0],this._previewstack=Array(),this._multiple=!1,this.save_function=function(){this.fireEvent("save",this)},this.save_timer=null,this.container=$(a),this.verb=this.options.verboseid?$(this.options.verboseid):new Element("p"),this.loadJSON(this.options.data),this._dimensionstack[this._actualdimension]||(this._dimensionstack[this._actualdimension]="Dimension 1",this._datapool[this._dimensionstack[this._actualdimension]]=Array());for(var c in this._dimensionstack)c<=this._dimensionstack.length&&(this._keywordstack[c]||(this._keywordstack[c]=Array()),this._nodestack[c]||(this._nodestack[c]=Array()),this._objectstack[c]||(this._objectstack[c]=Array()));console.log("draw menu"),this.drawMenu(),console.log("done"),console.log("draw menu"),this.drawDimension(),console.log("done"),this.container.addEvents({mousewheel:function(a){a.wheel>0?this.zoomIn():a.wheel<0&&this.zoomOut()}.bind(this),contextmenu:function(a){a.preventDefault(),a.stopPropagation(),this.clearDraw()}.bind(this),click:function(){this.clearDraw(),this.keywordUpdate()}.bind(this),dblclick:function(){this.clearDraw(),this.addKeyword()}.bind(this),mousemove:function(a){this._cursorpos=Array(a.page.x-this.container.getPosition().x,a.page.y-this.container.getPosition().y),"new"==this._drawstate&&this.paintLine(),this.region_drawing&&this.region.setStyles({width:a.page.x-this.region.getPosition().x,height:a.page.y-this.region.getPosition().y})}.bind(this),mousedown:function(a){a.shift&&(this.region||(this.region=new Element("div",{id:"selector"}),this.region.setStyles({left:this._cursorpos[0],top:this._cursorpos[1]}),this.region.inject(this.container),this.region_drawing=!0)),a.stop()}.bind(this),mouseup:function(a){a.shift?this.region_drawing&&(this.region_drawing=!1):this.region&&(this.region.destroy(),this.region=null)}.bind(this)}),this.resizeTimer=!1,window.removeEvents("resize"),window.addEvent("resize",function(){this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=this.redraw.delay(250,this)}.bind(this)),this.fireEvent("render",this)},guid:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}(),zoomIn:function(){1==this._zoomfactor&&(this._zoomoffset[0]=this._cursorpos[0],this._zoomoffset[1]=this._cursorpos[1]),this._zoomfactor<19?this._zoomfactor+=2:this._zoomfactor=20,this.zoom.set("text",this._zoomfactor),clearTimeout(this.draw_timer),this.draw_timer=this.drawDimension.delay(250,this)},zoomOut:function(){this._zoomfactor>2?this._zoomfactor-=2:this._zoomfactor=1,this.zoom.set("text",this._zoomfactor),clearTimeout(this.draw_timer),this.draw_timer=this.drawDimension.delay(250,this)},initobject:function(a){a.addEvents({dblclick:function(a){a.stop()}.bind(this),mouseover:function(b){b.stop(),null==a.imgprev&&(a.textprev=new Element("span").inject(a).set("text",a.orig_text)),$$("div.ontology div.highlight").removeClass("highlight"),$$("div.ontology div.object").each(function(b){a.orig_text==b.orig_text&&b.addClass("highlight")}.bind(this))}.bind(this),mouseout:function(b){b.stop(),null==a.imgprev&&a.textprev&&a.textprev.destroy()}.bind(this),contextmenu:function(b){if(b.stop(),this.region){var c=this.region.getCoordinates();this.region.destroy(),this.region=null,$$("div.ontology div.object").each(function(d){if(d!=a){var e=d.getCoordinates();c.right<e.left||c.left>e.right||c.bottom<e.top||c.top>e.bottom||d.fireEvent("contextmenu",b)}}.bind(this))}$$("div.ontology div.highlight").removeClass("highlight"),console.log("Deleting "+a.stackid);var d=this._objectstack[this._actualdimension][a.stackid][0],e=this._objectstack[this._actualdimension].filter(function(a){return a[0]==d});if(e.length>1)this._objectstack[this._actualdimension].splice(a.stackid,1),console.log("Deleting clone only");else{console.log("Wiping "+d+" from all dimensions");for(var f in this._objectstack)this._objectstack.hasOwnProperty(f)&&(console.log(this._objectstack[f]),this._objectstack[f]=this._objectstack[f].filter(function(a){return a[0]!=d}),console.log(this._objectstack[f]))}a.destroy(),this.updateJSON(),this.redraw()}.bind(this)}),1==this._previewstack[a.stackid]&&this.preview(a)},initkeyword:function(a){a.inNodes=Array(),a.outNodes=Array(),a.zOld=1e4,a.addEvent("dblclick",function(b){b.preventDefault(),b.stopPropagation(),this.clearDraw(),this.editKeyword(a)}.bind(this)),a.addEvent("click",function(a){a.stopPropagation()}.bind(this)),a.addEvent("contextmenu",function(b){b.preventDefault(),this._drawstate||confirm("Delete Keyword "+a.get("text"))&&this.deleteKeyword(a)}.bind(this)),a.drag=a.makeDraggable({container:this.container,stopPropagation:!0,onCancel:function(a){this.startDraw(a,this._nodestyle),(newnode=this.finishDraw(a))&&this.addNodeToStack(newnode)}.bind(this),onComplete:function(a){this.updatePosition(a,"keyword"),a.setStyle("z-index",a.zOld)}.bind(this),onDrag:function(a){this.clearDraw(),this.keywordUpdate(a),this.updateNodes(a),a.setStyle("z-index","50000")}.bind(this),onStop:function(){}.bind(this)})},exportDimensions:function(){return this._dimensionstack},switchDimension:function(a){this._dimensionstack[a]&&(this._actualdimension=a,this.drawDimension())},changeLineStyle:function(a){a>0&&5>a&&(this._nodestyle=a)},drawMenu:function(){var a=new Element("div",{id:"ont_menu_bg"}),b=new Element("form",{id:"ont_menu_form"});b.inject(a);for(var c=Array(),d=1;5>d;d++)c[d]=new Element("img",{src:"./img/ontology/l"+d+".gif",id:"ont_menu"+d,"class":"ont_menu_button",chval:d}),c[d].sc=this;$$(c).inject(a),$$(c).addEvents({click:function(a){a.stopPropagation(),this.sc._nodestyle!=this.get("chval")&&this.addClass("ont_button_mouseover"),$("ont_menu"+this.sc._nodestyle).removeClass("ont_button_mouseover"),this.sc._nodestyle=this.get("chval")},mouseover:function(){this.addClass("ont_button_mouseover")},mouseout:function(){this.sc._nodestyle!=this.get("chval")&&this.removeClass("ont_button_mouseover")}});var e=new Element("p",{"class":"ont_tit_r",text:"Connections"});e.inject(a);var f=new Element("p",{"class":"ont_tit_l",text:"Dimensions"});f.inject(a);var g=new Element("select",{id:"ont_menu_dim_sel",name:"ont_menu_dim_sel"});g.inject(b);for(var h in this._dimensionstack){if(h<=this._dimensionstack.length)var i=new Element("option",{value:this._dimensionstack[h],text:this._dimensionstack[h]});i.inject(g)}g.addEvents({mousedown:function(){return!0}.bind(this),mouseup:function(){return!0}.bind(this),click:function(){g.focus();var a=document.createEvent("KeyboardEvent");a.initKeyEvent("keypress",!0,!0,window,0,0,0,0,40,0);!window.dispatchEvent(a);return!0}.bind(this),change:function(){this._actualdimension=this._dimensionstack.indexOf($("ont_menu_dim_sel").value),this.drawDimension()}.bind(this)});var j=new Element("input",{type:"button",id:"ont_menu_d_dim","class":"ont_menu_adr_dim",value:"Delete"});j.inject(b);var k=new Element("input",{type:"button",id:"ont_menu_a_dim","class":"ont_menu_adr_dim",value:"Add"});k.inject(b);var l=new Element("input",{type:"button",id:"ont_menu_r_dim","class":"ont_menu_adr_dim",value:"Rename"});l.inject(b),j.addEvents({click:function(a){a.stopPropagation(),j.focus(),this.deleteDimension()}.bind(this)}),k.addEvents({click:function(a){a.stopPropagation(),k.focus(),this.addDimension()}.bind(this)}),l.addEvents({click:function(a){a.stopPropagation(),l.focus(),this.renameDimension()}.bind(this)}),this.container.grab(a),this.zoom=new Element("div",{id:"zoom"}),this.zoom.set("text",this._zoomfactor),this.container.grab(this.zoom)},deleteDimension:function(a){if(1==this._dimensionstack.length)return alert("Can not delete last Dimension");if(void 0!=a||confirm("Delete Dimension "+this._dimensionstack[this._actualdimension])){$("ont_menu_dim_sel").getElement("option[value="+this._dimensionstack[this._actualdimension]+"]").destroy(),delete this._datapool[this._dimensionstack[this._actualdimension]],this.emptyStacks();for(var b in this._datapool)this._keywordstack.push(this._datapool[b].Keywords),this._nodestack.push(this._datapool[b].Nodes),this._objectstack.push(this._datapool[b].Objects),this._dimensionstack.push(b);this._actualdimension=0,this.updateJSON(),this.drawDimension()}},addDimension:function(a){if(void 0!=a||(a=prompt("Add Dimension:"))){if(-1!=this._dimensionstack.indexOf(a))return alert("Dimension already exists");var b=parseInt(this._dimensionstack.push(a)-1);this._keywordstack[b]=Array(),this._nodestack[b]=Array(),this._objectstack[b]=Array.clone(this._objectstack[this._actualdimension]);for(var c in this._objectstack[b])this._objectstack[b].hasOwnProperty(c)&&(this._objectstack[b][c][3]=!0);this._datapool[this._dimensionstack[b]]=new Object;var d=new Element("option",{value:this._dimensionstack[b],text:this._dimensionstack[b]});d.inject($("ont_menu_dim_sel")),this._actualdimension=b,this.updateJSON(),this.emptyStacks(),this.loadJSON(),this.drawDimension()}},emptyStacks:function(){this._dimensionstack.empty(),this._keywordstack.empty(),this._nodestack.empty(),this._objectstack.empty()},renameDimension:function(a){if(void 0!=a||(a=prompt("Add Dimension:"))){if(-1!=this._dimensionstack.indexOf(a))return alert("Dimension already exists");var b=this._datapool[this._dimensionstack[this._actualdimension]].id;delete this._datapool[this._dimensionstack[this._actualdimension]],$("ont_menu_dim_sel").getElement("option[value="+this._dimensionstack[this._actualdimension]+"]").set("text",a),$("ont_menu_dim_sel").getElement("option[value="+this._dimensionstack[this._actualdimension]+"]").set("value",a),this._dimensionstack[this._actualdimension]=a,this._datapool[this._dimensionstack[this._actualdimension]]=new Object,this.updateJSON(b)}},loadJSON:function(a){null!=a&&(this._datapool=a);for(var b in this._datapool)null!=this._datapool[b].Keywords&&this._keywordstack.push(this._datapool[b].Keywords),null!=this._datapool[b].Objects&&this._objectstack.push(this._datapool[b].Objects),null!=this._datapool[b].Nodes&&this._nodestack.push(this._datapool[b].Nodes),this._dimensionstack.push(b)},updateJSON:function(a){for(var b in this._dimensionstack)this._dimensionstack.hasOwnProperty(b)&&(this._datapool[this._dimensionstack[b]].Keywords=this._keywordstack[b],this._datapool[this._dimensionstack[b]].Nodes=this._nodestack[b],this._datapool[this._dimensionstack[b]].Objects=this._objectstack[b],this._datapool[this._dimensionstack[b]]._active=this._dimensionstack[this._actualdimension]);null==this._datapool[this._dimensionstack[this._actualdimension]].id&&(this._datapool[this._dimensionstack[this._actualdimension]].id=null==a?this.guid():a),clearTimeout(this.save_timer),this.save_timer=this.save_function.delay(1e3,this)},drawDimension:function(){now=window.performance.now(),"new"==this._drawstate&&this.clearDraw(),"edit"==this._drawstate&&this.keywordUpdate();var a=this._actualdimension;$("ont_menu_dim_sel").getElement("option[value="+this._dimensionstack[a]+"]").set("selected","selected"),null==this._keyword_id_mapping[a]&&(this._keyword_id_mapping[a]=Array()),this.clearScreen();var b=this.container.getSize().x,c=this.container.getSize().y;for(var d in this._keywordstack[a])if(d<=this._keywordstack[a].length){var e=b*this._zoomfactor/100*this._keywordstack[a][d][1][0]-this._zoomoffset[0]*(this._zoomfactor-1),f=c*this._zoomfactor/100*this._keywordstack[a][d][1][1]-this._zoomoffset[1]*(this._zoomfactor-1);this._keywordstack[a][d].id=this._keyword_id_mapping[a][this._keywordstack[a][d][0]]=this.addKeyword(e,f,this._keywordstack[a][d][0])}for(var d in this._objectstack[a])if(d<=this._objectstack[a].length&&null!=this._objectstack[a][d]){var e=b*this._zoomfactor/100*this._objectstack[a][d][1][0]-this._zoomoffset[0]*(this._zoomfactor-1),f=c*this._zoomfactor/100*this._objectstack[a][d][1][1]-this._zoomoffset[1]*(this._zoomfactor-1);this._objectstack[a][d].id=this.addObject(e,f,this._objectstack[a][d][0],this._objectstack[a][d][2],d,"true"===this._objectstack[a][d][3]||this._objectstack[a][d][3]===!0?!0:!1)}$$(".object").makeDraggable({container:this.container,stopPropagation:!0,onStart:function(a,b){if(this.region){var c=this.region.getCoordinates();this.region.destroy(),this.region=null,$$("div.ontology div.object").each(function(d){if(d!=a){var e=d.getCoordinates();c.right<e.left||c.left>e.right||c.bottom<e.top||c.top>e.bottom||d.fireEvent("mousedown",b)}}.bind(this))}if(b.shift){var d=parseInt(this._objectstack[this._actualdimension].push(Array(this._objectstack[this._actualdimension][a.stackid][0],Array(0,0),this._objectstack[this._actualdimension][a.stackid][2]))-1);this._objectstack[this._actualdimension][d].id=this.addObject(a.getPosition(this.container).x,a.getPosition(this.container).y,a.orig_text,a.get("prev"),d,!1),$(this._objectstack[this._actualdimension][d].id).makeDraggable({container:this.container,stopPropagation:!0,onStart:function(a,b){if(this.region){var c=this.region.getCoordinates();this.region.destroy(),this.region=null,$$("div.ontology div.object").each(function(d){if(d!=a){var e=d.getCoordinates();c.right<e.left||c.left>e.right||c.bottom<e.top||c.top>e.bottom||d.fireEvent("mousedown",b)}}.bind(this))}if(b.shift){var d=parseInt(this._objectstack[this._actualdimension].push(Array(this._objectstack[this._actualdimension][a.stackid][0],Array(0,0),this._objectstack[this._actualdimension][a.stackid][2]))-1);this._objectstack[this._actualdimension][d].id=this.addObject(a.getPosition(this.container).x,a.getPosition(this.container).y,a.orig_text,a.get("prev"),d,!1),this.updatePosition($(this._objectstack[this._actualdimension][d].id),"object")}}.bind(this),onComplete:function(a){a.removeClass("notmoved"),this.updatePosition(a,"object")}.bind(this),onCancel:function(a){this.preview(a)}.bind(this)}),this.updatePosition($(this._objectstack[this._actualdimension][d].id),"object")}}.bind(this),onComplete:function(a){a.removeClass("notmoved"),this.updatePosition(a,"object")}.bind(this),onCancel:function(a){this.preview(a)}.bind(this)});for(var d in this._nodestack[a])if(d<=this._nodestack[a].length){fromelm=$(this._keyword_id_mapping[a][this._nodestack[a][d][0]]),toelm=$(this._keyword_id_mapping[a][this._nodestack[a][d][1]]);var g=this.drawNode(fromelm,toelm,this._nodestack[a][d][2]);null!=g&&(this._nodestack[a][d].id=g)}console.log((window.performance.now()-now)/1e3)},clearScreen:function(){this.container.getElements(".keyword").destroy(),this.container.getElements(".object").destroy(),this.container.getElements("canvas").destroy()},deleteKeyword:function(a){for(var b in a.outNodes)a.outNodes[b].id&&this.deleteNode(a.outNodes[b]);for(var b in a.inNodes)a.inNodes[b].id&&this.deleteNode(a.inNodes[b]);for(var b in this._keywordstack[this._actualdimension])a.id==this._keywordstack[this._actualdimension][b].id&&this._keywordstack[this._actualdimension].splice(b,1);this.updatePosition(),a.destroy(),this.updateJSON()},preview:function(a){null!=a.imgprev?(a.imgprev.destroy(),null!=a.textprev&&(a.textprev.destroy(),a.textprev=null),a.imgprev=null,a.removeClass("highlight"),this._previewstack[a.stackid]=!1):(a.imgprev=new Element("img").inject(a).set("src",this.options.previewPrefix+a.get("prev")),this._previewstack[a.stackid]=!0)},startDraw:function(a,b){if(0==this._drawstate){this.verb.set("text","Start Line"),this._drawstate="new";var c=new Date,d=Math.floor(1e3*Math.random()),e="canv_"+c.getTime()+d,f=new Element("canvas",{id:e,styles:{position:"absolute",display:"none"},events:{contextmenu:function(a){this._drawstate||(a.preventDefault(),a.stopPropagation(),$(e).addClass("line_canvas_highlighted"),confirm("Delete Node "+$(e).id)?this.deleteNode($(e)):$(e).removeClass("line_canvas_highlighted"))}.bind(this)}});this._currentcanvas=$(f),this._currentcanvas.from=a,this._currentcanvas.type=b,this._currentcanvas.context=this._currentcanvas.getContext("2d"),this._currentcanvas.inject(this.container)}},addNodeToStack:function(a){var b=$(a),c=Array();c[0]=b.from.get("text"),c[1]=b.to.get("text"),c[2]=b.type,c.id=a,this._nodestack[this._actualdimension].push(c),this.updateJSON()},deleteNode:function(a){for(var b in this._nodestack[this._actualdimension])a.id==this._nodestack[this._actualdimension][b].id&&(this._nodestack[this._actualdimension].splice(b,1),a.destroy(),this.updateJSON())},clearDraw:function(){this.region&&(this.region.destroy(),this.region=null),"new"==this._drawstate&&(this._drawstate=!1,this.verb.set("text","Clear Line"),$(this._currentcanvas).destroy())},finishDraw:function(a){if(null==a)return!1;if("new"!=this._drawstate)return!1;if(null!=this._currentcanvas.from&&a.id!=this._currentcanvas.from.id)return this._drawstate=!1,this.verb.set("text","Finish Line"),this._currentcanvas.to=a,this._currentcanvas.from.outNodes.push(this._currentcanvas),a.inNodes.push(this._currentcanvas),this._currentcanvas.id},drawNode:function(a,b,c){if(null!=a&&null!=b){this.startDraw(a,c),this.paintLine(a,b);var d=this.finishDraw(b);return d}return null},updatePosition:function(a,b){if("keyword"==b){for(var c in this._keywordstack[this._actualdimension])if(this._keywordstack[this._actualdimension][c].id==a.id)return this._keywordstack[this._actualdimension][c][1][0]=100/(this.container.getSize().x*this._zoomfactor)*(a.getPosition(this.container).x+this._zoomoffset[0]*(this._zoomfactor-1)),this._keywordstack[this._actualdimension][c][1][1]=100/(this.container.getSize().y*this._zoomfactor)*(a.getPosition(this.container).y+this._zoomoffset[1]*(this._zoomfactor-1)),this._keywordstack[this._actualdimension][c][0]=a.get("text"),this.updateJSON(),!0;var d=Array(),e=Array();return d[0]=a.get("text"),e[0]=100/(this.container.getSize().x*this._zoomfactor)*(a.getPosition(this.container).x+this._zoomoffset[0]*(this._zoomfactor-1)),e[1]=100/(this.container.getSize().y*this._zoomfactor)*(a.getPosition(this.container).y+this._zoomoffset[1]*(this._zoomfactor-1)),d[1]=e,d.id=a.id,this._keywordstack[this._actualdimension].push(d),this.updateJSON(),!0}if("object"==b){var f=100/(this.container.getSize().x*this._zoomfactor)*(a.getPosition(this.container).x+this._zoomoffset[0]*(this._zoomfactor-1)),g=100/(this.container.getSize().y*this._zoomfactor)*(a.getPosition(this.container).y+this._zoomoffset[1]*(this._zoomfactor-1));return this._objectstack[this._actualdimension][a.stackid][1][0]=f,this._objectstack[this._actualdimension][a.stackid][1][1]=g,this._objectstack[this._actualdimension][a.stackid][3]=a.hasClass("notmoved")?!0:!1,this.updateJSON(),!0}},updateNodes:function(a){this._drawstate="update";for(var b in a.outNodes)a.outNodes[b].id&&(this._currentcanvas=a.outNodes[b],this.paintLine(a,this._currentcanvas.to,this._currentcanvas.type));for(var b in a.inNodes)a.inNodes[b].id&&(this._currentcanvas=a.inNodes[b],this.paintLine(this._currentcanvas.from,a,this._currentcanvas.type));this._drawstate=!1},paintLine:function(a,b){if(this._drawstate){if("object"==typeof a&&null!=a)var c=a.getPosition(this.container);else{if("object"!=typeof this._currentcanvas.from||null==this._currentcanvas.from)return!1;var c=this._currentcanvas.from.getPosition(this.container)}if("object"==typeof b&&null!=b)var d=b.getPosition(this.container);else{{var d=new Object;new Object}d.x=this._cursorpos[0],d.y=this._cursorpos[1]}this._currentcanvas.setStyles({left:(c.x<d.x?c.x:d.x)-4,top:(c.y<d.y?c.y:d.y)-4,display:"block",margin:"0px"}),this._currentcanvas.width=Math.abs(c.x-d.x)+8,this._currentcanvas.height=Math.abs(c.y-d.y)+8,this._currentcanvas.context.strokeStyle=2==this._currentcanvas.type||4==this._currentcanvas.type?"#F00":"#0F0";var e=c.x-this._currentcanvas.getPosition(this.container).x,f=c.y-this._currentcanvas.getPosition(this.container).y,g=d.x-this._currentcanvas.getPosition(this.container).x,h=d.y-this._currentcanvas.getPosition(this.container).y;this._currentcanvas.context.beginPath(),this._currentcanvas.context.lineWidth=1.5,this._currentcanvas.context.moveTo(e,f),this._currentcanvas.context.lineTo(g,h),this._currentcanvas.context.stroke();var i=g-e,j=h-f,k=Math.sqrt(i*i+j*j),l=i/k,m=j/k;if(3==this._currentcanvas.type||4==this._currentcanvas.type)for(var n=2;8>=n;n++)this._currentcanvas.context.beginPath(),this._currentcanvas.context.lineWidth=n,this._currentcanvas.context.moveTo(g-2*n*l,h-2*n*m),this._currentcanvas.context.lineTo(g-(2*n+2)*l,h-(2*n+2)*m),this._currentcanvas.context.stroke();this.verb.set("text","Currently Drawing: "+this._currentcanvas.width+"/"+this._currentcanvas.height)}},addKeyword:function(a,b,c){if(!this._drawstate){this.verb.set("text","Add a keyword");var d=new Date,e=Math.floor(1e3*Math.random()),f="key_"+d.getTime()+e,g=new Element("div",{"class":"keyword",id:f,html:"<div><span>"+(null!=c?c:"Please Edit")+"</span></div>",styles:{left:null!=a?a:this._cursorpos[0],top:null!=b?b:this._cursorpos[1]}});return g.inject(this.container),this.initkeyword(g),null==c&&this.editKeyword(g),f}},addObject:function(a,b,c,d,e,f){this.verb.set("text","Add an object");var g="obj_"+e,h=new Element("div",{"class":"object"+(f===!0?" notmoved":""),id:g,prev:d,html:"&nbsp;",styles:{left:a,top:b}});return h.stackid=e,h.orig_text=c,h.inject(this.container),this.initobject(h),g},editKeyword:function(a){if(!this._drawstate){this._drawstate="edit";var b=new Element("input",{value:a.get("text"),id:"onto_upd_input",styles:{width:parseInt(a.getStyle("width"))<40?40:a.getStyle("width"),height:"20px","z-index":"20000"},events:{click:function(a){a.stopPropagation(),b.focus(),b.select()}.bind(this),keydown:function(b){"enter"==b.key&&this.keywordUpdate(a)}.bind(this)}});a.getElement("span").set("text",""),b.inject(a.getElement("span")),b.focus(),b.select();for(var c in this._keywordstack[this._actualdimension])this._keywordstack[this._actualdimension][c].id&&$(this._keywordstack[this._actualdimension][c].id).drag.detach()}},keywordUpdate:function(a){if(this._drawstate){null==a&&(a=$("onto_upd_input").getParent("div.keyword"));for(var b in this._keywordstack[this._actualdimension])if(this._keywordstack[this._actualdimension][b][0]==a.getElement("input").get("value")&&this._keywordstack[this._actualdimension][b].id!=a.id)return alert("Keyword already exists in this Dimension!Please change it...");for(var b in this._keywordstack[this._actualdimension])this._keywordstack[this._actualdimension][b].id&&$(this._keywordstack[this._actualdimension][b].id).drag.attach();this._drawstate=!1,a.set("html","<div><span>"+a.getElement("input").get("value")+"</span></div>"),a.setStyle("padding","0px"),this.updatePosition(a,"keyword")}},currentDimension:function(a){return null==a||0==a?this._dimensionstack[this._actualdimension]:this._actualdimension},convertCoordinate:function(a,b){return{x:100/(this.container.getSize().x*this._zoomfactor)*(a-this.container.getPosition().x+this._zoomoffset[0]*(this._zoomfactor-1)),y:100/(this.container.getSize().y*this._zoomfactor)*(b-this.container.getPosition().y+this._zoomoffset[1]*(this._zoomfactor-1))}},redraw:function(a){this.emptyStacks(),this.loadJSON(a),this.drawDimension()}});Element.implement({makeOntology:function(b){var c=new a(this,b);return c}})}(),function(){var a=new Class({Implements:[Events,Options],options:{legendleft:"",legendright:"",legendtop:"",legendbottom:"",verboseid:!1,json:!1},initialize:function(a,b){this.setOptions(b),this._drawstate=!1,this._currentcanvas=!1,this._cursorpos=Array(),this._keywordstack=Array(),this._targetstack=Array(),this._dimensionstack=Array(),this._datapool=Array(),this.container=$(a),this.verb=this.options.verboseid?$(this.options.verboseid):new Element("p"),this.loadJSON(this.options.json),this.setupCanvas(),this.container.addEvents({contextmenu:function(a){a.preventDefault(),a.stopPropagation()}.bind(this),mousemove:function(a){this._cursorpos=Array(a.page.x-this.container.getPosition().x,a.page.y-this.container.getPosition().y)}.bind(this)}),this.resizeTimer=!1,window.removeEvents("resize"),window.addEvent("resize",function(){this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=this.redraw.delay(250,this)}.bind(this))},redraw:function(){console.log("delete"),$$("div.targetmatrix div.object, div.targetmatrix div.target").destroy(),this._keywordstack=[],this._targetstack=[],this._dimensionstack=[],this._datapool=[],this.loadJSON(),this.drawElements()},setupCanvas:function(){if(this.options.legendtop&&this.options.legendbottom&&this.options.legendright&&this.options.legendleft){var a=new Element("div",{id:"tp_lg",html:'<p class="top">'+this.options.legendtop+'</p><p class="bottom">'+this.options.legendbottom+"</p>"});this.container.grab(a);var a=new Element("div",{id:"tp_lg2",html:'<span style="float:right">'+this.options.legendright+"</span>"+this.options.legendleft});this.container.grab(a)}this.drawElements()},drawElements:function(){for(var a in this._dimensionstack)a<=this._dimensionstack.length&&("object"==typeof this._keywordstack[this._dimensionstack[a]]&&Object.each(this._keywordstack[this._dimensionstack[a]],function(b,c){this.addObject(a,c,b,"object")},this),"object"==typeof this._targetstack[this._dimensionstack[a]]&&this.addObject(a,this._dimensionstack[a],this._targetstack[this._dimensionstack[a]],"target"))},addObject:function(a,b,c,d){this._dimensionstack[a];this.verb.set("text","Add an "+d);var e=new Date,f=Math.floor(1e3*Math.random()),g="obj"+e.getTime()+f,h=new Element("div",{"class":d+" dim_"+a,id:g,text:b,styles:{left:c[0],top:c[1]}});return h.inject(this.container),h.dim=a,"target"==d&&this.initobject(h),g},initobject:function(a){var b=this._dimensionstack[a.dim];1==this._targetstack[b][2]&&a.addClass("active"),a.addEvent("contextmenu",function(a){a.preventDefault(),a.stopPropagation()}.bind(this)),a.makeDraggable({container:this.container,checkDroppables:!1,snap:3,onComplete:function(a){$$("div .dim_"+a.dim).removeClass("hilite");var b=this._dimensionstack[a.dim];this._targetstack[b][0]=a.getPosition(this.container).x,this._targetstack[b][1]=a.getPosition(this.container).y,this.updateJSON()}.bind(this),onCancel:function(a){$$("div .dim_"+a.dim).removeClass("hilite");var b=this._dimensionstack[a.dim];this._targetstack[b][2]=this._targetstack[b][2]?0:1,1==this._targetstack[b][2]&&a.addClass("active"),0==this._targetstack[b][2]&&a.removeClass("active"),this.updateJSON()}.bind(this),onStart:function(a){$$("div .dim_"+a.dim).addClass("hilite")}.bind(this)})},loadJSON:function(a){null!=a&&(this._datapool=a);for(var b in this._datapool){this._keywordstack[b]||(this._keywordstack[b]=Array());for(var c in this._datapool[b].Keywords)this._keywordstack[b][c]=Array(),this._keywordstack[b][c][0]=this.container.getSize().x/100*this._datapool[b].Keywords[c][0],this._keywordstack[b][c][1]=this.container.getSize().y/100*this._datapool[b].Keywords[c][1];this._targetstack[b]||(this._targetstack[b]=Array()),this._targetstack[b][c]=Array(),this._targetstack[b][0]=this.container.getSize().x/100*this._datapool[b].Target[0],this._targetstack[b][1]=this.container.getSize().y/100*this._datapool[b].Target[1],this._targetstack[b][2]=void 0===this._datapool[b].Target[2]?1:this._datapool[b].Target[2],this._dimensionstack.push(b)}},updateJSON:function(){this.savetimeout&&clearTimeout(this.savetimeout),this.savetimeout=this._updateJSON.delay(500,this)},_updateJSON:function(){this._dimensionstack.each(function(a){this._datapool[a].Target[0]=Math.round(100/this.container.getSize().x*this._targetstack[a][0]),this._datapool[a].Target[1]=Math.round(100/this.container.getSize().y*this._targetstack[a][1]),this._datapool[a].Target[2]=this._targetstack[a][2]},this),this.fireEvent("save",this)}});Element.implement({makeTarget:function(b){var c=new a(this,b);return c}})}(),function(){var a="onprogress"in new Browser.Request;Request.File=new Class({Extends:Request,options:{emulation:!1,urlEncoded:!1},initialize:function(a){this.xhr=new Browser.Request,this.formData=new FormData,this.setOptions(a),this.headers=this.options.headers},append:function(a,b){return this.formData.append(a,b),this.formData},reset:function(){this.formData=new FormData,console.log("Request.File.reset")},send:function(b){if(!this.check(b))return this;this.options.isSuccess=this.options.isSuccess||this.isSuccess,this.running=!0;var c=this.xhr;return a&&(c.onloadstart=this.loadstart.bind(this),c.onprogress=this.progress.bind(this),c.upload.onprogress=this.progress.bind(this)),c.open("POST",this.options.url,!0),c.onreadystatechange=this.onStateChange.bind(this),Object.each(this.headers,function(a,b){try{c.setRequestHeader(b,a)}catch(d){this.fireEvent("exception",[b,a])}},this),this.fireEvent("request"),c.send(this.formData),this.options.async||this.onStateChange(),this.options.timeout&&(this.timer=this.timeout.delay(this.options.timeout,this)),this}})}(),Object.append(Element.NativeEvents,{dragenter:2,dragleave:2,dragover:2,dragend:2,drop:2}),this.Form||(this.Form={}),Form.MultipleFileInput=new Class({Implements:[Options,Events],options:{itemClass:"uploadItem"},_files:[],initialize:function(a,b,c,d){a=this.element=document.id(a),b&&(b=this.list=document.id(b)),c=this.drop=document.id(c),this.setOptions(d);var e=a.get("name");"[]"!=e.slice(-2)&&a.set("name",e+"[]"),a.set("multiple",!0),this.inputEvents={change:function(b){Array.each(a.files,this.add,this),this.fireEvent("change",b)}.bind(this)},this.dragEvents=c&&"undefined"!=typeof document.body.draggable?{dragenter:this.fireEvent.bind(this,"dragenter"),dragleave:this.fireEvent.bind(this,"dragleave"),dragend:this.fireEvent.bind(this,"dragend"),dragover:function(a){a.preventDefault(),this.fireEvent("dragover",a)}.bind(this),drop:function(a){a.preventDefault();var b=a.event.dataTransfer;b&&Array.each(b.files,this.add,this),this.fireEvent("drop",a)}.bind(this)}:null,this.attach()},attach:function(){this.element.addEvents(this.inputEvents),this.dragEvents&&this.drop.addEvents(this.dragEvents)},detach:function(){this.input.removeEvents(this.inputEvents),this.dragEvents&&this.drop.removeEvents(this.dragEvents)},add:function(a){if(this._files.push(a),this.list){var b=this;new Element("li",{"class":this.options.itemClass}).grab(new Element("span",{text:a.name})).grab(new Element("a",{text:"x",href:"#",events:{click:function(c){c.preventDefault(),b.remove(a)}}})).inject(this.list)}return this.fireEvent("add",a),this},remove:function(a){var b=this._files.indexOf(a);return-1==b?this:(this._files.splice(b,1),this.list&&this.list.childNodes[b].destroy(),this.fireEvent("remove",a),this._files.length||this.fireEvent("empty"),this)},getFiles:function(){return this._files}}),function(){"use strict";this.Form||(this.Form={});var a=this.Form;a.Upload=new Class({Implements:[Options,Events],options:{dropMsg:"Please drop your files here",fireAtOnce:!1,dropzone:!1,showlist:!0,showprogress:!0,onComplete:function(){window.location.href=window.location.href},onDrop:function(a){console.log(a)}},initialize:function(a,b){a=this.input=document.id(a),this.setOptions(b),"FormData"in window?this.modernUpload(a):this.legacyUpload(a)},modernUpload:function(b){this.modern=!0;var c=b.getParent("form");if(c){this.raw_form=c;var d=this;if(d.options.dropzone)var e=$(d.options.dropzone);
else var e=new Element("div.droppable",{text:this.options.dropMsg}).inject(b,"after");if(d.options.showlist)var f=new Element("ul.uploadList").inject(e,"after");else var f=!1;if(d.options.showprogress)if("string"==typeof d.options.showprogress)var g=$(d.options.showprogress);else var g=new Element("div.progress").setStyle("display","none").inject(f,"after");else var g=!1;var h=new Request.File({url:c.get("action"),onRequest:d.options.showprogress?g.setStyles.pass({display:"block",width:0},g):!1,onProgress:function(a){var b=a.loaded,c=a.total;d.options.showprogress&&g.setStyle("width",parseInt(b/c*100,10).limit(0,100)+"%")},onComplete:function(){d.options.showprogress&&g.setStyle("width","100%"),d.fireEvent("complete",Array.slice(arguments)),d.reset(),this.reset()}}),i=b.get("name"),j=new a.MultipleFileInput(b,f,e,{onDrag:function(a){d.fireEvent("drag",a)},onDrop:function(a){d.fireEvent("drop",[a,j._files]),e.removeClass.pass("hover",e),d.options.fireAtOnce&&(h.options.url=c.get("action"),d.submit(j,i,h))},onChange:function(){d.options.fireAtOnce&&d.submit(j,i,h)}});c.addEvent("submit",function(a){a&&a.preventDefault(),d.submit(j,i,h)}),d.reset=function(){for(var a=j.getFiles(),b=0;b<a.length;b++)j.remove(a[b]);console.log("self.reset")}}},submit:function(a,b,c){this.raw_form.getChildren("input").each(function(a){"file"!=a.get("type")&&c.append(a.name,a.value)}),a.getFiles().each(function(a){c.append(b,a)}),c.send()},legacyUpload:function(a){var b=[],c=a.getParent(".formRow"),d=c.clone(!0,!0),e=function(a){a.preventDefault();var e=d.clone(!0,!0),f=String.uniqueID(),g=e.getElement("label");e.getElement("input").set("id",f).grab(new Element("a.delInputRow",{text:"x",events:{click:function(a){a.preventDefault(),e.destroy()}}}),"after"),g&&g.set("for",f),e.inject(c,"after"),b.push(e)};new Element("a.addInputRow",{text:"+",events:{click:e}}).inject(a,"after"),this.reset=function(){for(var a=0;a<b.length;a++)b[a].destroy();b=[]}},isModern:function(){return!!this.modern}})}.call(window);